const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-f6kexzoJ.js","assets/index-CRTMbAJ9.js","assets/index-A7WwwtQ4.js","assets/index-DDTyKKZ5.js","assets/index-BgXy4U9B.js","assets/index-CEqZ26qW.js"])))=>i.map(i=>d[i]);
var dE=Object.defineProperty;var Ev=e=>{throw TypeError(e)};var uE=(e,t,r)=>t in e?dE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var O=(e,t,r)=>uE(e,typeof t!="symbol"?t+"":t,r),Qh=(e,t,r)=>t.has(e)||Ev("Cannot "+r);var N=(e,t,r)=>(Qh(e,t,"read from private field"),r?r.call(e):t.get(e)),D=(e,t,r)=>t.has(e)?Ev("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),$=(e,t,r,n)=>(Qh(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),U=(e,t,r)=>(Qh(e,t,"access private method"),r);var Hc=(e,t,r,n)=>({set _(s){$(e,t,s,r)},get _(){return N(e,t,n)}});function hE(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const a=Object.getOwnPropertyDescriptor(n,s);a&&Object.defineProperty(e,s,a.get?a:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();var Wc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var hw={exports:{}},rh={},fw={exports:{}},ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xc=Symbol.for("react.element"),fE=Symbol.for("react.portal"),pE=Symbol.for("react.fragment"),mE=Symbol.for("react.strict_mode"),gE=Symbol.for("react.profiler"),yE=Symbol.for("react.provider"),vE=Symbol.for("react.context"),xE=Symbol.for("react.forward_ref"),bE=Symbol.for("react.suspense"),wE=Symbol.for("react.memo"),NE=Symbol.for("react.lazy"),_v=Symbol.iterator;function jE(e){return e===null||typeof e!="object"?null:(e=_v&&e[_v]||e["@@iterator"],typeof e=="function"?e:null)}var pw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},mw=Object.assign,gw={};function go(e,t,r){this.props=e,this.context=t,this.refs=gw,this.updater=r||pw}go.prototype.isReactComponent={};go.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};go.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function yw(){}yw.prototype=go.prototype;function Ng(e,t,r){this.props=e,this.context=t,this.refs=gw,this.updater=r||pw}var jg=Ng.prototype=new yw;jg.constructor=Ng;mw(jg,go.prototype);jg.isPureReactComponent=!0;var Tv=Array.isArray,vw=Object.prototype.hasOwnProperty,Sg={current:null},xw={key:!0,ref:!0,__self:!0,__source:!0};function bw(e,t,r){var n,s={},a=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(a=""+t.key),t)vw.call(t,n)&&!xw.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:xc,type:e,key:a,ref:o,props:s,_owner:Sg.current}}function SE(e,t){return{$$typeof:xc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function kg(e){return typeof e=="object"&&e!==null&&e.$$typeof===xc}function kE(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Rv=/\/+/g;function Yh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?kE(""+e.key):t.toString(36)}function Rd(e,t,r,n,s){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case xc:case fE:o=!0}}if(o)return o=e,s=s(o),e=n===""?"."+Yh(o,0):n,Tv(s)?(r="",e!=null&&(r=e.replace(Rv,"$&/")+"/"),Rd(s,t,r,"",function(d){return d})):s!=null&&(kg(s)&&(s=SE(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Rv,"$&/")+"/")+e)),t.push(s)),1;if(o=0,n=n===""?".":n+":",Tv(e))for(var l=0;l<e.length;l++){a=e[l];var c=n+Yh(a,l);o+=Rd(a,t,r,c,s)}else if(c=jE(e),typeof c=="function")for(e=c.call(e),l=0;!(a=e.next()).done;)a=a.value,c=n+Yh(a,l++),o+=Rd(a,t,r,c,s);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function qc(e,t,r){if(e==null)return e;var n=[],s=0;return Rd(e,n,"","",function(a){return t.call(r,a,s++)}),n}function CE(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Pt={current:null},Fd={transition:null},PE={ReactCurrentDispatcher:Pt,ReactCurrentBatchConfig:Fd,ReactCurrentOwner:Sg};function ww(){throw Error("act(...) is not supported in production builds of React.")}ge.Children={map:qc,forEach:function(e,t,r){qc(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return qc(e,function(){t++}),t},toArray:function(e){return qc(e,function(t){return t})||[]},only:function(e){if(!kg(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ge.Component=go;ge.Fragment=pE;ge.Profiler=gE;ge.PureComponent=Ng;ge.StrictMode=mE;ge.Suspense=bE;ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PE;ge.act=ww;ge.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=mw({},e.props),s=e.key,a=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,o=Sg.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)vw.call(t,c)&&!xw.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:xc,type:e.type,key:s,ref:a,props:n,_owner:o}};ge.createContext=function(e){return e={$$typeof:vE,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:yE,_context:e},e.Consumer=e};ge.createElement=bw;ge.createFactory=function(e){var t=bw.bind(null,e);return t.type=e,t};ge.createRef=function(){return{current:null}};ge.forwardRef=function(e){return{$$typeof:xE,render:e}};ge.isValidElement=kg;ge.lazy=function(e){return{$$typeof:NE,_payload:{_status:-1,_result:e},_init:CE}};ge.memo=function(e,t){return{$$typeof:wE,type:e,compare:t===void 0?null:t}};ge.startTransition=function(e){var t=Fd.transition;Fd.transition={};try{e()}finally{Fd.transition=t}};ge.unstable_act=ww;ge.useCallback=function(e,t){return Pt.current.useCallback(e,t)};ge.useContext=function(e){return Pt.current.useContext(e)};ge.useDebugValue=function(){};ge.useDeferredValue=function(e){return Pt.current.useDeferredValue(e)};ge.useEffect=function(e,t){return Pt.current.useEffect(e,t)};ge.useId=function(){return Pt.current.useId()};ge.useImperativeHandle=function(e,t,r){return Pt.current.useImperativeHandle(e,t,r)};ge.useInsertionEffect=function(e,t){return Pt.current.useInsertionEffect(e,t)};ge.useLayoutEffect=function(e,t){return Pt.current.useLayoutEffect(e,t)};ge.useMemo=function(e,t){return Pt.current.useMemo(e,t)};ge.useReducer=function(e,t,r){return Pt.current.useReducer(e,t,r)};ge.useRef=function(e){return Pt.current.useRef(e)};ge.useState=function(e){return Pt.current.useState(e)};ge.useSyncExternalStore=function(e,t,r){return Pt.current.useSyncExternalStore(e,t,r)};ge.useTransition=function(){return Pt.current.useTransition()};ge.version="18.3.1";fw.exports=ge;var f=fw.exports;const es=Gn(f),Cg=hE({__proto__:null,default:es},[f]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EE=f,_E=Symbol.for("react.element"),TE=Symbol.for("react.fragment"),RE=Object.prototype.hasOwnProperty,FE=EE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ME={key:!0,ref:!0,__self:!0,__source:!0};function Nw(e,t,r){var n,s={},a=null,o=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)RE.call(t,n)&&!ME.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:_E,type:e,key:a,ref:o,props:s,_owner:FE.current}}rh.Fragment=TE;rh.jsx=Nw;rh.jsxs=Nw;hw.exports=rh;var i=hw.exports,jw={exports:{}},Kt={},Sw={exports:{}},kw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(A,L){var G=A.length;A.push(L);e:for(;0<G;){var B=G-1>>>1,X=A[B];if(0<s(X,L))A[B]=L,A[G]=X,G=B;else break e}}function r(A){return A.length===0?null:A[0]}function n(A){if(A.length===0)return null;var L=A[0],G=A.pop();if(G!==L){A[0]=G;e:for(var B=0,X=A.length,ye=X>>>1;B<ye;){var fe=2*(B+1)-1,He=A[fe],_e=fe+1,Z=A[_e];if(0>s(He,G))_e<X&&0>s(Z,He)?(A[B]=Z,A[_e]=G,B=_e):(A[B]=He,A[fe]=G,B=fe);else if(_e<X&&0>s(Z,G))A[B]=Z,A[_e]=G,B=_e;else break e}}return L}function s(A,L){var G=A.sortIndex-L.sortIndex;return G!==0?G:A.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,p=3,m=!1,x=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(A){for(var L=r(d);L!==null;){if(L.callback===null)n(d);else if(L.startTime<=A)n(d),L.sortIndex=L.expirationTime,t(c,L);else break;L=r(d)}}function j(A){if(y=!1,b(A),!x)if(r(c)!==null)x=!0,V(k);else{var L=r(d);L!==null&&Q(j,L.startTime-A)}}function k(A,L){x=!1,y&&(y=!1,v(_),_=-1),m=!0;var G=p;try{for(b(L),h=r(c);h!==null&&(!(h.expirationTime>L)||A&&!F());){var B=h.callback;if(typeof B=="function"){h.callback=null,p=h.priorityLevel;var X=B(h.expirationTime<=L);L=e.unstable_now(),typeof X=="function"?h.callback=X:h===r(c)&&n(c),b(L)}else n(c);h=r(c)}if(h!==null)var ye=!0;else{var fe=r(d);fe!==null&&Q(j,fe.startTime-L),ye=!1}return ye}finally{h=null,p=G,m=!1}}var C=!1,S=null,_=-1,P=5,T=-1;function F(){return!(e.unstable_now()-T<P)}function R(){if(S!==null){var A=e.unstable_now();T=A;var L=!0;try{L=S(!0,A)}finally{L?M():(C=!1,S=null)}}else C=!1}var M;if(typeof g=="function")M=function(){g(R)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,H=I.port2;I.port1.onmessage=R,M=function(){H.postMessage(null)}}else M=function(){w(R,0)};function V(A){S=A,C||(C=!0,M())}function Q(A,L){_=w(function(){A(e.unstable_now())},L)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(A){A.callback=null},e.unstable_continueExecution=function(){x||m||(x=!0,V(k))},e.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<A?Math.floor(1e3/A):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(A){switch(p){case 1:case 2:case 3:var L=3;break;default:L=p}var G=p;p=L;try{return A()}finally{p=G}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(A,L){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var G=p;p=A;try{return L()}finally{p=G}},e.unstable_scheduleCallback=function(A,L,G){var B=e.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?B+G:B):G=B,A){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=G+X,A={id:u++,callback:L,priorityLevel:A,startTime:G,expirationTime:X,sortIndex:-1},G>B?(A.sortIndex=G,t(d,A),r(c)===null&&A===r(d)&&(y?(v(_),_=-1):y=!0,Q(j,G-B))):(A.sortIndex=X,t(c,A),x||m||(x=!0,V(k))),A},e.unstable_shouldYield=F,e.unstable_wrapCallback=function(A){var L=p;return function(){var G=p;p=L;try{return A.apply(this,arguments)}finally{p=G}}}})(kw);Sw.exports=kw;var AE=Sw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IE=f,Wt=AE;function W(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Cw=new Set,yl={};function Li(e,t){to(e,t),to(e+"Capture",t)}function to(e,t){for(yl[e]=t,e=0;e<t.length;e++)Cw.add(t[e])}var $n=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hp=Object.prototype.hasOwnProperty,OE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Fv={},Mv={};function DE(e){return hp.call(Mv,e)?!0:hp.call(Fv,e)?!1:OE.test(e)?Mv[e]=!0:(Fv[e]=!0,!1)}function LE(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function $E(e,t,r,n){if(t===null||typeof t>"u"||LE(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Et(e,t,r,n,s,a,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ut[e]=new Et(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ut[t]=new Et(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ut[e]=new Et(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ut[e]=new Et(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ut[e]=new Et(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ut[e]=new Et(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ut[e]=new Et(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ut[e]=new Et(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ut[e]=new Et(e,5,!1,e.toLowerCase(),null,!1,!1)});var Pg=/[\-:]([a-z])/g;function Eg(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Pg,Eg);ut[t]=new Et(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Pg,Eg);ut[t]=new Et(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Pg,Eg);ut[t]=new Et(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ut[e]=new Et(e,1,!1,e.toLowerCase(),null,!1,!1)});ut.xlinkHref=new Et("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ut[e]=new Et(e,1,!1,e.toLowerCase(),null,!0,!0)});function _g(e,t,r,n){var s=ut.hasOwnProperty(t)?ut[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&($E(t,r,s,n)&&(r=null),n||s===null?DE(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Qn=IE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Kc=Symbol.for("react.element"),Ji=Symbol.for("react.portal"),Zi=Symbol.for("react.fragment"),Tg=Symbol.for("react.strict_mode"),fp=Symbol.for("react.profiler"),Pw=Symbol.for("react.provider"),Ew=Symbol.for("react.context"),Rg=Symbol.for("react.forward_ref"),pp=Symbol.for("react.suspense"),mp=Symbol.for("react.suspense_list"),Fg=Symbol.for("react.memo"),is=Symbol.for("react.lazy"),_w=Symbol.for("react.offscreen"),Av=Symbol.iterator;function Eo(e){return e===null||typeof e!="object"?null:(e=Av&&e[Av]||e["@@iterator"],typeof e=="function"?e:null)}var Ue=Object.assign,Xh;function Wo(e){if(Xh===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Xh=t&&t[1]||""}return`
`+Xh+e}var Jh=!1;function Zh(e,t){if(!e||Jh)return"";Jh=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),a=n.stack.split(`
`),o=s.length-1,l=a.length-1;1<=o&&0<=l&&s[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==a[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Jh=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Wo(e):""}function UE(e){switch(e.tag){case 5:return Wo(e.type);case 16:return Wo("Lazy");case 13:return Wo("Suspense");case 19:return Wo("SuspenseList");case 0:case 2:case 15:return e=Zh(e.type,!1),e;case 11:return e=Zh(e.type.render,!1),e;case 1:return e=Zh(e.type,!0),e;default:return""}}function gp(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Zi:return"Fragment";case Ji:return"Portal";case fp:return"Profiler";case Tg:return"StrictMode";case pp:return"Suspense";case mp:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ew:return(e.displayName||"Context")+".Consumer";case Pw:return(e._context.displayName||"Context")+".Provider";case Rg:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Fg:return t=e.displayName||null,t!==null?t:gp(e.type)||"Memo";case is:t=e._payload,e=e._init;try{return gp(e(t))}catch{}}return null}function zE(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gp(t);case 8:return t===Tg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Os(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Tw(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function BE(e){var t=Tw(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,a.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Gc(e){e._valueTracker||(e._valueTracker=BE(e))}function Rw(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Tw(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function ru(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function yp(e,t){var r=t.checked;return Ue({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Iv(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Os(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Fw(e,t){t=t.checked,t!=null&&_g(e,"checked",t,!1)}function vp(e,t){Fw(e,t);var r=Os(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?xp(e,t.type,r):t.hasOwnProperty("defaultValue")&&xp(e,t.type,Os(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ov(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function xp(e,t,r){(t!=="number"||ru(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var qo=Array.isArray;function ha(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Os(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function bp(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(W(91));return Ue({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Dv(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(W(92));if(qo(r)){if(1<r.length)throw Error(W(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Os(r)}}function Mw(e,t){var r=Os(t.value),n=Os(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Lv(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Aw(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wp(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Aw(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Qc,Iw=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Qc=Qc||document.createElement("div"),Qc.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Qc.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function vl(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var nl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},VE=["Webkit","ms","Moz","O"];Object.keys(nl).forEach(function(e){VE.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),nl[t]=nl[e]})});function Ow(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||nl.hasOwnProperty(e)&&nl[e]?(""+t).trim():t+"px"}function Dw(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=Ow(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var HE=Ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Np(e,t){if(t){if(HE[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(W(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(W(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(W(61))}if(t.style!=null&&typeof t.style!="object")throw Error(W(62))}}function jp(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sp=null;function Mg(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var kp=null,fa=null,pa=null;function $v(e){if(e=Nc(e)){if(typeof kp!="function")throw Error(W(280));var t=e.stateNode;t&&(t=oh(t),kp(e.stateNode,e.type,t))}}function Lw(e){fa?pa?pa.push(e):pa=[e]:fa=e}function $w(){if(fa){var e=fa,t=pa;if(pa=fa=null,$v(e),t)for(e=0;e<t.length;e++)$v(t[e])}}function Uw(e,t){return e(t)}function zw(){}var ef=!1;function Bw(e,t,r){if(ef)return e(t,r);ef=!0;try{return Uw(e,t,r)}finally{ef=!1,(fa!==null||pa!==null)&&(zw(),$w())}}function xl(e,t){var r=e.stateNode;if(r===null)return null;var n=oh(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(W(231,t,typeof r));return r}var Cp=!1;if($n)try{var _o={};Object.defineProperty(_o,"passive",{get:function(){Cp=!0}}),window.addEventListener("test",_o,_o),window.removeEventListener("test",_o,_o)}catch{Cp=!1}function WE(e,t,r,n,s,a,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(u){this.onError(u)}}var sl=!1,nu=null,su=!1,Pp=null,qE={onError:function(e){sl=!0,nu=e}};function KE(e,t,r,n,s,a,o,l,c){sl=!1,nu=null,WE.apply(qE,arguments)}function GE(e,t,r,n,s,a,o,l,c){if(KE.apply(this,arguments),sl){if(sl){var d=nu;sl=!1,nu=null}else throw Error(W(198));su||(su=!0,Pp=d)}}function $i(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Vw(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Uv(e){if($i(e)!==e)throw Error(W(188))}function QE(e){var t=e.alternate;if(!t){if(t=$i(e),t===null)throw Error(W(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var a=s.alternate;if(a===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===r)return Uv(s),e;if(a===n)return Uv(s),t;a=a.sibling}throw Error(W(188))}if(r.return!==n.return)r=s,n=a;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=a;break}if(l===n){o=!0,n=s,r=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===r){o=!0,r=a,n=s;break}if(l===n){o=!0,n=a,r=s;break}l=l.sibling}if(!o)throw Error(W(189))}}if(r.alternate!==n)throw Error(W(190))}if(r.tag!==3)throw Error(W(188));return r.stateNode.current===r?e:t}function Hw(e){return e=QE(e),e!==null?Ww(e):null}function Ww(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Ww(e);if(t!==null)return t;e=e.sibling}return null}var qw=Wt.unstable_scheduleCallback,zv=Wt.unstable_cancelCallback,YE=Wt.unstable_shouldYield,XE=Wt.unstable_requestPaint,Ke=Wt.unstable_now,JE=Wt.unstable_getCurrentPriorityLevel,Ag=Wt.unstable_ImmediatePriority,Kw=Wt.unstable_UserBlockingPriority,iu=Wt.unstable_NormalPriority,ZE=Wt.unstable_LowPriority,Gw=Wt.unstable_IdlePriority,nh=null,un=null;function e_(e){if(un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(nh,e,void 0,(e.current.flags&128)===128)}catch{}}var Mr=Math.clz32?Math.clz32:n_,t_=Math.log,r_=Math.LN2;function n_(e){return e>>>=0,e===0?32:31-(t_(e)/r_|0)|0}var Yc=64,Xc=4194304;function Ko(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function au(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,a=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=Ko(l):(a&=o,a!==0&&(n=Ko(a)))}else o=r&~s,o!==0?n=Ko(o):a!==0&&(n=Ko(a));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,a=t&-t,s>=a||s===16&&(a&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Mr(t),s=1<<r,n|=e[r],t&=~s;return n}function s_(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function i_(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-Mr(a),l=1<<o,c=s[o];c===-1?(!(l&r)||l&n)&&(s[o]=s_(l,t)):c<=t&&(e.expiredLanes|=l),a&=~l}}function Ep(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Qw(){var e=Yc;return Yc<<=1,!(Yc&4194240)&&(Yc=64),e}function tf(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function bc(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Mr(t),e[t]=r}function a_(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-Mr(r),a=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~a}}function Ig(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Mr(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var Ce=0;function Yw(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Xw,Og,Jw,Zw,e1,_p=!1,Jc=[],Ss=null,ks=null,Cs=null,bl=new Map,wl=new Map,os=[],o_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Bv(e,t){switch(e){case"focusin":case"focusout":Ss=null;break;case"dragenter":case"dragleave":ks=null;break;case"mouseover":case"mouseout":Cs=null;break;case"pointerover":case"pointerout":bl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":wl.delete(t.pointerId)}}function To(e,t,r,n,s,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[s]},t!==null&&(t=Nc(t),t!==null&&Og(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function l_(e,t,r,n,s){switch(t){case"focusin":return Ss=To(Ss,e,t,r,n,s),!0;case"dragenter":return ks=To(ks,e,t,r,n,s),!0;case"mouseover":return Cs=To(Cs,e,t,r,n,s),!0;case"pointerover":var a=s.pointerId;return bl.set(a,To(bl.get(a)||null,e,t,r,n,s)),!0;case"gotpointercapture":return a=s.pointerId,wl.set(a,To(wl.get(a)||null,e,t,r,n,s)),!0}return!1}function t1(e){var t=ri(e.target);if(t!==null){var r=$i(t);if(r!==null){if(t=r.tag,t===13){if(t=Vw(r),t!==null){e.blockedOn=t,e1(e.priority,function(){Jw(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Md(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Tp(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Sp=n,r.target.dispatchEvent(n),Sp=null}else return t=Nc(r),t!==null&&Og(t),e.blockedOn=r,!1;t.shift()}return!0}function Vv(e,t,r){Md(e)&&r.delete(t)}function c_(){_p=!1,Ss!==null&&Md(Ss)&&(Ss=null),ks!==null&&Md(ks)&&(ks=null),Cs!==null&&Md(Cs)&&(Cs=null),bl.forEach(Vv),wl.forEach(Vv)}function Ro(e,t){e.blockedOn===t&&(e.blockedOn=null,_p||(_p=!0,Wt.unstable_scheduleCallback(Wt.unstable_NormalPriority,c_)))}function Nl(e){function t(s){return Ro(s,e)}if(0<Jc.length){Ro(Jc[0],e);for(var r=1;r<Jc.length;r++){var n=Jc[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Ss!==null&&Ro(Ss,e),ks!==null&&Ro(ks,e),Cs!==null&&Ro(Cs,e),bl.forEach(t),wl.forEach(t),r=0;r<os.length;r++)n=os[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<os.length&&(r=os[0],r.blockedOn===null);)t1(r),r.blockedOn===null&&os.shift()}var ma=Qn.ReactCurrentBatchConfig,ou=!0;function d_(e,t,r,n){var s=Ce,a=ma.transition;ma.transition=null;try{Ce=1,Dg(e,t,r,n)}finally{Ce=s,ma.transition=a}}function u_(e,t,r,n){var s=Ce,a=ma.transition;ma.transition=null;try{Ce=4,Dg(e,t,r,n)}finally{Ce=s,ma.transition=a}}function Dg(e,t,r,n){if(ou){var s=Tp(e,t,r,n);if(s===null)hf(e,t,n,lu,r),Bv(e,n);else if(l_(s,e,t,r,n))n.stopPropagation();else if(Bv(e,n),t&4&&-1<o_.indexOf(e)){for(;s!==null;){var a=Nc(s);if(a!==null&&Xw(a),a=Tp(e,t,r,n),a===null&&hf(e,t,n,lu,r),a===s)break;s=a}s!==null&&n.stopPropagation()}else hf(e,t,n,null,r)}}var lu=null;function Tp(e,t,r,n){if(lu=null,e=Mg(n),e=ri(e),e!==null)if(t=$i(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Vw(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return lu=e,null}function r1(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(JE()){case Ag:return 1;case Kw:return 4;case iu:case ZE:return 16;case Gw:return 536870912;default:return 16}default:return 16}}var ws=null,Lg=null,Ad=null;function n1(){if(Ad)return Ad;var e,t=Lg,r=t.length,n,s="value"in ws?ws.value:ws.textContent,a=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===s[a-n];n++);return Ad=s.slice(e,1<n?1-n:void 0)}function Id(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Zc(){return!0}function Hv(){return!1}function Gt(e){function t(r,n,s,a,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Zc:Hv,this.isPropagationStopped=Hv,this}return Ue(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Zc)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Zc)},persist:function(){},isPersistent:Zc}),t}var yo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$g=Gt(yo),wc=Ue({},yo,{view:0,detail:0}),h_=Gt(wc),rf,nf,Fo,sh=Ue({},wc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ug,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Fo&&(Fo&&e.type==="mousemove"?(rf=e.screenX-Fo.screenX,nf=e.screenY-Fo.screenY):nf=rf=0,Fo=e),rf)},movementY:function(e){return"movementY"in e?e.movementY:nf}}),Wv=Gt(sh),f_=Ue({},sh,{dataTransfer:0}),p_=Gt(f_),m_=Ue({},wc,{relatedTarget:0}),sf=Gt(m_),g_=Ue({},yo,{animationName:0,elapsedTime:0,pseudoElement:0}),y_=Gt(g_),v_=Ue({},yo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),x_=Gt(v_),b_=Ue({},yo,{data:0}),qv=Gt(b_),w_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},N_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},j_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function S_(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=j_[e])?!!t[e]:!1}function Ug(){return S_}var k_=Ue({},wc,{key:function(e){if(e.key){var t=w_[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Id(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?N_[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ug,charCode:function(e){return e.type==="keypress"?Id(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Id(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),C_=Gt(k_),P_=Ue({},sh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kv=Gt(P_),E_=Ue({},wc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ug}),__=Gt(E_),T_=Ue({},yo,{propertyName:0,elapsedTime:0,pseudoElement:0}),R_=Gt(T_),F_=Ue({},sh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),M_=Gt(F_),A_=[9,13,27,32],zg=$n&&"CompositionEvent"in window,il=null;$n&&"documentMode"in document&&(il=document.documentMode);var I_=$n&&"TextEvent"in window&&!il,s1=$n&&(!zg||il&&8<il&&11>=il),Gv=" ",Qv=!1;function i1(e,t){switch(e){case"keyup":return A_.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function a1(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ea=!1;function O_(e,t){switch(e){case"compositionend":return a1(t);case"keypress":return t.which!==32?null:(Qv=!0,Gv);case"textInput":return e=t.data,e===Gv&&Qv?null:e;default:return null}}function D_(e,t){if(ea)return e==="compositionend"||!zg&&i1(e,t)?(e=n1(),Ad=Lg=ws=null,ea=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return s1&&t.locale!=="ko"?null:t.data;default:return null}}var L_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!L_[e.type]:t==="textarea"}function o1(e,t,r,n){Lw(n),t=cu(t,"onChange"),0<t.length&&(r=new $g("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var al=null,jl=null;function $_(e){v1(e,0)}function ih(e){var t=na(e);if(Rw(t))return e}function U_(e,t){if(e==="change")return t}var l1=!1;if($n){var af;if($n){var of="oninput"in document;if(!of){var Xv=document.createElement("div");Xv.setAttribute("oninput","return;"),of=typeof Xv.oninput=="function"}af=of}else af=!1;l1=af&&(!document.documentMode||9<document.documentMode)}function Jv(){al&&(al.detachEvent("onpropertychange",c1),jl=al=null)}function c1(e){if(e.propertyName==="value"&&ih(jl)){var t=[];o1(t,jl,e,Mg(e)),Bw($_,t)}}function z_(e,t,r){e==="focusin"?(Jv(),al=t,jl=r,al.attachEvent("onpropertychange",c1)):e==="focusout"&&Jv()}function B_(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ih(jl)}function V_(e,t){if(e==="click")return ih(t)}function H_(e,t){if(e==="input"||e==="change")return ih(t)}function W_(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Lr=typeof Object.is=="function"?Object.is:W_;function Sl(e,t){if(Lr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!hp.call(t,s)||!Lr(e[s],t[s]))return!1}return!0}function Zv(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ex(e,t){var r=Zv(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Zv(r)}}function d1(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?d1(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function u1(){for(var e=window,t=ru();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=ru(e.document)}return t}function Bg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function q_(e){var t=u1(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&d1(r.ownerDocument.documentElement,r)){if(n!==null&&Bg(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,a=Math.min(n.start,s);n=n.end===void 0?a:Math.min(n.end,s),!e.extend&&a>n&&(s=n,n=a,a=s),s=ex(r,a);var o=ex(r,n);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var K_=$n&&"documentMode"in document&&11>=document.documentMode,ta=null,Rp=null,ol=null,Fp=!1;function tx(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Fp||ta==null||ta!==ru(n)||(n=ta,"selectionStart"in n&&Bg(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ol&&Sl(ol,n)||(ol=n,n=cu(Rp,"onSelect"),0<n.length&&(t=new $g("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=ta)))}function ed(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var ra={animationend:ed("Animation","AnimationEnd"),animationiteration:ed("Animation","AnimationIteration"),animationstart:ed("Animation","AnimationStart"),transitionend:ed("Transition","TransitionEnd")},lf={},h1={};$n&&(h1=document.createElement("div").style,"AnimationEvent"in window||(delete ra.animationend.animation,delete ra.animationiteration.animation,delete ra.animationstart.animation),"TransitionEvent"in window||delete ra.transitionend.transition);function ah(e){if(lf[e])return lf[e];if(!ra[e])return e;var t=ra[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in h1)return lf[e]=t[r];return e}var f1=ah("animationend"),p1=ah("animationiteration"),m1=ah("animationstart"),g1=ah("transitionend"),y1=new Map,rx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vs(e,t){y1.set(e,t),Li(t,[e])}for(var cf=0;cf<rx.length;cf++){var df=rx[cf],G_=df.toLowerCase(),Q_=df[0].toUpperCase()+df.slice(1);Vs(G_,"on"+Q_)}Vs(f1,"onAnimationEnd");Vs(p1,"onAnimationIteration");Vs(m1,"onAnimationStart");Vs("dblclick","onDoubleClick");Vs("focusin","onFocus");Vs("focusout","onBlur");Vs(g1,"onTransitionEnd");to("onMouseEnter",["mouseout","mouseover"]);to("onMouseLeave",["mouseout","mouseover"]);to("onPointerEnter",["pointerout","pointerover"]);to("onPointerLeave",["pointerout","pointerover"]);Li("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Li("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Li("onBeforeInput",["compositionend","keypress","textInput","paste"]);Li("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Li("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Li("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Go="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Y_=new Set("cancel close invalid load scroll toggle".split(" ").concat(Go));function nx(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,GE(n,t,void 0,e),e.currentTarget=null}function v1(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==a&&s.isPropagationStopped())break e;nx(s,l,d),a=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==a&&s.isPropagationStopped())break e;nx(s,l,d),a=c}}}if(su)throw e=Pp,su=!1,Pp=null,e}function Ae(e,t){var r=t[Dp];r===void 0&&(r=t[Dp]=new Set);var n=e+"__bubble";r.has(n)||(x1(t,e,2,!1),r.add(n))}function uf(e,t,r){var n=0;t&&(n|=4),x1(r,e,n,t)}var td="_reactListening"+Math.random().toString(36).slice(2);function kl(e){if(!e[td]){e[td]=!0,Cw.forEach(function(r){r!=="selectionchange"&&(Y_.has(r)||uf(r,!1,e),uf(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[td]||(t[td]=!0,uf("selectionchange",!1,t))}}function x1(e,t,r,n){switch(r1(t)){case 1:var s=d_;break;case 4:s=u_;break;default:s=Dg}r=s.bind(null,t,r,e),s=void 0,!Cp||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function hf(e,t,r,n,s){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=ri(l),o===null)return;if(c=o.tag,c===5||c===6){n=a=o;continue e}l=l.parentNode}}n=n.return}Bw(function(){var d=a,u=Mg(r),h=[];e:{var p=y1.get(e);if(p!==void 0){var m=$g,x=e;switch(e){case"keypress":if(Id(r)===0)break e;case"keydown":case"keyup":m=C_;break;case"focusin":x="focus",m=sf;break;case"focusout":x="blur",m=sf;break;case"beforeblur":case"afterblur":m=sf;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Wv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=p_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=__;break;case f1:case p1:case m1:m=y_;break;case g1:m=R_;break;case"scroll":m=h_;break;case"wheel":m=M_;break;case"copy":case"cut":case"paste":m=x_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Kv}var y=(t&4)!==0,w=!y&&e==="scroll",v=y?p!==null?p+"Capture":null:p;y=[];for(var g=d,b;g!==null;){b=g;var j=b.stateNode;if(b.tag===5&&j!==null&&(b=j,v!==null&&(j=xl(g,v),j!=null&&y.push(Cl(g,j,b)))),w)break;g=g.return}0<y.length&&(p=new m(p,x,null,r,u),h.push({event:p,listeners:y}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",p&&r!==Sp&&(x=r.relatedTarget||r.fromElement)&&(ri(x)||x[Un]))break e;if((m||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,m?(x=r.relatedTarget||r.toElement,m=d,x=x?ri(x):null,x!==null&&(w=$i(x),x!==w||x.tag!==5&&x.tag!==6)&&(x=null)):(m=null,x=d),m!==x)){if(y=Wv,j="onMouseLeave",v="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(y=Kv,j="onPointerLeave",v="onPointerEnter",g="pointer"),w=m==null?p:na(m),b=x==null?p:na(x),p=new y(j,g+"leave",m,r,u),p.target=w,p.relatedTarget=b,j=null,ri(u)===d&&(y=new y(v,g+"enter",x,r,u),y.target=b,y.relatedTarget=w,j=y),w=j,m&&x)t:{for(y=m,v=x,g=0,b=y;b;b=Hi(b))g++;for(b=0,j=v;j;j=Hi(j))b++;for(;0<g-b;)y=Hi(y),g--;for(;0<b-g;)v=Hi(v),b--;for(;g--;){if(y===v||v!==null&&y===v.alternate)break t;y=Hi(y),v=Hi(v)}y=null}else y=null;m!==null&&sx(h,p,m,y,!1),x!==null&&w!==null&&sx(h,w,x,y,!0)}}e:{if(p=d?na(d):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var k=U_;else if(Yv(p))if(l1)k=H_;else{k=B_;var C=z_}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(k=V_);if(k&&(k=k(e,d))){o1(h,k,r,u);break e}C&&C(e,p,d),e==="focusout"&&(C=p._wrapperState)&&C.controlled&&p.type==="number"&&xp(p,"number",p.value)}switch(C=d?na(d):window,e){case"focusin":(Yv(C)||C.contentEditable==="true")&&(ta=C,Rp=d,ol=null);break;case"focusout":ol=Rp=ta=null;break;case"mousedown":Fp=!0;break;case"contextmenu":case"mouseup":case"dragend":Fp=!1,tx(h,r,u);break;case"selectionchange":if(K_)break;case"keydown":case"keyup":tx(h,r,u)}var S;if(zg)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else ea?i1(e,r)&&(_="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(_="onCompositionStart");_&&(s1&&r.locale!=="ko"&&(ea||_!=="onCompositionStart"?_==="onCompositionEnd"&&ea&&(S=n1()):(ws=u,Lg="value"in ws?ws.value:ws.textContent,ea=!0)),C=cu(d,_),0<C.length&&(_=new qv(_,e,null,r,u),h.push({event:_,listeners:C}),S?_.data=S:(S=a1(r),S!==null&&(_.data=S)))),(S=I_?O_(e,r):D_(e,r))&&(d=cu(d,"onBeforeInput"),0<d.length&&(u=new qv("onBeforeInput","beforeinput",null,r,u),h.push({event:u,listeners:d}),u.data=S))}v1(h,t)})}function Cl(e,t,r){return{instance:e,listener:t,currentTarget:r}}function cu(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=xl(e,r),a!=null&&n.unshift(Cl(e,a,s)),a=xl(e,t),a!=null&&n.push(Cl(e,a,s))),e=e.return}return n}function Hi(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function sx(e,t,r,n,s){for(var a=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,s?(c=xl(r,a),c!=null&&o.unshift(Cl(r,c,l))):s||(c=xl(r,a),c!=null&&o.push(Cl(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var X_=/\r\n?/g,J_=/\u0000|\uFFFD/g;function ix(e){return(typeof e=="string"?e:""+e).replace(X_,`
`).replace(J_,"")}function rd(e,t,r){if(t=ix(t),ix(e)!==t&&r)throw Error(W(425))}function du(){}var Mp=null,Ap=null;function Ip(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Op=typeof setTimeout=="function"?setTimeout:void 0,Z_=typeof clearTimeout=="function"?clearTimeout:void 0,ax=typeof Promise=="function"?Promise:void 0,eT=typeof queueMicrotask=="function"?queueMicrotask:typeof ax<"u"?function(e){return ax.resolve(null).then(e).catch(tT)}:Op;function tT(e){setTimeout(function(){throw e})}function ff(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Nl(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Nl(t)}function Ps(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function ox(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var vo=Math.random().toString(36).slice(2),an="__reactFiber$"+vo,Pl="__reactProps$"+vo,Un="__reactContainer$"+vo,Dp="__reactEvents$"+vo,rT="__reactListeners$"+vo,nT="__reactHandles$"+vo;function ri(e){var t=e[an];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Un]||r[an]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=ox(e);e!==null;){if(r=e[an])return r;e=ox(e)}return t}e=r,r=e.parentNode}return null}function Nc(e){return e=e[an]||e[Un],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function na(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(W(33))}function oh(e){return e[Pl]||null}var Lp=[],sa=-1;function Hs(e){return{current:e}}function Ie(e){0>sa||(e.current=Lp[sa],Lp[sa]=null,sa--)}function Re(e,t){sa++,Lp[sa]=e.current,e.current=t}var Ds={},bt=Hs(Ds),At=Hs(!1),Ci=Ds;function ro(e,t){var r=e.type.contextTypes;if(!r)return Ds;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in r)s[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function It(e){return e=e.childContextTypes,e!=null}function uu(){Ie(At),Ie(bt)}function lx(e,t,r){if(bt.current!==Ds)throw Error(W(168));Re(bt,t),Re(At,r)}function b1(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(W(108,zE(e)||"Unknown",s));return Ue({},r,n)}function hu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ds,Ci=bt.current,Re(bt,e),Re(At,At.current),!0}function cx(e,t,r){var n=e.stateNode;if(!n)throw Error(W(169));r?(e=b1(e,t,Ci),n.__reactInternalMemoizedMergedChildContext=e,Ie(At),Ie(bt),Re(bt,e)):Ie(At),Re(At,r)}var Nn=null,lh=!1,pf=!1;function w1(e){Nn===null?Nn=[e]:Nn.push(e)}function sT(e){lh=!0,w1(e)}function Ws(){if(!pf&&Nn!==null){pf=!0;var e=0,t=Ce;try{var r=Nn;for(Ce=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Nn=null,lh=!1}catch(s){throw Nn!==null&&(Nn=Nn.slice(e+1)),qw(Ag,Ws),s}finally{Ce=t,pf=!1}}return null}var ia=[],aa=0,fu=null,pu=0,Zt=[],er=0,Pi=null,_n=1,Tn="";function Xs(e,t){ia[aa++]=pu,ia[aa++]=fu,fu=e,pu=t}function N1(e,t,r){Zt[er++]=_n,Zt[er++]=Tn,Zt[er++]=Pi,Pi=e;var n=_n;e=Tn;var s=32-Mr(n)-1;n&=~(1<<s),r+=1;var a=32-Mr(t)+s;if(30<a){var o=s-s%5;a=(n&(1<<o)-1).toString(32),n>>=o,s-=o,_n=1<<32-Mr(t)+s|r<<s|n,Tn=a+e}else _n=1<<a|r<<s|n,Tn=e}function Vg(e){e.return!==null&&(Xs(e,1),N1(e,1,0))}function Hg(e){for(;e===fu;)fu=ia[--aa],ia[aa]=null,pu=ia[--aa],ia[aa]=null;for(;e===Pi;)Pi=Zt[--er],Zt[er]=null,Tn=Zt[--er],Zt[er]=null,_n=Zt[--er],Zt[er]=null}var Vt=null,Bt=null,De=!1,Pr=null;function j1(e,t){var r=tr(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function dx(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Vt=e,Bt=Ps(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Vt=e,Bt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Pi!==null?{id:_n,overflow:Tn}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=tr(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Vt=e,Bt=null,!0):!1;default:return!1}}function $p(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Up(e){if(De){var t=Bt;if(t){var r=t;if(!dx(e,t)){if($p(e))throw Error(W(418));t=Ps(r.nextSibling);var n=Vt;t&&dx(e,t)?j1(n,r):(e.flags=e.flags&-4097|2,De=!1,Vt=e)}}else{if($p(e))throw Error(W(418));e.flags=e.flags&-4097|2,De=!1,Vt=e}}}function ux(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Vt=e}function nd(e){if(e!==Vt)return!1;if(!De)return ux(e),De=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ip(e.type,e.memoizedProps)),t&&(t=Bt)){if($p(e))throw S1(),Error(W(418));for(;t;)j1(e,t),t=Ps(t.nextSibling)}if(ux(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(W(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Bt=Ps(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Bt=null}}else Bt=Vt?Ps(e.stateNode.nextSibling):null;return!0}function S1(){for(var e=Bt;e;)e=Ps(e.nextSibling)}function no(){Bt=Vt=null,De=!1}function Wg(e){Pr===null?Pr=[e]:Pr.push(e)}var iT=Qn.ReactCurrentBatchConfig;function Mo(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(W(309));var n=r.stateNode}if(!n)throw Error(W(147,e));var s=n,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(o){var l=s.refs;o===null?delete l[a]:l[a]=o},t._stringRef=a,t)}if(typeof e!="string")throw Error(W(284));if(!r._owner)throw Error(W(290,e))}return e}function sd(e,t){throw e=Object.prototype.toString.call(t),Error(W(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function hx(e){var t=e._init;return t(e._payload)}function k1(e){function t(v,g){if(e){var b=v.deletions;b===null?(v.deletions=[g],v.flags|=16):b.push(g)}}function r(v,g){if(!e)return null;for(;g!==null;)t(v,g),g=g.sibling;return null}function n(v,g){for(v=new Map;g!==null;)g.key!==null?v.set(g.key,g):v.set(g.index,g),g=g.sibling;return v}function s(v,g){return v=Rs(v,g),v.index=0,v.sibling=null,v}function a(v,g,b){return v.index=b,e?(b=v.alternate,b!==null?(b=b.index,b<g?(v.flags|=2,g):b):(v.flags|=2,g)):(v.flags|=1048576,g)}function o(v){return e&&v.alternate===null&&(v.flags|=2),v}function l(v,g,b,j){return g===null||g.tag!==6?(g=wf(b,v.mode,j),g.return=v,g):(g=s(g,b),g.return=v,g)}function c(v,g,b,j){var k=b.type;return k===Zi?u(v,g,b.props.children,j,b.key):g!==null&&(g.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===is&&hx(k)===g.type)?(j=s(g,b.props),j.ref=Mo(v,g,b),j.return=v,j):(j=Bd(b.type,b.key,b.props,null,v.mode,j),j.ref=Mo(v,g,b),j.return=v,j)}function d(v,g,b,j){return g===null||g.tag!==4||g.stateNode.containerInfo!==b.containerInfo||g.stateNode.implementation!==b.implementation?(g=Nf(b,v.mode,j),g.return=v,g):(g=s(g,b.children||[]),g.return=v,g)}function u(v,g,b,j,k){return g===null||g.tag!==7?(g=ki(b,v.mode,j,k),g.return=v,g):(g=s(g,b),g.return=v,g)}function h(v,g,b){if(typeof g=="string"&&g!==""||typeof g=="number")return g=wf(""+g,v.mode,b),g.return=v,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Kc:return b=Bd(g.type,g.key,g.props,null,v.mode,b),b.ref=Mo(v,null,g),b.return=v,b;case Ji:return g=Nf(g,v.mode,b),g.return=v,g;case is:var j=g._init;return h(v,j(g._payload),b)}if(qo(g)||Eo(g))return g=ki(g,v.mode,b,null),g.return=v,g;sd(v,g)}return null}function p(v,g,b,j){var k=g!==null?g.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return k!==null?null:l(v,g,""+b,j);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Kc:return b.key===k?c(v,g,b,j):null;case Ji:return b.key===k?d(v,g,b,j):null;case is:return k=b._init,p(v,g,k(b._payload),j)}if(qo(b)||Eo(b))return k!==null?null:u(v,g,b,j,null);sd(v,b)}return null}function m(v,g,b,j,k){if(typeof j=="string"&&j!==""||typeof j=="number")return v=v.get(b)||null,l(g,v,""+j,k);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Kc:return v=v.get(j.key===null?b:j.key)||null,c(g,v,j,k);case Ji:return v=v.get(j.key===null?b:j.key)||null,d(g,v,j,k);case is:var C=j._init;return m(v,g,b,C(j._payload),k)}if(qo(j)||Eo(j))return v=v.get(b)||null,u(g,v,j,k,null);sd(g,j)}return null}function x(v,g,b,j){for(var k=null,C=null,S=g,_=g=0,P=null;S!==null&&_<b.length;_++){S.index>_?(P=S,S=null):P=S.sibling;var T=p(v,S,b[_],j);if(T===null){S===null&&(S=P);break}e&&S&&T.alternate===null&&t(v,S),g=a(T,g,_),C===null?k=T:C.sibling=T,C=T,S=P}if(_===b.length)return r(v,S),De&&Xs(v,_),k;if(S===null){for(;_<b.length;_++)S=h(v,b[_],j),S!==null&&(g=a(S,g,_),C===null?k=S:C.sibling=S,C=S);return De&&Xs(v,_),k}for(S=n(v,S);_<b.length;_++)P=m(S,v,_,b[_],j),P!==null&&(e&&P.alternate!==null&&S.delete(P.key===null?_:P.key),g=a(P,g,_),C===null?k=P:C.sibling=P,C=P);return e&&S.forEach(function(F){return t(v,F)}),De&&Xs(v,_),k}function y(v,g,b,j){var k=Eo(b);if(typeof k!="function")throw Error(W(150));if(b=k.call(b),b==null)throw Error(W(151));for(var C=k=null,S=g,_=g=0,P=null,T=b.next();S!==null&&!T.done;_++,T=b.next()){S.index>_?(P=S,S=null):P=S.sibling;var F=p(v,S,T.value,j);if(F===null){S===null&&(S=P);break}e&&S&&F.alternate===null&&t(v,S),g=a(F,g,_),C===null?k=F:C.sibling=F,C=F,S=P}if(T.done)return r(v,S),De&&Xs(v,_),k;if(S===null){for(;!T.done;_++,T=b.next())T=h(v,T.value,j),T!==null&&(g=a(T,g,_),C===null?k=T:C.sibling=T,C=T);return De&&Xs(v,_),k}for(S=n(v,S);!T.done;_++,T=b.next())T=m(S,v,_,T.value,j),T!==null&&(e&&T.alternate!==null&&S.delete(T.key===null?_:T.key),g=a(T,g,_),C===null?k=T:C.sibling=T,C=T);return e&&S.forEach(function(R){return t(v,R)}),De&&Xs(v,_),k}function w(v,g,b,j){if(typeof b=="object"&&b!==null&&b.type===Zi&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Kc:e:{for(var k=b.key,C=g;C!==null;){if(C.key===k){if(k=b.type,k===Zi){if(C.tag===7){r(v,C.sibling),g=s(C,b.props.children),g.return=v,v=g;break e}}else if(C.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===is&&hx(k)===C.type){r(v,C.sibling),g=s(C,b.props),g.ref=Mo(v,C,b),g.return=v,v=g;break e}r(v,C);break}else t(v,C);C=C.sibling}b.type===Zi?(g=ki(b.props.children,v.mode,j,b.key),g.return=v,v=g):(j=Bd(b.type,b.key,b.props,null,v.mode,j),j.ref=Mo(v,g,b),j.return=v,v=j)}return o(v);case Ji:e:{for(C=b.key;g!==null;){if(g.key===C)if(g.tag===4&&g.stateNode.containerInfo===b.containerInfo&&g.stateNode.implementation===b.implementation){r(v,g.sibling),g=s(g,b.children||[]),g.return=v,v=g;break e}else{r(v,g);break}else t(v,g);g=g.sibling}g=Nf(b,v.mode,j),g.return=v,v=g}return o(v);case is:return C=b._init,w(v,g,C(b._payload),j)}if(qo(b))return x(v,g,b,j);if(Eo(b))return y(v,g,b,j);sd(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,g!==null&&g.tag===6?(r(v,g.sibling),g=s(g,b),g.return=v,v=g):(r(v,g),g=wf(b,v.mode,j),g.return=v,v=g),o(v)):r(v,g)}return w}var so=k1(!0),C1=k1(!1),mu=Hs(null),gu=null,oa=null,qg=null;function Kg(){qg=oa=gu=null}function Gg(e){var t=mu.current;Ie(mu),e._currentValue=t}function zp(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function ga(e,t){gu=e,qg=oa=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Mt=!0),e.firstContext=null)}function or(e){var t=e._currentValue;if(qg!==e)if(e={context:e,memoizedValue:t,next:null},oa===null){if(gu===null)throw Error(W(308));oa=e,gu.dependencies={lanes:0,firstContext:e}}else oa=oa.next=e;return t}var ni=null;function Qg(e){ni===null?ni=[e]:ni.push(e)}function P1(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,Qg(t)):(r.next=s.next,s.next=r),t.interleaved=r,zn(e,n)}function zn(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var as=!1;function Yg(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function E1(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Es(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,we&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,zn(e,r)}return s=n.interleaved,s===null?(t.next=t,Qg(n)):(t.next=s.next,s.next=t),n.interleaved=t,zn(e,r)}function Od(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Ig(e,r)}}function fx(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?s=a=o:a=a.next=o,r=r.next}while(r!==null);a===null?s=a=t:a=a.next=t}else s=a=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function yu(e,t,r,n){var s=e.updateQueue;as=!1;var a=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?a=d:o.next=d,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(a!==null){var h=s.baseState;o=0,u=d=c=null,l=a;do{var p=l.lane,m=l.eventTime;if((n&p)===p){u!==null&&(u=u.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=e,y=l;switch(p=t,m=r,y.tag){case 1:if(x=y.payload,typeof x=="function"){h=x.call(m,h,p);break e}h=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=y.payload,p=typeof x=="function"?x.call(m,h,p):x,p==null)break e;h=Ue({},h,p);break e;case 2:as=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else m={eventTime:m,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=m,c=h):u=u.next=m,o|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(u===null&&(c=h),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=u,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else a===null&&(s.shared.lanes=0);_i|=o,e.lanes=o,e.memoizedState=h}}function px(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(W(191,s));s.call(n)}}}var jc={},hn=Hs(jc),El=Hs(jc),_l=Hs(jc);function si(e){if(e===jc)throw Error(W(174));return e}function Xg(e,t){switch(Re(_l,t),Re(El,e),Re(hn,jc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:wp(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=wp(t,e)}Ie(hn),Re(hn,t)}function io(){Ie(hn),Ie(El),Ie(_l)}function _1(e){si(_l.current);var t=si(hn.current),r=wp(t,e.type);t!==r&&(Re(El,e),Re(hn,r))}function Jg(e){El.current===e&&(Ie(hn),Ie(El))}var Le=Hs(0);function vu(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var mf=[];function Zg(){for(var e=0;e<mf.length;e++)mf[e]._workInProgressVersionPrimary=null;mf.length=0}var Dd=Qn.ReactCurrentDispatcher,gf=Qn.ReactCurrentBatchConfig,Ei=0,$e=null,Je=null,st=null,xu=!1,ll=!1,Tl=0,aT=0;function ht(){throw Error(W(321))}function ey(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Lr(e[r],t[r]))return!1;return!0}function ty(e,t,r,n,s,a){if(Ei=a,$e=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Dd.current=e===null||e.memoizedState===null?dT:uT,e=r(n,s),ll){a=0;do{if(ll=!1,Tl=0,25<=a)throw Error(W(301));a+=1,st=Je=null,t.updateQueue=null,Dd.current=hT,e=r(n,s)}while(ll)}if(Dd.current=bu,t=Je!==null&&Je.next!==null,Ei=0,st=Je=$e=null,xu=!1,t)throw Error(W(300));return e}function ry(){var e=Tl!==0;return Tl=0,e}function Qr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?$e.memoizedState=st=e:st=st.next=e,st}function lr(){if(Je===null){var e=$e.alternate;e=e!==null?e.memoizedState:null}else e=Je.next;var t=st===null?$e.memoizedState:st.next;if(t!==null)st=t,Je=e;else{if(e===null)throw Error(W(310));Je=e,e={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},st===null?$e.memoizedState=st=e:st=st.next=e}return st}function Rl(e,t){return typeof t=="function"?t(e):t}function yf(e){var t=lr(),r=t.queue;if(r===null)throw Error(W(311));r.lastRenderedReducer=e;var n=Je,s=n.baseQueue,a=r.pending;if(a!==null){if(s!==null){var o=s.next;s.next=a.next,a.next=o}n.baseQueue=s=a,r.pending=null}if(s!==null){a=s.next,n=n.baseState;var l=o=null,c=null,d=a;do{var u=d.lane;if((Ei&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=h,o=n):c=c.next=h,$e.lanes|=u,_i|=u}d=d.next}while(d!==null&&d!==a);c===null?o=n:c.next=l,Lr(n,t.memoizedState)||(Mt=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do a=s.lane,$e.lanes|=a,_i|=a,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function vf(e){var t=lr(),r=t.queue;if(r===null)throw Error(W(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,a=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do a=e(a,o.action),o=o.next;while(o!==s);Lr(a,t.memoizedState)||(Mt=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function T1(){}function R1(e,t){var r=$e,n=lr(),s=t(),a=!Lr(n.memoizedState,s);if(a&&(n.memoizedState=s,Mt=!0),n=n.queue,ny(A1.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||st!==null&&st.memoizedState.tag&1){if(r.flags|=2048,Fl(9,M1.bind(null,r,n,s,t),void 0,null),it===null)throw Error(W(349));Ei&30||F1(r,t,s)}return s}function F1(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=$e.updateQueue,t===null?(t={lastEffect:null,stores:null},$e.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function M1(e,t,r,n){t.value=r,t.getSnapshot=n,I1(t)&&O1(e)}function A1(e,t,r){return r(function(){I1(t)&&O1(e)})}function I1(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Lr(e,r)}catch{return!0}}function O1(e){var t=zn(e,1);t!==null&&Ar(t,e,1,-1)}function mx(e){var t=Qr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Rl,lastRenderedState:e},t.queue=e,e=e.dispatch=cT.bind(null,$e,e),[t.memoizedState,e]}function Fl(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=$e.updateQueue,t===null?(t={lastEffect:null,stores:null},$e.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function D1(){return lr().memoizedState}function Ld(e,t,r,n){var s=Qr();$e.flags|=e,s.memoizedState=Fl(1|t,r,void 0,n===void 0?null:n)}function ch(e,t,r,n){var s=lr();n=n===void 0?null:n;var a=void 0;if(Je!==null){var o=Je.memoizedState;if(a=o.destroy,n!==null&&ey(n,o.deps)){s.memoizedState=Fl(t,r,a,n);return}}$e.flags|=e,s.memoizedState=Fl(1|t,r,a,n)}function gx(e,t){return Ld(8390656,8,e,t)}function ny(e,t){return ch(2048,8,e,t)}function L1(e,t){return ch(4,2,e,t)}function $1(e,t){return ch(4,4,e,t)}function U1(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function z1(e,t,r){return r=r!=null?r.concat([e]):null,ch(4,4,U1.bind(null,t,e),r)}function sy(){}function B1(e,t){var r=lr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&ey(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function V1(e,t){var r=lr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&ey(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function H1(e,t,r){return Ei&21?(Lr(r,t)||(r=Qw(),$e.lanes|=r,_i|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Mt=!0),e.memoizedState=r)}function oT(e,t){var r=Ce;Ce=r!==0&&4>r?r:4,e(!0);var n=gf.transition;gf.transition={};try{e(!1),t()}finally{Ce=r,gf.transition=n}}function W1(){return lr().memoizedState}function lT(e,t,r){var n=Ts(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},q1(e))K1(t,r);else if(r=P1(e,t,r,n),r!==null){var s=Ct();Ar(r,e,n,s),G1(r,t,n)}}function cT(e,t,r){var n=Ts(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(q1(e))K1(t,s);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,l=a(o,r);if(s.hasEagerState=!0,s.eagerState=l,Lr(l,o)){var c=t.interleaved;c===null?(s.next=s,Qg(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=P1(e,t,s,n),r!==null&&(s=Ct(),Ar(r,e,n,s),G1(r,t,n))}}function q1(e){var t=e.alternate;return e===$e||t!==null&&t===$e}function K1(e,t){ll=xu=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function G1(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Ig(e,r)}}var bu={readContext:or,useCallback:ht,useContext:ht,useEffect:ht,useImperativeHandle:ht,useInsertionEffect:ht,useLayoutEffect:ht,useMemo:ht,useReducer:ht,useRef:ht,useState:ht,useDebugValue:ht,useDeferredValue:ht,useTransition:ht,useMutableSource:ht,useSyncExternalStore:ht,useId:ht,unstable_isNewReconciler:!1},dT={readContext:or,useCallback:function(e,t){return Qr().memoizedState=[e,t===void 0?null:t],e},useContext:or,useEffect:gx,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Ld(4194308,4,U1.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ld(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ld(4,2,e,t)},useMemo:function(e,t){var r=Qr();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Qr();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=lT.bind(null,$e,e),[n.memoizedState,e]},useRef:function(e){var t=Qr();return e={current:e},t.memoizedState=e},useState:mx,useDebugValue:sy,useDeferredValue:function(e){return Qr().memoizedState=e},useTransition:function(){var e=mx(!1),t=e[0];return e=oT.bind(null,e[1]),Qr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=$e,s=Qr();if(De){if(r===void 0)throw Error(W(407));r=r()}else{if(r=t(),it===null)throw Error(W(349));Ei&30||F1(n,t,r)}s.memoizedState=r;var a={value:r,getSnapshot:t};return s.queue=a,gx(A1.bind(null,n,a,e),[e]),n.flags|=2048,Fl(9,M1.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=Qr(),t=it.identifierPrefix;if(De){var r=Tn,n=_n;r=(n&~(1<<32-Mr(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Tl++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=aT++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},uT={readContext:or,useCallback:B1,useContext:or,useEffect:ny,useImperativeHandle:z1,useInsertionEffect:L1,useLayoutEffect:$1,useMemo:V1,useReducer:yf,useRef:D1,useState:function(){return yf(Rl)},useDebugValue:sy,useDeferredValue:function(e){var t=lr();return H1(t,Je.memoizedState,e)},useTransition:function(){var e=yf(Rl)[0],t=lr().memoizedState;return[e,t]},useMutableSource:T1,useSyncExternalStore:R1,useId:W1,unstable_isNewReconciler:!1},hT={readContext:or,useCallback:B1,useContext:or,useEffect:ny,useImperativeHandle:z1,useInsertionEffect:L1,useLayoutEffect:$1,useMemo:V1,useReducer:vf,useRef:D1,useState:function(){return vf(Rl)},useDebugValue:sy,useDeferredValue:function(e){var t=lr();return Je===null?t.memoizedState=e:H1(t,Je.memoizedState,e)},useTransition:function(){var e=vf(Rl)[0],t=lr().memoizedState;return[e,t]},useMutableSource:T1,useSyncExternalStore:R1,useId:W1,unstable_isNewReconciler:!1};function gr(e,t){if(e&&e.defaultProps){t=Ue({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Bp(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Ue({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var dh={isMounted:function(e){return(e=e._reactInternals)?$i(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Ct(),s=Ts(e),a=Fn(n,s);a.payload=t,r!=null&&(a.callback=r),t=Es(e,a,s),t!==null&&(Ar(t,e,s,n),Od(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Ct(),s=Ts(e),a=Fn(n,s);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=Es(e,a,s),t!==null&&(Ar(t,e,s,n),Od(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ct(),n=Ts(e),s=Fn(r,n);s.tag=2,t!=null&&(s.callback=t),t=Es(e,s,n),t!==null&&(Ar(t,e,n,r),Od(t,e,n))}};function yx(e,t,r,n,s,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,o):t.prototype&&t.prototype.isPureReactComponent?!Sl(r,n)||!Sl(s,a):!0}function Q1(e,t,r){var n=!1,s=Ds,a=t.contextType;return typeof a=="object"&&a!==null?a=or(a):(s=It(t)?Ci:bt.current,n=t.contextTypes,a=(n=n!=null)?ro(e,s):Ds),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=dh,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function vx(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&dh.enqueueReplaceState(t,t.state,null)}function Vp(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},Yg(e);var a=t.contextType;typeof a=="object"&&a!==null?s.context=or(a):(a=It(t)?Ci:bt.current,s.context=ro(e,a)),s.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Bp(e,t,a,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&dh.enqueueReplaceState(s,s.state,null),yu(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function ao(e,t){try{var r="",n=t;do r+=UE(n),n=n.return;while(n);var s=r}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:s,digest:null}}function xf(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Hp(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var fT=typeof WeakMap=="function"?WeakMap:Map;function Y1(e,t,r){r=Fn(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Nu||(Nu=!0,em=n),Hp(e,t)},r}function X1(e,t,r){r=Fn(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){Hp(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){Hp(e,t),typeof n!="function"&&(_s===null?_s=new Set([this]):_s.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function xx(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new fT;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=PT.bind(null,e,t,r),t.then(e,e))}function bx(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function wx(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Fn(-1,1),t.tag=2,Es(r,t,1))),r.lanes|=1),e)}var pT=Qn.ReactCurrentOwner,Mt=!1;function kt(e,t,r,n){t.child=e===null?C1(t,null,r,n):so(t,e.child,r,n)}function Nx(e,t,r,n,s){r=r.render;var a=t.ref;return ga(t,s),n=ty(e,t,r,n,a,s),r=ry(),e!==null&&!Mt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Bn(e,t,s)):(De&&r&&Vg(t),t.flags|=1,kt(e,t,n,s),t.child)}function jx(e,t,r,n,s){if(e===null){var a=r.type;return typeof a=="function"&&!hy(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,J1(e,t,a,n,s)):(e=Bd(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&s)){var o=a.memoizedProps;if(r=r.compare,r=r!==null?r:Sl,r(o,n)&&e.ref===t.ref)return Bn(e,t,s)}return t.flags|=1,e=Rs(a,n),e.ref=t.ref,e.return=t,t.child=e}function J1(e,t,r,n,s){if(e!==null){var a=e.memoizedProps;if(Sl(a,n)&&e.ref===t.ref)if(Mt=!1,t.pendingProps=n=a,(e.lanes&s)!==0)e.flags&131072&&(Mt=!0);else return t.lanes=e.lanes,Bn(e,t,s)}return Wp(e,t,r,n,s)}function Z1(e,t,r){var n=t.pendingProps,s=n.children,a=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Re(ca,Ut),Ut|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Re(ca,Ut),Ut|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,Re(ca,Ut),Ut|=n}else a!==null?(n=a.baseLanes|r,t.memoizedState=null):n=r,Re(ca,Ut),Ut|=n;return kt(e,t,s,r),t.child}function eN(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Wp(e,t,r,n,s){var a=It(r)?Ci:bt.current;return a=ro(t,a),ga(t,s),r=ty(e,t,r,n,a,s),n=ry(),e!==null&&!Mt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Bn(e,t,s)):(De&&n&&Vg(t),t.flags|=1,kt(e,t,r,s),t.child)}function Sx(e,t,r,n,s){if(It(r)){var a=!0;hu(t)}else a=!1;if(ga(t,s),t.stateNode===null)$d(e,t),Q1(t,r,n),Vp(t,r,n,s),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=or(d):(d=It(r)?Ci:bt.current,d=ro(t,d));var u=r.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==d)&&vx(t,o,n,d),as=!1;var p=t.memoizedState;o.state=p,yu(t,n,o,s),c=t.memoizedState,l!==n||p!==c||At.current||as?(typeof u=="function"&&(Bp(t,r,u,n),c=t.memoizedState),(l=as||yx(t,r,l,n,p,c,d))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=d,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,E1(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:gr(t.type,l),o.props=d,h=t.pendingProps,p=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=or(c):(c=It(r)?Ci:bt.current,c=ro(t,c));var m=r.getDerivedStateFromProps;(u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||p!==c)&&vx(t,o,n,c),as=!1,p=t.memoizedState,o.state=p,yu(t,n,o,s);var x=t.memoizedState;l!==h||p!==x||At.current||as?(typeof m=="function"&&(Bp(t,r,m,n),x=t.memoizedState),(d=as||yx(t,r,d,n,p,x,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,x,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=x),o.props=n,o.state=x,o.context=c,n=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),n=!1)}return qp(e,t,r,n,a,s)}function qp(e,t,r,n,s,a){eN(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&cx(t,r,!1),Bn(e,t,a);n=t.stateNode,pT.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=so(t,e.child,null,a),t.child=so(t,null,l,a)):kt(e,t,l,a),t.memoizedState=n.state,s&&cx(t,r,!0),t.child}function tN(e){var t=e.stateNode;t.pendingContext?lx(e,t.pendingContext,t.pendingContext!==t.context):t.context&&lx(e,t.context,!1),Xg(e,t.containerInfo)}function kx(e,t,r,n,s){return no(),Wg(s),t.flags|=256,kt(e,t,r,n),t.child}var Kp={dehydrated:null,treeContext:null,retryLane:0};function Gp(e){return{baseLanes:e,cachePool:null,transitions:null}}function rN(e,t,r){var n=t.pendingProps,s=Le.current,a=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Re(Le,s&1),e===null)return Up(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,a?(n=t.mode,a=t.child,o={mode:"hidden",children:o},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=fh(o,n,0,null),e=ki(e,n,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Gp(r),t.memoizedState=Kp,e):iy(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return mT(e,t,o,n,l,s,r);if(a){a=n.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Rs(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?a=Rs(l,a):(a=ki(a,o,r,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,o=e.child.memoizedState,o=o===null?Gp(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~r,t.memoizedState=Kp,n}return a=e.child,e=a.sibling,n=Rs(a,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function iy(e,t){return t=fh({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function id(e,t,r,n){return n!==null&&Wg(n),so(t,e.child,null,r),e=iy(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function mT(e,t,r,n,s,a,o){if(r)return t.flags&256?(t.flags&=-257,n=xf(Error(W(422))),id(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=n.fallback,s=t.mode,n=fh({mode:"visible",children:n.children},s,0,null),a=ki(a,s,o,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,t.mode&1&&so(t,e.child,null,o),t.child.memoizedState=Gp(o),t.memoizedState=Kp,a);if(!(t.mode&1))return id(e,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,a=Error(W(419)),n=xf(a,n,void 0),id(e,t,o,n)}if(l=(o&e.childLanes)!==0,Mt||l){if(n=it,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,zn(e,s),Ar(n,e,s,-1))}return uy(),n=xf(Error(W(421))),id(e,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=ET.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,Bt=Ps(s.nextSibling),Vt=t,De=!0,Pr=null,e!==null&&(Zt[er++]=_n,Zt[er++]=Tn,Zt[er++]=Pi,_n=e.id,Tn=e.overflow,Pi=t),t=iy(t,n.children),t.flags|=4096,t)}function Cx(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),zp(e.return,t,r)}function bf(e,t,r,n,s){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=s)}function nN(e,t,r){var n=t.pendingProps,s=n.revealOrder,a=n.tail;if(kt(e,t,n.children,r),n=Le.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Cx(e,r,t);else if(e.tag===19)Cx(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Re(Le,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&vu(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),bf(t,!1,s,r,a);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&vu(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}bf(t,!0,r,null,a);break;case"together":bf(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function $d(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Bn(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),_i|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(W(153));if(t.child!==null){for(e=t.child,r=Rs(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Rs(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function gT(e,t,r){switch(t.tag){case 3:tN(t),no();break;case 5:_1(t);break;case 1:It(t.type)&&hu(t);break;case 4:Xg(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;Re(mu,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Re(Le,Le.current&1),t.flags|=128,null):r&t.child.childLanes?rN(e,t,r):(Re(Le,Le.current&1),e=Bn(e,t,r),e!==null?e.sibling:null);Re(Le,Le.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return nN(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Re(Le,Le.current),n)break;return null;case 22:case 23:return t.lanes=0,Z1(e,t,r)}return Bn(e,t,r)}var sN,Qp,iN,aN;sN=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Qp=function(){};iN=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,si(hn.current);var a=null;switch(r){case"input":s=yp(e,s),n=yp(e,n),a=[];break;case"select":s=Ue({},s,{value:void 0}),n=Ue({},n,{value:void 0}),a=[];break;case"textarea":s=bp(e,s),n=bp(e,n),a=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=du)}Np(r,n);var o;r=null;for(d in s)if(!n.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(yl.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in n){var c=n[d];if(l=s!=null?s[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(a||(a=[]),a.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(yl.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ae("scroll",e),a||l===c||(a=[])):(a=a||[]).push(d,c))}r&&(a=a||[]).push("style",r);var d=a;(t.updateQueue=d)&&(t.flags|=4)}};aN=function(e,t,r,n){r!==n&&(t.flags|=4)};function Ao(e,t){if(!De)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function ft(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function yT(e,t,r){var n=t.pendingProps;switch(Hg(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(t),null;case 1:return It(t.type)&&uu(),ft(t),null;case 3:return n=t.stateNode,io(),Ie(At),Ie(bt),Zg(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(nd(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Pr!==null&&(nm(Pr),Pr=null))),Qp(e,t),ft(t),null;case 5:Jg(t);var s=si(_l.current);if(r=t.type,e!==null&&t.stateNode!=null)iN(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(W(166));return ft(t),null}if(e=si(hn.current),nd(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[an]=t,n[Pl]=a,e=(t.mode&1)!==0,r){case"dialog":Ae("cancel",n),Ae("close",n);break;case"iframe":case"object":case"embed":Ae("load",n);break;case"video":case"audio":for(s=0;s<Go.length;s++)Ae(Go[s],n);break;case"source":Ae("error",n);break;case"img":case"image":case"link":Ae("error",n),Ae("load",n);break;case"details":Ae("toggle",n);break;case"input":Iv(n,a),Ae("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Ae("invalid",n);break;case"textarea":Dv(n,a),Ae("invalid",n)}Np(r,a),s=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?n.textContent!==l&&(a.suppressHydrationWarning!==!0&&rd(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&rd(n.textContent,l,e),s=["children",""+l]):yl.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ae("scroll",n)}switch(r){case"input":Gc(n),Ov(n,a,!0);break;case"textarea":Gc(n),Lv(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=du)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Aw(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[an]=t,e[Pl]=n,sN(e,t,!1,!1),t.stateNode=e;e:{switch(o=jp(r,n),r){case"dialog":Ae("cancel",e),Ae("close",e),s=n;break;case"iframe":case"object":case"embed":Ae("load",e),s=n;break;case"video":case"audio":for(s=0;s<Go.length;s++)Ae(Go[s],e);s=n;break;case"source":Ae("error",e),s=n;break;case"img":case"image":case"link":Ae("error",e),Ae("load",e),s=n;break;case"details":Ae("toggle",e),s=n;break;case"input":Iv(e,n),s=yp(e,n),Ae("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=Ue({},n,{value:void 0}),Ae("invalid",e);break;case"textarea":Dv(e,n),s=bp(e,n),Ae("invalid",e);break;default:s=n}Np(r,s),l=s;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?Dw(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Iw(e,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&vl(e,c):typeof c=="number"&&vl(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(yl.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Ae("scroll",e):c!=null&&_g(e,a,c,o))}switch(r){case"input":Gc(e),Ov(e,n,!1);break;case"textarea":Gc(e),Lv(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Os(n.value));break;case"select":e.multiple=!!n.multiple,a=n.value,a!=null?ha(e,!!n.multiple,a,!1):n.defaultValue!=null&&ha(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=du)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ft(t),null;case 6:if(e&&t.stateNode!=null)aN(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(W(166));if(r=si(_l.current),si(hn.current),nd(t)){if(n=t.stateNode,r=t.memoizedProps,n[an]=t,(a=n.nodeValue!==r)&&(e=Vt,e!==null))switch(e.tag){case 3:rd(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&rd(n.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[an]=t,t.stateNode=n}return ft(t),null;case 13:if(Ie(Le),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(De&&Bt!==null&&t.mode&1&&!(t.flags&128))S1(),no(),t.flags|=98560,a=!1;else if(a=nd(t),n!==null&&n.dehydrated!==null){if(e===null){if(!a)throw Error(W(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(W(317));a[an]=t}else no(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ft(t),a=!1}else Pr!==null&&(nm(Pr),Pr=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Le.current&1?tt===0&&(tt=3):uy())),t.updateQueue!==null&&(t.flags|=4),ft(t),null);case 4:return io(),Qp(e,t),e===null&&kl(t.stateNode.containerInfo),ft(t),null;case 10:return Gg(t.type._context),ft(t),null;case 17:return It(t.type)&&uu(),ft(t),null;case 19:if(Ie(Le),a=t.memoizedState,a===null)return ft(t),null;if(n=(t.flags&128)!==0,o=a.rendering,o===null)if(n)Ao(a,!1);else{if(tt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=vu(e),o!==null){for(t.flags|=128,Ao(a,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)a=r,e=n,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,e=o.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Re(Le,Le.current&1|2),t.child}e=e.sibling}a.tail!==null&&Ke()>oo&&(t.flags|=128,n=!0,Ao(a,!1),t.lanes=4194304)}else{if(!n)if(e=vu(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Ao(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!De)return ft(t),null}else 2*Ke()-a.renderingStartTime>oo&&r!==1073741824&&(t.flags|=128,n=!0,Ao(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(r=a.last,r!==null?r.sibling=o:t.child=o,a.last=o)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Ke(),t.sibling=null,r=Le.current,Re(Le,n?r&1|2:r&1),t):(ft(t),null);case 22:case 23:return dy(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Ut&1073741824&&(ft(t),t.subtreeFlags&6&&(t.flags|=8192)):ft(t),null;case 24:return null;case 25:return null}throw Error(W(156,t.tag))}function vT(e,t){switch(Hg(t),t.tag){case 1:return It(t.type)&&uu(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return io(),Ie(At),Ie(bt),Zg(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Jg(t),null;case 13:if(Ie(Le),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(W(340));no()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ie(Le),null;case 4:return io(),null;case 10:return Gg(t.type._context),null;case 22:case 23:return dy(),null;case 24:return null;default:return null}}var ad=!1,yt=!1,xT=typeof WeakSet=="function"?WeakSet:Set,Y=null;function la(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ve(e,t,n)}else r.current=null}function Yp(e,t,r){try{r()}catch(n){Ve(e,t,n)}}var Px=!1;function bT(e,t){if(Mp=ou,e=u1(),Bg(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,p=null;t:for(;;){for(var m;h!==r||s!==0&&h.nodeType!==3||(l=o+s),h!==a||n!==0&&h.nodeType!==3||(c=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)p=h,h=m;for(;;){if(h===e)break t;if(p===r&&++d===s&&(l=o),p===a&&++u===n&&(c=o),(m=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=m}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Ap={focusedElem:e,selectionRange:r},ou=!1,Y=t;Y!==null;)if(t=Y,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Y=e;else for(;Y!==null;){t=Y;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var y=x.memoizedProps,w=x.memoizedState,v=t.stateNode,g=v.getSnapshotBeforeUpdate(t.elementType===t.type?y:gr(t.type,y),w);v.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(j){Ve(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,Y=e;break}Y=t.return}return x=Px,Px=!1,x}function cl(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,a!==void 0&&Yp(t,r,a)}s=s.next}while(s!==n)}}function uh(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Xp(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function oN(e){var t=e.alternate;t!==null&&(e.alternate=null,oN(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[an],delete t[Pl],delete t[Dp],delete t[rT],delete t[nT])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function lN(e){return e.tag===5||e.tag===3||e.tag===4}function Ex(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||lN(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Jp(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=du));else if(n!==4&&(e=e.child,e!==null))for(Jp(e,t,r),e=e.sibling;e!==null;)Jp(e,t,r),e=e.sibling}function Zp(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Zp(e,t,r),e=e.sibling;e!==null;)Zp(e,t,r),e=e.sibling}var lt=null,Sr=!1;function Xn(e,t,r){for(r=r.child;r!==null;)cN(e,t,r),r=r.sibling}function cN(e,t,r){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(nh,r)}catch{}switch(r.tag){case 5:yt||la(r,t);case 6:var n=lt,s=Sr;lt=null,Xn(e,t,r),lt=n,Sr=s,lt!==null&&(Sr?(e=lt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):lt.removeChild(r.stateNode));break;case 18:lt!==null&&(Sr?(e=lt,r=r.stateNode,e.nodeType===8?ff(e.parentNode,r):e.nodeType===1&&ff(e,r),Nl(e)):ff(lt,r.stateNode));break;case 4:n=lt,s=Sr,lt=r.stateNode.containerInfo,Sr=!0,Xn(e,t,r),lt=n,Sr=s;break;case 0:case 11:case 14:case 15:if(!yt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var a=s,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&Yp(r,t,o),s=s.next}while(s!==n)}Xn(e,t,r);break;case 1:if(!yt&&(la(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Ve(r,t,l)}Xn(e,t,r);break;case 21:Xn(e,t,r);break;case 22:r.mode&1?(yt=(n=yt)||r.memoizedState!==null,Xn(e,t,r),yt=n):Xn(e,t,r);break;default:Xn(e,t,r)}}function _x(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new xT),t.forEach(function(n){var s=_T.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function pr(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var a=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:lt=l.stateNode,Sr=!1;break e;case 3:lt=l.stateNode.containerInfo,Sr=!0;break e;case 4:lt=l.stateNode.containerInfo,Sr=!0;break e}l=l.return}if(lt===null)throw Error(W(160));cN(a,o,s),lt=null,Sr=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){Ve(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)dN(t,e),t=t.sibling}function dN(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pr(t,e),Kr(e),n&4){try{cl(3,e,e.return),uh(3,e)}catch(y){Ve(e,e.return,y)}try{cl(5,e,e.return)}catch(y){Ve(e,e.return,y)}}break;case 1:pr(t,e),Kr(e),n&512&&r!==null&&la(r,r.return);break;case 5:if(pr(t,e),Kr(e),n&512&&r!==null&&la(r,r.return),e.flags&32){var s=e.stateNode;try{vl(s,"")}catch(y){Ve(e,e.return,y)}}if(n&4&&(s=e.stateNode,s!=null)){var a=e.memoizedProps,o=r!==null?r.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&Fw(s,a),jp(l,o);var d=jp(l,a);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];u==="style"?Dw(s,h):u==="dangerouslySetInnerHTML"?Iw(s,h):u==="children"?vl(s,h):_g(s,u,h,d)}switch(l){case"input":vp(s,a);break;case"textarea":Mw(s,a);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var m=a.value;m!=null?ha(s,!!a.multiple,m,!1):p!==!!a.multiple&&(a.defaultValue!=null?ha(s,!!a.multiple,a.defaultValue,!0):ha(s,!!a.multiple,a.multiple?[]:"",!1))}s[Pl]=a}catch(y){Ve(e,e.return,y)}}break;case 6:if(pr(t,e),Kr(e),n&4){if(e.stateNode===null)throw Error(W(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(y){Ve(e,e.return,y)}}break;case 3:if(pr(t,e),Kr(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Nl(t.containerInfo)}catch(y){Ve(e,e.return,y)}break;case 4:pr(t,e),Kr(e);break;case 13:pr(t,e),Kr(e),s=e.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(ly=Ke())),n&4&&_x(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(yt=(d=yt)||u,pr(t,e),yt=d):pr(t,e),Kr(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(Y=e,u=e.child;u!==null;){for(h=Y=u;Y!==null;){switch(p=Y,m=p.child,p.tag){case 0:case 11:case 14:case 15:cl(4,p,p.return);break;case 1:la(p,p.return);var x=p.stateNode;if(typeof x.componentWillUnmount=="function"){n=p,r=p.return;try{t=n,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(y){Ve(n,r,y)}}break;case 5:la(p,p.return);break;case 22:if(p.memoizedState!==null){Rx(h);continue}}m!==null?(m.return=p,Y=m):Rx(h)}u=u.sibling}e:for(u=null,h=e;;){if(h.tag===5){if(u===null){u=h;try{s=h.stateNode,d?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Ow("display",o))}catch(y){Ve(e,e.return,y)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(y){Ve(e,e.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:pr(t,e),Kr(e),n&4&&_x(e);break;case 21:break;default:pr(t,e),Kr(e)}}function Kr(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(lN(r)){var n=r;break e}r=r.return}throw Error(W(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(vl(s,""),n.flags&=-33);var a=Ex(e);Zp(e,a,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=Ex(e);Jp(e,l,o);break;default:throw Error(W(161))}}catch(c){Ve(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function wT(e,t,r){Y=e,uN(e)}function uN(e,t,r){for(var n=(e.mode&1)!==0;Y!==null;){var s=Y,a=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||ad;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||yt;l=ad;var d=yt;if(ad=o,(yt=c)&&!d)for(Y=s;Y!==null;)o=Y,c=o.child,o.tag===22&&o.memoizedState!==null?Fx(s):c!==null?(c.return=o,Y=c):Fx(s);for(;a!==null;)Y=a,uN(a),a=a.sibling;Y=s,ad=l,yt=d}Tx(e)}else s.subtreeFlags&8772&&a!==null?(a.return=s,Y=a):Tx(e)}}function Tx(e){for(;Y!==null;){var t=Y;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:yt||uh(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!yt)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:gr(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&px(t,a,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}px(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Nl(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}yt||t.flags&512&&Xp(t)}catch(p){Ve(t,t.return,p)}}if(t===e){Y=null;break}if(r=t.sibling,r!==null){r.return=t.return,Y=r;break}Y=t.return}}function Rx(e){for(;Y!==null;){var t=Y;if(t===e){Y=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Y=r;break}Y=t.return}}function Fx(e){for(;Y!==null;){var t=Y;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{uh(4,t)}catch(c){Ve(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){Ve(t,s,c)}}var a=t.return;try{Xp(t)}catch(c){Ve(t,a,c)}break;case 5:var o=t.return;try{Xp(t)}catch(c){Ve(t,o,c)}}}catch(c){Ve(t,t.return,c)}if(t===e){Y=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Y=l;break}Y=t.return}}var NT=Math.ceil,wu=Qn.ReactCurrentDispatcher,ay=Qn.ReactCurrentOwner,ir=Qn.ReactCurrentBatchConfig,we=0,it=null,Ye=null,dt=0,Ut=0,ca=Hs(0),tt=0,Ml=null,_i=0,hh=0,oy=0,dl=null,Ft=null,ly=0,oo=1/0,wn=null,Nu=!1,em=null,_s=null,od=!1,Ns=null,ju=0,ul=0,tm=null,Ud=-1,zd=0;function Ct(){return we&6?Ke():Ud!==-1?Ud:Ud=Ke()}function Ts(e){return e.mode&1?we&2&&dt!==0?dt&-dt:iT.transition!==null?(zd===0&&(zd=Qw()),zd):(e=Ce,e!==0||(e=window.event,e=e===void 0?16:r1(e.type)),e):1}function Ar(e,t,r,n){if(50<ul)throw ul=0,tm=null,Error(W(185));bc(e,r,n),(!(we&2)||e!==it)&&(e===it&&(!(we&2)&&(hh|=r),tt===4&&ls(e,dt)),Ot(e,n),r===1&&we===0&&!(t.mode&1)&&(oo=Ke()+500,lh&&Ws()))}function Ot(e,t){var r=e.callbackNode;i_(e,t);var n=au(e,e===it?dt:0);if(n===0)r!==null&&zv(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&zv(r),t===1)e.tag===0?sT(Mx.bind(null,e)):w1(Mx.bind(null,e)),eT(function(){!(we&6)&&Ws()}),r=null;else{switch(Yw(n)){case 1:r=Ag;break;case 4:r=Kw;break;case 16:r=iu;break;case 536870912:r=Gw;break;default:r=iu}r=xN(r,hN.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function hN(e,t){if(Ud=-1,zd=0,we&6)throw Error(W(327));var r=e.callbackNode;if(ya()&&e.callbackNode!==r)return null;var n=au(e,e===it?dt:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Su(e,n);else{t=n;var s=we;we|=2;var a=pN();(it!==e||dt!==t)&&(wn=null,oo=Ke()+500,Si(e,t));do try{kT();break}catch(l){fN(e,l)}while(!0);Kg(),wu.current=a,we=s,Ye!==null?t=0:(it=null,dt=0,t=tt)}if(t!==0){if(t===2&&(s=Ep(e),s!==0&&(n=s,t=rm(e,s))),t===1)throw r=Ml,Si(e,0),ls(e,n),Ot(e,Ke()),r;if(t===6)ls(e,n);else{if(s=e.current.alternate,!(n&30)&&!jT(s)&&(t=Su(e,n),t===2&&(a=Ep(e),a!==0&&(n=a,t=rm(e,a))),t===1))throw r=Ml,Si(e,0),ls(e,n),Ot(e,Ke()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(W(345));case 2:Js(e,Ft,wn);break;case 3:if(ls(e,n),(n&130023424)===n&&(t=ly+500-Ke(),10<t)){if(au(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){Ct(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Op(Js.bind(null,e,Ft,wn),t);break}Js(e,Ft,wn);break;case 4:if(ls(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var o=31-Mr(n);a=1<<o,o=t[o],o>s&&(s=o),n&=~a}if(n=s,n=Ke()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*NT(n/1960))-n,10<n){e.timeoutHandle=Op(Js.bind(null,e,Ft,wn),n);break}Js(e,Ft,wn);break;case 5:Js(e,Ft,wn);break;default:throw Error(W(329))}}}return Ot(e,Ke()),e.callbackNode===r?hN.bind(null,e):null}function rm(e,t){var r=dl;return e.current.memoizedState.isDehydrated&&(Si(e,t).flags|=256),e=Su(e,t),e!==2&&(t=Ft,Ft=r,t!==null&&nm(t)),e}function nm(e){Ft===null?Ft=e:Ft.push.apply(Ft,e)}function jT(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],a=s.getSnapshot;s=s.value;try{if(!Lr(a(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ls(e,t){for(t&=~oy,t&=~hh,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Mr(t),n=1<<r;e[r]=-1,t&=~n}}function Mx(e){if(we&6)throw Error(W(327));ya();var t=au(e,0);if(!(t&1))return Ot(e,Ke()),null;var r=Su(e,t);if(e.tag!==0&&r===2){var n=Ep(e);n!==0&&(t=n,r=rm(e,n))}if(r===1)throw r=Ml,Si(e,0),ls(e,t),Ot(e,Ke()),r;if(r===6)throw Error(W(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Js(e,Ft,wn),Ot(e,Ke()),null}function cy(e,t){var r=we;we|=1;try{return e(t)}finally{we=r,we===0&&(oo=Ke()+500,lh&&Ws())}}function Ti(e){Ns!==null&&Ns.tag===0&&!(we&6)&&ya();var t=we;we|=1;var r=ir.transition,n=Ce;try{if(ir.transition=null,Ce=1,e)return e()}finally{Ce=n,ir.transition=r,we=t,!(we&6)&&Ws()}}function dy(){Ut=ca.current,Ie(ca)}function Si(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Z_(r)),Ye!==null)for(r=Ye.return;r!==null;){var n=r;switch(Hg(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&uu();break;case 3:io(),Ie(At),Ie(bt),Zg();break;case 5:Jg(n);break;case 4:io();break;case 13:Ie(Le);break;case 19:Ie(Le);break;case 10:Gg(n.type._context);break;case 22:case 23:dy()}r=r.return}if(it=e,Ye=e=Rs(e.current,null),dt=Ut=t,tt=0,Ml=null,oy=hh=_i=0,Ft=dl=null,ni!==null){for(t=0;t<ni.length;t++)if(r=ni[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,a=r.pending;if(a!==null){var o=a.next;a.next=s,n.next=o}r.pending=n}ni=null}return e}function fN(e,t){do{var r=Ye;try{if(Kg(),Dd.current=bu,xu){for(var n=$e.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}xu=!1}if(Ei=0,st=Je=$e=null,ll=!1,Tl=0,ay.current=null,r===null||r.return===null){tt=1,Ml=t,Ye=null;break}e:{var a=e,o=r.return,l=r,c=t;if(t=dt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=bx(o);if(m!==null){m.flags&=-257,wx(m,o,l,a,t),m.mode&1&&xx(a,d,t),t=m,c=d;var x=t.updateQueue;if(x===null){var y=new Set;y.add(c),t.updateQueue=y}else x.add(c);break e}else{if(!(t&1)){xx(a,d,t),uy();break e}c=Error(W(426))}}else if(De&&l.mode&1){var w=bx(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),wx(w,o,l,a,t),Wg(ao(c,l));break e}}a=c=ao(c,l),tt!==4&&(tt=2),dl===null?dl=[a]:dl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var v=Y1(a,c,t);fx(a,v);break e;case 1:l=c;var g=a.type,b=a.stateNode;if(!(a.flags&128)&&(typeof g.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(_s===null||!_s.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t;var j=X1(a,l,t);fx(a,j);break e}}a=a.return}while(a!==null)}gN(r)}catch(k){t=k,Ye===r&&r!==null&&(Ye=r=r.return);continue}break}while(!0)}function pN(){var e=wu.current;return wu.current=bu,e===null?bu:e}function uy(){(tt===0||tt===3||tt===2)&&(tt=4),it===null||!(_i&268435455)&&!(hh&268435455)||ls(it,dt)}function Su(e,t){var r=we;we|=2;var n=pN();(it!==e||dt!==t)&&(wn=null,Si(e,t));do try{ST();break}catch(s){fN(e,s)}while(!0);if(Kg(),we=r,wu.current=n,Ye!==null)throw Error(W(261));return it=null,dt=0,tt}function ST(){for(;Ye!==null;)mN(Ye)}function kT(){for(;Ye!==null&&!YE();)mN(Ye)}function mN(e){var t=vN(e.alternate,e,Ut);e.memoizedProps=e.pendingProps,t===null?gN(e):Ye=t,ay.current=null}function gN(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=vT(r,t),r!==null){r.flags&=32767,Ye=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{tt=6,Ye=null;return}}else if(r=yT(r,t,Ut),r!==null){Ye=r;return}if(t=t.sibling,t!==null){Ye=t;return}Ye=t=e}while(t!==null);tt===0&&(tt=5)}function Js(e,t,r){var n=Ce,s=ir.transition;try{ir.transition=null,Ce=1,CT(e,t,r,n)}finally{ir.transition=s,Ce=n}return null}function CT(e,t,r,n){do ya();while(Ns!==null);if(we&6)throw Error(W(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(W(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(a_(e,a),e===it&&(Ye=it=null,dt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||od||(od=!0,xN(iu,function(){return ya(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=ir.transition,ir.transition=null;var o=Ce;Ce=1;var l=we;we|=4,ay.current=null,bT(e,r),dN(r,e),q_(Ap),ou=!!Mp,Ap=Mp=null,e.current=r,wT(r),XE(),we=l,Ce=o,ir.transition=a}else e.current=r;if(od&&(od=!1,Ns=e,ju=s),a=e.pendingLanes,a===0&&(_s=null),e_(r.stateNode),Ot(e,Ke()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Nu)throw Nu=!1,e=em,em=null,e;return ju&1&&e.tag!==0&&ya(),a=e.pendingLanes,a&1?e===tm?ul++:(ul=0,tm=e):ul=0,Ws(),null}function ya(){if(Ns!==null){var e=Yw(ju),t=ir.transition,r=Ce;try{if(ir.transition=null,Ce=16>e?16:e,Ns===null)var n=!1;else{if(e=Ns,Ns=null,ju=0,we&6)throw Error(W(331));var s=we;for(we|=4,Y=e.current;Y!==null;){var a=Y,o=a.child;if(Y.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(Y=d;Y!==null;){var u=Y;switch(u.tag){case 0:case 11:case 15:cl(8,u,a)}var h=u.child;if(h!==null)h.return=u,Y=h;else for(;Y!==null;){u=Y;var p=u.sibling,m=u.return;if(oN(u),u===d){Y=null;break}if(p!==null){p.return=m,Y=p;break}Y=m}}}var x=a.alternate;if(x!==null){var y=x.child;if(y!==null){x.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}Y=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,Y=o;else e:for(;Y!==null;){if(a=Y,a.flags&2048)switch(a.tag){case 0:case 11:case 15:cl(9,a,a.return)}var v=a.sibling;if(v!==null){v.return=a.return,Y=v;break e}Y=a.return}}var g=e.current;for(Y=g;Y!==null;){o=Y;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Y=b;else e:for(o=g;Y!==null;){if(l=Y,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:uh(9,l)}}catch(k){Ve(l,l.return,k)}if(l===o){Y=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,Y=j;break e}Y=l.return}}if(we=s,Ws(),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(nh,e)}catch{}n=!0}return n}finally{Ce=r,ir.transition=t}}return!1}function Ax(e,t,r){t=ao(r,t),t=Y1(e,t,1),e=Es(e,t,1),t=Ct(),e!==null&&(bc(e,1,t),Ot(e,t))}function Ve(e,t,r){if(e.tag===3)Ax(e,e,r);else for(;t!==null;){if(t.tag===3){Ax(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(_s===null||!_s.has(n))){e=ao(r,e),e=X1(t,e,1),t=Es(t,e,1),e=Ct(),t!==null&&(bc(t,1,e),Ot(t,e));break}}t=t.return}}function PT(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Ct(),e.pingedLanes|=e.suspendedLanes&r,it===e&&(dt&r)===r&&(tt===4||tt===3&&(dt&130023424)===dt&&500>Ke()-ly?Si(e,0):oy|=r),Ot(e,t)}function yN(e,t){t===0&&(e.mode&1?(t=Xc,Xc<<=1,!(Xc&130023424)&&(Xc=4194304)):t=1);var r=Ct();e=zn(e,t),e!==null&&(bc(e,t,r),Ot(e,r))}function ET(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),yN(e,r)}function _T(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(W(314))}n!==null&&n.delete(t),yN(e,r)}var vN;vN=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||At.current)Mt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Mt=!1,gT(e,t,r);Mt=!!(e.flags&131072)}else Mt=!1,De&&t.flags&1048576&&N1(t,pu,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;$d(e,t),e=t.pendingProps;var s=ro(t,bt.current);ga(t,r),s=ty(null,t,n,e,s,r);var a=ry();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,It(n)?(a=!0,hu(t)):a=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Yg(t),s.updater=dh,t.stateNode=s,s._reactInternals=t,Vp(t,n,e,r),t=qp(null,t,n,!0,a,r)):(t.tag=0,De&&a&&Vg(t),kt(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch($d(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=RT(n),e=gr(n,e),s){case 0:t=Wp(null,t,n,e,r);break e;case 1:t=Sx(null,t,n,e,r);break e;case 11:t=Nx(null,t,n,e,r);break e;case 14:t=jx(null,t,n,gr(n.type,e),r);break e}throw Error(W(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:gr(n,s),Wp(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:gr(n,s),Sx(e,t,n,s,r);case 3:e:{if(tN(t),e===null)throw Error(W(387));n=t.pendingProps,a=t.memoizedState,s=a.element,E1(e,t),yu(t,n,null,r);var o=t.memoizedState;if(n=o.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){s=ao(Error(W(423)),t),t=kx(e,t,n,r,s);break e}else if(n!==s){s=ao(Error(W(424)),t),t=kx(e,t,n,r,s);break e}else for(Bt=Ps(t.stateNode.containerInfo.firstChild),Vt=t,De=!0,Pr=null,r=C1(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(no(),n===s){t=Bn(e,t,r);break e}kt(e,t,n,r)}t=t.child}return t;case 5:return _1(t),e===null&&Up(t),n=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,o=s.children,Ip(n,s)?o=null:a!==null&&Ip(n,a)&&(t.flags|=32),eN(e,t),kt(e,t,o,r),t.child;case 6:return e===null&&Up(t),null;case 13:return rN(e,t,r);case 4:return Xg(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=so(t,null,n,r):kt(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:gr(n,s),Nx(e,t,n,s,r);case 7:return kt(e,t,t.pendingProps,r),t.child;case 8:return kt(e,t,t.pendingProps.children,r),t.child;case 12:return kt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,a=t.memoizedProps,o=s.value,Re(mu,n._currentValue),n._currentValue=o,a!==null)if(Lr(a.value,o)){if(a.children===s.children&&!At.current){t=Bn(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(a.tag===1){c=Fn(-1,r&-r),c.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),zp(a.return,r,t),l.lanes|=r;break}c=c.next}}else if(a.tag===10)o=a.type===t.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(W(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),zp(o,r,t),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}kt(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,ga(t,r),s=or(s),n=n(s),t.flags|=1,kt(e,t,n,r),t.child;case 14:return n=t.type,s=gr(n,t.pendingProps),s=gr(n.type,s),jx(e,t,n,s,r);case 15:return J1(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:gr(n,s),$d(e,t),t.tag=1,It(n)?(e=!0,hu(t)):e=!1,ga(t,r),Q1(t,n,s),Vp(t,n,s,r),qp(null,t,n,!0,e,r);case 19:return nN(e,t,r);case 22:return Z1(e,t,r)}throw Error(W(156,t.tag))};function xN(e,t){return qw(e,t)}function TT(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tr(e,t,r,n){return new TT(e,t,r,n)}function hy(e){return e=e.prototype,!(!e||!e.isReactComponent)}function RT(e){if(typeof e=="function")return hy(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Rg)return 11;if(e===Fg)return 14}return 2}function Rs(e,t){var r=e.alternate;return r===null?(r=tr(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Bd(e,t,r,n,s,a){var o=2;if(n=e,typeof e=="function")hy(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Zi:return ki(r.children,s,a,t);case Tg:o=8,s|=8;break;case fp:return e=tr(12,r,t,s|2),e.elementType=fp,e.lanes=a,e;case pp:return e=tr(13,r,t,s),e.elementType=pp,e.lanes=a,e;case mp:return e=tr(19,r,t,s),e.elementType=mp,e.lanes=a,e;case _w:return fh(r,s,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Pw:o=10;break e;case Ew:o=9;break e;case Rg:o=11;break e;case Fg:o=14;break e;case is:o=16,n=null;break e}throw Error(W(130,e==null?e:typeof e,""))}return t=tr(o,r,t,s),t.elementType=e,t.type=n,t.lanes=a,t}function ki(e,t,r,n){return e=tr(7,e,n,t),e.lanes=r,e}function fh(e,t,r,n){return e=tr(22,e,n,t),e.elementType=_w,e.lanes=r,e.stateNode={isHidden:!1},e}function wf(e,t,r){return e=tr(6,e,null,t),e.lanes=r,e}function Nf(e,t,r){return t=tr(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function FT(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tf(0),this.expirationTimes=tf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tf(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function fy(e,t,r,n,s,a,o,l,c){return e=new FT(e,t,r,l,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=tr(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yg(a),e}function MT(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ji,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function bN(e){if(!e)return Ds;e=e._reactInternals;e:{if($i(e)!==e||e.tag!==1)throw Error(W(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(It(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(W(171))}if(e.tag===1){var r=e.type;if(It(r))return b1(e,r,t)}return t}function wN(e,t,r,n,s,a,o,l,c){return e=fy(r,n,!0,e,s,a,o,l,c),e.context=bN(null),r=e.current,n=Ct(),s=Ts(r),a=Fn(n,s),a.callback=t??null,Es(r,a,s),e.current.lanes=s,bc(e,s,n),Ot(e,n),e}function ph(e,t,r,n){var s=t.current,a=Ct(),o=Ts(s);return r=bN(r),t.context===null?t.context=r:t.pendingContext=r,t=Fn(a,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Es(s,t,o),e!==null&&(Ar(e,s,o,a),Od(e,s,o)),o}function ku(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Ix(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function py(e,t){Ix(e,t),(e=e.alternate)&&Ix(e,t)}function AT(){return null}var NN=typeof reportError=="function"?reportError:function(e){console.error(e)};function my(e){this._internalRoot=e}mh.prototype.render=my.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(W(409));ph(e,t,null,null)};mh.prototype.unmount=my.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ti(function(){ph(null,e,null,null)}),t[Un]=null}};function mh(e){this._internalRoot=e}mh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Zw();e={blockedOn:null,target:e,priority:t};for(var r=0;r<os.length&&t!==0&&t<os[r].priority;r++);os.splice(r,0,e),r===0&&t1(e)}};function gy(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function gh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ox(){}function IT(e,t,r,n,s){if(s){if(typeof n=="function"){var a=n;n=function(){var d=ku(o);a.call(d)}}var o=wN(t,n,e,0,null,!1,!1,"",Ox);return e._reactRootContainer=o,e[Un]=o.current,kl(e.nodeType===8?e.parentNode:e),Ti(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var d=ku(c);l.call(d)}}var c=fy(e,0,!1,null,null,!1,!1,"",Ox);return e._reactRootContainer=c,e[Un]=c.current,kl(e.nodeType===8?e.parentNode:e),Ti(function(){ph(t,c,r,n)}),c}function yh(e,t,r,n,s){var a=r._reactRootContainer;if(a){var o=a;if(typeof s=="function"){var l=s;s=function(){var c=ku(o);l.call(c)}}ph(t,o,e,s)}else o=IT(r,t,e,s,n);return ku(o)}Xw=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Ko(t.pendingLanes);r!==0&&(Ig(t,r|1),Ot(t,Ke()),!(we&6)&&(oo=Ke()+500,Ws()))}break;case 13:Ti(function(){var n=zn(e,1);if(n!==null){var s=Ct();Ar(n,e,1,s)}}),py(e,1)}};Og=function(e){if(e.tag===13){var t=zn(e,134217728);if(t!==null){var r=Ct();Ar(t,e,134217728,r)}py(e,134217728)}};Jw=function(e){if(e.tag===13){var t=Ts(e),r=zn(e,t);if(r!==null){var n=Ct();Ar(r,e,t,n)}py(e,t)}};Zw=function(){return Ce};e1=function(e,t){var r=Ce;try{return Ce=e,t()}finally{Ce=r}};kp=function(e,t,r){switch(t){case"input":if(vp(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=oh(n);if(!s)throw Error(W(90));Rw(n),vp(n,s)}}}break;case"textarea":Mw(e,r);break;case"select":t=r.value,t!=null&&ha(e,!!r.multiple,t,!1)}};Uw=cy;zw=Ti;var OT={usingClientEntryPoint:!1,Events:[Nc,na,oh,Lw,$w,cy]},Io={findFiberByHostInstance:ri,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},DT={bundleType:Io.bundleType,version:Io.version,rendererPackageName:Io.rendererPackageName,rendererConfig:Io.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Hw(e),e===null?null:e.stateNode},findFiberByHostInstance:Io.findFiberByHostInstance||AT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ld=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ld.isDisabled&&ld.supportsFiber)try{nh=ld.inject(DT),un=ld}catch{}}Kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OT;Kt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gy(t))throw Error(W(200));return MT(e,t,null,r)};Kt.createRoot=function(e,t){if(!gy(e))throw Error(W(299));var r=!1,n="",s=NN;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=fy(e,1,!1,null,null,r,!1,n,s),e[Un]=t.current,kl(e.nodeType===8?e.parentNode:e),new my(t)};Kt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(W(188)):(e=Object.keys(e).join(","),Error(W(268,e)));return e=Hw(t),e=e===null?null:e.stateNode,e};Kt.flushSync=function(e){return Ti(e)};Kt.hydrate=function(e,t,r){if(!gh(t))throw Error(W(200));return yh(null,e,t,!0,r)};Kt.hydrateRoot=function(e,t,r){if(!gy(e))throw Error(W(405));var n=r!=null&&r.hydratedSources||null,s=!1,a="",o=NN;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=wN(t,null,e,1,r??null,s,!1,a,o),e[Un]=t.current,kl(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new mh(t)};Kt.render=function(e,t,r){if(!gh(t))throw Error(W(200));return yh(null,e,t,!1,r)};Kt.unmountComponentAtNode=function(e){if(!gh(e))throw Error(W(40));return e._reactRootContainer?(Ti(function(){yh(null,null,e,!1,function(){e._reactRootContainer=null,e[Un]=null})}),!0):!1};Kt.unstable_batchedUpdates=cy;Kt.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!gh(r))throw Error(W(200));if(e==null||e._reactInternals===void 0)throw Error(W(38));return yh(e,t,r,!1,n)};Kt.version="18.3.1-next-f1338f8080-20240426";function jN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(jN)}catch(e){console.error(e)}}jN(),jw.exports=Kt;var qs=jw.exports;const SN=Gn(qs);var kN,Dx=qs;kN=Dx.createRoot,Dx.hydrateRoot;const LT="modulepreload",$T=function(e){return"/"+e},Lx={},Zs=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=$T(c),c in Lx)return;Lx[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":LT,d||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((p,m)=>{h.addEventListener("load",p),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return t().catch(a)})};function UT(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var r,n,s,a,o=[],l="",c=e.split("/");for(c[0]||c.shift();s=c.shift();)r=s[0],r==="*"?(o.push(r),l+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):r===":"?(n=s.indexOf("?",1),a=s.indexOf(".",1),o.push(s.substring(1,~n?n:~a?a:s.length)),l+=~n&&!~a?"(?:/([^/]+?))?":"/([^/]+?)",~a&&(l+=(~n?"?":"")+"\\"+s.substring(a))):l+="/"+s;return{keys:o,pattern:new RegExp("^"+l+(t?"(?=$|/)":"/?$"),"i")}}var CN={exports:{}},PN={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lo=f;function zT(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var BT=typeof Object.is=="function"?Object.is:zT,VT=lo.useState,HT=lo.useEffect,WT=lo.useLayoutEffect,qT=lo.useDebugValue;function KT(e,t){var r=t(),n=VT({inst:{value:r,getSnapshot:t}}),s=n[0].inst,a=n[1];return WT(function(){s.value=r,s.getSnapshot=t,jf(s)&&a({inst:s})},[e,r,t]),HT(function(){return jf(s)&&a({inst:s}),e(function(){jf(s)&&a({inst:s})})},[e]),qT(r),r}function jf(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!BT(e,r)}catch{return!0}}function GT(e,t){return t()}var QT=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?GT:KT;PN.useSyncExternalStore=lo.useSyncExternalStore!==void 0?lo.useSyncExternalStore:QT;CN.exports=PN;var YT=CN.exports;const XT=Cg.useInsertionEffect,JT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ZT=JT?f.useLayoutEffect:f.useEffect,e4=XT||ZT,EN=e=>{const t=f.useRef([e,(...r)=>t[0](...r)]).current;return e4(()=>{t[0]=e}),t[1]},t4="popstate",yy="pushState",vy="replaceState",r4="hashchange",$x=[t4,yy,vy,r4],n4=e=>{for(const t of $x)addEventListener(t,e);return()=>{for(const t of $x)removeEventListener(t,e)}},_N=(e,t)=>YT.useSyncExternalStore(n4,e,t),s4=()=>location.search,i4=({ssrSearch:e=""}={})=>_N(s4,()=>e),Ux=()=>location.pathname,a4=({ssrPath:e}={})=>_N(Ux,e?()=>e:Ux),o4=(e,{replace:t=!1,state:r=null}={})=>history[t?vy:yy](r,"",e),l4=(e={})=>[a4(e),o4],zx=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[zx]>"u"){for(const e of[yy,vy]){const t=history[e];history[e]=function(){const r=t.apply(this,arguments),n=new Event(e);return n.arguments=arguments,dispatchEvent(n),r}}Object.defineProperty(window,zx,{value:!0})}const c4=(e,t)=>t.toLowerCase().indexOf(e.toLowerCase())?"~"+t:t.slice(e.length)||"/",TN=(e="")=>e==="/"?"":e,d4=(e,t)=>e[0]==="~"?e.slice(1):TN(t)+e,u4=(e="",t)=>c4(Bx(TN(e)),Bx(t)),Bx=e=>{try{return decodeURI(e)}catch{return e}},RN={hook:l4,searchHook:i4,parser:UT,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:e=>e},FN=f.createContext(RN),Sc=()=>f.useContext(FN),MN={},AN=f.createContext(MN),h4=()=>f.useContext(AN),vh=e=>{const[t,r]=e.hook(e);return[u4(e.base,t),EN((n,s)=>r(d4(n,e.base),s))]},kc=()=>vh(Sc()),IN=(e,t,r,n)=>{const{pattern:s,keys:a}=t instanceof RegExp?{keys:!1,pattern:t}:e(t||"*",n),o=s.exec(r)||[],[l,...c]=o;return l!==void 0?[!0,(()=>{const d=a!==!1?Object.fromEntries(a.map((h,p)=>[h,c[p]])):o.groups;let u={...c};return d&&Object.assign(u,d),u})(),...n?[l]:[]]:[!1,null]},f4=({children:e,...t})=>{var u,h;const r=Sc(),n=t.hook?RN:r;let s=n;const[a,o]=((u=t.ssrPath)==null?void 0:u.split("?"))??[];o&&(t.ssrSearch=o,t.ssrPath=a),t.hrefs=t.hrefs??((h=t.hook)==null?void 0:h.hrefs);let l=f.useRef({}),c=l.current,d=c;for(let p in n){const m=p==="base"?n[p]+(t[p]||""):t[p]||n[p];c===d&&m!==d[p]&&(l.current=d={...d}),d[p]=m,m!==n[p]&&(s=d)}return f.createElement(FN.Provider,{value:s,children:e})},Vx=({children:e,component:t},r)=>t?f.createElement(t,{params:r}):typeof e=="function"?e(r):e,p4=e=>{let t=f.useRef(MN),r=t.current;for(const n in e)e[n]!==r[n]&&(r=e);return Object.keys(e).length===0&&(r=e),t.current=r},rt=({path:e,nest:t,match:r,...n})=>{const s=Sc(),[a]=vh(s),[o,l,c]=r??IN(s.parser,e,a,t),d=p4({...h4(),...l});if(!o)return null;const u=c?f.createElement(f4,{base:c},Vx(n,d)):Vx(n,d);return f.createElement(AN.Provider,{value:d,children:u})},cr=f.forwardRef((e,t)=>{const r=Sc(),[n,s]=vh(r),{to:a="",href:o=a,onClick:l,asChild:c,children:d,className:u,replace:h,state:p,...m}=e,x=EN(w=>{w.ctrlKey||w.metaKey||w.altKey||w.shiftKey||w.button!==0||(l==null||l(w),w.defaultPrevented||(w.preventDefault(),s(o,e)))}),y=r.hrefs(o[0]==="~"?o.slice(1):r.base+o,r);return c&&f.isValidElement(d)?f.cloneElement(d,{onClick:x,href:y}):f.createElement("a",{...m,onClick:x,href:y,className:u!=null&&u.call?u(n===o):u,children:d,ref:t})}),ON=e=>Array.isArray(e)?e.flatMap(t=>ON(t&&t.type===f.Fragment?t.props.children:t)):[e],m4=({children:e,location:t})=>{const r=Sc(),[n]=vh(r);for(const s of ON(e)){let a=0;if(f.isValidElement(s)&&(a=IN(r.parser,s.props.path,t||n,s.props.nest))[0])return f.cloneElement(s,{match:a})}return null};var xo=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ri=typeof window>"u"||"Deno"in globalThis;function Jt(){}function g4(e,t){return typeof e=="function"?e(t):e}function sm(e){return typeof e=="number"&&e>=0&&e!==1/0}function DN(e,t){return Math.max(e+(t||0)-Date.now(),0)}function va(e,t){return typeof e=="function"?e(t):e}function Er(e,t){return typeof e=="function"?e(t):e}function Hx(e,t){const{type:r="all",exact:n,fetchStatus:s,predicate:a,queryKey:o,stale:l}=e;if(o){if(n){if(t.queryHash!==xy(o,t.options))return!1}else if(!Al(t.queryKey,o))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||a&&!a(t))}function Wx(e,t){const{exact:r,status:n,predicate:s,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(r){if(Fi(t.options.mutationKey)!==Fi(a))return!1}else if(!Al(t.options.mutationKey,a))return!1}return!(n&&t.state.status!==n||s&&!s(t))}function xy(e,t){return((t==null?void 0:t.queryKeyHashFn)||Fi)(e)}function Fi(e){return JSON.stringify(e,(t,r)=>im(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function Al(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(r=>!Al(e[r],t[r])):!1}function LN(e,t){if(e===t)return e;const r=qx(e)&&qx(t);if(r||im(e)&&im(t)){const n=r?e:Object.keys(e),s=n.length,a=r?t:Object.keys(t),o=a.length,l=r?[]:{};let c=0;for(let d=0;d<o;d++){const u=r?d:a[d];(!r&&n.includes(u)||r)&&e[u]===void 0&&t[u]===void 0?(l[u]=void 0,c++):(l[u]=LN(e[u],t[u]),l[u]===e[u]&&e[u]!==void 0&&c++)}return s===o&&c===s?e:l}return t}function Cu(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function qx(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function im(e){if(!Kx(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!Kx(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Kx(e){return Object.prototype.toString.call(e)==="[object Object]"}function y4(e){return new Promise(t=>{setTimeout(t,e)})}function am(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?LN(e,t):t}function v4(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function x4(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var by=Symbol();function $N(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===by?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var ai,cs,Na,rw,b4=(rw=class extends xo{constructor(){super();D(this,ai);D(this,cs);D(this,Na);$(this,Na,t=>{if(!Ri&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){N(this,cs)||this.setEventListener(N(this,Na))}onUnsubscribe(){var t;this.hasListeners()||((t=N(this,cs))==null||t.call(this),$(this,cs,void 0))}setEventListener(t){var r;$(this,Na,t),(r=N(this,cs))==null||r.call(this),$(this,cs,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){N(this,ai)!==t&&($(this,ai,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof N(this,ai)=="boolean"?N(this,ai):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},ai=new WeakMap,cs=new WeakMap,Na=new WeakMap,rw),wy=new b4,ja,ds,Sa,nw,w4=(nw=class extends xo{constructor(){super();D(this,ja,!0);D(this,ds);D(this,Sa);$(this,Sa,t=>{if(!Ri&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){N(this,ds)||this.setEventListener(N(this,Sa))}onUnsubscribe(){var t;this.hasListeners()||((t=N(this,ds))==null||t.call(this),$(this,ds,void 0))}setEventListener(t){var r;$(this,Sa,t),(r=N(this,ds))==null||r.call(this),$(this,ds,t(this.setOnline.bind(this)))}setOnline(t){N(this,ja)!==t&&($(this,ja,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return N(this,ja)}},ja=new WeakMap,ds=new WeakMap,Sa=new WeakMap,nw),Pu=new w4;function om(){let e,t;const r=new Promise((s,a)=>{e=s,t=a});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),e(s)},r.reject=s=>{n({status:"rejected",reason:s}),t(s)},r}function N4(e){return Math.min(1e3*2**e,3e4)}function UN(e){return(e??"online")==="online"?Pu.isOnline():!0}var zN=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Sf(e){return e instanceof zN}function BN(e){let t=!1,r=0,n=!1,s;const a=om(),o=y=>{var w;n||(p(new zN(y)),(w=e.abort)==null||w.call(e))},l=()=>{t=!0},c=()=>{t=!1},d=()=>wy.isFocused()&&(e.networkMode==="always"||Pu.isOnline())&&e.canRun(),u=()=>UN(e.networkMode)&&e.canRun(),h=y=>{var w;n||(n=!0,(w=e.onSuccess)==null||w.call(e,y),s==null||s(),a.resolve(y))},p=y=>{var w;n||(n=!0,(w=e.onError)==null||w.call(e,y),s==null||s(),a.reject(y))},m=()=>new Promise(y=>{var w;s=v=>{(n||d())&&y(v)},(w=e.onPause)==null||w.call(e)}).then(()=>{var y;s=void 0,n||(y=e.onContinue)==null||y.call(e)}),x=()=>{if(n)return;let y;const w=r===0?e.initialPromise:void 0;try{y=w??e.fn()}catch(v){y=Promise.reject(v)}Promise.resolve(y).then(h).catch(v=>{var C;if(n)return;const g=e.retry??(Ri?0:3),b=e.retryDelay??N4,j=typeof b=="function"?b(r,v):b,k=g===!0||typeof g=="number"&&r<g||typeof g=="function"&&g(r,v);if(t||!k){p(v);return}r++,(C=e.onFail)==null||C.call(e,r,v),y4(j).then(()=>d()?void 0:m()).then(()=>{t?p(v):x()})})};return{promise:a,cancel:o,continue:()=>(s==null||s(),a),cancelRetry:l,continueRetry:c,canStart:u,start:()=>(u()?x():m().then(x),a)}}function j4(){let e=[],t=0,r=l=>{l()},n=l=>{l()},s=l=>setTimeout(l,0);const a=l=>{t?e.push(l):s(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&s(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{a(()=>{l(...c)})},schedule:a,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{s=l}}}var et=j4(),oi,sw,VN=(sw=class{constructor(){D(this,oi)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),sm(this.gcTime)&&$(this,oi,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Ri?1/0:5*60*1e3))}clearGcTimeout(){N(this,oi)&&(clearTimeout(N(this,oi)),$(this,oi,void 0))}},oi=new WeakMap,sw),ka,Ca,Yt,mt,Gl,li,yr,bn,iw,S4=(iw=class extends VN{constructor(t){super();D(this,yr);D(this,ka);D(this,Ca);D(this,Yt);D(this,mt);D(this,Gl);D(this,li);$(this,li,!1),$(this,Gl,t.defaultOptions),this.setOptions(t.options),this.observers=[],$(this,Yt,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,$(this,ka,k4(this.options)),this.state=t.state??N(this,ka),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=N(this,mt))==null?void 0:t.promise}setOptions(t){this.options={...N(this,Gl),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&N(this,Yt).remove(this)}setData(t,r){const n=am(this.state.data,t,this.options);return U(this,yr,bn).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){U(this,yr,bn).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,s;const r=(n=N(this,mt))==null?void 0:n.promise;return(s=N(this,mt))==null||s.cancel(t),r?r.then(Jt).catch(Jt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(N(this,ka))}isActive(){return this.observers.some(t=>Er(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===by||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!DN(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=N(this,mt))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=N(this,mt))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),N(this,Yt).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(N(this,mt)&&(N(this,li)?N(this,mt).cancel({revert:!0}):N(this,mt).cancelRetry()),this.scheduleGc()),N(this,Yt).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||U(this,yr,bn).call(this,{type:"invalidate"})}fetch(t,r){var c,d,u;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(N(this,mt))return N(this,mt).continueRetry(),N(this,mt).promise}if(t&&this.setOptions(t),!this.options.queryFn){const h=this.observers.find(p=>p.options.queryFn);h&&this.setOptions(h.options)}const n=new AbortController,s=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>($(this,li,!0),n.signal)})},a=()=>{const h=$N(this.options,r),p={queryKey:this.queryKey,meta:this.meta};return s(p),$(this,li,!1),this.options.persister?this.options.persister(h,p,this):h(p)},o={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:a};s(o),(c=this.options.behavior)==null||c.onFetch(o,this),$(this,Ca,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=o.fetchOptions)==null?void 0:d.meta))&&U(this,yr,bn).call(this,{type:"fetch",meta:(u=o.fetchOptions)==null?void 0:u.meta});const l=h=>{var p,m,x,y;Sf(h)&&h.silent||U(this,yr,bn).call(this,{type:"error",error:h}),Sf(h)||((m=(p=N(this,Yt).config).onError)==null||m.call(p,h,this),(y=(x=N(this,Yt).config).onSettled)==null||y.call(x,this.state.data,h,this)),this.scheduleGc()};return $(this,mt,BN({initialPromise:r==null?void 0:r.initialPromise,fn:o.fetchFn,abort:n.abort.bind(n),onSuccess:h=>{var p,m,x,y;if(h===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(w){l(w);return}(m=(p=N(this,Yt).config).onSuccess)==null||m.call(p,h,this),(y=(x=N(this,Yt).config).onSettled)==null||y.call(x,h,this.state.error,this),this.scheduleGc()},onError:l,onFail:(h,p)=>{U(this,yr,bn).call(this,{type:"failed",failureCount:h,error:p})},onPause:()=>{U(this,yr,bn).call(this,{type:"pause"})},onContinue:()=>{U(this,yr,bn).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),N(this,mt).start()}},ka=new WeakMap,Ca=new WeakMap,Yt=new WeakMap,mt=new WeakMap,Gl=new WeakMap,li=new WeakMap,yr=new WeakSet,bn=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...HN(n.data,this.options),fetchMeta:t.meta??null};case"success":return{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=t.error;return Sf(s)&&s.revert&&N(this,Ca)?{...N(this,Ca),fetchStatus:"idle"}:{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),et.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),N(this,Yt).notify({query:this,type:"updated",action:t})})},iw);function HN(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:UN(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function k4(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Xr,aw,C4=(aw=class extends xo{constructor(t={}){super();D(this,Xr);this.config=t,$(this,Xr,new Map)}build(t,r,n){const s=r.queryKey,a=r.queryHash??xy(s,r);let o=this.get(a);return o||(o=new S4({cache:this,queryKey:s,queryHash:a,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(s)}),this.add(o)),o}add(t){N(this,Xr).has(t.queryHash)||(N(this,Xr).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=N(this,Xr).get(t.queryHash);r&&(t.destroy(),r===t&&N(this,Xr).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){et.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return N(this,Xr).get(t)}getAll(){return[...N(this,Xr).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>Hx(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>Hx(t,n)):r}notify(t){et.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){et.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){et.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Xr=new WeakMap,aw),Jr,Nt,ci,Zr,ts,ow,P4=(ow=class extends VN{constructor(t){super();D(this,Zr);D(this,Jr);D(this,Nt);D(this,ci);this.mutationId=t.mutationId,$(this,Nt,t.mutationCache),$(this,Jr,[]),this.state=t.state||WN(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){N(this,Jr).includes(t)||(N(this,Jr).push(t),this.clearGcTimeout(),N(this,Nt).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){$(this,Jr,N(this,Jr).filter(r=>r!==t)),this.scheduleGc(),N(this,Nt).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){N(this,Jr).length||(this.state.status==="pending"?this.scheduleGc():N(this,Nt).remove(this))}continue(){var t;return((t=N(this,ci))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var s,a,o,l,c,d,u,h,p,m,x,y,w,v,g,b,j,k,C,S;$(this,ci,BN({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(_,P)=>{U(this,Zr,ts).call(this,{type:"failed",failureCount:_,error:P})},onPause:()=>{U(this,Zr,ts).call(this,{type:"pause"})},onContinue:()=>{U(this,Zr,ts).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>N(this,Nt).canRun(this)}));const r=this.state.status==="pending",n=!N(this,ci).canStart();try{if(!r){U(this,Zr,ts).call(this,{type:"pending",variables:t,isPaused:n}),await((a=(s=N(this,Nt).config).onMutate)==null?void 0:a.call(s,t,this));const P=await((l=(o=this.options).onMutate)==null?void 0:l.call(o,t));P!==this.state.context&&U(this,Zr,ts).call(this,{type:"pending",context:P,variables:t,isPaused:n})}const _=await N(this,ci).start();return await((d=(c=N(this,Nt).config).onSuccess)==null?void 0:d.call(c,_,t,this.state.context,this)),await((h=(u=this.options).onSuccess)==null?void 0:h.call(u,_,t,this.state.context)),await((m=(p=N(this,Nt).config).onSettled)==null?void 0:m.call(p,_,null,this.state.variables,this.state.context,this)),await((y=(x=this.options).onSettled)==null?void 0:y.call(x,_,null,t,this.state.context)),U(this,Zr,ts).call(this,{type:"success",data:_}),_}catch(_){try{throw await((v=(w=N(this,Nt).config).onError)==null?void 0:v.call(w,_,t,this.state.context,this)),await((b=(g=this.options).onError)==null?void 0:b.call(g,_,t,this.state.context)),await((k=(j=N(this,Nt).config).onSettled)==null?void 0:k.call(j,void 0,_,this.state.variables,this.state.context,this)),await((S=(C=this.options).onSettled)==null?void 0:S.call(C,void 0,_,t,this.state.context)),_}finally{U(this,Zr,ts).call(this,{type:"error",error:_})}}finally{N(this,Nt).runNext(this)}}},Jr=new WeakMap,Nt=new WeakMap,ci=new WeakMap,Zr=new WeakSet,ts=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),et.batch(()=>{N(this,Jr).forEach(n=>{n.onMutationUpdate(t)}),N(this,Nt).notify({mutation:this,type:"updated",action:t})})},ow);function WN(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var $t,Ql,lw,E4=(lw=class extends xo{constructor(t={}){super();D(this,$t);D(this,Ql);this.config=t,$(this,$t,new Map),$(this,Ql,Date.now())}build(t,r,n){const s=new P4({mutationCache:this,mutationId:++Hc(this,Ql)._,options:t.defaultMutationOptions(r),state:n});return this.add(s),s}add(t){const r=cd(t),n=N(this,$t).get(r)??[];n.push(t),N(this,$t).set(r,n),this.notify({type:"added",mutation:t})}remove(t){var n;const r=cd(t);if(N(this,$t).has(r)){const s=(n=N(this,$t).get(r))==null?void 0:n.filter(a=>a!==t);s&&(s.length===0?N(this,$t).delete(r):N(this,$t).set(r,s))}this.notify({type:"removed",mutation:t})}canRun(t){var n;const r=(n=N(this,$t).get(cd(t)))==null?void 0:n.find(s=>s.state.status==="pending");return!r||r===t}runNext(t){var n;const r=(n=N(this,$t).get(cd(t)))==null?void 0:n.find(s=>s!==t&&s.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}clear(){et.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...N(this,$t).values()].flat()}find(t){const r={exact:!0,...t};return this.getAll().find(n=>Wx(r,n))}findAll(t={}){return this.getAll().filter(r=>Wx(t,r))}notify(t){et.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return et.batch(()=>Promise.all(t.map(r=>r.continue().catch(Jt))))}},$t=new WeakMap,Ql=new WeakMap,lw);function cd(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function Gx(e){return{onFetch:(t,r)=>{var u,h,p,m,x;const n=t.options,s=(p=(h=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:h.fetchMore)==null?void 0:p.direction,a=((m=t.state.data)==null?void 0:m.pages)||[],o=((x=t.state.data)==null?void 0:x.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let y=!1;const w=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(t.signal.aborted?y=!0:t.signal.addEventListener("abort",()=>{y=!0}),t.signal)})},v=$N(t.options,t.fetchOptions),g=async(b,j,k)=>{if(y)return Promise.reject();if(j==null&&b.pages.length)return Promise.resolve(b);const C={queryKey:t.queryKey,pageParam:j,direction:k?"backward":"forward",meta:t.options.meta};w(C);const S=await v(C),{maxPages:_}=t.options,P=k?x4:v4;return{pages:P(b.pages,S,_),pageParams:P(b.pageParams,j,_)}};if(s&&a.length){const b=s==="backward",j=b?_4:Qx,k={pages:a,pageParams:o},C=j(n,k);l=await g(k,C,b)}else{const b=e??a.length;do{const j=c===0?o[0]??n.initialPageParam:Qx(n,l);if(c>0&&j==null)break;l=await g(l,j),c++}while(c<b)}return l};t.options.persister?t.fetchFn=()=>{var y,w;return(w=(y=t.options).persister)==null?void 0:w.call(y,d,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=d}}}function Qx(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function _4(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var Be,us,hs,Pa,Ea,fs,_a,Ta,cw,T4=(cw=class{constructor(e={}){D(this,Be);D(this,us);D(this,hs);D(this,Pa);D(this,Ea);D(this,fs);D(this,_a);D(this,Ta);$(this,Be,e.queryCache||new C4),$(this,us,e.mutationCache||new E4),$(this,hs,e.defaultOptions||{}),$(this,Pa,new Map),$(this,Ea,new Map),$(this,fs,0)}mount(){Hc(this,fs)._++,N(this,fs)===1&&($(this,_a,wy.subscribe(async e=>{e&&(await this.resumePausedMutations(),N(this,Be).onFocus())})),$(this,Ta,Pu.subscribe(async e=>{e&&(await this.resumePausedMutations(),N(this,Be).onOnline())})))}unmount(){var e,t;Hc(this,fs)._--,N(this,fs)===0&&((e=N(this,_a))==null||e.call(this),$(this,_a,void 0),(t=N(this,Ta))==null||t.call(this),$(this,Ta,void 0))}isFetching(e){return N(this,Be).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return N(this,us).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=N(this,Be).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const r=this.defaultQueryOptions(e),n=N(this,Be).build(this,r);return e.revalidateIfStale&&n.isStaleByTime(va(r.staleTime,n))&&this.prefetchQuery(r),Promise.resolve(t)}}getQueriesData(e){return N(this,Be).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),s=N(this,Be).get(n.queryHash),a=s==null?void 0:s.state.data,o=g4(t,a);if(o!==void 0)return N(this,Be).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return et.batch(()=>N(this,Be).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=N(this,Be).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=N(this,Be);et.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=N(this,Be),n={type:"active",...e};return et.batch(()=>(r.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries(n,t)))}cancelQueries(e={},t={}){const r={revert:!0,...t},n=et.batch(()=>N(this,Be).findAll(e).map(s=>s.cancel(r)));return Promise.all(n).then(Jt).catch(Jt)}invalidateQueries(e={},t={}){return et.batch(()=>{if(N(this,Be).findAll(e).forEach(n=>{n.invalidate()}),e.refetchType==="none")return Promise.resolve();const r={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(r,t)})}refetchQueries(e={},t){const r={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},n=et.batch(()=>N(this,Be).findAll(e).filter(s=>!s.isDisabled()).map(s=>{let a=s.fetch(void 0,r);return r.throwOnError||(a=a.catch(Jt)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(n).then(Jt)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=N(this,Be).build(this,t);return r.isStaleByTime(va(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Jt).catch(Jt)}fetchInfiniteQuery(e){return e.behavior=Gx(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Jt).catch(Jt)}ensureInfiniteQueryData(e){return e.behavior=Gx(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Pu.isOnline()?N(this,us).resumePausedMutations():Promise.resolve()}getQueryCache(){return N(this,Be)}getMutationCache(){return N(this,us)}getDefaultOptions(){return N(this,hs)}setDefaultOptions(e){$(this,hs,e)}setQueryDefaults(e,t){N(this,Pa).set(Fi(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...N(this,Pa).values()];let r={};return t.forEach(n=>{Al(e,n.queryKey)&&(r={...r,...n.defaultOptions})}),r}setMutationDefaults(e,t){N(this,Ea).set(Fi(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...N(this,Ea).values()];let r={};return t.forEach(n=>{Al(e,n.mutationKey)&&(r={...r,...n.defaultOptions})}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...N(this,hs).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=xy(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===by&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...N(this,hs).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){N(this,Be).clear(),N(this,us).clear()}},Be=new WeakMap,us=new WeakMap,hs=new WeakMap,Pa=new WeakMap,Ea=new WeakMap,fs=new WeakMap,_a=new WeakMap,Ta=new WeakMap,cw),Tt,ve,Yl,jt,di,Ra,ps,en,Xl,Fa,Ma,ui,hi,ms,Aa,Se,Qo,lm,cm,dm,um,hm,fm,pm,qN,dw,R4=(dw=class extends xo{constructor(t,r){super();D(this,Se);D(this,Tt);D(this,ve);D(this,Yl);D(this,jt);D(this,di);D(this,Ra);D(this,ps);D(this,en);D(this,Xl);D(this,Fa);D(this,Ma);D(this,ui);D(this,hi);D(this,ms);D(this,Aa,new Set);this.options=r,$(this,Tt,t),$(this,en,null),$(this,ps,om()),this.options.experimental_prefetchInRender||N(this,ps).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(N(this,ve).addObserver(this),Yx(N(this,ve),this.options)?U(this,Se,Qo).call(this):this.updateResult(),U(this,Se,um).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return mm(N(this,ve),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return mm(N(this,ve),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,U(this,Se,hm).call(this),U(this,Se,fm).call(this),N(this,ve).removeObserver(this)}setOptions(t,r){const n=this.options,s=N(this,ve);if(this.options=N(this,Tt).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Er(this.options.enabled,N(this,ve))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");U(this,Se,pm).call(this),N(this,ve).setOptions(this.options),n._defaulted&&!Cu(this.options,n)&&N(this,Tt).getQueryCache().notify({type:"observerOptionsUpdated",query:N(this,ve),observer:this});const a=this.hasListeners();a&&Xx(N(this,ve),s,this.options,n)&&U(this,Se,Qo).call(this),this.updateResult(r),a&&(N(this,ve)!==s||Er(this.options.enabled,N(this,ve))!==Er(n.enabled,N(this,ve))||va(this.options.staleTime,N(this,ve))!==va(n.staleTime,N(this,ve)))&&U(this,Se,lm).call(this);const o=U(this,Se,cm).call(this);a&&(N(this,ve)!==s||Er(this.options.enabled,N(this,ve))!==Er(n.enabled,N(this,ve))||o!==N(this,ms))&&U(this,Se,dm).call(this,o)}getOptimisticResult(t){const r=N(this,Tt).getQueryCache().build(N(this,Tt),t),n=this.createResult(r,t);return M4(this,n)&&($(this,jt,n),$(this,Ra,this.options),$(this,di,N(this,ve).state)),n}getCurrentResult(){return N(this,jt)}trackResult(t,r){const n={};return Object.keys(t).forEach(s=>{Object.defineProperty(n,s,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(s),r==null||r(s),t[s])})}),n}trackProp(t){N(this,Aa).add(t)}getCurrentQuery(){return N(this,ve)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=N(this,Tt).defaultQueryOptions(t),n=N(this,Tt).getQueryCache().build(N(this,Tt),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return U(this,Se,Qo).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),N(this,jt)))}createResult(t,r){var _;const n=N(this,ve),s=this.options,a=N(this,jt),o=N(this,di),l=N(this,Ra),d=t!==n?t.state:N(this,Yl),{state:u}=t;let h={...u},p=!1,m;if(r._optimisticResults){const P=this.hasListeners(),T=!P&&Yx(t,r),F=P&&Xx(t,n,r,s);(T||F)&&(h={...h,...HN(u.data,t.options)}),r._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:x,errorUpdatedAt:y,status:w}=h;if(r.select&&h.data!==void 0)if(a&&h.data===(o==null?void 0:o.data)&&r.select===N(this,Xl))m=N(this,Fa);else try{$(this,Xl,r.select),m=r.select(h.data),m=am(a==null?void 0:a.data,m,r),$(this,Fa,m),$(this,en,null)}catch(P){$(this,en,P)}else m=h.data;if(r.placeholderData!==void 0&&m===void 0&&w==="pending"){let P;if(a!=null&&a.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData))P=a.data;else if(P=typeof r.placeholderData=="function"?r.placeholderData((_=N(this,Ma))==null?void 0:_.state.data,N(this,Ma)):r.placeholderData,r.select&&P!==void 0)try{P=r.select(P),$(this,en,null)}catch(T){$(this,en,T)}P!==void 0&&(w="success",m=am(a==null?void 0:a.data,P,r),p=!0)}N(this,en)&&(x=N(this,en),m=N(this,Fa),y=Date.now(),w="error");const v=h.fetchStatus==="fetching",g=w==="pending",b=w==="error",j=g&&v,k=m!==void 0,S={status:w,fetchStatus:h.fetchStatus,isPending:g,isSuccess:w==="success",isError:b,isInitialLoading:j,isLoading:j,data:m,dataUpdatedAt:h.dataUpdatedAt,error:x,errorUpdatedAt:y,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>d.dataUpdateCount||h.errorUpdateCount>d.errorUpdateCount,isFetching:v,isRefetching:v&&!g,isLoadingError:b&&!k,isPaused:h.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:b&&k,isStale:Ny(t,r),refetch:this.refetch,promise:N(this,ps)};if(this.options.experimental_prefetchInRender){const P=R=>{S.status==="error"?R.reject(S.error):S.data!==void 0&&R.resolve(S.data)},T=()=>{const R=$(this,ps,S.promise=om());P(R)},F=N(this,ps);switch(F.status){case"pending":t.queryHash===n.queryHash&&P(F);break;case"fulfilled":(S.status==="error"||S.data!==F.value)&&T();break;case"rejected":(S.status!=="error"||S.error!==F.reason)&&T();break}}return S}updateResult(t){const r=N(this,jt),n=this.createResult(N(this,ve),this.options);if($(this,di,N(this,ve).state),$(this,Ra,this.options),N(this,di).data!==void 0&&$(this,Ma,N(this,ve)),Cu(n,r))return;$(this,jt,n);const s={},a=()=>{if(!r)return!0;const{notifyOnChangeProps:o}=this.options,l=typeof o=="function"?o():o;if(l==="all"||!l&&!N(this,Aa).size)return!0;const c=new Set(l??N(this,Aa));return this.options.throwOnError&&c.add("error"),Object.keys(N(this,jt)).some(d=>{const u=d;return N(this,jt)[u]!==r[u]&&c.has(u)})};(t==null?void 0:t.listeners)!==!1&&a()&&(s.listeners=!0),U(this,Se,qN).call(this,{...s,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&U(this,Se,um).call(this)}},Tt=new WeakMap,ve=new WeakMap,Yl=new WeakMap,jt=new WeakMap,di=new WeakMap,Ra=new WeakMap,ps=new WeakMap,en=new WeakMap,Xl=new WeakMap,Fa=new WeakMap,Ma=new WeakMap,ui=new WeakMap,hi=new WeakMap,ms=new WeakMap,Aa=new WeakMap,Se=new WeakSet,Qo=function(t){U(this,Se,pm).call(this);let r=N(this,ve).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(Jt)),r},lm=function(){U(this,Se,hm).call(this);const t=va(this.options.staleTime,N(this,ve));if(Ri||N(this,jt).isStale||!sm(t))return;const n=DN(N(this,jt).dataUpdatedAt,t)+1;$(this,ui,setTimeout(()=>{N(this,jt).isStale||this.updateResult()},n))},cm=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(N(this,ve)):this.options.refetchInterval)??!1},dm=function(t){U(this,Se,fm).call(this),$(this,ms,t),!(Ri||Er(this.options.enabled,N(this,ve))===!1||!sm(N(this,ms))||N(this,ms)===0)&&$(this,hi,setInterval(()=>{(this.options.refetchIntervalInBackground||wy.isFocused())&&U(this,Se,Qo).call(this)},N(this,ms)))},um=function(){U(this,Se,lm).call(this),U(this,Se,dm).call(this,U(this,Se,cm).call(this))},hm=function(){N(this,ui)&&(clearTimeout(N(this,ui)),$(this,ui,void 0))},fm=function(){N(this,hi)&&(clearInterval(N(this,hi)),$(this,hi,void 0))},pm=function(){const t=N(this,Tt).getQueryCache().build(N(this,Tt),this.options);if(t===N(this,ve))return;const r=N(this,ve);$(this,ve,t),$(this,Yl,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},qN=function(t){et.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(N(this,jt))}),N(this,Tt).getQueryCache().notify({query:N(this,ve),type:"observerResultsUpdated"})})},dw);function F4(e,t){return Er(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Yx(e,t){return F4(e,t)||e.state.data!==void 0&&mm(e,t,t.refetchOnMount)}function mm(e,t,r){if(Er(t.enabled,e)!==!1){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&Ny(e,t)}return!1}function Xx(e,t,r,n){return(e!==t||Er(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&Ny(e,r)}function Ny(e,t){return Er(t.enabled,e)!==!1&&e.isStaleByTime(va(t.staleTime,e))}function M4(e,t){return!Cu(e.getCurrentResult(),t)}var gs,ys,Rt,jn,Ln,Vd,gm,uw,A4=(uw=class extends xo{constructor(r,n){super();D(this,Ln);D(this,gs);D(this,ys);D(this,Rt);D(this,jn);$(this,gs,r),this.setOptions(n),this.bindMethods(),U(this,Ln,Vd).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var s;const n=this.options;this.options=N(this,gs).defaultMutationOptions(r),Cu(this.options,n)||N(this,gs).getMutationCache().notify({type:"observerOptionsUpdated",mutation:N(this,Rt),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&Fi(n.mutationKey)!==Fi(this.options.mutationKey)?this.reset():((s=N(this,Rt))==null?void 0:s.state.status)==="pending"&&N(this,Rt).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=N(this,Rt))==null||r.removeObserver(this)}onMutationUpdate(r){U(this,Ln,Vd).call(this),U(this,Ln,gm).call(this,r)}getCurrentResult(){return N(this,ys)}reset(){var r;(r=N(this,Rt))==null||r.removeObserver(this),$(this,Rt,void 0),U(this,Ln,Vd).call(this),U(this,Ln,gm).call(this)}mutate(r,n){var s;return $(this,jn,n),(s=N(this,Rt))==null||s.removeObserver(this),$(this,Rt,N(this,gs).getMutationCache().build(N(this,gs),this.options)),N(this,Rt).addObserver(this),N(this,Rt).execute(r)}},gs=new WeakMap,ys=new WeakMap,Rt=new WeakMap,jn=new WeakMap,Ln=new WeakSet,Vd=function(){var n;const r=((n=N(this,Rt))==null?void 0:n.state)??WN();$(this,ys,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},gm=function(r){et.batch(()=>{var n,s,a,o,l,c,d,u;if(N(this,jn)&&this.hasListeners()){const h=N(this,ys).variables,p=N(this,ys).context;(r==null?void 0:r.type)==="success"?((s=(n=N(this,jn)).onSuccess)==null||s.call(n,r.data,h,p),(o=(a=N(this,jn)).onSettled)==null||o.call(a,r.data,null,h,p)):(r==null?void 0:r.type)==="error"&&((c=(l=N(this,jn)).onError)==null||c.call(l,r.error,h,p),(u=(d=N(this,jn)).onSettled)==null||u.call(d,void 0,r.error,h,p))}this.listeners.forEach(h=>{h(N(this,ys))})})},uw),KN=f.createContext(void 0),Xe=e=>{const t=f.useContext(KN);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},kf=({client:e,children:t})=>(f.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),i.jsx(KN.Provider,{value:e,children:t})),GN=f.createContext(!1),I4=()=>f.useContext(GN);GN.Provider;function O4(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var D4=f.createContext(O4()),L4=()=>f.useContext(D4);function QN(e,t){return typeof e=="function"?e(...t):!!e}function ym(){}var $4=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},U4=e=>{f.useEffect(()=>{e.clearReset()},[e])},z4=({result:e,errorResetBoundary:t,throwOnError:r,query:n})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&QN(r,[e.error,n]),B4=e=>{e.suspense&&(e.staleTime===void 0&&(e.staleTime=1e3),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3)))},V4=(e,t)=>e.isLoading&&e.isFetching&&!t,H4=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Jx=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function W4(e,t,r){var u,h,p,m,x;const n=Xe(),s=I4(),a=L4(),o=n.defaultQueryOptions(e);(h=(u=n.getDefaultOptions().queries)==null?void 0:u._experimental_beforeQuery)==null||h.call(u,o),o._optimisticResults=s?"isRestoring":"optimistic",B4(o),$4(o,a),U4(a);const l=!n.getQueryCache().get(o.queryHash),[c]=f.useState(()=>new t(n,o)),d=c.getOptimisticResult(o);if(f.useSyncExternalStore(f.useCallback(y=>{const w=s?ym:c.subscribe(et.batchCalls(y));return c.updateResult(),w},[c,s]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),f.useEffect(()=>{c.setOptions(o,{listeners:!1})},[o,c]),H4(o,d))throw Jx(o,c,a);if(z4({result:d,errorResetBoundary:a,throwOnError:o.throwOnError,query:n.getQueryCache().get(o.queryHash)}))throw d.error;if((m=(p=n.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||m.call(p,o,d),o.experimental_prefetchInRender&&!Ri&&V4(d,s)){const y=l?Jx(o,c,a):(x=n.getQueryCache().get(o.queryHash))==null?void 0:x.promise;y==null||y.catch(ym).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?d:c.trackResult(d)}function xe(e,t){return W4(e,R4)}function pe(e,t){const r=Xe(),[n]=f.useState(()=>new A4(r,e));f.useEffect(()=>{n.setOptions(e)},[n,e]);const s=f.useSyncExternalStore(f.useCallback(o=>n.subscribe(et.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),a=f.useCallback((o,l)=>{n.mutate(o,l).catch(ym)},[n]);if(s.error&&QN(n.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:a,mutateAsync:s.mutate}}function q4(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window)}function K4(){try{const e="__ios_test__";return localStorage.setItem(e,"1"),localStorage.removeItem(e),!0}catch(e){return console.warn("localStorage not available on iOS:",e),!1}}class Il{constructor(){this.fallbackData={},this.isLocalStorageAvailable=K4()}getItem(t){if(this.isLocalStorageAvailable)try{return localStorage.getItem(t)}catch(r){console.warn("localStorage getItem failed:",r)}return this.fallbackData[t]||null}setItem(t,r){if(this.isLocalStorageAvailable)try{localStorage.setItem(t,r);return}catch(n){console.warn("localStorage setItem failed:",n)}this.fallbackData[t]=r}removeItem(t){if(this.isLocalStorageAvailable)try{localStorage.removeItem(t)}catch(r){console.warn("localStorage removeItem failed:",r)}delete this.fallbackData[t]}clear(){if(this.isLocalStorageAvailable)try{localStorage.clear()}catch(t){console.warn("localStorage clear failed:",t)}this.fallbackData={}}}const We=new Il,Oe={PERSISTENT_SESSION:"frhighday_persistent_session",TEMP_SESSION:"frhighday_temp_session",REMEMBER_ME_SETTING:"frhighday_remember_me"};class pt{static saveSession(t){try{const r={...t,loginTime:Date.now()};if(t.rememberMe){if(We.setItem(Oe.PERSISTENT_SESSION,JSON.stringify(r)),typeof sessionStorage<"u")try{sessionStorage.removeItem(Oe.TEMP_SESSION)}catch(n){console.warn("SessionStorage not available:",n)}}else{if(typeof sessionStorage<"u")try{sessionStorage.setItem(Oe.TEMP_SESSION,JSON.stringify(r))}catch(n){console.warn("SessionStorage not available, using localStorage:",n),We.setItem(Oe.TEMP_SESSION,JSON.stringify(r))}else We.setItem(Oe.TEMP_SESSION,JSON.stringify(r));We.removeItem(Oe.PERSISTENT_SESSION)}We.setItem(Oe.REMEMBER_ME_SETTING,JSON.stringify(t.rememberMe))}catch(r){console.error("Failed to save session:",r)}}static getSession(){try{const t=We.getItem(Oe.PERSISTENT_SESSION);if(t){const n=JSON.parse(t);if(this.isSessionValid(n))return n;We.removeItem(Oe.PERSISTENT_SESSION)}let r=null;if(typeof sessionStorage<"u")try{r=sessionStorage.getItem(Oe.TEMP_SESSION)}catch{r=We.getItem(Oe.TEMP_SESSION)}else r=We.getItem(Oe.TEMP_SESSION);if(r){const n=JSON.parse(r);if(this.isSessionValid(n))return n;if(typeof sessionStorage<"u")try{sessionStorage.removeItem(Oe.TEMP_SESSION)}catch{We.removeItem(Oe.TEMP_SESSION)}else We.removeItem(Oe.TEMP_SESSION)}return null}catch(t){return console.error("Failed to retrieve session:",t),this.clearAllSessions(),null}}static isSessionValid(t){var r;return!t||!t.user?!1:(console.log(`Session for ${(r=t.user)==null?void 0:r.username} is valid (auto-logout disabled)`),!0)}static clearAllSessions(){try{if(We.removeItem(Oe.PERSISTENT_SESSION),typeof sessionStorage<"u")try{sessionStorage.removeItem(Oe.TEMP_SESSION)}catch{We.removeItem(Oe.TEMP_SESSION)}else We.removeItem(Oe.TEMP_SESSION)}catch(t){console.error("Failed to clear sessions:",t)}}static getRememberMeSetting(){try{const t=We.getItem(Oe.REMEMBER_ME_SETTING);return t?JSON.parse(t):!1}catch{return!1}}static updateSession(t){const r=this.getSession();if(r){const n={...r,...t};this.saveSession(n)}}static hasStoredSession(){const t=!!We.getItem(Oe.PERSISTENT_SESSION);let r=!1;if(typeof sessionStorage<"u")try{r=!!sessionStorage.getItem(Oe.TEMP_SESSION)}catch{r=!!We.getItem(Oe.TEMP_SESSION)}else r=!!We.getItem(Oe.TEMP_SESSION);return t||r}static migrateOldSession(){try{const t=We.getItem("frhighday_user");if(t&&!this.hasStoredSession()){const r=JSON.parse(t);this.saveSession({user:r,rememberMe:!0,loginTime:Date.now()}),We.removeItem("frhighday_user")}}catch(t){console.error("Failed to migrate old session:",t),We.removeItem("frhighday_user")}}}async function YN(e){if(!e.ok){const t=await e.text()||e.statusText;throw console.error("API Response Error:",{status:e.status,statusText:e.statusText,text:t}),new Error(`${e.status}: ${t}`)}}async function ne(e,t,r){console.log(" Making API request:",{method:e,url:t,hasData:!!r});const n=pt.getSession(),s={};r&&(s["Content-Type"]="application/json"),n!=null&&n.user&&(s["x-user-data"]=encodeURIComponent(JSON.stringify(n.user)));try{const a=await fetch(t,{method:e,headers:s,body:r?JSON.stringify(r):void 0,credentials:"include",mode:"cors"});return console.log(" API response received:",{status:a.status,statusText:a.statusText,ok:a.ok}),await YN(a),a}catch(a){throw console.error(" API request failed:",a),a}}const G4=({on401:e})=>async({queryKey:t})=>{const r=pt.getSession(),n={};r!=null&&r.user&&(n["x-user-data"]=encodeURIComponent(JSON.stringify(r.user)));const s=await fetch(t.join("/"),{credentials:"include",headers:n});return e==="returnNull"&&s.status===401?null:(await YN(s),await s.json())},Cf=new T4({defaultOptions:{queries:{queryFn:G4({on401:"throw"}),refetchInterval:2e3,refetchOnWindowFocus:!0,staleTime:0,gcTime:0,retry:!1},mutations:{retry:!1}}}),Q4=1,Y4=1e6;let Pf=0;function X4(){return Pf=(Pf+1)%Number.MAX_SAFE_INTEGER,Pf.toString()}const Ef=new Map,Zx=e=>{if(Ef.has(e))return;const t=setTimeout(()=>{Ef.delete(e),hl({type:"REMOVE_TOAST",toastId:e})},Y4);Ef.set(e,t)},J4=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,Q4)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?Zx(r):e.toasts.forEach(n=>{Zx(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},Hd=[];let Wd={toasts:[]};function hl(e){Wd=J4(Wd,e),Hd.forEach(t=>{t(Wd)})}function Z4({...e}){const t=X4(),r=s=>hl({type:"UPDATE_TOAST",toast:{...s,id:t}}),n=()=>hl({type:"DISMISS_TOAST",toastId:t});return hl({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:s=>{s||n()}}}),{id:t,dismiss:n,update:r}}function ke(){const[e,t]=f.useState(Wd);return f.useEffect(()=>(Hd.push(t),()=>{const r=Hd.indexOf(t);r>-1&&Hd.splice(r,1)}),[e]),{...e,toast:Z4,dismiss:r=>hl({type:"DISMISS_TOAST",toastId:r})}}function K(e,t,{checkForDefaultPrevented:r=!0}={}){return function(s){if(e==null||e(s),r===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function e0(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Cc(...e){return t=>{let r=!1;const n=e.map(s=>{const a=e0(s,t);return!r&&typeof a=="function"&&(r=!0),a});if(r)return()=>{for(let s=0;s<n.length;s++){const a=n[s];typeof a=="function"?a():e0(e[s],null)}}}}function me(...e){return f.useCallback(Cc(...e),e)}function e5(e,t){const r=f.createContext(t),n=a=>{const{children:o,...l}=a,c=f.useMemo(()=>l,Object.values(l));return i.jsx(r.Provider,{value:c,children:o})};n.displayName=e+"Provider";function s(a){const o=f.useContext(r);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${a}\` must be used within \`${e}\``)}return[n,s]}function Qt(e,t=[]){let r=[];function n(a,o){const l=f.createContext(o),c=r.length;r=[...r,o];const d=h=>{var v;const{scope:p,children:m,...x}=h,y=((v=p==null?void 0:p[e])==null?void 0:v[c])||l,w=f.useMemo(()=>x,Object.values(x));return i.jsx(y.Provider,{value:w,children:m})};d.displayName=a+"Provider";function u(h,p){var y;const m=((y=p==null?void 0:p[e])==null?void 0:y[c])||l,x=f.useContext(m);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return[d,u]}const s=()=>{const a=r.map(o=>f.createContext(o));return function(l){const c=(l==null?void 0:l[e])||a;return f.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[n,t5(s,...t)]}function t5(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const o=n.reduce((l,{useScope:c,scopeName:d})=>{const h=c(a)[`__scope${d}`];return{...l,...h}},{});return f.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}function Mi(e){const t=n5(e),r=f.forwardRef((n,s)=>{const{children:a,...o}=n,l=f.Children.toArray(a),c=l.find(i5);if(c){const d=c.props.children,u=l.map(h=>h===c?f.Children.count(d)>1?f.Children.only(null):f.isValidElement(d)?d.props.children:null:h);return i.jsx(t,{...o,ref:s,children:f.isValidElement(d)?f.cloneElement(d,void 0,u):null})}return i.jsx(t,{...o,ref:s,children:a})});return r.displayName=`${e}.Slot`,r}var r5=Mi("Slot");function n5(e){const t=f.forwardRef((r,n)=>{const{children:s,...a}=r;if(f.isValidElement(s)){const o=o5(s),l=a5(a,s.props);return s.type!==f.Fragment&&(l.ref=n?Cc(n,o):o),f.cloneElement(s,l)}return f.Children.count(s)>1?f.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var XN=Symbol("radix.slottable");function s5(e){const t=({children:r})=>i.jsx(i.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=XN,t}function i5(e){return f.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===XN}function a5(e,t){const r={...t};for(const n in t){const s=e[n],a=t[n];/^on[A-Z]/.test(n)?s&&a?r[n]=(...l)=>{a(...l),s(...l)}:s&&(r[n]=s):n==="style"?r[n]={...s,...a}:n==="className"&&(r[n]=[s,a].filter(Boolean).join(" "))}return{...e,...r}}function o5(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function xh(e){const t=e+"CollectionProvider",[r,n]=Qt(t),[s,a]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=y=>{const{scope:w,children:v}=y,g=es.useRef(null),b=es.useRef(new Map).current;return i.jsx(s,{scope:w,itemMap:b,collectionRef:g,children:v})};o.displayName=t;const l=e+"CollectionSlot",c=Mi(l),d=es.forwardRef((y,w)=>{const{scope:v,children:g}=y,b=a(l,v),j=me(w,b.collectionRef);return i.jsx(c,{ref:j,children:g})});d.displayName=l;const u=e+"CollectionItemSlot",h="data-radix-collection-item",p=Mi(u),m=es.forwardRef((y,w)=>{const{scope:v,children:g,...b}=y,j=es.useRef(null),k=me(w,j),C=a(u,v);return es.useEffect(()=>(C.itemMap.set(j,{ref:j,...b}),()=>void C.itemMap.delete(j))),i.jsx(p,{[h]:"",ref:k,children:g})});m.displayName=u;function x(y){const w=a(e+"CollectionConsumer",y);return es.useCallback(()=>{const g=w.collectionRef.current;if(!g)return[];const b=Array.from(g.querySelectorAll(`[${h}]`));return Array.from(w.itemMap.values()).sort((C,S)=>b.indexOf(C.ref.current)-b.indexOf(S.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:o,Slot:d,ItemSlot:m},x,n]}var l5=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],ie=l5.reduce((e,t)=>{const r=Mi(`Primitive.${t}`),n=f.forwardRef((s,a)=>{const{asChild:o,...l}=s,c=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(c,{...l,ref:a})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function jy(e,t){e&&qs.flushSync(()=>e.dispatchEvent(t))}function Ge(e){const t=f.useRef(e);return f.useEffect(()=>{t.current=e}),f.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function JN(e,t=globalThis==null?void 0:globalThis.document){const r=Ge(e);f.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var c5="DismissableLayer",vm="dismissableLayer.update",d5="dismissableLayer.pointerDownOutside",u5="dismissableLayer.focusOutside",t0,ZN=f.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),bo=f.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...c}=e,d=f.useContext(ZN),[u,h]=f.useState(null),p=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=f.useState({}),x=me(t,S=>h(S)),y=Array.from(d.layers),[w]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),v=y.indexOf(w),g=u?y.indexOf(u):-1,b=d.layersWithOutsidePointerEventsDisabled.size>0,j=g>=v,k=f5(S=>{const _=S.target,P=[...d.branches].some(T=>T.contains(_));!j||P||(s==null||s(S),o==null||o(S),S.defaultPrevented||l==null||l())},p),C=p5(S=>{const _=S.target;[...d.branches].some(T=>T.contains(_))||(a==null||a(S),o==null||o(S),S.defaultPrevented||l==null||l())},p);return JN(S=>{g===d.layers.size-1&&(n==null||n(S),!S.defaultPrevented&&l&&(S.preventDefault(),l()))},p),f.useEffect(()=>{if(u)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(t0=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),r0(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=t0)}},[u,p,r,d]),f.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),r0())},[u,d]),f.useEffect(()=>{const S=()=>m({});return document.addEventListener(vm,S),()=>document.removeEventListener(vm,S)},[]),i.jsx(ie.div,{...c,ref:x,style:{pointerEvents:b?j?"auto":"none":void 0,...e.style},onFocusCapture:K(e.onFocusCapture,C.onFocusCapture),onBlurCapture:K(e.onBlurCapture,C.onBlurCapture),onPointerDownCapture:K(e.onPointerDownCapture,k.onPointerDownCapture)})});bo.displayName=c5;var h5="DismissableLayerBranch",ej=f.forwardRef((e,t)=>{const r=f.useContext(ZN),n=f.useRef(null),s=me(t,n);return f.useEffect(()=>{const a=n.current;if(a)return r.branches.add(a),()=>{r.branches.delete(a)}},[r.branches]),i.jsx(ie.div,{...e,ref:s})});ej.displayName=h5;function f5(e,t=globalThis==null?void 0:globalThis.document){const r=Ge(e),n=f.useRef(!1),s=f.useRef(()=>{});return f.useEffect(()=>{const a=l=>{if(l.target&&!n.current){let c=function(){tj(d5,r,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=c,t.addEventListener("click",s.current,{once:!0})):c()}else t.removeEventListener("click",s.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",a),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function p5(e,t=globalThis==null?void 0:globalThis.document){const r=Ge(e),n=f.useRef(!1);return f.useEffect(()=>{const s=a=>{a.target&&!n.current&&tj(u5,r,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function r0(){const e=new CustomEvent(vm);document.dispatchEvent(e)}function tj(e,t,r,{discrete:n}){const s=r.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?jy(s,a):s.dispatchEvent(a)}var m5=bo,g5=ej,ze=globalThis!=null&&globalThis.document?f.useLayoutEffect:()=>{},y5="Portal",Pc=f.forwardRef((e,t)=>{var l;const{container:r,...n}=e,[s,a]=f.useState(!1);ze(()=>a(!0),[]);const o=r||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?SN.createPortal(i.jsx(ie.div,{...n,ref:t}),o):null});Pc.displayName=y5;function v5(e,t){return f.useReducer((r,n)=>t[r][n]??r,e)}var Hr=e=>{const{present:t,children:r}=e,n=x5(t),s=typeof r=="function"?r({present:n.isPresent}):f.Children.only(r),a=me(n.ref,b5(s));return typeof r=="function"||n.isPresent?f.cloneElement(s,{ref:a}):null};Hr.displayName="Presence";function x5(e){const[t,r]=f.useState(),n=f.useRef({}),s=f.useRef(e),a=f.useRef("none"),o=e?"mounted":"unmounted",[l,c]=v5(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return f.useEffect(()=>{const d=dd(n.current);a.current=l==="mounted"?d:"none"},[l]),ze(()=>{const d=n.current,u=s.current;if(u!==e){const p=a.current,m=dd(d);e?c("MOUNT"):m==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&p!==m?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),ze(()=>{if(t){let d;const u=t.ownerDocument.defaultView??window,h=m=>{const y=dd(n.current).includes(m.animationName);if(m.target===t&&y&&(c("ANIMATION_END"),!s.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",d=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},p=m=>{m.target===t&&(a.current=dd(n.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{u.clearTimeout(d),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:f.useCallback(d=>{d&&(n.current=getComputedStyle(d)),r(d)},[])}}function dd(e){return(e==null?void 0:e.animationName)||"none"}function b5(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function Ls({prop:e,defaultProp:t,onChange:r=()=>{}}){const[n,s]=w5({defaultProp:t,onChange:r}),a=e!==void 0,o=a?e:n,l=Ge(r),c=f.useCallback(d=>{if(a){const h=typeof d=="function"?d(e):d;h!==e&&l(h)}else s(d)},[a,e,s,l]);return[o,c]}function w5({defaultProp:e,onChange:t}){const r=f.useState(e),[n]=r,s=f.useRef(n),a=Ge(t);return f.useEffect(()=>{s.current!==n&&(a(n),s.current=n)},[n,s,a]),r}var N5="VisuallyHidden",Ec=f.forwardRef((e,t)=>i.jsx(ie.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));Ec.displayName=N5;var j5=Ec,Sy="ToastProvider",[ky,S5,k5]=xh("Toast"),[rj,f9]=Qt("Toast",[k5]),[C5,bh]=rj(Sy),nj=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:s="right",swipeThreshold:a=50,children:o}=e,[l,c]=f.useState(null),[d,u]=f.useState(0),h=f.useRef(!1),p=f.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${Sy}\`. Expected non-empty \`string\`.`),i.jsx(ky.Provider,{scope:t,children:i.jsx(C5,{scope:t,label:r,duration:n,swipeDirection:s,swipeThreshold:a,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:f.useCallback(()=>u(m=>m+1),[]),onToastRemove:f.useCallback(()=>u(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:p,children:o})})};nj.displayName=Sy;var sj="ToastViewport",P5=["F8"],xm="toast.viewportPause",bm="toast.viewportResume",ij=f.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=P5,label:s="Notifications ({hotkey})",...a}=e,o=bh(sj,r),l=S5(r),c=f.useRef(null),d=f.useRef(null),u=f.useRef(null),h=f.useRef(null),p=me(t,h,o.onViewportChange),m=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),x=o.toastCount>0;f.useEffect(()=>{const w=v=>{var b;n.length!==0&&n.every(j=>v[j]||v.code===j)&&((b=h.current)==null||b.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[n]),f.useEffect(()=>{const w=c.current,v=h.current;if(x&&w&&v){const g=()=>{if(!o.isClosePausedRef.current){const C=new CustomEvent(xm);v.dispatchEvent(C),o.isClosePausedRef.current=!0}},b=()=>{if(o.isClosePausedRef.current){const C=new CustomEvent(bm);v.dispatchEvent(C),o.isClosePausedRef.current=!1}},j=C=>{!w.contains(C.relatedTarget)&&b()},k=()=>{w.contains(document.activeElement)||b()};return w.addEventListener("focusin",g),w.addEventListener("focusout",j),w.addEventListener("pointermove",g),w.addEventListener("pointerleave",k),window.addEventListener("blur",g),window.addEventListener("focus",b),()=>{w.removeEventListener("focusin",g),w.removeEventListener("focusout",j),w.removeEventListener("pointermove",g),w.removeEventListener("pointerleave",k),window.removeEventListener("blur",g),window.removeEventListener("focus",b)}}},[x,o.isClosePausedRef]);const y=f.useCallback(({tabbingDirection:w})=>{const g=l().map(b=>{const j=b.ref.current,k=[j,...U5(j)];return w==="forwards"?k:k.reverse()});return(w==="forwards"?g.reverse():g).flat()},[l]);return f.useEffect(()=>{const w=h.current;if(w){const v=g=>{var k,C,S;const b=g.altKey||g.ctrlKey||g.metaKey;if(g.key==="Tab"&&!b){const _=document.activeElement,P=g.shiftKey;if(g.target===w&&P){(k=d.current)==null||k.focus();return}const R=y({tabbingDirection:P?"backwards":"forwards"}),M=R.findIndex(I=>I===_);_f(R.slice(M+1))?g.preventDefault():P?(C=d.current)==null||C.focus():(S=u.current)==null||S.focus()}};return w.addEventListener("keydown",v),()=>w.removeEventListener("keydown",v)}},[l,y]),i.jsxs(g5,{ref:c,role:"region","aria-label":s.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:x?void 0:"none"},children:[x&&i.jsx(wm,{ref:d,onFocusFromOutsideViewport:()=>{const w=y({tabbingDirection:"forwards"});_f(w)}}),i.jsx(ky.Slot,{scope:r,children:i.jsx(ie.ol,{tabIndex:-1,...a,ref:p})}),x&&i.jsx(wm,{ref:u,onFocusFromOutsideViewport:()=>{const w=y({tabbingDirection:"backwards"});_f(w)}})]})});ij.displayName=sj;var aj="ToastFocusProxy",wm=f.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...s}=e,a=bh(aj,r);return i.jsx(Ec,{"aria-hidden":!0,tabIndex:0,...s,ref:t,style:{position:"fixed"},onFocus:o=>{var d;const l=o.relatedTarget;!((d=a.viewport)!=null&&d.contains(l))&&n()}})});wm.displayName=aj;var wh="Toast",E5="toast.swipeStart",_5="toast.swipeMove",T5="toast.swipeCancel",R5="toast.swipeEnd",oj=f.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:s,onOpenChange:a,...o}=e,[l=!0,c]=Ls({prop:n,defaultProp:s,onChange:a});return i.jsx(Hr,{present:r||l,children:i.jsx(A5,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:Ge(e.onPause),onResume:Ge(e.onResume),onSwipeStart:K(e.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:K(e.onSwipeMove,d=>{const{x:u,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:K(e.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:K(e.onSwipeEnd,d=>{const{x:u,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});oj.displayName=wh;var[F5,M5]=rj(wh,{onClose(){}}),A5=f.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:s,open:a,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:u,onSwipeMove:h,onSwipeCancel:p,onSwipeEnd:m,...x}=e,y=bh(wh,r),[w,v]=f.useState(null),g=me(t,I=>v(I)),b=f.useRef(null),j=f.useRef(null),k=s||y.duration,C=f.useRef(0),S=f.useRef(k),_=f.useRef(0),{onToastAdd:P,onToastRemove:T}=y,F=Ge(()=>{var H;(w==null?void 0:w.contains(document.activeElement))&&((H=y.viewport)==null||H.focus()),o()}),R=f.useCallback(I=>{!I||I===1/0||(window.clearTimeout(_.current),C.current=new Date().getTime(),_.current=window.setTimeout(F,I))},[F]);f.useEffect(()=>{const I=y.viewport;if(I){const H=()=>{R(S.current),d==null||d()},V=()=>{const Q=new Date().getTime()-C.current;S.current=S.current-Q,window.clearTimeout(_.current),c==null||c()};return I.addEventListener(xm,V),I.addEventListener(bm,H),()=>{I.removeEventListener(xm,V),I.removeEventListener(bm,H)}}},[y.viewport,k,c,d,R]),f.useEffect(()=>{a&&!y.isClosePausedRef.current&&R(k)},[a,k,y.isClosePausedRef,R]),f.useEffect(()=>(P(),()=>T()),[P,T]);const M=f.useMemo(()=>w?pj(w):null,[w]);return y.viewport?i.jsxs(i.Fragment,{children:[M&&i.jsx(I5,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:M}),i.jsx(F5,{scope:r,onClose:F,children:qs.createPortal(i.jsx(ky.ItemSlot,{scope:r,children:i.jsx(m5,{asChild:!0,onEscapeKeyDown:K(l,()=>{y.isFocusedToastEscapeKeyDownRef.current||F(),y.isFocusedToastEscapeKeyDownRef.current=!1}),children:i.jsx(ie.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":y.swipeDirection,...x,ref:g,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:K(e.onKeyDown,I=>{I.key==="Escape"&&(l==null||l(I.nativeEvent),I.nativeEvent.defaultPrevented||(y.isFocusedToastEscapeKeyDownRef.current=!0,F()))}),onPointerDown:K(e.onPointerDown,I=>{I.button===0&&(b.current={x:I.clientX,y:I.clientY})}),onPointerMove:K(e.onPointerMove,I=>{if(!b.current)return;const H=I.clientX-b.current.x,V=I.clientY-b.current.y,Q=!!j.current,A=["left","right"].includes(y.swipeDirection),L=["left","up"].includes(y.swipeDirection)?Math.min:Math.max,G=A?L(0,H):0,B=A?0:L(0,V),X=I.pointerType==="touch"?10:2,ye={x:G,y:B},fe={originalEvent:I,delta:ye};Q?(j.current=ye,ud(_5,h,fe,{discrete:!1})):n0(ye,y.swipeDirection,X)?(j.current=ye,ud(E5,u,fe,{discrete:!1}),I.target.setPointerCapture(I.pointerId)):(Math.abs(H)>X||Math.abs(V)>X)&&(b.current=null)}),onPointerUp:K(e.onPointerUp,I=>{const H=j.current,V=I.target;if(V.hasPointerCapture(I.pointerId)&&V.releasePointerCapture(I.pointerId),j.current=null,b.current=null,H){const Q=I.currentTarget,A={originalEvent:I,delta:H};n0(H,y.swipeDirection,y.swipeThreshold)?ud(R5,m,A,{discrete:!0}):ud(T5,p,A,{discrete:!0}),Q.addEventListener("click",L=>L.preventDefault(),{once:!0})}})})})}),y.viewport)})]}):null}),I5=e=>{const{__scopeToast:t,children:r,...n}=e,s=bh(wh,t),[a,o]=f.useState(!1),[l,c]=f.useState(!1);return L5(()=>o(!0)),f.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:i.jsx(Pc,{asChild:!0,children:i.jsx(Ec,{...n,children:a&&i.jsxs(i.Fragment,{children:[s.label," ",r]})})})},O5="ToastTitle",lj=f.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return i.jsx(ie.div,{...n,ref:t})});lj.displayName=O5;var D5="ToastDescription",cj=f.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return i.jsx(ie.div,{...n,ref:t})});cj.displayName=D5;var dj="ToastAction",uj=f.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?i.jsx(fj,{altText:r,asChild:!0,children:i.jsx(Cy,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${dj}\`. Expected non-empty \`string\`.`),null)});uj.displayName=dj;var hj="ToastClose",Cy=f.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,s=M5(hj,r);return i.jsx(fj,{asChild:!0,children:i.jsx(ie.button,{type:"button",...n,ref:t,onClick:K(e.onClick,s.onClose)})})});Cy.displayName=hj;var fj=f.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...s}=e;return i.jsx(ie.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...s,ref:t})});function pj(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),$5(n)){const s=n.ariaHidden||n.hidden||n.style.display==="none",a=n.dataset.radixToastAnnounceExclude==="";if(!s)if(a){const o=n.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...pj(n))}}),t}function ud(e,t,r,{discrete:n}){const s=r.originalEvent.currentTarget,a=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?jy(s,a):s.dispatchEvent(a)}var n0=(e,t,r=0)=>{const n=Math.abs(e.x),s=Math.abs(e.y),a=n>s;return t==="left"||t==="right"?a&&n>r:!a&&s>r};function L5(e=()=>{}){const t=Ge(e);ze(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function $5(e){return e.nodeType===e.ELEMENT_NODE}function U5(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function _f(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var z5=nj,mj=ij,gj=oj,yj=lj,vj=cj,xj=uj,bj=Cy;function wj(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=wj(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Nj(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=wj(e))&&(n&&(n+=" "),n+=t);return n}const s0=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,i0=Nj,_c=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return i0(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:a}=t,o=Object.keys(s).map(d=>{const u=r==null?void 0:r[d],h=a==null?void 0:a[d];if(u===null)return null;const p=s0(u)||s0(h);return s[d][p]}),l=r&&Object.entries(r).reduce((d,u)=>{let[h,p]=u;return p===void 0||(d[h]=p),d},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((d,u)=>{let{class:h,className:p,...m}=u;return Object.entries(m).every(x=>{let[y,w]=x;return Array.isArray(w)?w.includes({...a,...l}[y]):{...a,...l}[y]===w})?[...d,h,p]:d},[]);return i0(e,o,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B5=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),jj=(...e)=>e.filter((t,r,n)=>!!t&&n.indexOf(t)===r).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var V5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H5=f.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:a,iconNode:o,...l},c)=>f.createElement("svg",{ref:c,...V5,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:jj("lucide",s),...l},[...o.map(([d,u])=>f.createElement(d,u)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=(e,t)=>{const r=f.forwardRef(({className:n,...s},a)=>f.createElement(H5,{ref:a,iconNode:t,className:jj(`lucide-${B5(e)}`,n),...s}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W5=J("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q5=J("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sj=J("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=J("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K5=J("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G5=J("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tc=J("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Py=J("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q5=J("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kj=J("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y5=J("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fl=J("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=J("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a0=J("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X5=J("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J5=J("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z5=J("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=J("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const co=J("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=J("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eR=J("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ol=J("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dl=J("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tR=J("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rR=J("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nm=J("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nR=J("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sR=J("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=J("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iR=J("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aR=J("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jm=J("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oR=J("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ey=J("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lR=J("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ll=J("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cR=J("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dR=J("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=J("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nh=J("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uR=J("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hR=J("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ej=J("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eu=J("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fR=J("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _j=J("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sm=J("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const In=J("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pR=J("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mR=J("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tj=J("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=J("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _u=J("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=J("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gR=J("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yR=J("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o0=J("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=J("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const km=J("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=J("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fj=J("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $r=J("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Ty="-",vR=e=>{const t=bR(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{const l=o.split(Ty);return l[0]===""&&l.length!==1&&l.shift(),Mj(l,t)||xR(o)},getConflictingClassGroupIds:(o,l)=>{const c=r[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},Mj=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),s=n?Mj(e.slice(1),n):void 0;if(s)return s;if(t.validators.length===0)return;const a=e.join(Ty);return(o=t.validators.find(({validator:l})=>l(a)))==null?void 0:o.classGroupId},l0=/^\[(.+)\]$/,xR=e=>{if(l0.test(e)){const t=l0.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},bR=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return NR(Object.entries(e.classGroups),r).forEach(([a,o])=>{Cm(o,n,a,t)}),n},Cm=(e,t,r,n)=>{e.forEach(s=>{if(typeof s=="string"){const a=s===""?t:c0(t,s);a.classGroupId=r;return}if(typeof s=="function"){if(wR(s)){Cm(s(n),t,r,n);return}t.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([a,o])=>{Cm(o,c0(t,a),r,n)})})},c0=(e,t)=>{let r=e;return t.split(Ty).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},wR=e=>e.isThemeGetter,NR=(e,t)=>t?e.map(([r,n])=>{const s=n.map(a=>typeof a=="string"?t+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,l])=>[t+o,l])):a);return[r,s]}):e,jR=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const s=(a,o)=>{r.set(a,o),t++,t>e&&(t=0,n=r,r=new Map)};return{get(a){let o=r.get(a);if(o!==void 0)return o;if((o=n.get(a))!==void 0)return s(a,o),o},set(a,o){r.has(a)?r.set(a,o):s(a,o)}}},Aj="!",SR=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,s=t[0],a=t.length,o=l=>{const c=[];let d=0,u=0,h;for(let w=0;w<l.length;w++){let v=l[w];if(d===0){if(v===s&&(n||l.slice(w,w+a)===t)){c.push(l.slice(u,w)),u=w+a;continue}if(v==="/"){h=w;continue}}v==="["?d++:v==="]"&&d--}const p=c.length===0?l:l.substring(u),m=p.startsWith(Aj),x=m?p.substring(1):p,y=h&&h>u?h-u:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:x,maybePostfixModifierPosition:y}};return r?l=>r({className:l,parseClassName:o}):o},kR=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},CR=e=>({cache:jR(e.cacheSize),parseClassName:SR(e),...vR(e)}),PR=/\s+/,ER=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=t,a=[],o=e.trim().split(PR);let l="";for(let c=o.length-1;c>=0;c-=1){const d=o[c],{modifiers:u,hasImportantModifier:h,baseClassName:p,maybePostfixModifierPosition:m}=r(d);let x=!!m,y=n(x?p.substring(0,m):p);if(!y){if(!x){l=d+(l.length>0?" "+l:l);continue}if(y=n(p),!y){l=d+(l.length>0?" "+l:l);continue}x=!1}const w=kR(u).join(":"),v=h?w+Aj:w,g=v+y;if(a.includes(g))continue;a.push(g);const b=s(y,x);for(let j=0;j<b.length;++j){const k=b[j];a.push(v+k)}l=d+(l.length>0?" "+l:l)}return l};function _R(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=Ij(t))&&(n&&(n+=" "),n+=r);return n}const Ij=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=Ij(e[n]))&&(r&&(r+=" "),r+=t);return r};function TR(e,...t){let r,n,s,a=o;function o(c){const d=t.reduce((u,h)=>h(u),e());return r=CR(d),n=r.cache.get,s=r.cache.set,a=l,l(c)}function l(c){const d=n(c);if(d)return d;const u=ER(c,r);return s(c,u),u}return function(){return a(_R.apply(null,arguments))}}const Me=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},Oj=/^\[(?:([a-z-]+):)?(.+)\]$/i,RR=/^\d+\/\d+$/,FR=new Set(["px","full","screen"]),MR=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,AR=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,IR=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,OR=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,DR=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,xn=e=>xa(e)||FR.has(e)||RR.test(e),Jn=e=>wo(e,"length",WR),xa=e=>!!e&&!Number.isNaN(Number(e)),Tf=e=>wo(e,"number",xa),Oo=e=>!!e&&Number.isInteger(Number(e)),LR=e=>e.endsWith("%")&&xa(e.slice(0,-1)),de=e=>Oj.test(e),Zn=e=>MR.test(e),$R=new Set(["length","size","percentage"]),UR=e=>wo(e,$R,Dj),zR=e=>wo(e,"position",Dj),BR=new Set(["image","url"]),VR=e=>wo(e,BR,KR),HR=e=>wo(e,"",qR),Do=()=>!0,wo=(e,t,r)=>{const n=Oj.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},WR=e=>AR.test(e)&&!IR.test(e),Dj=()=>!1,qR=e=>OR.test(e),KR=e=>DR.test(e),GR=()=>{const e=Me("colors"),t=Me("spacing"),r=Me("blur"),n=Me("brightness"),s=Me("borderColor"),a=Me("borderRadius"),o=Me("borderSpacing"),l=Me("borderWidth"),c=Me("contrast"),d=Me("grayscale"),u=Me("hueRotate"),h=Me("invert"),p=Me("gap"),m=Me("gradientColorStops"),x=Me("gradientColorStopPositions"),y=Me("inset"),w=Me("margin"),v=Me("opacity"),g=Me("padding"),b=Me("saturate"),j=Me("scale"),k=Me("sepia"),C=Me("skew"),S=Me("space"),_=Me("translate"),P=()=>["auto","contain","none"],T=()=>["auto","hidden","clip","visible","scroll"],F=()=>["auto",de,t],R=()=>[de,t],M=()=>["",xn,Jn],I=()=>["auto",xa,de],H=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],V=()=>["solid","dashed","dotted","double","none"],Q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],A=()=>["start","end","center","between","around","evenly","stretch"],L=()=>["","0",de],G=()=>["auto","avoid","all","avoid-page","page","left","right","column"],B=()=>[xa,de];return{cacheSize:500,separator:":",theme:{colors:[Do],spacing:[xn,Jn],blur:["none","",Zn,de],brightness:B(),borderColor:[e],borderRadius:["none","","full",Zn,de],borderSpacing:R(),borderWidth:M(),contrast:B(),grayscale:L(),hueRotate:B(),invert:L(),gap:R(),gradientColorStops:[e],gradientColorStopPositions:[LR,Jn],inset:F(),margin:F(),opacity:B(),padding:R(),saturate:B(),scale:B(),sepia:L(),skew:B(),space:R(),translate:R()},classGroups:{aspect:[{aspect:["auto","square","video",de]}],container:["container"],columns:[{columns:[Zn]}],"break-after":[{"break-after":G()}],"break-before":[{"break-before":G()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...H(),de]}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Oo,de]}],basis:[{basis:F()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",de]}],grow:[{grow:L()}],shrink:[{shrink:L()}],order:[{order:["first","last","none",Oo,de]}],"grid-cols":[{"grid-cols":[Do]}],"col-start-end":[{col:["auto",{span:["full",Oo,de]},de]}],"col-start":[{"col-start":I()}],"col-end":[{"col-end":I()}],"grid-rows":[{"grid-rows":[Do]}],"row-start-end":[{row:["auto",{span:[Oo,de]},de]}],"row-start":[{"row-start":I()}],"row-end":[{"row-end":I()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",de]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",de]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...A()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...A(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...A(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[g]}],px:[{px:[g]}],py:[{py:[g]}],ps:[{ps:[g]}],pe:[{pe:[g]}],pt:[{pt:[g]}],pr:[{pr:[g]}],pb:[{pb:[g]}],pl:[{pl:[g]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",de,t]}],"min-w":[{"min-w":[de,t,"min","max","fit"]}],"max-w":[{"max-w":[de,t,"none","full","min","max","fit","prose",{screen:[Zn]},Zn]}],h:[{h:[de,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[de,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[de,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[de,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Zn,Jn]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Tf]}],"font-family":[{font:[Do]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",de]}],"line-clamp":[{"line-clamp":["none",xa,Tf]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",xn,de]}],"list-image":[{"list-image":["none",de]}],"list-style-type":[{list:["none","disc","decimal",de]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...V(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",xn,Jn]}],"underline-offset":[{"underline-offset":["auto",xn,de]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",de]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",de]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...H(),zR]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",UR]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},VR]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...V(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:V()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...V()]}],"outline-offset":[{"outline-offset":[xn,de]}],"outline-w":[{outline:[xn,Jn]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:M()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[xn,Jn]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Zn,HR]}],"shadow-color":[{shadow:[Do]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...Q(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Q()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Zn,de]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[b]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",de]}],duration:[{duration:B()}],ease:[{ease:["linear","in","out","in-out",de]}],delay:[{delay:B()}],animate:[{animate:["none","spin","ping","pulse","bounce",de]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[Oo,de]}],"translate-x":[{"translate-x":[_]}],"translate-y":[{"translate-y":[_]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",de]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",de]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",de]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[xn,Jn,Tf]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},QR=TR(GR);function re(...e){return QR(Nj(e))}const YR=z5,Lj=f.forwardRef(({className:e,...t},r)=>i.jsx(mj,{ref:r,className:re("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px] opacity-0 invisible pointer-events-none",e),...t}));Lj.displayName=mj.displayName;const XR=_c("group pointer-events-none relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full opacity-0 invisible",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),$j=f.forwardRef(({className:e,variant:t,...r},n)=>i.jsx(gj,{ref:n,className:re(XR({variant:t}),e),...r}));$j.displayName=gj.displayName;const JR=f.forwardRef(({className:e,...t},r)=>i.jsx(xj,{ref:r,className:re("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));JR.displayName=xj.displayName;const Uj=f.forwardRef(({className:e,...t},r)=>i.jsx(bj,{ref:r,className:re("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:i.jsx($r,{className:"h-4 w-4"})}));Uj.displayName=bj.displayName;const zj=f.forwardRef(({className:e,...t},r)=>i.jsx(yj,{ref:r,className:re("text-sm font-semibold",e),...t}));zj.displayName=yj.displayName;const Bj=f.forwardRef(({className:e,...t},r)=>i.jsx(vj,{ref:r,className:re("text-sm opacity-90",e),...t}));Bj.displayName=vj.displayName;function Rf(){const{toasts:e}=ke();return i.jsxs(YR,{children:[e.map(function({id:t,title:r,description:n,action:s,...a}){return i.jsxs($j,{...a,children:[i.jsxs("div",{className:"grid gap-1",children:[r&&i.jsx(zj,{children:r}),n&&i.jsx(Bj,{children:n})]}),s,i.jsx(Uj,{})]},t)}),i.jsx(Lj,{})]})}var ZR=Cg[" useId ".trim().toString()]||(()=>{}),e3=0;function Dr(e){const[t,r]=f.useState(ZR());return ze(()=>{e||r(n=>n??String(e3++))},[e]),e||(t?`radix-${t}`:"")}const t3=["top","right","bottom","left"],$s=Math.min,zt=Math.max,Tu=Math.round,hd=Math.floor,fn=e=>({x:e,y:e}),r3={left:"right",right:"left",bottom:"top",top:"bottom"},n3={start:"end",end:"start"};function Pm(e,t,r){return zt(e,$s(t,r))}function Vn(e,t){return typeof e=="function"?e(t):e}function Hn(e){return e.split("-")[0]}function No(e){return e.split("-")[1]}function Ry(e){return e==="x"?"y":"x"}function Fy(e){return e==="y"?"height":"width"}function Us(e){return["top","bottom"].includes(Hn(e))?"y":"x"}function My(e){return Ry(Us(e))}function s3(e,t,r){r===void 0&&(r=!1);const n=No(e),s=My(e),a=Fy(s);let o=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(o=Ru(o)),[o,Ru(o)]}function i3(e){const t=Ru(e);return[Em(e),t,Em(t)]}function Em(e){return e.replace(/start|end/g,t=>n3[t])}function a3(e,t,r){const n=["left","right"],s=["right","left"],a=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return r?t?s:n:t?n:s;case"left":case"right":return t?a:o;default:return[]}}function o3(e,t,r,n){const s=No(e);let a=a3(Hn(e),r==="start",n);return s&&(a=a.map(o=>o+"-"+s),t&&(a=a.concat(a.map(Em)))),a}function Ru(e){return e.replace(/left|right|bottom|top/g,t=>r3[t])}function l3(e){return{top:0,right:0,bottom:0,left:0,...e}}function Vj(e){return typeof e!="number"?l3(e):{top:e,right:e,bottom:e,left:e}}function Fu(e){const{x:t,y:r,width:n,height:s}=e;return{width:n,height:s,top:r,left:t,right:t+n,bottom:r+s,x:t,y:r}}function d0(e,t,r){let{reference:n,floating:s}=e;const a=Us(t),o=My(t),l=Fy(o),c=Hn(t),d=a==="y",u=n.x+n.width/2-s.width/2,h=n.y+n.height/2-s.height/2,p=n[l]/2-s[l]/2;let m;switch(c){case"top":m={x:u,y:n.y-s.height};break;case"bottom":m={x:u,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:h};break;case"left":m={x:n.x-s.width,y:h};break;default:m={x:n.x,y:n.y}}switch(No(t)){case"start":m[o]-=p*(r&&d?-1:1);break;case"end":m[o]+=p*(r&&d?-1:1);break}return m}const c3=async(e,t,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:a=[],platform:o}=r,l=a.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let d=await o.getElementRects({reference:e,floating:t,strategy:s}),{x:u,y:h}=d0(d,n,c),p=n,m={},x=0;for(let y=0;y<l.length;y++){const{name:w,fn:v}=l[y],{x:g,y:b,data:j,reset:k}=await v({x:u,y:h,initialPlacement:n,placement:p,strategy:s,middlewareData:m,rects:d,platform:o,elements:{reference:e,floating:t}});u=g??u,h=b??h,m={...m,[w]:{...m[w],...j}},k&&x<=50&&(x++,typeof k=="object"&&(k.placement&&(p=k.placement),k.rects&&(d=k.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:s}):k.rects),{x:u,y:h}=d0(d,p,c)),y=-1)}return{x:u,y:h,placement:p,strategy:s,middlewareData:m}};async function $l(e,t){var r;t===void 0&&(t={});const{x:n,y:s,platform:a,rects:o,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:p=!1,padding:m=0}=Vn(t,e),x=Vj(m),w=l[p?h==="floating"?"reference":"floating":h],v=Fu(await a.getClippingRect({element:(r=await(a.isElement==null?void 0:a.isElement(w)))==null||r?w:w.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:d,rootBoundary:u,strategy:c})),g=h==="floating"?{x:n,y:s,width:o.floating.width,height:o.floating.height}:o.reference,b=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),j=await(a.isElement==null?void 0:a.isElement(b))?await(a.getScale==null?void 0:a.getScale(b))||{x:1,y:1}:{x:1,y:1},k=Fu(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:g,offsetParent:b,strategy:c}):g);return{top:(v.top-k.top+x.top)/j.y,bottom:(k.bottom-v.bottom+x.bottom)/j.y,left:(v.left-k.left+x.left)/j.x,right:(k.right-v.right+x.right)/j.x}}const d3=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:s,rects:a,platform:o,elements:l,middlewareData:c}=t,{element:d,padding:u=0}=Vn(e,t)||{};if(d==null)return{};const h=Vj(u),p={x:r,y:n},m=My(s),x=Fy(m),y=await o.getDimensions(d),w=m==="y",v=w?"top":"left",g=w?"bottom":"right",b=w?"clientHeight":"clientWidth",j=a.reference[x]+a.reference[m]-p[m]-a.floating[x],k=p[m]-a.reference[m],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let S=C?C[b]:0;(!S||!await(o.isElement==null?void 0:o.isElement(C)))&&(S=l.floating[b]||a.floating[x]);const _=j/2-k/2,P=S/2-y[x]/2-1,T=$s(h[v],P),F=$s(h[g],P),R=T,M=S-y[x]-F,I=S/2-y[x]/2+_,H=Pm(R,I,M),V=!c.arrow&&No(s)!=null&&I!==H&&a.reference[x]/2-(I<R?T:F)-y[x]/2<0,Q=V?I<R?I-R:I-M:0;return{[m]:p[m]+Q,data:{[m]:H,centerOffset:I-H-Q,...V&&{alignmentOffset:Q}},reset:V}}}),u3=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:s,middlewareData:a,rects:o,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:y=!0,...w}=Vn(e,t);if((r=a.arrow)!=null&&r.alignmentOffset)return{};const v=Hn(s),g=Us(l),b=Hn(l)===l,j=await(c.isRTL==null?void 0:c.isRTL(d.floating)),k=p||(b||!y?[Ru(l)]:i3(l)),C=x!=="none";!p&&C&&k.push(...o3(l,y,x,j));const S=[l,...k],_=await $l(t,w),P=[];let T=((n=a.flip)==null?void 0:n.overflows)||[];if(u&&P.push(_[v]),h){const I=s3(s,o,j);P.push(_[I[0]],_[I[1]])}if(T=[...T,{placement:s,overflows:P}],!P.every(I=>I<=0)){var F,R;const I=(((F=a.flip)==null?void 0:F.index)||0)+1,H=S[I];if(H)return{data:{index:I,overflows:T},reset:{placement:H}};let V=(R=T.filter(Q=>Q.overflows[0]<=0).sort((Q,A)=>Q.overflows[1]-A.overflows[1])[0])==null?void 0:R.placement;if(!V)switch(m){case"bestFit":{var M;const Q=(M=T.filter(A=>{if(C){const L=Us(A.placement);return L===g||L==="y"}return!0}).map(A=>[A.placement,A.overflows.filter(L=>L>0).reduce((L,G)=>L+G,0)]).sort((A,L)=>A[1]-L[1])[0])==null?void 0:M[0];Q&&(V=Q);break}case"initialPlacement":V=l;break}if(s!==V)return{reset:{placement:V}}}return{}}}};function u0(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function h0(e){return t3.some(t=>e[t]>=0)}const h3=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...s}=Vn(e,t);switch(n){case"referenceHidden":{const a=await $l(t,{...s,elementContext:"reference"}),o=u0(a,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:h0(o)}}}case"escaped":{const a=await $l(t,{...s,altBoundary:!0}),o=u0(a,r.floating);return{data:{escapedOffsets:o,escaped:h0(o)}}}default:return{}}}}};async function f3(e,t){const{placement:r,platform:n,elements:s}=e,a=await(n.isRTL==null?void 0:n.isRTL(s.floating)),o=Hn(r),l=No(r),c=Us(r)==="y",d=["left","top"].includes(o)?-1:1,u=a&&c?-1:1,h=Vn(t,e);let{mainAxis:p,crossAxis:m,alignmentAxis:x}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof x=="number"&&(m=l==="end"?x*-1:x),c?{x:m*u,y:p*d}:{x:p*d,y:m*u}}const p3=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:s,y:a,placement:o,middlewareData:l}=t,c=await f3(t,e);return o===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:s+c.x,y:a+c.y,data:{...c,placement:o}}}}},m3=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:s}=t,{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:w=>{let{x:v,y:g}=w;return{x:v,y:g}}},...c}=Vn(e,t),d={x:r,y:n},u=await $l(t,c),h=Us(Hn(s)),p=Ry(h);let m=d[p],x=d[h];if(a){const w=p==="y"?"top":"left",v=p==="y"?"bottom":"right",g=m+u[w],b=m-u[v];m=Pm(g,m,b)}if(o){const w=h==="y"?"top":"left",v=h==="y"?"bottom":"right",g=x+u[w],b=x-u[v];x=Pm(g,x,b)}const y=l.fn({...t,[p]:m,[h]:x});return{...y,data:{x:y.x-r,y:y.y-n,enabled:{[p]:a,[h]:o}}}}}},g3=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:s,rects:a,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=Vn(e,t),u={x:r,y:n},h=Us(s),p=Ry(h);let m=u[p],x=u[h];const y=Vn(l,t),w=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(c){const b=p==="y"?"height":"width",j=a.reference[p]-a.floating[b]+w.mainAxis,k=a.reference[p]+a.reference[b]-w.mainAxis;m<j?m=j:m>k&&(m=k)}if(d){var v,g;const b=p==="y"?"width":"height",j=["top","left"].includes(Hn(s)),k=a.reference[h]-a.floating[b]+(j&&((v=o.offset)==null?void 0:v[h])||0)+(j?0:w.crossAxis),C=a.reference[h]+a.reference[b]+(j?0:((g=o.offset)==null?void 0:g[h])||0)-(j?w.crossAxis:0);x<k?x=k:x>C&&(x=C)}return{[p]:m,[h]:x}}}},y3=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:s,rects:a,platform:o,elements:l}=t,{apply:c=()=>{},...d}=Vn(e,t),u=await $l(t,d),h=Hn(s),p=No(s),m=Us(s)==="y",{width:x,height:y}=a.floating;let w,v;h==="top"||h==="bottom"?(w=h,v=p===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(v=h,w=p==="end"?"top":"bottom");const g=y-u.top-u.bottom,b=x-u.left-u.right,j=$s(y-u[w],g),k=$s(x-u[v],b),C=!t.middlewareData.shift;let S=j,_=k;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(_=b),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(S=g),C&&!p){const T=zt(u.left,0),F=zt(u.right,0),R=zt(u.top,0),M=zt(u.bottom,0);m?_=x-2*(T!==0||F!==0?T+F:zt(u.left,u.right)):S=y-2*(R!==0||M!==0?R+M:zt(u.top,u.bottom))}await c({...t,availableWidth:_,availableHeight:S});const P=await o.getDimensions(l.floating);return x!==P.width||y!==P.height?{reset:{rects:!0}}:{}}}};function jh(){return typeof window<"u"}function jo(e){return Hj(e)?(e.nodeName||"").toLowerCase():"#document"}function Ht(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function vn(e){var t;return(t=(Hj(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Hj(e){return jh()?e instanceof Node||e instanceof Ht(e).Node:!1}function Ur(e){return jh()?e instanceof Element||e instanceof Ht(e).Element:!1}function mn(e){return jh()?e instanceof HTMLElement||e instanceof Ht(e).HTMLElement:!1}function f0(e){return!jh()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Ht(e).ShadowRoot}function Rc(e){const{overflow:t,overflowX:r,overflowY:n,display:s}=zr(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(s)}function v3(e){return["table","td","th"].includes(jo(e))}function Sh(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Ay(e){const t=Iy(),r=Ur(e)?zr(e):e;return["transform","translate","scale","rotate","perspective"].some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function x3(e){let t=zs(e);for(;mn(t)&&!uo(t);){if(Ay(t))return t;if(Sh(t))return null;t=zs(t)}return null}function Iy(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function uo(e){return["html","body","#document"].includes(jo(e))}function zr(e){return Ht(e).getComputedStyle(e)}function kh(e){return Ur(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function zs(e){if(jo(e)==="html")return e;const t=e.assignedSlot||e.parentNode||f0(e)&&e.host||vn(e);return f0(t)?t.host:t}function Wj(e){const t=zs(e);return uo(t)?e.ownerDocument?e.ownerDocument.body:e.body:mn(t)&&Rc(t)?t:Wj(t)}function Ul(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const s=Wj(e),a=s===((n=e.ownerDocument)==null?void 0:n.body),o=Ht(s);if(a){const l=_m(o);return t.concat(o,o.visualViewport||[],Rc(s)?s:[],l&&r?Ul(l):[])}return t.concat(s,Ul(s,[],r))}function _m(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function qj(e){const t=zr(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const s=mn(e),a=s?e.offsetWidth:r,o=s?e.offsetHeight:n,l=Tu(r)!==a||Tu(n)!==o;return l&&(r=a,n=o),{width:r,height:n,$:l}}function Oy(e){return Ur(e)?e:e.contextElement}function ba(e){const t=Oy(e);if(!mn(t))return fn(1);const r=t.getBoundingClientRect(),{width:n,height:s,$:a}=qj(t);let o=(a?Tu(r.width):r.width)/n,l=(a?Tu(r.height):r.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const b3=fn(0);function Kj(e){const t=Ht(e);return!Iy()||!t.visualViewport?b3:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function w3(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==Ht(e)?!1:t}function Ai(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const s=e.getBoundingClientRect(),a=Oy(e);let o=fn(1);t&&(n?Ur(n)&&(o=ba(n)):o=ba(e));const l=w3(a,r,n)?Kj(a):fn(0);let c=(s.left+l.x)/o.x,d=(s.top+l.y)/o.y,u=s.width/o.x,h=s.height/o.y;if(a){const p=Ht(a),m=n&&Ur(n)?Ht(n):n;let x=p,y=_m(x);for(;y&&n&&m!==x;){const w=ba(y),v=y.getBoundingClientRect(),g=zr(y),b=v.left+(y.clientLeft+parseFloat(g.paddingLeft))*w.x,j=v.top+(y.clientTop+parseFloat(g.paddingTop))*w.y;c*=w.x,d*=w.y,u*=w.x,h*=w.y,c+=b,d+=j,x=Ht(y),y=_m(x)}}return Fu({width:u,height:h,x:c,y:d})}function Dy(e,t){const r=kh(e).scrollLeft;return t?t.left+r:Ai(vn(e)).left+r}function Gj(e,t,r){r===void 0&&(r=!1);const n=e.getBoundingClientRect(),s=n.left+t.scrollLeft-(r?0:Dy(e,n)),a=n.top+t.scrollTop;return{x:s,y:a}}function N3(e){let{elements:t,rect:r,offsetParent:n,strategy:s}=e;const a=s==="fixed",o=vn(n),l=t?Sh(t.floating):!1;if(n===o||l&&a)return r;let c={scrollLeft:0,scrollTop:0},d=fn(1);const u=fn(0),h=mn(n);if((h||!h&&!a)&&((jo(n)!=="body"||Rc(o))&&(c=kh(n)),mn(n))){const m=Ai(n);d=ba(n),u.x=m.x+n.clientLeft,u.y=m.y+n.clientTop}const p=o&&!h&&!a?Gj(o,c,!0):fn(0);return{width:r.width*d.x,height:r.height*d.y,x:r.x*d.x-c.scrollLeft*d.x+u.x+p.x,y:r.y*d.y-c.scrollTop*d.y+u.y+p.y}}function j3(e){return Array.from(e.getClientRects())}function S3(e){const t=vn(e),r=kh(e),n=e.ownerDocument.body,s=zt(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),a=zt(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+Dy(e);const l=-r.scrollTop;return zr(n).direction==="rtl"&&(o+=zt(t.clientWidth,n.clientWidth)-s),{width:s,height:a,x:o,y:l}}function k3(e,t){const r=Ht(e),n=vn(e),s=r.visualViewport;let a=n.clientWidth,o=n.clientHeight,l=0,c=0;if(s){a=s.width,o=s.height;const d=Iy();(!d||d&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:a,height:o,x:l,y:c}}function C3(e,t){const r=Ai(e,!0,t==="fixed"),n=r.top+e.clientTop,s=r.left+e.clientLeft,a=mn(e)?ba(e):fn(1),o=e.clientWidth*a.x,l=e.clientHeight*a.y,c=s*a.x,d=n*a.y;return{width:o,height:l,x:c,y:d}}function p0(e,t,r){let n;if(t==="viewport")n=k3(e,r);else if(t==="document")n=S3(vn(e));else if(Ur(t))n=C3(t,r);else{const s=Kj(e);n={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return Fu(n)}function Qj(e,t){const r=zs(e);return r===t||!Ur(r)||uo(r)?!1:zr(r).position==="fixed"||Qj(r,t)}function P3(e,t){const r=t.get(e);if(r)return r;let n=Ul(e,[],!1).filter(l=>Ur(l)&&jo(l)!=="body"),s=null;const a=zr(e).position==="fixed";let o=a?zs(e):e;for(;Ur(o)&&!uo(o);){const l=zr(o),c=Ay(o);!c&&l.position==="fixed"&&(s=null),(a?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Rc(o)&&!c&&Qj(e,o))?n=n.filter(u=>u!==o):s=l,o=zs(o)}return t.set(e,n),n}function E3(e){let{element:t,boundary:r,rootBoundary:n,strategy:s}=e;const o=[...r==="clippingAncestors"?Sh(t)?[]:P3(t,this._c):[].concat(r),n],l=o[0],c=o.reduce((d,u)=>{const h=p0(t,u,s);return d.top=zt(h.top,d.top),d.right=$s(h.right,d.right),d.bottom=$s(h.bottom,d.bottom),d.left=zt(h.left,d.left),d},p0(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function _3(e){const{width:t,height:r}=qj(e);return{width:t,height:r}}function T3(e,t,r){const n=mn(t),s=vn(t),a=r==="fixed",o=Ai(e,!0,a,t);let l={scrollLeft:0,scrollTop:0};const c=fn(0);if(n||!n&&!a)if((jo(t)!=="body"||Rc(s))&&(l=kh(t)),n){const p=Ai(t,!0,a,t);c.x=p.x+t.clientLeft,c.y=p.y+t.clientTop}else s&&(c.x=Dy(s));const d=s&&!n&&!a?Gj(s,l):fn(0),u=o.left+l.scrollLeft-c.x-d.x,h=o.top+l.scrollTop-c.y-d.y;return{x:u,y:h,width:o.width,height:o.height}}function Ff(e){return zr(e).position==="static"}function m0(e,t){if(!mn(e)||zr(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return vn(e)===r&&(r=r.ownerDocument.body),r}function Yj(e,t){const r=Ht(e);if(Sh(e))return r;if(!mn(e)){let s=zs(e);for(;s&&!uo(s);){if(Ur(s)&&!Ff(s))return s;s=zs(s)}return r}let n=m0(e,t);for(;n&&v3(n)&&Ff(n);)n=m0(n,t);return n&&uo(n)&&Ff(n)&&!Ay(n)?r:n||x3(e)||r}const R3=async function(e){const t=this.getOffsetParent||Yj,r=this.getDimensions,n=await r(e.floating);return{reference:T3(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function F3(e){return zr(e).direction==="rtl"}const M3={convertOffsetParentRelativeRectToViewportRelativeRect:N3,getDocumentElement:vn,getClippingRect:E3,getOffsetParent:Yj,getElementRects:R3,getClientRects:j3,getDimensions:_3,getScale:ba,isElement:Ur,isRTL:F3};function Xj(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function A3(e,t){let r=null,n;const s=vn(e);function a(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const d=e.getBoundingClientRect(),{left:u,top:h,width:p,height:m}=d;if(l||t(),!p||!m)return;const x=hd(h),y=hd(s.clientWidth-(u+p)),w=hd(s.clientHeight-(h+m)),v=hd(u),b={rootMargin:-x+"px "+-y+"px "+-w+"px "+-v+"px",threshold:zt(0,$s(1,c))||1};let j=!0;function k(C){const S=C[0].intersectionRatio;if(S!==c){if(!j)return o();S?o(!1,S):n=setTimeout(()=>{o(!1,1e-7)},1e3)}S===1&&!Xj(d,e.getBoundingClientRect())&&o(),j=!1}try{r=new IntersectionObserver(k,{...b,root:s.ownerDocument})}catch{r=new IntersectionObserver(k,b)}r.observe(e)}return o(!0),a}function I3(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,d=Oy(e),u=s||a?[...d?Ul(d):[],...Ul(t)]:[];u.forEach(v=>{s&&v.addEventListener("scroll",r,{passive:!0}),a&&v.addEventListener("resize",r)});const h=d&&l?A3(d,r):null;let p=-1,m=null;o&&(m=new ResizeObserver(v=>{let[g]=v;g&&g.target===d&&m&&(m.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var b;(b=m)==null||b.observe(t)})),r()}),d&&!c&&m.observe(d),m.observe(t));let x,y=c?Ai(e):null;c&&w();function w(){const v=Ai(e);y&&!Xj(y,v)&&r(),y=v,x=requestAnimationFrame(w)}return r(),()=>{var v;u.forEach(g=>{s&&g.removeEventListener("scroll",r),a&&g.removeEventListener("resize",r)}),h==null||h(),(v=m)==null||v.disconnect(),m=null,c&&cancelAnimationFrame(x)}}const O3=p3,D3=m3,L3=u3,$3=y3,U3=h3,g0=d3,z3=g3,B3=(e,t,r)=>{const n=new Map,s={platform:M3,...r},a={...s.platform,_c:n};return c3(e,t,{...s,platform:a})};var qd=typeof document<"u"?f.useLayoutEffect:f.useEffect;function Mu(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!Mu(e[n],t[n]))return!1;return!0}if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,s[n]))return!1;for(n=r;n--!==0;){const a=s[n];if(!(a==="_owner"&&e.$$typeof)&&!Mu(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function Jj(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function y0(e,t){const r=Jj(e);return Math.round(t*r)/r}function Mf(e){const t=f.useRef(e);return qd(()=>{t.current=e}),t}function V3(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:a,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[u,h]=f.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[p,m]=f.useState(n);Mu(p,n)||m(n);const[x,y]=f.useState(null),[w,v]=f.useState(null),g=f.useCallback(A=>{A!==C.current&&(C.current=A,y(A))},[]),b=f.useCallback(A=>{A!==S.current&&(S.current=A,v(A))},[]),j=a||x,k=o||w,C=f.useRef(null),S=f.useRef(null),_=f.useRef(u),P=c!=null,T=Mf(c),F=Mf(s),R=Mf(d),M=f.useCallback(()=>{if(!C.current||!S.current)return;const A={placement:t,strategy:r,middleware:p};F.current&&(A.platform=F.current),B3(C.current,S.current,A).then(L=>{const G={...L,isPositioned:R.current!==!1};I.current&&!Mu(_.current,G)&&(_.current=G,qs.flushSync(()=>{h(G)}))})},[p,t,r,F,R]);qd(()=>{d===!1&&_.current.isPositioned&&(_.current.isPositioned=!1,h(A=>({...A,isPositioned:!1})))},[d]);const I=f.useRef(!1);qd(()=>(I.current=!0,()=>{I.current=!1}),[]),qd(()=>{if(j&&(C.current=j),k&&(S.current=k),j&&k){if(T.current)return T.current(j,k,M);M()}},[j,k,M,T,P]);const H=f.useMemo(()=>({reference:C,floating:S,setReference:g,setFloating:b}),[g,b]),V=f.useMemo(()=>({reference:j,floating:k}),[j,k]),Q=f.useMemo(()=>{const A={position:r,left:0,top:0};if(!V.floating)return A;const L=y0(V.floating,u.x),G=y0(V.floating,u.y);return l?{...A,transform:"translate("+L+"px, "+G+"px)",...Jj(V.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:L,top:G}},[r,l,V.floating,u.x,u.y]);return f.useMemo(()=>({...u,update:M,refs:H,elements:V,floatingStyles:Q}),[u,M,H,V,Q])}const H3=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:s}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?g0({element:n.current,padding:s}).fn(r):{}:n?g0({element:n,padding:s}).fn(r):{}}}},W3=(e,t)=>({...O3(e),options:[e,t]}),q3=(e,t)=>({...D3(e),options:[e,t]}),K3=(e,t)=>({...z3(e),options:[e,t]}),G3=(e,t)=>({...L3(e),options:[e,t]}),Q3=(e,t)=>({...$3(e),options:[e,t]}),Y3=(e,t)=>({...U3(e),options:[e,t]}),X3=(e,t)=>({...H3(e),options:[e,t]});var J3="Arrow",Zj=f.forwardRef((e,t)=>{const{children:r,width:n=10,height:s=5,...a}=e;return i.jsx(ie.svg,{...a,ref:t,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});Zj.displayName=J3;var Z3=Zj;function eS(e){const[t,r]=f.useState(void 0);return ze(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const a=s[0];let o,l;if("borderBoxSize"in a){const c=a.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=e.offsetWidth,l=e.offsetHeight;r({width:o,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var Ly="Popper",[tS,Ks]=Qt(Ly),[eF,rS]=tS(Ly),nS=e=>{const{__scopePopper:t,children:r}=e,[n,s]=f.useState(null);return i.jsx(eF,{scope:t,anchor:n,onAnchorChange:s,children:r})};nS.displayName=Ly;var sS="PopperAnchor",iS=f.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...s}=e,a=rS(sS,r),o=f.useRef(null),l=me(t,o);return f.useEffect(()=>{a.onAnchorChange((n==null?void 0:n.current)||o.current)}),n?null:i.jsx(ie.div,{...s,ref:l})});iS.displayName=sS;var $y="PopperContent",[tF,rF]=tS($y),aS=f.forwardRef((e,t)=>{var Z,q,se,te,be,Ne;const{__scopePopper:r,side:n="bottom",sideOffset:s=0,align:a="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:h="partial",hideWhenDetached:p=!1,updatePositionStrategy:m="optimized",onPlaced:x,...y}=e,w=rS($y,r),[v,g]=f.useState(null),b=me(t,Lt=>g(Lt)),[j,k]=f.useState(null),C=eS(j),S=(C==null?void 0:C.width)??0,_=(C==null?void 0:C.height)??0,P=n+(a!=="center"?"-"+a:""),T=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},F=Array.isArray(d)?d:[d],R=F.length>0,M={padding:T,boundary:F.filter(sF),altBoundary:R},{refs:I,floatingStyles:H,placement:V,isPositioned:Q,middlewareData:A}=V3({strategy:"fixed",placement:P,whileElementsMounted:(...Lt)=>I3(...Lt,{animationFrame:m==="always"}),elements:{reference:w.anchor},middleware:[W3({mainAxis:s+_,alignmentAxis:o}),c&&q3({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?K3():void 0,...M}),c&&G3({...M}),Q3({...M,apply:({elements:Lt,rects:qr,availableWidth:ko,availableHeight:Co})=>{const{width:Po,height:cE}=qr.reference,Vc=Lt.floating.style;Vc.setProperty("--radix-popper-available-width",`${ko}px`),Vc.setProperty("--radix-popper-available-height",`${Co}px`),Vc.setProperty("--radix-popper-anchor-width",`${Po}px`),Vc.setProperty("--radix-popper-anchor-height",`${cE}px`)}}),j&&X3({element:j,padding:l}),iF({arrowWidth:S,arrowHeight:_}),p&&Y3({strategy:"referenceHidden",...M})]}),[L,G]=cS(V),B=Ge(x);ze(()=>{Q&&(B==null||B())},[Q,B]);const X=(Z=A.arrow)==null?void 0:Z.x,ye=(q=A.arrow)==null?void 0:q.y,fe=((se=A.arrow)==null?void 0:se.centerOffset)!==0,[He,_e]=f.useState();return ze(()=>{v&&_e(window.getComputedStyle(v).zIndex)},[v]),i.jsx("div",{ref:I.setFloating,"data-radix-popper-content-wrapper":"",style:{...H,transform:Q?H.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:He,"--radix-popper-transform-origin":[(te=A.transformOrigin)==null?void 0:te.x,(be=A.transformOrigin)==null?void 0:be.y].join(" "),...((Ne=A.hide)==null?void 0:Ne.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:i.jsx(tF,{scope:r,placedSide:L,onArrowChange:k,arrowX:X,arrowY:ye,shouldHideArrow:fe,children:i.jsx(ie.div,{"data-side":L,"data-align":G,...y,ref:b,style:{...y.style,animation:Q?void 0:"none"}})})})});aS.displayName=$y;var oS="PopperArrow",nF={top:"bottom",right:"left",bottom:"top",left:"right"},lS=f.forwardRef(function(t,r){const{__scopePopper:n,...s}=t,a=rF(oS,n),o=nF[a.placedSide];return i.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:i.jsx(Z3,{...s,ref:r,style:{...s.style,display:"block"}})})});lS.displayName=oS;function sF(e){return e!==null}var iF=e=>({name:"transformOrigin",options:e,fn(t){var w,v,g;const{placement:r,rects:n,middlewareData:s}=t,o=((w=s.arrow)==null?void 0:w.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[d,u]=cS(r),h={start:"0%",center:"50%",end:"100%"}[u],p=(((v=s.arrow)==null?void 0:v.x)??0)+l/2,m=(((g=s.arrow)==null?void 0:g.y)??0)+c/2;let x="",y="";return d==="bottom"?(x=o?h:`${p}px`,y=`${-c}px`):d==="top"?(x=o?h:`${p}px`,y=`${n.floating.height+c}px`):d==="right"?(x=`${-c}px`,y=o?h:`${m}px`):d==="left"&&(x=`${n.floating.width+c}px`,y=o?h:`${m}px`),{data:{x,y}}}});function cS(e){const[t,r="center"]=e.split("-");return[t,r]}var Uy=nS,Fc=iS,Ch=aS,Ph=lS,[Eh,p9]=Qt("Tooltip",[Ks]),zy=Ks(),dS="TooltipProvider",aF=700,v0="tooltip.open",[oF,uS]=Eh(dS),hS=e=>{const{__scopeTooltip:t,delayDuration:r=aF,skipDelayDuration:n=300,disableHoverableContent:s=!1,children:a}=e,o=f.useRef(!0),l=f.useRef(!1),c=f.useRef(0);return f.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),i.jsx(oF,{scope:t,isOpenDelayedRef:o,delayDuration:r,onOpen:f.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:f.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,n)},[n]),isPointerInTransitRef:l,onPointerInTransitChange:f.useCallback(d=>{l.current=d},[]),disableHoverableContent:s,children:a})};hS.displayName=dS;var fS="Tooltip",[m9,_h]=Eh(fS),Tm="TooltipTrigger",lF=f.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,s=_h(Tm,r),a=uS(Tm,r),o=zy(r),l=f.useRef(null),c=me(t,l,s.onTriggerChange),d=f.useRef(!1),u=f.useRef(!1),h=f.useCallback(()=>d.current=!1,[]);return f.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),i.jsx(Fc,{asChild:!0,...o,children:i.jsx(ie.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...n,ref:c,onPointerMove:K(e.onPointerMove,p=>{p.pointerType!=="touch"&&!u.current&&!a.isPointerInTransitRef.current&&(s.onTriggerEnter(),u.current=!0)}),onPointerLeave:K(e.onPointerLeave,()=>{s.onTriggerLeave(),u.current=!1}),onPointerDown:K(e.onPointerDown,()=>{s.open&&s.onClose(),d.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:K(e.onFocus,()=>{d.current||s.onOpen()}),onBlur:K(e.onBlur,s.onClose),onClick:K(e.onClick,s.onClose)})})});lF.displayName=Tm;var cF="TooltipPortal",[g9,dF]=Eh(cF,{forceMount:void 0}),ho="TooltipContent",pS=f.forwardRef((e,t)=>{const r=dF(ho,e.__scopeTooltip),{forceMount:n=r.forceMount,side:s="top",...a}=e,o=_h(ho,e.__scopeTooltip);return i.jsx(Hr,{present:n||o.open,children:o.disableHoverableContent?i.jsx(mS,{side:s,...a,ref:t}):i.jsx(uF,{side:s,...a,ref:t})})}),uF=f.forwardRef((e,t)=>{const r=_h(ho,e.__scopeTooltip),n=uS(ho,e.__scopeTooltip),s=f.useRef(null),a=me(t,s),[o,l]=f.useState(null),{trigger:c,onClose:d}=r,u=s.current,{onPointerInTransitChange:h}=n,p=f.useCallback(()=>{l(null),h(!1)},[h]),m=f.useCallback((x,y)=>{const w=x.currentTarget,v={x:x.clientX,y:x.clientY},g=gF(v,w.getBoundingClientRect()),b=yF(v,g),j=vF(y.getBoundingClientRect()),k=bF([...b,...j]);l(k),h(!0)},[h]);return f.useEffect(()=>()=>p(),[p]),f.useEffect(()=>{if(c&&u){const x=w=>m(w,u),y=w=>m(w,c);return c.addEventListener("pointerleave",x),u.addEventListener("pointerleave",y),()=>{c.removeEventListener("pointerleave",x),u.removeEventListener("pointerleave",y)}}},[c,u,m,p]),f.useEffect(()=>{if(o){const x=y=>{const w=y.target,v={x:y.clientX,y:y.clientY},g=(c==null?void 0:c.contains(w))||(u==null?void 0:u.contains(w)),b=!xF(v,o);g?p():b&&(p(),d())};return document.addEventListener("pointermove",x),()=>document.removeEventListener("pointermove",x)}},[c,u,o,d,p]),i.jsx(mS,{...e,ref:a})}),[hF,fF]=Eh(fS,{isInside:!1}),pF=s5("TooltipContent"),mS=f.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":s,onEscapeKeyDown:a,onPointerDownOutside:o,...l}=e,c=_h(ho,r),d=zy(r),{onClose:u}=c;return f.useEffect(()=>(document.addEventListener(v0,u),()=>document.removeEventListener(v0,u)),[u]),f.useEffect(()=>{if(c.trigger){const h=p=>{const m=p.target;m!=null&&m.contains(c.trigger)&&u()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,u]),i.jsx(bo,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:u,children:i.jsxs(Ch,{"data-state":c.stateAttribute,...d,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[i.jsx(pF,{children:n}),i.jsx(hF,{scope:r,isInside:!0,children:i.jsx(j5,{id:c.contentId,role:"tooltip",children:s||n})})]})})});pS.displayName=ho;var gS="TooltipArrow",mF=f.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,s=zy(r);return fF(gS,r).isInside?null:i.jsx(Ph,{...s,...n,ref:t})});mF.displayName=gS;function gF(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(r,n,s,a)){case a:return"left";case s:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function yF(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function vF(e){const{top:t,right:r,bottom:n,left:s}=e;return[{x:s,y:t},{x:r,y:t},{x:r,y:n},{x:s,y:n}]}function xF(e,t){const{x:r,y:n}=e;let s=!1;for(let a=0,o=t.length-1;a<t.length;o=a++){const l=t[a].x,c=t[a].y,d=t[o].x,u=t[o].y;c>n!=u>n&&r<(d-l)*(n-c)/(u-c)+l&&(s=!s)}return s}function bF(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),wF(t)}function wF(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const s=e[n];for(;t.length>=2;){const a=t[t.length-1],o=t[t.length-2];if((a.x-o.x)*(s.y-o.y)>=(a.y-o.y)*(s.x-o.x))t.pop();else break}t.push(s)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const s=e[n];for(;r.length>=2;){const a=r[r.length-1],o=r[r.length-2];if((a.x-o.x)*(s.y-o.y)>=(a.y-o.y)*(s.x-o.x))r.pop();else break}r.push(s)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var NF=hS,yS=pS;const Af=NF,jF=f.forwardRef(({className:e,sideOffset:t=4,...r},n)=>i.jsx(yS,{ref:n,sideOffset:t,className:re("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",e),...r}));jF.displayName=yS.displayName;const SF={theme:"system",setTheme:()=>null},kF=f.createContext(SF);function If({children:e,defaultTheme:t="dark",storageKey:r="vite-ui-theme",...n}){const[s,a]=f.useState(()=>localStorage.getItem(r)||t);f.useEffect(()=>{const l=window.document.documentElement;if(l.classList.remove("light","dark"),s==="system"){const c=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";l.classList.add(c);return}l.classList.add(s)},[s]);const o={theme:s,setTheme:l=>{localStorage.setItem(r,l),a(l)}};return i.jsx(kF.Provider,{...n,value:o,children:e})}const vS=f.createContext(void 0);function CF({children:e}){const[t,r]=f.useState(!0),n=s=>{r(s)};return i.jsx(vS.Provider,{value:{isNavigationVisible:t,setNavigationVisible:n},children:e})}function xS(){const e=f.useContext(vS);if(e===void 0)throw new Error("useNavigation must be used within a NavigationProvider");return e}const Wi=new Il;function PF(){const[e,t]=f.useState(null),[r,n]=f.useState(!1);return f.useEffect(()=>{(()=>{const c=Wi.getItem("frhighday_age_verified"),d=Wi.getItem("frhighday_verification_date");if(c==="true"&&d){const u=new Date(d);Math.floor((new Date().getTime()-u.getTime())/(1e3*60*60*24))<=30?t(!0):(Wi.removeItem("frhighday_age_verified"),Wi.removeItem("frhighday_verification_date"),t(!1),n(!0))}else t(!1),n(!0)})()},[]),{isVerified:e,showModal:r,handleVerified:()=>{t(!0),n(!1)},handleDenied:()=>{t(!1),n(!1)},resetVerification:()=>{Wi.removeItem("frhighday_age_verified"),Wi.removeItem("frhighday_verification_date"),t(!1),n(!0)}}}function Fe(){const[e,t]=f.useState(null),[r,n]=f.useState(!0),[s,a]=f.useState(null),{toast:o}=ke(),l=f.useCallback(async()=>{try{const m=localStorage.getItem("frhighday_auth_last_failure"),x=Date.now();if(m&&x-parseInt(m)<5e3)console.log("Skipping server auth check due to recent failure, using local session only");else try{const w=await fetch("/api/auth/user",{method:"GET",credentials:"include",headers:{Accept:"application/json"}});if(w.ok){const v=await w.json();console.log(" SERVER SESSION FOUND:",{username:v.username,id:v.id,email:v.email,displayName:v.displayName}),t(v),a(null),localStorage.removeItem("frhighday_auth_last_failure");const g={user:v,rememberMe:!0,loginTime:Date.now(),expiresAt:Date.now()+30*24*60*60*1e3};return pt.saveSession(g),!0}else localStorage.setItem("frhighday_auth_last_failure",x.toString())}catch(w){console.warn("Server session check failed:",w),localStorage.setItem("frhighday_auth_last_failure",x.toString())}pt.migrateOldSession();const y=pt.getSession();return y?(console.log(" USING LOCALSTORAGE SESSION:",{username:y.user.username,id:y.user.id,email:y.user.email,displayName:y.user.displayName}),t(y.user),a(null),!0):!1}catch(m){return console.error("Session recovery failed:",m),a("Failed to restore session"),console.log("Session recovery failed completely, user needs to login"),!1}},[]);f.useEffect(()=>{let m=!0;const x=localStorage.getItem("frhighday_white_screen_fix_applied");if(x&&Date.now()-parseInt(x)<5e3){console.log("White screen recovery mode active - using local storage only");try{pt.migrateOldSession();const b=pt.getSession();if(b&&m){console.log("Recovery mode: restored user from session:",b.user.username),t(b.user),n(!1);return}}catch(b){console.warn("Recovery mode auth failed:",b)}m&&(t(null),n(!1));return}const w="frhighday_auth_initializing",v=localStorage.getItem(w);if(v&&Date.now()-parseInt(v)<2e3){console.log("Auth already initializing, skipping duplicate"),m&&n(!1);return}return localStorage.setItem(w,Date.now().toString()),(async()=>{m&&n(!0);try{if(!await l()&&m){console.log("Session validation failed, checking for valid session data..."),pt.migrateOldSession();const j=pt.getSession();j!=null&&j.user?(console.log("Restored user from session:",j.user.username),t(j.user)):(console.log("No valid session found, user needs to login"),t(null))}}catch(b){console.error("Auth initialization failed:",b),m&&t(null)}finally{localStorage.removeItem(w),m&&n(!1)}})(),()=>{m=!1,localStorage.removeItem(w)}},[l]);const c=f.useCallback((m,x=!1)=>{try{const y={user:m,rememberMe:x,loginTime:Date.now(),expiresAt:x?Date.now()+2592e6:Date.now()+864e5};if(pt.saveSession(y),m.isAdmin&&m.id){const w=new Il,v=`frhighday_admin_user_${m.id}`;w.setItem(v,JSON.stringify(m)),console.log(`Saved admin data for user: ${m.username} with key: ${v}`)}return t(m),a(null),o({title:"Welcome back!",description:x?"You'll stay logged in for 30 days":"You'll stay logged in until you close your browser"}),!0}catch(y){return console.error("Login failed:",y),o({title:"Login error",description:"Failed to save login session",variant:"destructive"}),!1}},[o]),d=f.useCallback(async(m=!0)=>{try{try{await fetch("/api/auth/logout",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}})}catch(x){console.warn("Server logout failed, proceeding with client-side cleanup:",x)}pt.clearAllSessions(),t(null),a(null);try{const x=new Il;if(x.removeItem("frhighday_admin_user"),e!=null&&e.id){const y=`frhighday_admin_user_${e.id}`;x.removeItem(y),console.log(`Cleared admin data for user: ${e.username}`)}}catch{}m&&o({title:"Logged out",description:"You have been successfully logged out"})}catch(x){console.error("Logout failed:",x),window.location.reload()}},[o]),u=f.useCallback(m=>{if(e){const x={...e,...m};t(x),pt.updateSession({user:x})}},[e]),h=f.useCallback(()=>{const m=pt.getSession();return(m==null?void 0:m.rememberMe)||!1},[]),p=f.useCallback(()=>{const m=pt.getSession();m&&e&&pt.updateSession({loginTime:Date.now(),expiresAt:m.rememberMe?Date.now()+30*24*60*60*1e3:Date.now()+24*60*60*1e3})},[e]);return{user:e,isLoading:r,isAuthenticated:!!e,sessionError:s,login:c,logout:d,updateUser:u,refreshSession:p,hasPersistentSession:h,validateAndRestoreSession:l}}var EF=Cg[" useInsertionEffect ".trim().toString()]||ze;function _F({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[s,a,o]=TF({defaultProp:t,onChange:r}),l=e!==void 0,c=l?e:s;{const u=f.useRef(e!==void 0);f.useEffect(()=>{const h=u.current;h!==l&&console.warn(`${n} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=l},[l,n])}const d=f.useCallback(u=>{var h;if(l){const p=RF(u)?u(e):u;p!==e&&((h=o.current)==null||h.call(o,p))}else a(u)},[l,e,a,o]);return[c,d]}function TF({defaultProp:e,onChange:t}){const[r,n]=f.useState(e),s=f.useRef(r),a=f.useRef(t);return EF(()=>{a.current=t},[t]),f.useEffect(()=>{var o;s.current!==r&&((o=a.current)==null||o.call(a,r),s.current=r)},[r,s]),[r,n,a]}function RF(e){return typeof e=="function"}function bS(e){const t=FF(e),r=f.forwardRef((n,s)=>{const{children:a,...o}=n,l=f.Children.toArray(a),c=l.find(AF);if(c){const d=c.props.children,u=l.map(h=>h===c?f.Children.count(d)>1?f.Children.only(null):f.isValidElement(d)?d.props.children:null:h);return i.jsx(t,{...o,ref:s,children:f.isValidElement(d)?f.cloneElement(d,void 0,u):null})}return i.jsx(t,{...o,ref:s,children:a})});return r.displayName=`${e}.Slot`,r}function FF(e){const t=f.forwardRef((r,n)=>{const{children:s,...a}=r;if(f.isValidElement(s)){const o=OF(s),l=IF(a,s.props);return s.type!==f.Fragment&&(l.ref=n?Cc(n,o):o),f.cloneElement(s,l)}return f.Children.count(s)>1?f.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var MF=Symbol("radix.slottable");function AF(e){return f.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===MF}function IF(e,t){const r={...t};for(const n in t){const s=e[n],a=t[n];/^on[A-Z]/.test(n)?s&&a?r[n]=(...l)=>{const c=a(...l);return s(...l),c}:s&&(r[n]=s):n==="style"?r[n]={...s,...a}:n==="className"&&(r[n]=[s,a].filter(Boolean).join(" "))}return{...e,...r}}function OF(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var DF=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Yn=DF.reduce((e,t)=>{const r=bS(`Primitive.${t}`),n=f.forwardRef((s,a)=>{const{asChild:o,...l}=s,c=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(c,{...l,ref:a})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function LF(e,t){e&&qs.flushSync(()=>e.dispatchEvent(t))}var $F="DismissableLayer",Rm="dismissableLayer.update",UF="dismissableLayer.pointerDownOutside",zF="dismissableLayer.focusOutside",x0,wS=f.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),NS=f.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...c}=e,d=f.useContext(wS),[u,h]=f.useState(null),p=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=f.useState({}),x=me(t,S=>h(S)),y=Array.from(d.layers),[w]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),v=y.indexOf(w),g=u?y.indexOf(u):-1,b=d.layersWithOutsidePointerEventsDisabled.size>0,j=g>=v,k=HF(S=>{const _=S.target,P=[...d.branches].some(T=>T.contains(_));!j||P||(s==null||s(S),o==null||o(S),S.defaultPrevented||l==null||l())},p),C=WF(S=>{const _=S.target;[...d.branches].some(T=>T.contains(_))||(a==null||a(S),o==null||o(S),S.defaultPrevented||l==null||l())},p);return JN(S=>{g===d.layers.size-1&&(n==null||n(S),!S.defaultPrevented&&l&&(S.preventDefault(),l()))},p),f.useEffect(()=>{if(u)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(x0=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),b0(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=x0)}},[u,p,r,d]),f.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),b0())},[u,d]),f.useEffect(()=>{const S=()=>m({});return document.addEventListener(Rm,S),()=>document.removeEventListener(Rm,S)},[]),i.jsx(Yn.div,{...c,ref:x,style:{pointerEvents:b?j?"auto":"none":void 0,...e.style},onFocusCapture:K(e.onFocusCapture,C.onFocusCapture),onBlurCapture:K(e.onBlurCapture,C.onBlurCapture),onPointerDownCapture:K(e.onPointerDownCapture,k.onPointerDownCapture)})});NS.displayName=$F;var BF="DismissableLayerBranch",VF=f.forwardRef((e,t)=>{const r=f.useContext(wS),n=f.useRef(null),s=me(t,n);return f.useEffect(()=>{const a=n.current;if(a)return r.branches.add(a),()=>{r.branches.delete(a)}},[r.branches]),i.jsx(Yn.div,{...e,ref:s})});VF.displayName=BF;function HF(e,t=globalThis==null?void 0:globalThis.document){const r=Ge(e),n=f.useRef(!1),s=f.useRef(()=>{});return f.useEffect(()=>{const a=l=>{if(l.target&&!n.current){let c=function(){jS(UF,r,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=c,t.addEventListener("click",s.current,{once:!0})):c()}else t.removeEventListener("click",s.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",a),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function WF(e,t=globalThis==null?void 0:globalThis.document){const r=Ge(e),n=f.useRef(!1);return f.useEffect(()=>{const s=a=>{a.target&&!n.current&&jS(zF,r,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function b0(){const e=new CustomEvent(Rm);document.dispatchEvent(e)}function jS(e,t,r,{discrete:n}){const s=r.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?LF(s,a):s.dispatchEvent(a)}var Of="focusScope.autoFocusOnMount",Df="focusScope.autoFocusOnUnmount",w0={bubbles:!1,cancelable:!0},qF="FocusScope",SS=f.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...o}=e,[l,c]=f.useState(null),d=Ge(s),u=Ge(a),h=f.useRef(null),p=me(t,y=>c(y)),m=f.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;f.useEffect(()=>{if(n){let y=function(b){if(m.paused||!l)return;const j=b.target;l.contains(j)?h.current=j:rs(h.current,{select:!0})},w=function(b){if(m.paused||!l)return;const j=b.relatedTarget;j!==null&&(l.contains(j)||rs(h.current,{select:!0}))},v=function(b){if(document.activeElement===document.body)for(const k of b)k.removedNodes.length>0&&rs(l)};document.addEventListener("focusin",y),document.addEventListener("focusout",w);const g=new MutationObserver(v);return l&&g.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",w),g.disconnect()}}},[n,l,m.paused]),f.useEffect(()=>{if(l){j0.add(m);const y=document.activeElement;if(!l.contains(y)){const v=new CustomEvent(Of,w0);l.addEventListener(Of,d),l.dispatchEvent(v),v.defaultPrevented||(KF(JF(kS(l)),{select:!0}),document.activeElement===y&&rs(l))}return()=>{l.removeEventListener(Of,d),setTimeout(()=>{const v=new CustomEvent(Df,w0);l.addEventListener(Df,u),l.dispatchEvent(v),v.defaultPrevented||rs(y??document.body,{select:!0}),l.removeEventListener(Df,u),j0.remove(m)},0)}}},[l,d,u,m]);const x=f.useCallback(y=>{if(!r&&!n||m.paused)return;const w=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,v=document.activeElement;if(w&&v){const g=y.currentTarget,[b,j]=GF(g);b&&j?!y.shiftKey&&v===j?(y.preventDefault(),r&&rs(b,{select:!0})):y.shiftKey&&v===b&&(y.preventDefault(),r&&rs(j,{select:!0})):v===g&&y.preventDefault()}},[r,n,m.paused]);return i.jsx(Yn.div,{tabIndex:-1,...o,ref:p,onKeyDown:x})});SS.displayName=qF;function KF(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(rs(n,{select:t}),document.activeElement!==r)return}function GF(e){const t=kS(e),r=N0(t,e),n=N0(t.reverse(),e);return[r,n]}function kS(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function N0(e,t){for(const r of e)if(!QF(r,{upTo:t}))return r}function QF(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function YF(e){return e instanceof HTMLInputElement&&"select"in e}function rs(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&YF(e)&&t&&e.select()}}var j0=XF();function XF(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=S0(e,t),e.unshift(t)},remove(t){var r;e=S0(e,t),(r=e[0])==null||r.resume()}}}function S0(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function JF(e){return e.filter(t=>t.tagName!=="A")}var ZF="Portal",CS=f.forwardRef((e,t)=>{var l;const{container:r,...n}=e,[s,a]=f.useState(!1);ze(()=>a(!0),[]);const o=r||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?SN.createPortal(i.jsx(Yn.div,{...n,ref:t}),o):null});CS.displayName=ZF;function eM(e,t){return f.useReducer((r,n)=>t[r][n]??r,e)}var Th=e=>{const{present:t,children:r}=e,n=tM(t),s=typeof r=="function"?r({present:n.isPresent}):f.Children.only(r),a=me(n.ref,rM(s));return typeof r=="function"||n.isPresent?f.cloneElement(s,{ref:a}):null};Th.displayName="Presence";function tM(e){const[t,r]=f.useState(),n=f.useRef(null),s=f.useRef(e),a=f.useRef("none"),o=e?"mounted":"unmounted",[l,c]=eM(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return f.useEffect(()=>{const d=fd(n.current);a.current=l==="mounted"?d:"none"},[l]),ze(()=>{const d=n.current,u=s.current;if(u!==e){const p=a.current,m=fd(d);e?c("MOUNT"):m==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&p!==m?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),ze(()=>{if(t){let d;const u=t.ownerDocument.defaultView??window,h=m=>{const y=fd(n.current).includes(m.animationName);if(m.target===t&&y&&(c("ANIMATION_END"),!s.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",d=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},p=m=>{m.target===t&&(a.current=fd(n.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{u.clearTimeout(d),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:f.useCallback(d=>{n.current=d?getComputedStyle(d):null,r(d)},[])}}function fd(e){return(e==null?void 0:e.animationName)||"none"}function rM(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var Lf=0;function Rh(){f.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??k0()),document.body.insertAdjacentElement("beforeend",e[1]??k0()),Lf++,()=>{Lf===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Lf--}},[])}function k0(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var on=function(){return on=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},on.apply(this,arguments)};function PS(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function nM(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,a;n<s;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))}var Kd="right-scroll-bar-position",Gd="width-before-scroll-bar",sM="with-scroll-bars-hidden",iM="--removed-body-scroll-bar-size";function $f(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function aM(e,t){var r=f.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=t,r.facade}var oM=typeof window<"u"?f.useLayoutEffect:f.useEffect,C0=new WeakMap;function lM(e,t){var r=aM(null,function(n){return e.forEach(function(s){return $f(s,n)})});return oM(function(){var n=C0.get(r);if(n){var s=new Set(n),a=new Set(e),o=r.current;s.forEach(function(l){a.has(l)||$f(l,null)}),a.forEach(function(l){s.has(l)||$f(l,o)})}C0.set(r,e)},[e]),r}function cM(e){return e}function dM(e,t){t===void 0&&(t=cM);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(a){var o=t(a,n);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(a){for(n=!0;r.length;){var o=r;r=[],o.forEach(a)}r={push:function(l){return a(l)},filter:function(){return r}}},assignMedium:function(a){n=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(a),o=r}var c=function(){var u=o;o=[],u.forEach(a)},d=function(){return Promise.resolve().then(c)};d(),r={push:function(u){o.push(u),d()},filter:function(u){return o=o.filter(u),r}}}};return s}function uM(e){e===void 0&&(e={});var t=dM(null);return t.options=on({async:!0,ssr:!1},e),t}var ES=function(e){var t=e.sideCar,r=PS(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return f.createElement(n,on({},r))};ES.isSideCarExport=!0;function hM(e,t){return e.useMedium(t),ES}var _S=uM(),Uf=function(){},Fh=f.forwardRef(function(e,t){var r=f.useRef(null),n=f.useState({onScrollCapture:Uf,onWheelCapture:Uf,onTouchMoveCapture:Uf}),s=n[0],a=n[1],o=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,u=e.enabled,h=e.shards,p=e.sideCar,m=e.noIsolation,x=e.inert,y=e.allowPinchZoom,w=e.as,v=w===void 0?"div":w,g=e.gapMode,b=PS(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=p,k=lM([r,t]),C=on(on({},b),s);return f.createElement(f.Fragment,null,u&&f.createElement(j,{sideCar:_S,removeScrollBar:d,shards:h,noIsolation:m,inert:x,setCallbacks:a,allowPinchZoom:!!y,lockRef:r,gapMode:g}),o?f.cloneElement(f.Children.only(l),on(on({},C),{ref:k})):f.createElement(v,on({},C,{className:c,ref:k}),l))});Fh.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Fh.classNames={fullWidth:Gd,zeroRight:Kd};var fM=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function pM(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=fM();return t&&e.setAttribute("nonce",t),e}function mM(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function gM(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var yM=function(){var e=0,t=null;return{add:function(r){e==0&&(t=pM())&&(mM(t,r),gM(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},vM=function(){var e=yM();return function(t,r){f.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},TS=function(){var e=vM(),t=function(r){var n=r.styles,s=r.dynamic;return e(n,s),null};return t},xM={left:0,top:0,right:0,gap:0},zf=function(e){return parseInt(e||"",10)||0},bM=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[zf(r),zf(n),zf(s)]},wM=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return xM;var t=bM(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},NM=TS(),wa="data-scroll-locked",jM=function(e,t,r,n){var s=e.left,a=e.top,o=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(sM,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(wa,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Kd,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Gd,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Kd," .").concat(Kd,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Gd," .").concat(Gd,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(wa,`] {
    `).concat(iM,": ").concat(l,`px;
  }
`)},P0=function(){var e=parseInt(document.body.getAttribute(wa)||"0",10);return isFinite(e)?e:0},SM=function(){f.useEffect(function(){return document.body.setAttribute(wa,(P0()+1).toString()),function(){var e=P0()-1;e<=0?document.body.removeAttribute(wa):document.body.setAttribute(wa,e.toString())}},[])},kM=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,s=n===void 0?"margin":n;SM();var a=f.useMemo(function(){return wM(s)},[s]);return f.createElement(NM,{styles:jM(a,!t,s,r?"":"!important")})},Fm=!1;if(typeof window<"u")try{var pd=Object.defineProperty({},"passive",{get:function(){return Fm=!0,!0}});window.addEventListener("test",pd,pd),window.removeEventListener("test",pd,pd)}catch{Fm=!1}var qi=Fm?{passive:!1}:!1,CM=function(e){return e.tagName==="TEXTAREA"},RS=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!CM(e)&&r[t]==="visible")},PM=function(e){return RS(e,"overflowY")},EM=function(e){return RS(e,"overflowX")},E0=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=FS(e,n);if(s){var a=MS(e,n),o=a[1],l=a[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},_M=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},TM=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},FS=function(e,t){return e==="v"?PM(t):EM(t)},MS=function(e,t){return e==="v"?_M(t):TM(t)},RM=function(e,t){return e==="h"&&t==="rtl"?-1:1},FM=function(e,t,r,n,s){var a=RM(e,window.getComputedStyle(t).direction),o=a*n,l=r.target,c=t.contains(l),d=!1,u=o>0,h=0,p=0;do{var m=MS(e,l),x=m[0],y=m[1],w=m[2],v=y-w-a*x;(x||v)&&FS(e,l)&&(h+=v,p+=x),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(u&&(Math.abs(h)<1||!s)||!u&&(Math.abs(p)<1||!s))&&(d=!0),d},md=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},_0=function(e){return[e.deltaX,e.deltaY]},T0=function(e){return e&&"current"in e?e.current:e},MM=function(e,t){return e[0]===t[0]&&e[1]===t[1]},AM=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},IM=0,Ki=[];function OM(e){var t=f.useRef([]),r=f.useRef([0,0]),n=f.useRef(),s=f.useState(IM++)[0],a=f.useState(TS)[0],o=f.useRef(e);f.useEffect(function(){o.current=e},[e]),f.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var y=nM([e.lockRef.current],(e.shards||[]).map(T0),!0).filter(Boolean);return y.forEach(function(w){return w.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),y.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=f.useCallback(function(y,w){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!o.current.allowPinchZoom;var v=md(y),g=r.current,b="deltaX"in y?y.deltaX:g[0]-v[0],j="deltaY"in y?y.deltaY:g[1]-v[1],k,C=y.target,S=Math.abs(b)>Math.abs(j)?"h":"v";if("touches"in y&&S==="h"&&C.type==="range")return!1;var _=E0(S,C);if(!_)return!0;if(_?k=S:(k=S==="v"?"h":"v",_=E0(S,C)),!_)return!1;if(!n.current&&"changedTouches"in y&&(b||j)&&(n.current=k),!k)return!0;var P=n.current||k;return FM(P,w,y,P==="h"?b:j,!0)},[]),c=f.useCallback(function(y){var w=y;if(!(!Ki.length||Ki[Ki.length-1]!==a)){var v="deltaY"in w?_0(w):md(w),g=t.current.filter(function(k){return k.name===w.type&&(k.target===w.target||w.target===k.shadowParent)&&MM(k.delta,v)})[0];if(g&&g.should){w.cancelable&&w.preventDefault();return}if(!g){var b=(o.current.shards||[]).map(T0).filter(Boolean).filter(function(k){return k.contains(w.target)}),j=b.length>0?l(w,b[0]):!o.current.noIsolation;j&&w.cancelable&&w.preventDefault()}}},[]),d=f.useCallback(function(y,w,v,g){var b={name:y,delta:w,target:v,should:g,shadowParent:DM(v)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(j){return j!==b})},1)},[]),u=f.useCallback(function(y){r.current=md(y),n.current=void 0},[]),h=f.useCallback(function(y){d(y.type,_0(y),y.target,l(y,e.lockRef.current))},[]),p=f.useCallback(function(y){d(y.type,md(y),y.target,l(y,e.lockRef.current))},[]);f.useEffect(function(){return Ki.push(a),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:p}),document.addEventListener("wheel",c,qi),document.addEventListener("touchmove",c,qi),document.addEventListener("touchstart",u,qi),function(){Ki=Ki.filter(function(y){return y!==a}),document.removeEventListener("wheel",c,qi),document.removeEventListener("touchmove",c,qi),document.removeEventListener("touchstart",u,qi)}},[]);var m=e.removeScrollBar,x=e.inert;return f.createElement(f.Fragment,null,x?f.createElement(a,{styles:AM(s)}):null,m?f.createElement(kM,{gapMode:e.gapMode}):null)}function DM(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const LM=hM(_S,OM);var Mc=f.forwardRef(function(e,t){return f.createElement(Fh,on({},e,{ref:t,sideCar:LM}))});Mc.classNames=Fh.classNames;var $M=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Gi=new WeakMap,gd=new WeakMap,yd={},Bf=0,AS=function(e){return e&&(e.host||AS(e.parentNode))},UM=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=AS(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},zM=function(e,t,r,n){var s=UM(t,Array.isArray(e)?e:[e]);yd[r]||(yd[r]=new WeakMap);var a=yd[r],o=[],l=new Set,c=new Set(s),d=function(h){!h||l.has(h)||(l.add(h),d(h.parentNode))};s.forEach(d);var u=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(p){if(l.has(p))u(p);else try{var m=p.getAttribute(n),x=m!==null&&m!=="false",y=(Gi.get(p)||0)+1,w=(a.get(p)||0)+1;Gi.set(p,y),a.set(p,w),o.push(p),y===1&&x&&gd.set(p,!0),w===1&&p.setAttribute(r,"true"),x||p.setAttribute(n,"true")}catch(v){console.error("aria-hidden: cannot operate on ",p,v)}})};return u(t),l.clear(),Bf++,function(){o.forEach(function(h){var p=Gi.get(h)-1,m=a.get(h)-1;Gi.set(h,p),a.set(h,m),p||(gd.has(h)||h.removeAttribute(n),gd.delete(h)),m||h.removeAttribute(r)}),Bf--,Bf||(Gi=new WeakMap,Gi=new WeakMap,gd=new WeakMap,yd={})}},Mh=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),s=$M(e);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live]"))),zM(n,s,r,"aria-hidden")):function(){return null}},Ah="Dialog",[IS,y9]=Qt(Ah),[BM,Wr]=IS(Ah),OS=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:s,onOpenChange:a,modal:o=!0}=e,l=f.useRef(null),c=f.useRef(null),[d,u]=_F({prop:n,defaultProp:s??!1,onChange:a,caller:Ah});return i.jsx(BM,{scope:t,triggerRef:l,contentRef:c,contentId:Dr(),titleId:Dr(),descriptionId:Dr(),open:d,onOpenChange:u,onOpenToggle:f.useCallback(()=>u(h=>!h),[u]),modal:o,children:r})};OS.displayName=Ah;var DS="DialogTrigger",LS=f.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Wr(DS,r),a=me(t,s.triggerRef);return i.jsx(Yn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Hy(s.open),...n,ref:a,onClick:K(e.onClick,s.onOpenToggle)})});LS.displayName=DS;var By="DialogPortal",[VM,$S]=IS(By,{forceMount:void 0}),US=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:s}=e,a=Wr(By,t);return i.jsx(VM,{scope:t,forceMount:r,children:f.Children.map(n,o=>i.jsx(Th,{present:r||a.open,children:i.jsx(CS,{asChild:!0,container:s,children:o})}))})};US.displayName=By;var Au="DialogOverlay",zS=f.forwardRef((e,t)=>{const r=$S(Au,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,a=Wr(Au,e.__scopeDialog);return a.modal?i.jsx(Th,{present:n||a.open,children:i.jsx(WM,{...s,ref:t})}):null});zS.displayName=Au;var HM=bS("DialogOverlay.RemoveScroll"),WM=f.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Wr(Au,r);return i.jsx(Mc,{as:HM,allowPinchZoom:!0,shards:[s.contentRef],children:i.jsx(Yn.div,{"data-state":Hy(s.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),Ii="DialogContent",BS=f.forwardRef((e,t)=>{const r=$S(Ii,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,a=Wr(Ii,e.__scopeDialog);return i.jsx(Th,{present:n||a.open,children:a.modal?i.jsx(qM,{...s,ref:t}):i.jsx(KM,{...s,ref:t})})});BS.displayName=Ii;var qM=f.forwardRef((e,t)=>{const r=Wr(Ii,e.__scopeDialog),n=f.useRef(null),s=me(t,r.contentRef,n);return f.useEffect(()=>{const a=n.current;if(a)return Mh(a)},[]),i.jsx(VS,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:K(e.onCloseAutoFocus,a=>{var o;a.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:K(e.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&a.preventDefault()}),onFocusOutside:K(e.onFocusOutside,a=>a.preventDefault())})}),KM=f.forwardRef((e,t)=>{const r=Wr(Ii,e.__scopeDialog),n=f.useRef(!1),s=f.useRef(!1);return i.jsx(VS,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,a),a.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),a.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:a=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,a),a.defaultPrevented||(n.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=a.target;((d=r.triggerRef.current)==null?void 0:d.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),VS=f.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:a,...o}=e,l=Wr(Ii,r),c=f.useRef(null),d=me(t,c);return Rh(),i.jsxs(i.Fragment,{children:[i.jsx(SS,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:a,children:i.jsx(NS,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Hy(l.open),...o,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(QM,{titleId:l.titleId}),i.jsx(XM,{contentRef:c,descriptionId:l.descriptionId})]})]})}),Vy="DialogTitle",HS=f.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Wr(Vy,r);return i.jsx(Yn.h2,{id:s.titleId,...n,ref:t})});HS.displayName=Vy;var WS="DialogDescription",qS=f.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Wr(WS,r);return i.jsx(Yn.p,{id:s.descriptionId,...n,ref:t})});qS.displayName=WS;var KS="DialogClose",GM=f.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Wr(KS,r);return i.jsx(Yn.button,{type:"button",...n,ref:t,onClick:K(e.onClick,()=>s.onOpenChange(!1))})});GM.displayName=KS;function Hy(e){return e?"open":"closed"}var GS="DialogTitleWarning",[v9,QS]=e5(GS,{contentName:Ii,titleName:Vy,docsSlug:"dialog"}),QM=({titleId:e})=>{const t=QS(GS),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return f.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},YM="DialogDescriptionWarning",XM=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${QS(YM).contentName}}.`;return f.useEffect(()=>{var a;const s=(a=e.current)==null?void 0:a.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},JM=OS,ZM=LS,eA=US,YS=zS,XS=BS,JS=HS,ZS=qS;const dr=JM,Wy=ZM,tA=eA,ek=f.forwardRef(({className:e,...t},r)=>i.jsx(YS,{ref:r,className:re("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));ek.displayName=YS.displayName;const qt=f.forwardRef(({className:e,children:t,...r},n)=>i.jsxs(tA,{children:[i.jsx(ek,{}),i.jsx(XS,{ref:n,className:re("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:t})]}));qt.displayName=XS.displayName;const ur=({className:e,...t})=>i.jsx("div",{className:re("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});ur.displayName="DialogHeader";const hr=f.forwardRef(({className:e,...t},r)=>i.jsx(JS,{ref:r,className:re("text-lg font-semibold leading-none tracking-tight",e),...t}));hr.displayName=JS.displayName;const Wn=f.forwardRef(({className:e,...t},r)=>i.jsx(ZS,{ref:r,className:re("text-sm text-muted-foreground",e),...t}));Wn.displayName=ZS.displayName;const rA=_c("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),z=f.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...s},a)=>{const o=n?r5:"button";return i.jsx(o,{className:re(rA({variant:t,size:r,className:e})),ref:a,...s})});z.displayName="Button";const R0=new Il;function nA({isOpen:e,onVerified:t,onDenied:r}){const n=()=>{R0.setItem("frhighday_age_verified","true"),R0.setItem("frhighday_verification_date",new Date().toISOString()),t()},s=()=>{r()};return i.jsx(dr,{open:e,children:i.jsx(qt,{className:"bg-frhigh-dark border-frhigh-green/20 max-w-md [&>button]:hidden",children:i.jsxs("div",{className:"space-y-6 p-6",children:[i.jsxs("div",{className:"text-center space-y-4",children:[i.jsx("div",{className:"w-16 h-16 bg-frhigh-green rounded-full flex items-center justify-center mx-auto",children:i.jsx("i",{className:"fas fa-leaf text-frhigh-dark text-2xl"})}),i.jsx("h2",{className:"text-2xl font-bold text-white",children:"Age Verification Required"}),i.jsx("p",{className:"text-gray-300",children:"You must be 21 years or older to access Frhighday's cannabis content."})]}),i.jsx("div",{className:"bg-frhigh-dark-secondary border border-frhigh-dark-tertiary rounded-lg p-4",children:i.jsx("p",{className:"text-gray-300 text-sm text-center",children:'By clicking "I am 21 or older", you confirm that you are of legal age to view cannabis-related content in your jurisdiction.'})}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(z,{onClick:n,className:"w-full bg-frhigh-green hover:bg-frhigh-green-light text-frhigh-dark font-semibold py-3 text-lg","data-testid":"button-confirm-21-plus",children:"I am 21 or older - Enter Site"}),i.jsx(z,{onClick:s,variant:"outline",className:"w-full border-gray-600 text-gray-300 hover:bg-gray-700","data-testid":"button-under-21",children:"I am under 21"})]})]})})})}function sA(){return i.jsx("div",{className:"min-h-screen bg-frhigh-dark flex items-center justify-center p-4",children:i.jsxs("div",{className:"max-w-md w-full text-center space-y-6",children:[i.jsx("div",{className:"w-24 h-24 bg-red-600 rounded-full flex items-center justify-center mx-auto",children:i.jsx("i",{className:"fas fa-ban text-white text-4xl"})}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h1",{className:"text-3xl font-bold text-white",children:"Access Restricted"}),i.jsx("p",{className:"text-gray-300 text-lg",children:"You must be 21 years or older to access Frhighday."}),i.jsx("p",{className:"text-gray-400",children:"This website contains cannabis-related content that is restricted to adults aged 21 and above in accordance with local and federal regulations."})]}),i.jsxs("div",{className:"bg-frhigh-dark-secondary border border-frhigh-dark-tertiary rounded-lg p-6",children:[i.jsx("h3",{className:"text-frhigh-green font-semibold mb-2",children:"Learn More About Cannabis Laws"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"Cannabis laws vary by location. Please familiarize yourself with your local regulations regarding cannabis use and possession."})]}),i.jsx("button",{onClick:()=>window.location.reload(),className:"text-frhigh-green hover:text-frhigh-green-light transition-colors",children:"Try Again"})]})})}function tk(e){const t=f.useRef({value:e,previous:e});return f.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var qy="Checkbox",[iA,x9]=Qt(qy),[aA,oA]=iA(qy),rk=f.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:n,checked:s,defaultChecked:a,required:o,disabled:l,value:c="on",onCheckedChange:d,form:u,...h}=e,[p,m]=f.useState(null),x=me(t,j=>m(j)),y=f.useRef(!1),w=p?u||!!p.closest("form"):!0,[v=!1,g]=Ls({prop:s,defaultProp:a,onChange:d}),b=f.useRef(v);return f.useEffect(()=>{const j=p==null?void 0:p.form;if(j){const k=()=>g(b.current);return j.addEventListener("reset",k),()=>j.removeEventListener("reset",k)}},[p,g]),i.jsxs(aA,{scope:r,state:v,disabled:l,children:[i.jsx(ie.button,{type:"button",role:"checkbox","aria-checked":As(v)?"mixed":v,"aria-required":o,"data-state":ik(v),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:x,onKeyDown:K(e.onKeyDown,j=>{j.key==="Enter"&&j.preventDefault()}),onClick:K(e.onClick,j=>{g(k=>As(k)?!0:!k),w&&(y.current=j.isPropagationStopped(),y.current||j.stopPropagation())})}),w&&i.jsx(lA,{control:p,bubbles:!y.current,name:n,value:c,checked:v,required:o,disabled:l,form:u,style:{transform:"translateX(-100%)"},defaultChecked:As(a)?!1:a})]})});rk.displayName=qy;var nk="CheckboxIndicator",sk=f.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...s}=e,a=oA(nk,r);return i.jsx(Hr,{present:n||As(a.state)||a.state===!0,children:i.jsx(ie.span,{"data-state":ik(a.state),"data-disabled":a.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});sk.displayName=nk;var lA=e=>{const{control:t,checked:r,bubbles:n=!0,defaultChecked:s,...a}=e,o=f.useRef(null),l=tk(r),c=eS(t);f.useEffect(()=>{const u=o.current,h=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(h,"checked").set;if(l!==r&&m){const x=new Event("click",{bubbles:n});u.indeterminate=As(r),m.call(u,As(r)?!1:r),u.dispatchEvent(x)}},[l,r,n]);const d=f.useRef(As(r)?!1:r);return i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s??d.current,...a,tabIndex:-1,ref:o,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function As(e){return e==="indeterminate"}function ik(e){return As(e)?"indeterminate":e?"checked":"unchecked"}var ak=rk,cA=sk;const ok=f.forwardRef(({className:e,...t},r)=>i.jsx(ak,{ref:r,className:re("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:i.jsx(cA,{className:re("flex items-center justify-center text-current"),children:i.jsx(Tc,{className:"h-4 w-4"})})}));ok.displayName=ak.displayName;function lk(){if(window!==window.top)return!0;const e=navigator.userAgent.toLowerCase();return["fban","fbav","instagram","messenger","line/","whatsapp","twitter","tiktok","micromessenger","telegram"].some(r=>e.includes(r))}function ck(){const e=navigator.userAgent.toLowerCase();return e.includes("fban")||e.includes("fbav")?"facebook":e.includes("messenger")?"messenger":e.includes("instagram")?"instagram":e.includes("line/")?"line":e.includes("whatsapp")?"whatsapp":e.includes("twitter")?"twitter":e.includes("tiktok")?"tiktok":e.includes("micromessenger")?"wechat":e.includes("telegram")?"telegram":null}function dA(){switch(ck()){case"messenger":return"You are using Messenger's browser. If the sign-in button doesn't work, try opening this link in your regular browser.";case"facebook":return"You are using Facebook's browser. For the best experience, try opening this link in your regular browser.";case"instagram":return"You are using Instagram's browser. For the best experience, try opening this link in your regular browser.";default:return"You are using an embedded browser. If you experience issues, try opening this link in your regular browser."}}function uA(){return lk()&&!localStorage.getItem("embedded_browser_warning_dismissed")}function hA(){localStorage.setItem("embedded_browser_warning_dismissed","true")}const Mm=f.forwardRef(({type:e="text",value:t,onChange:r,placeholder:n,className:s,"data-testid":a},o)=>{const l=f.useRef(null),c=q4();return f.useImperativeHandle(o,()=>({focus:()=>{l.current&&l.current.focus()},blur:()=>{l.current&&l.current.blur()}})),f.useEffect(()=>{const d=l.current;if(!d||!c)return;console.log(" Setting up native iOS input"),d.style.fontSize="16px",d.style.webkitUserSelect="text",d.style.userSelect="text",d.style.webkitTouchCallout="default",d.style.pointerEvents="auto",d.readOnly=!1,d.removeAttribute("readonly"),d.removeAttribute("autocomplete"),d.removeAttribute("inputmode");const u=m=>{console.log(" Native touch detected on iOS input"),m.stopPropagation(),setTimeout(()=>{d.focus(),d.click()},0)},h=m=>{console.log(" Native click detected on iOS input"),m.stopPropagation(),d.focus()},p=m=>{const x=m.target;r(x.value)};return d.addEventListener("touchstart",u,{passive:!1}),d.addEventListener("click",h,{passive:!1}),d.addEventListener("input",p),()=>{d.removeEventListener("touchstart",u),d.removeEventListener("click",h),d.removeEventListener("input",p)}},[c,r]),f.useEffect(()=>{l.current&&l.current.value!==t&&(l.current.value=t)},[t]),c?i.jsx("input",{ref:l,type:e,defaultValue:t,placeholder:n,className:s,"data-testid":a,style:{fontSize:"16px",WebkitUserSelect:"text",userSelect:"text",WebkitTouchCallout:"default",pointerEvents:"auto"}}):i.jsx("input",{ref:l,type:e,value:t,onChange:d=>r(d.target.value),placeholder:n,className:s,"data-testid":a})});Mm.displayName="NativeIOSInput";const Ac="/assets/1000007818_1754326292159-DguCJ1cI.png";function fA({onLogin:e,onSwitchToRegister:t}){const[r,n]=f.useState({emailOrUsername:"",password:""}),[s,a]=f.useState({}),[o,l]=f.useState(!1),[c,d]=f.useState(!1),[u,h]=f.useState(!1),{toast:p}=ke(),m=f.useRef(null),x=f.useRef(null),y=lk(),w=ck();f.useEffect(()=>{d(pt.getRememberMeSetting()),h(uA())},[]);const v=pe({mutationFn:async k=>{console.log(" Making login API request...");try{const C=await ne("POST","/api/auth/login",k);console.log(" API request completed, parsing JSON...");const S=await C.json();return console.log(" Login API response data:",S),S}catch(C){throw console.error(" Login API request failed:",C),C}},onSuccess:k=>{console.log(" Login mutation onSuccess called with data:",k);try{console.log(" Calling onLogin with data and rememberMe:",c),e(k,c),console.log(" onLogin completed successfully")}catch(C){console.error(" Error in onLogin callback:",C)}},onError:k=>{if(console.error("Login mutation error:",k),y&&console.log(" Login failed in embedded browser:",w),k.message&&(k.message.includes("No account found")||k.message.includes("Invalid email/username")))p({title:"Account not found",description:"This email/username doesn't exist. Click 'Create Account' below to register.",variant:"destructive"});else{const C=k.message||"Invalid email/username or password.";p({title:"Login failed",description:C+(y?" If this continues, try opening the link in your regular browser.":""),variant:"destructive"})}}}),g=()=>{const k={};return r.emailOrUsername.trim()||(k.emailOrUsername="Email or username is required"),r.password||(k.password="Password is required"),a(k),Object.keys(k).length===0},b=k=>{k.preventDefault(),k.stopPropagation(),console.log(" Login form submission started",{formData:{emailOrUsername:r.emailOrUsername,passwordLength:r.password.length},isEmbeddedBrowser:window!==window.top,userAgent:navigator.userAgent,mutationPending:v.isPending});const C=g();if(console.log(" Form validation result:",C,{errors:s}),C){console.log(" Calling login mutation...");try{v.mutate(r),console.log(" Login mutation called successfully")}catch(S){console.error(" Error calling login mutation:",S)}}else console.log(" Form validation failed, not submitting")},j=(k,C)=>{n(S=>({...S,[k]:C})),s[k]&&a(S=>({...S,[k]:""}))};return i.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900/20 to-slate-900 flex items-center justify-center p-4 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 opacity-[0.03]",children:i.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle, white 1px, transparent 1px)",backgroundSize:"60px 60px"}})}),i.jsx("div",{className:"relative w-full max-w-md",children:i.jsxs("div",{className:"backdrop-blur-xl bg-white/5 border border-white/10 rounded-3xl shadow-2xl p-8 space-y-8",children:[u&&i.jsx("div",{className:"mb-6 p-4 bg-orange-500/10 border border-orange-400/20 rounded-xl",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(fl,{className:"h-5 w-5 text-orange-400 mt-0.5 flex-shrink-0"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-sm font-semibold text-orange-300 mb-1",children:w==="messenger"?"Messenger Browser Detected":"Embedded Browser Detected"}),i.jsx("p",{className:"text-xs text-orange-200 mb-3",children:dA()}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(z,{size:"sm",variant:"outline",onClick:()=>{const k=window.location.href;window.open(k,"_blank")},className:"h-7 text-xs bg-orange-400/10 border-orange-400/30 text-orange-300 hover:bg-orange-400/20",children:[i.jsx(eR,{className:"h-3 w-3 mr-1"}),"Open in Browser"]}),i.jsx(z,{size:"sm",variant:"ghost",onClick:()=>{hA(),h(!1)},className:"h-7 text-xs text-orange-400 hover:text-orange-300",children:"Continue Here"})]})]})]})}),i.jsxs("div",{className:"text-center space-y-4",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-white/10 rounded-2xl shadow-lg p-2",children:i.jsx("img",{src:Ac,alt:"Frhighday Pharms Logo",className:"w-full h-full object-contain"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-white to-gray-300 bg-clip-text text-transparent",children:"Welcome Back"}),i.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Continue your journey with Frhighday"})]})]}),i.jsxs("form",{onSubmit:b,className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-gray-200 text-sm font-medium mb-2 block",children:"Email or Username"}),i.jsx("div",{className:"relative",children:i.jsx(Mm,{ref:m,type:"text",value:r.emailOrUsername,onChange:k=>j("emailOrUsername",k),placeholder:"Enter your email or username",className:"w-full bg-white/5 border-white/10 text-white placeholder-gray-400 h-12 rounded-xl focus:border-emerald-400/50 focus:ring-emerald-400/20 focus:bg-black/60 transition-all duration-200","data-testid":"input-login-email-username"})}),s.emailOrUsername&&i.jsxs("p",{className:"text-red-400 text-sm mt-2 flex items-center gap-1",children:[i.jsx("span",{className:"w-1 h-1 bg-red-400 rounded-full"}),s.emailOrUsername]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-gray-200 text-sm font-medium mb-2 block",children:"Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(Mm,{ref:x,type:o?"text":"password",value:r.password,onChange:k=>j("password",k),placeholder:"Enter your password",className:"w-full bg-white/5 border-white/10 text-white placeholder-gray-400 h-12 rounded-xl pr-12 focus:border-emerald-400/50 focus:ring-emerald-400/20 focus:bg-black/60 transition-all duration-200","data-testid":"input-login-password"}),i.jsx("button",{type:"button",onClick:k=>{k.preventDefault(),k.stopPropagation(),l(!o)},className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white transition-colors duration-200","data-testid":"button-toggle-password",children:o?i.jsx(Ol,{className:"h-5 w-5"}):i.jsx(Dl,{className:"h-5 w-5"})})]}),s.password&&i.jsxs("p",{className:"text-red-400 text-sm mt-2 flex items-center gap-1",children:[i.jsx("span",{className:"w-1 h-1 bg-red-400 rounded-full"}),s.password]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2 pb-2",children:[i.jsx(ok,{id:"remember-me",checked:c,onCheckedChange:k=>d(!!k),className:"border-gray-600 data-[state=checked]:bg-emerald-500 data-[state=checked]:border-emerald-500","data-testid":"checkbox-remember-me"}),i.jsx("label",{htmlFor:"remember-me",className:"text-sm text-gray-400 hover:text-gray-300 cursor-pointer select-none",children:"Keep me logged in for 30 days"})]}),i.jsx(z,{type:"submit",disabled:v.isPending,onClick:k=>{console.log(" Sign In button clicked"),console.log(" Button event details:",{type:k.type,target:k.target}),k.preventDefault(),k.stopPropagation(),console.log(" Manually triggering form submission..."),b(k)},className:"w-full h-12 bg-gradient-to-r from-emerald-500 to-cyan-500 hover:from-emerald-600 hover:to-cyan-600 text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed","data-testid":"button-login",children:v.isPending?i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white/30 border-t-white"}),i.jsx("span",{children:"Signing In..."})]}):i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx(iR,{className:"w-5 h-5"}),i.jsx("span",{children:"Sign In"}),i.jsx(W5,{className:"w-4 h-4"})]})})]}),i.jsxs("div",{className:"text-center space-y-4 pt-4",children:[i.jsx("a",{href:"/forgot-password",className:"text-gray-400 hover:text-emerald-400 text-sm font-medium transition-colors duration-200 inline-block","data-testid":"link-forgot-password",children:"Forgot your password?"}),i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx("div",{className:"flex-1 h-px bg-white/10"}),i.jsx("span",{className:"text-gray-400 px-3",children:"or"}),i.jsx("div",{className:"flex-1 h-px bg-white/10"})]}),i.jsxs("p",{className:"text-gray-400 text-sm",children:["New to Frhighday?"," ",i.jsx("button",{onClick:t,className:"text-emerald-400 hover:text-emerald-300 font-semibold transition-colors duration-200","data-testid":"button-switch-register",children:"Create an account"})]})]})]})})]})}const le=f.forwardRef(({className:e,type:t,...r},n)=>i.jsx("input",{type:t,className:re("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...r}));le.displayName="Input";const xt=f.forwardRef(({className:e,...t},r)=>i.jsx("textarea",{className:re("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...t}));xt.displayName="Textarea";function pA({onComplete:e}){const[t,r]=f.useState({username:"",displayName:"",email:"",password:"",confirmPassword:"",bio:""}),[n,s]=f.useState({}),[a,o]=f.useState(!1),[l,c]=f.useState(!1),{toast:d}=ke(),u=pe({mutationFn:async x=>(await ne("POST","/api/auth/register",x)).json(),onSuccess:x=>{d({title:"Profile created successfully!",description:"Welcome to the Frhighday community."}),e(x)},onError:x=>{d({title:"Registration failed",description:x.message||"Please try again.",variant:"destructive"})}}),h=()=>{const x={};return t.username.trim()?t.username.length<3?x.username="Username must be at least 3 characters":/^[a-zA-Z0-9_]+$/.test(t.username)||(x.username="Username can only contain letters, numbers, and underscores"):x.username="Username is required",t.displayName.trim()||(x.displayName="Display name is required"),t.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email)||(x.email="Please enter a valid email"):x.email="Email is required",t.password?t.password.length<6&&(x.password="Password must be at least 6 characters"):x.password="Password is required",t.password!==t.confirmPassword&&(x.confirmPassword="Passwords do not match"),s(x),Object.keys(x).length===0},p=x=>{if(x.preventDefault(),h()){const{confirmPassword:y,...w}=t;u.mutate(w)}},m=(x,y)=>{r(w=>({...w,[x]:y})),n[x]&&s(w=>({...w,[x]:""}))};return i.jsx("div",{className:"min-h-screen bg-frhigh-dark flex items-center justify-center p-4",children:i.jsxs("div",{className:"w-full max-w-md space-y-8",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-white/10 rounded-2xl shadow-lg p-2 mx-auto mb-4",children:i.jsx("img",{src:Ac,alt:"Frhighday Pharms Logo",className:"w-full h-full object-contain"})}),i.jsx("h2",{className:"text-3xl font-bold text-white",children:"Create Your Profile"}),i.jsx("p",{className:"text-gray-400 mt-2",children:"Join the Frhighday Pharms community"})]}),i.jsxs("form",{onSubmit:p,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-white text-sm font-medium mb-2 block",children:"Username *"}),i.jsxs("p",{className:"text-gray-400 text-xs mb-2",children:["This appears as @",t.username||"yourusername"," in your profile URL and mentions"]}),i.jsx(le,{type:"text",value:t.username,onChange:x=>m("username",x.target.value),placeholder:"Choose a unique username",className:"w-full bg-frhigh-dark-secondary border-frhigh-dark-tertiary text-white","data-testid":"input-username"}),n.username&&i.jsx("p",{className:"text-red-400 text-sm mt-1",children:n.username})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-white text-sm font-medium mb-2 block",children:"Display Name *"}),i.jsxs("p",{className:"text-gray-400 text-xs mb-2",children:['This is how your name appears on posts and comments: "',t.displayName||"Your Name",'"']}),i.jsx(le,{type:"text",value:t.displayName,onChange:x=>m("displayName",x.target.value),placeholder:"Your display name",className:"w-full bg-frhigh-dark-secondary border-frhigh-dark-tertiary text-white","data-testid":"input-display-name"}),n.displayName&&i.jsx("p",{className:"text-red-400 text-sm mt-1",children:n.displayName})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-white text-sm font-medium mb-2 block",children:"Email *"}),i.jsx(le,{type:"email",value:t.email,onChange:x=>m("email",x.target.value),placeholder:"your@email.com",className:"w-full bg-frhigh-dark-secondary border-frhigh-dark-tertiary text-white","data-testid":"input-email"}),n.email&&i.jsx("p",{className:"text-red-400 text-sm mt-1",children:n.email})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-white text-sm font-medium mb-2 block",children:"Password *"}),i.jsxs("div",{className:"relative",children:[i.jsx(le,{type:a?"text":"password",value:t.password,onChange:x=>m("password",x.target.value),placeholder:"Choose a secure password",className:"w-full bg-frhigh-dark-secondary border-frhigh-dark-tertiary text-white pr-10","data-testid":"input-password"}),i.jsx("button",{type:"button",onClick:()=>o(!a),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white transition-colors","data-testid":"button-toggle-password",children:a?i.jsx(Ol,{className:"h-4 w-4"}):i.jsx(Dl,{className:"h-4 w-4"})})]}),n.password&&i.jsx("p",{className:"text-red-400 text-sm mt-1",children:n.password})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-white text-sm font-medium mb-2 block",children:"Confirm Password *"}),i.jsxs("div",{className:"relative",children:[i.jsx(le,{type:l?"text":"password",value:t.confirmPassword,onChange:x=>m("confirmPassword",x.target.value),placeholder:"Confirm your password",className:"w-full bg-frhigh-dark-secondary border-frhigh-dark-tertiary text-white pr-10","data-testid":"input-confirm-password"}),i.jsx("button",{type:"button",onClick:()=>c(!l),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white transition-colors","data-testid":"button-toggle-confirm-password",children:l?i.jsx(Ol,{className:"h-4 w-4"}):i.jsx(Dl,{className:"h-4 w-4"})})]}),n.confirmPassword&&i.jsx("p",{className:"text-red-400 text-sm mt-1",children:n.confirmPassword})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-white text-sm font-medium mb-2 block",children:"Bio (Optional)"}),i.jsx(xt,{value:t.bio,onChange:x=>m("bio",x.target.value),placeholder:"Tell us about yourself...",className:"bg-frhigh-dark-secondary border-frhigh-dark-tertiary text-white",rows:3,"data-testid":"textarea-bio"})]}),i.jsx(z,{type:"submit",disabled:u.isPending,className:"w-full bg-frhigh-green hover:bg-frhigh-green-light text-frhigh-dark font-semibold py-3","data-testid":"button-create-profile",children:u.isPending?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-frhigh-dark mr-2"}),"Creating Profile..."]}):"Create Profile"})]}),i.jsx("div",{className:"text-center text-xs text-gray-400",children:i.jsx("p",{children:"By creating an account, you agree to follow community guidelines and confirm you are 21+ years old."})})]})})}function mA(){if(typeof window<"u"&&window.Capacitor)return!0;if(typeof document<"u"){const e=document.URL;if(e.indexOf("http://")===-1&&e.indexOf("https://")===-1)return!0}return!1}function gA(){return typeof window>"u"?!1:window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0}function pl(){return mA()?"capacitor":gA()?"pwa":"browser"}class da{static getInstance(){return da.instance||(da.instance=new da),da.instance}async initialize(){const t=pl();switch(console.log(` Initializing notifications for ${t} environment`),t){case"capacitor":return this.initializeNativeNotifications();case"pwa":case"browser":return this.initializeWebNotifications()}}async initializeNativeNotifications(){try{const{PushNotifications:t}=await Zs(async()=>{const{PushNotifications:s}=await import("./index-f6kexzoJ.js");return{PushNotifications:s}},__vite__mapDeps([0,1])),{LocalNotifications:r}=await Zs(async()=>{const{LocalNotifications:s}=await import("./index-A7WwwtQ4.js");return{LocalNotifications:s}},__vite__mapDeps([2,1]));if((await t.requestPermissions()).receive!=="granted"){console.log(" Push notification permissions not granted");return}await t.register(),t.addListener("registration",s=>{console.log(" Native push registration:",s.value),this.sendTokenToServer(s.value,"native")}),t.addListener("pushNotificationReceived",s=>{console.log(" Push notification received:",s),this.handleNotificationReceived(s)}),t.addListener("pushNotificationActionPerformed",s=>{console.log(" Push notification action performed:",s),this.handleNotificationAction(s)}),console.log(" Native push notifications initialized")}catch(t){console.error(" Failed to initialize native notifications:",t),this.initializeInAppNotifications()}}async initializeWebNotifications(){try{const{PushNotificationManager:t}=await Zs(async()=>{const{PushNotificationManager:r}=await Promise.resolve().then(()=>bA);return{PushNotificationManager:r}},void 0);await t.getInstance().initialize(),console.log(" Web push notifications initialized")}catch(t){console.error(" Failed to initialize web notifications:",t),this.initializeInAppNotifications()}}initializeInAppNotifications(){console.log(" Using in-app notification system as fallback"),this.startNotificationPolling()}startNotificationPolling(){console.log(" Starting notification polling (8000ms interval)");const r=async()=>{try{const n=await fetch("/api/notifications/poll");if(n.ok){const s=await n.json();s.length>0&&this.displayInAppNotifications(s)}}catch(n){console.error("Notification polling error:",n)}};setInterval(r,8e3),r()}async sendTokenToServer(t,r){try{await fetch("/api/push/register-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t,type:r})}),console.log(` ${r} push token registered with server`)}catch(n){console.error(` Failed to register ${r} push token:`,n)}}handleNotificationReceived(t){console.log(" Processing received notification:",t),this.displayInAppNotifications([{id:Date.now().toString(),title:t.title,message:t.body,timestamp:new Date().toISOString()}])}handleNotificationAction(t){var r,n;console.log(" Processing notification action:",t),(n=(r=t.notification)==null?void 0:r.data)!=null&&n.url&&(window.location.href=t.notification.data.url)}displayInAppNotifications(t){t.forEach(r=>{console.log(" Displaying in-app notification:",r.title)})}async requestFilePermissions(){if(pl()==="capacitor")try{const{Filesystem:r}=await Zs(async()=>{const{Filesystem:a}=await import("./index-DDTyKKZ5.js");return{Filesystem:a}},__vite__mapDeps([3,1])),{Camera:n}=await Zs(async()=>{const{Camera:a}=await import("./index-BgXy4U9B.js");return{Camera:a}},__vite__mapDeps([4,1]));return(await n.requestPermissions()).camera==="granted"}catch(r){return console.error(" Failed to request file permissions:",r),!1}return!0}async syncUserData(){const t=pl();if(console.log(` Syncing user data for ${t} environment`),t==="capacitor")try{const{Preferences:r}=await Zs(async()=>{const{Preferences:s}=await import("./index-CEqZ26qW.js");return{Preferences:s}},__vite__mapDeps([5,1])),n=JSON.parse(localStorage.getItem("user")||"{}");n.id&&(await r.set({key:"user_data",value:JSON.stringify(n)}),console.log(" User data synced to native storage"))}catch(r){console.error(" Failed to sync user data:",r)}}}const Vf=da.getInstance();function dk(){const[e,t]=f.useState(""),[r,n]=f.useState("");f.useEffect(()=>{const o=window.location.origin;n(o);const l=`https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=${encodeURIComponent(o)}&bgcolor=0a0a0a&color=4ade80&margin=20`;t(l)},[]);const s=()=>{const o=document.createElement("a");o.href=e,o.download="frhighday-app-qr-code.png",document.body.appendChild(o),o.click(),document.body.removeChild(o)},a=async()=>{if(navigator.share)try{await navigator.share({title:"Frhighday Cannabis Community",text:"Scan this QR code to install the Frhighday app on your phone!",url:r})}catch(o){console.log("Error sharing:",o)}else navigator.clipboard.writeText(r),alert("App link copied to clipboard!")};return i.jsxs(dr,{children:[i.jsx(Wy,{asChild:!0,children:i.jsxs(z,{variant:"outline",className:"border-frhigh-green text-frhigh-green hover:bg-frhigh-green hover:text-frhigh-dark transition-colors","data-testid":"button-qr-code",children:[i.jsx(dR,{className:"w-4 h-4 mr-2"}),"QR Code"]})}),i.jsxs(qt,{className:"bg-frhigh-dark border-frhigh-dark-tertiary max-w-md mx-auto",children:[i.jsx(ur,{children:i.jsx(hr,{className:"text-center text-white",children:"Scan to Install Frhighday"})}),i.jsxs("div",{className:"text-center space-y-4",children:[i.jsx("div",{className:"bg-white p-4 rounded-2xl mx-auto w-fit",children:i.jsx("img",{src:e,alt:"QR Code for Frhighday App",className:"w-72 h-72","data-testid":"img-qr-code"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Share the App"}),i.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Anyone can scan this QR code with their phone camera to install Frhighday"}),i.jsx("p",{className:"text-xs text-gray-500 break-all bg-frhigh-dark-secondary p-2 rounded",children:r})]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsxs(z,{onClick:s,className:"flex-1 bg-frhigh-green text-frhigh-dark hover:bg-frhigh-green-light font-semibold","data-testid":"button-download-qr",children:[i.jsx(co,{className:"w-4 h-4 mr-2"}),"Download"]}),i.jsxs(z,{onClick:a,variant:"outline",className:"flex-1 border-frhigh-dark-tertiary text-gray-400 hover:text-white hover:bg-frhigh-dark-tertiary","data-testid":"button-share-qr",children:[i.jsx(Ej,{className:"w-4 h-4 mr-2"}),"Share"]})]})]})]})]})}function yA(){const[e,t]=f.useState(null),[r,n]=f.useState(!1),[s,a]=f.useState(!1),[o,l]=f.useState(!1);f.useEffect(()=>{const m=pl();if(m==="capacitor"){console.log("Running in native Capacitor app - PWA install prompts disabled");return}if(m==="pwa"){console.log("Running as installed PWA - install prompts disabled");return}if(localStorage.getItem("frhighday-install-dismissed"))return;const y=/iPad|iPhone|iPod/.test(navigator.userAgent);if(l(y),y)setTimeout(()=>n(!0),3e3);else{const w=g=>{g.preventDefault(),t(g),setTimeout(()=>n(!0),3e3)};window.addEventListener("beforeinstallprompt",w);const v=setTimeout(()=>{n(!0)},5e3);return()=>{window.removeEventListener("beforeinstallprompt",w),clearTimeout(v)}}},[]);const c=()=>{if(o)try{window.scrollTo({top:0,behavior:"smooth"});const m=document.createElement("div");return m.id="ios-install-hint",m.style.cssText=`
          position: fixed;
          bottom: 100px;
          left: 50%;
          transform: translateX(-50%);
          background: rgba(0, 0, 0, 0.9);
          color: white;
          padding: 12px 20px;
          border-radius: 20px;
          z-index: 10000;
          font-size: 14px;
          text-align: center;
          box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
          animation: pulse 2s infinite;
        `,m.innerHTML=' Tap the Share button in Safari, then "Add to Home Screen"',document.body.appendChild(m),setTimeout(()=>{const x=document.getElementById("ios-install-hint");x&&x.remove()},5e3),n(!1),!0}catch(m){console.error("iOS install hint error:",m)}return!1},d=async()=>{if(e)try{await e.prompt();const{outcome:m}=await e.userChoice;m==="accepted"&&(t(null),n(!1))}catch(m){console.error("InstallPrompt: Error with install prompt:",m)}else o&&c()||a(!0)},u=()=>{n(!1),localStorage.setItem("frhighday-install-dismissed","true")},h=()=>i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"text-center mb-4",children:[i.jsx(Sm,{className:"w-16 h-16 text-frhigh-green mx-auto mb-2"}),i.jsx("h3",{className:"text-lg font-semibold text-white",children:"Add Frhighday to Home Screen"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"Get the full app experience on iOS"})]}),i.jsxs("div",{className:"space-y-3 text-sm text-gray-300",children:[i.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-frhigh-dark-tertiary rounded-lg",children:[i.jsx("div",{className:"bg-frhigh-green text-frhigh-dark rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold",children:"1"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-white",children:"Tap the Share button"}),i.jsxs("p",{className:"text-xs text-gray-400",children:["Look for the ",i.jsx(Ej,{className:"inline w-3 h-3"})," icon at the bottom of Safari"]})]})]}),i.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-frhigh-dark-tertiary rounded-lg",children:[i.jsx("div",{className:"bg-frhigh-green text-frhigh-dark rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold",children:"2"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-white",children:'Scroll and tap "Add to Home Screen"'}),i.jsx("p",{className:"text-xs text-gray-400",children:"You'll see a list of options - scroll down to find it"})]})]}),i.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-frhigh-dark-tertiary rounded-lg",children:[i.jsx("div",{className:"bg-frhigh-green text-frhigh-dark rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold",children:"3"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-white",children:'Tap "Add" to confirm'}),i.jsx("p",{className:"text-xs text-gray-400",children:"Frhighday will appear on your home screen like a native app"})]})]})]})]}),p=()=>i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"text-center mb-4",children:[i.jsx(Sm,{className:"w-16 h-16 text-frhigh-green mx-auto mb-2"}),i.jsx("h3",{className:"text-lg font-semibold text-white",children:"Add Frhighday to Home Screen"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"Get the full app experience on Android"})]}),i.jsxs("div",{className:"space-y-3 text-sm text-gray-300",children:[i.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-frhigh-dark-tertiary rounded-lg",children:[i.jsx("div",{className:"bg-frhigh-green text-frhigh-dark rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold",children:"1"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-white",children:"Tap the menu () in Chrome"}),i.jsx("p",{className:"text-xs text-gray-400",children:"Look for three dots in the top-right corner"})]})]}),i.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-frhigh-dark-tertiary rounded-lg",children:[i.jsx("div",{className:"bg-frhigh-green text-frhigh-dark rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold",children:"2"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-white",children:'Tap "Add to Home screen"'}),i.jsx("p",{className:"text-xs text-gray-400",children:'You might see "Install app" instead'})]})]}),i.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-frhigh-dark-tertiary rounded-lg",children:[i.jsx("div",{className:"bg-frhigh-green text-frhigh-dark rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold",children:"3"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-white",children:'Tap "Add" or "Install"'}),i.jsx("p",{className:"text-xs text-gray-400",children:"Frhighday will appear on your home screen"})]})]})]})]});return i.jsxs(i.Fragment,{children:[i.jsx(dr,{open:r,onOpenChange:n,children:i.jsxs(qt,{className:"bg-frhigh-dark border-frhigh-dark-tertiary max-w-sm mx-auto",children:[i.jsxs(ur,{className:"relative",children:[i.jsx("button",{onClick:u,className:"absolute -top-2 -right-2 text-gray-400 hover:text-white transition-colors","data-testid":"button-dismiss-install",children:i.jsx($r,{className:"w-5 h-5"})}),i.jsx(hr,{className:"text-center text-white",children:"Install Frhighday Pharms App"}),i.jsx(Wn,{className:"text-center text-gray-400",children:"Get the full app experience on your device"})]}),i.jsxs("div",{className:"text-center space-y-4",children:[i.jsx("div",{className:"w-20 h-20 bg-white rounded-2xl mx-auto flex items-center justify-center p-2",children:i.jsx("img",{src:Ac,alt:"Frhighday Pharms",className:"w-full h-full object-contain"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Get the App Experience"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"Add Frhighday Pharms to your home screen for faster access and notifications"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(z,{onClick:d,className:"w-full bg-frhigh-green text-frhigh-dark hover:bg-frhigh-green-light font-semibold","data-testid":"button-install-app",children:[i.jsx(co,{className:"w-4 h-4 mr-2"}),e?"Install App":o?"Add to Home Screen":"Show Instructions"]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx(z,{onClick:u,variant:"outline",className:"flex-1 border-frhigh-dark-tertiary text-gray-400 hover:text-white hover:bg-frhigh-dark-tertiary","data-testid":"button-not-now",children:"Not Now"}),i.jsx(dk,{})]})]})]})]})}),i.jsx(dr,{open:s,onOpenChange:a,children:i.jsxs(qt,{className:"bg-frhigh-dark border-frhigh-dark-tertiary max-w-md mx-auto max-h-[80vh] overflow-y-auto",children:[i.jsxs(ur,{className:"relative",children:[i.jsx("button",{onClick:()=>a(!1),className:"absolute -top-2 -right-2 text-gray-400 hover:text-white transition-colors","data-testid":"button-close-instructions",children:i.jsx($r,{className:"w-5 h-5"})}),i.jsx(hr,{className:"text-center text-white",children:"Installation Instructions"}),i.jsx(Wn,{className:"text-center text-gray-400",children:"Follow these steps to install Frhighday on your device"})]}),o?i.jsx(h,{}):i.jsx(p,{}),i.jsx("div",{className:"mt-6",children:i.jsx(z,{onClick:()=>a(!1),className:"w-full bg-frhigh-green text-frhigh-dark hover:bg-frhigh-green-light font-semibold","data-testid":"button-got-it",children:"Got It!"})})]})})]})}const ae=f.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:re("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));ae.displayName="Card";const Ee=f.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:re("flex flex-col space-y-1.5 p-6",e),...t}));Ee.displayName="CardHeader";const Te=f.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:re("text-2xl font-semibold leading-none tracking-tight",e),...t}));Te.displayName="CardTitle";const Is=f.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:re("text-sm text-muted-foreground",e),...t}));Is.displayName="CardDescription";const oe=f.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:re("p-6 pt-0",e),...t}));oe.displayName="CardContent";const vA=f.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:re("flex items-center p-6 pt-0",e),...t}));vA.displayName="CardFooter";class Ky{constructor(){this.notificationStrategies=[],this.installStatus=this.detectInstallationStatus(),this.initializeNotificationStrategies()}static getInstance(){return this.instance||(this.instance=new Ky),this.instance}detectInstallationStatus(){const t=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0||document.referrer.includes("android-app://"),r=t||localStorage.getItem("pwa-installed")==="true"||this.isRunningInAppMode(),n=this.detectPlatform();return{isInstalled:r,isStandalone:t,platform:n,supportsPushNotifications:this.checkPushNotificationSupport(),supportsInAppNotifications:!0}}isRunningInAppMode(){var t,r;return window.location.search.includes("source=pwa")||window.location.href.includes("utm_source=pwa")||window.location.pathname.startsWith("/app/")||((r=(t=window.chrome)==null?void 0:t.app)==null?void 0:r.isInstalled)||document.documentElement.getAttribute("data-app-mode")==="installed"}detectPlatform(){const t=navigator.userAgent.toLowerCase();return/iphone|ipad|ipod/.test(t)?"ios":/android/.test(t)?"android":/windows|mac|linux/.test(t)&&!/mobile/.test(t)?"desktop":"unknown"}checkPushNotificationSupport(){var s;if(!("serviceWorker"in navigator)||!("PushManager"in window))return!1;if((s=this.installStatus)!=null&&s.isInstalled)return!0;const t=/chrome/.test(navigator.userAgent.toLowerCase()),r=/firefox/.test(navigator.userAgent.toLowerCase()),n=/edge/.test(navigator.userAgent.toLowerCase());return t||r||n}initializeNotificationStrategies(){this.notificationStrategies=[],this.installStatus.supportsPushNotifications&&this.notificationStrategies.push("push"),this.notificationStrategies.push("in-app"),this.installStatus.isInstalled&&"setAppBadge"in navigator&&this.notificationStrategies.push("badge"),this.notificationStrategies.push("polling"),"serviceWorker"in navigator&&"sync"in window.ServiceWorkerRegistration.prototype&&this.notificationStrategies.push("background-sync"),console.log(` Notification strategies for ${this.installStatus.isInstalled?"installed":"web"} app:`,this.notificationStrategies)}async requestNotificationPermissions(){if(!this.installStatus.supportsPushNotifications)return{success:!1,method:"unsupported"};try{return this.installStatus.isInstalled?{success:await this.requestInstallAppPermissions()==="granted",method:"installed-app"}:{success:await Notification.requestPermission()==="granted",method:"standard"}}catch(t){return console.error("Failed to request notification permissions:",t),{success:!1,method:"error"}}}async requestInstallAppPermissions(){try{if("Notification"in window){const t=await Notification.requestPermission();if(t==="granted")return t}if("serviceWorker"in navigator){const t=await navigator.serviceWorker.ready;if(t.pushManager)try{if(await t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:await this.getVapidKey()}))return"granted"}catch{console.log("Push subscription failed, falling back to basic notifications")}}return"denied"}catch(t){return console.error("Error requesting installed app permissions:",t),"denied"}}async getVapidKey(){try{return(await(await fetch("/api/push/vapid-key")).json()).publicKey}catch(t){return console.error("Failed to get VAPID key:",t),""}}async sendNotification(t,r={}){let n=!1;if(this.notificationStrategies.includes("push")&&(n=await this.sendPushNotification(t,r),n))return!0;if(Notification.permission==="granted")try{new Notification(t,{...r,icon:r.icon||"/frhighday-logo-icon.png",badge:"/frhighday-logo-icon.png",tag:r.tag||"frhighday-notification",requireInteraction:this.installStatus.isInstalled,silent:!1}),n=!0}catch(s){console.error("Browser notification failed:",s)}return!n&&this.notificationStrategies.includes("badge")&&await this.updateAppBadge(),this.showInAppNotification(t,r),n}async sendPushNotification(t,r){try{if("serviceWorker"in navigator)return await(await navigator.serviceWorker.ready).showNotification(t,{...r,icon:r.icon||"/frhighday-logo-icon.png",badge:"/frhighday-logo-icon.png",tag:r.tag||"frhighday-push",requireInteraction:this.installStatus.isInstalled,vibrate:this.installStatus.platform==="android"?[200,100,200]:void 0,actions:this.installStatus.isInstalled?[{action:"view",title:"View",icon:"/frhighday-logo-icon.png"},{action:"dismiss",title:"Dismiss"}]:void 0}),!0}catch(n){console.error("Push notification failed:",n)}return!1}async updateAppBadge(t=1){try{"setAppBadge"in navigator&&this.installStatus.isInstalled&&await navigator.setAppBadge(t)}catch(r){console.error("Failed to update app badge:",r)}}showInAppNotification(t,r){window.dispatchEvent(new CustomEvent("show-in-app-notification",{detail:{title:t,message:r.body||"",icon:r.icon||"/frhighday-logo-icon.png",timestamp:Date.now(),source:"installed-app-manager"}}))}startEnhancedPolling(t=1e4){const r=this.installStatus.isInstalled?t/2:t;setInterval(async()=>{try{await this.checkForPendingNotifications()}catch(n){console.error("Notification polling error:",n)}},r),console.log(` Enhanced notification polling started (${r}ms interval) for ${this.installStatus.isInstalled?"installed":"web"} app`)}async checkForPendingNotifications(){try{const t=this.getCurrentUserId();if(!t)return;const r=await fetch(`/api/notifications/pending/${t}`);if(!r.ok)return;const n=await r.json();for(const s of n)await this.sendNotification(s.title,{body:s.message,tag:`notification-${s.id}`,data:{notificationId:s.id}}),await fetch(`/api/notifications/delivered/${s.id}`,{method:"POST"})}catch(t){console.error("Failed to check pending notifications:",t)}}getCurrentUserId(){try{const t=localStorage.getItem("user-data");if(t)return JSON.parse(t).id;const r=sessionStorage.getItem("current-user");return r?JSON.parse(r).id:null}catch{return null}}getInstallationStatus(){return{...this.installStatus}}isInstalledApp(){return this.installStatus.isInstalled}markAsInstalled(){this.installStatus.isInstalled=!0,this.installStatus.isStandalone=!0,localStorage.setItem("pwa-installed","true"),this.initializeNotificationStrategies(),console.log(" App marked as installed, notification strategies updated")}}const xA=Ky.getInstance();let F0="BNk0DNuYniWIcImX7FyuO8nDmW8cOeJZSHs2aF84zGNxNujEzPzBAQe30ZrYE25aysTAVY2NPByPpHhNeCXBykQ";class Rr{constructor(){}static getInstance(){return Rr.instance||(Rr.instance=new Rr),Rr.instance}async initialize(){if(!this.isSupported()){console.log("Push notifications not supported in this environment");return}try{const t=await navigator.serviceWorker.register("/sw.js");console.log("Service Worker registered:",t);const r=await fetch("/api/push/vapid-public-key");if(r.ok){const n=await r.json();F0=n.publicKey,console.log(" VAPID public key loaded from server:",n.publicKey.substring(0,20)+"...")}else console.error("Failed to fetch VAPID public key:",r.status)}catch(t){throw console.error("Error initializing push notifications:",t),t}}isSupported(){const t="serviceWorker"in navigator,r="Notification"in window,n="PushManager"in window,s=location.protocol==="https:"||location.hostname==="localhost"||location.hostname.includes("replit.dev")||location.hostname.includes(".replit.app")||location.hostname.includes(".repl.co"),a=xA.getInstallationStatus(),o=t&&n&&r&&s,l=t&&r&&s,c=a.isInstalled&&t&&r&&s;return console.log("Push notification support check:",{serviceWorker:t,pushManager:n,notification:r,isSecureContext:s,protocol:location.protocol,hostname:location.hostname,isInstalled:a.isInstalled,platform:a.platform,fullSupport:o,devSupport:l,installedAppSupport:c,supported:o||c||!1}),o||c||!1}getPermissionStatus(){return"Notification"in window?Notification.permission:"default"}async requestPermission(){if(!this.isSupported())throw new Error("Push notifications are not supported");return"Notification"in window?await Notification.requestPermission():"denied"}async autoSubscribe(){try{if(console.log(" Starting auto-subscription process..."),!this.isSupported())return console.log(" Push notifications not supported in this environment"),{success:!1,error:"Push notifications not supported"};localStorage.getItem("notification-decision-made")==="true"&&console.log(" User has already made notification decision, but attempting auto-subscription anyway for opt-out system");const r=this.getPermissionStatus();if(console.log(" Current notification permission:",r),r==="denied")return console.log(" Notifications denied, skipping auto-subscription"),localStorage.setItem("notification-decision-made","true"),{success:!1,error:"Notifications denied"};if(r==="default"){console.log(" Requesting notification permission...");const s=await this.requestPermission();if(console.log(" Permission result:",s),localStorage.setItem("notification-decision-made","true"),s!=="granted")return console.log(" Permission not granted, aborting subscription"),{success:!1,error:"Permission not granted"}}console.log(" Permission granted, proceeding with subscription...");const n=await this.subscribe();return n?(console.log(" Auto-subscription successful!"),{success:!0,subscription:n}):(console.log(" Auto-subscription failed"),{success:!1,error:"Subscription failed"})}catch(t){return console.error(" Error in auto-subscription:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}urlBase64ToUint8Array(t){const r="=".repeat((4-t.length%4)%4),n=(t+r).replace(/-/g,"+").replace(/_/g,"/"),s=window.atob(n),a=new Uint8Array(s.length);for(let o=0;o<s.length;++o)a[o]=s.charCodeAt(o);return a}async subscribe(){try{if(await this.initialize(),!("PushManager"in window))return console.log(" PushManager not available, cannot create real subscription"),null;const r=await(await navigator.serviceWorker.ready).pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:this.urlBase64ToUint8Array(F0)});return await this.sendSubscriptionToServer(r),r}catch(t){return console.error("Error subscribing to push notifications:",t),null}}async sendSubscriptionToServer(t){try{const r={"Content-Type":"application/json"},n=localStorage.getItem("user-session");n&&(r["x-user-data"]=encodeURIComponent(n));const s=await fetch("/api/push/subscribe",{method:"POST",headers:r,body:JSON.stringify({subscription:t.toJSON(),userAgent:navigator.userAgent})});if(!s.ok)throw console.error("Failed to send subscription to server:",s.status,s.statusText),new Error("Failed to send subscription to server");console.log(" Push subscription saved to server successfully")}catch(r){throw console.error("Error sending subscription to server:",r),r}}async unsubscribe(){try{const r=await(await navigator.serviceWorker.ready).pushManager.getSubscription();return r?(await r.unsubscribe(),await this.removeSubscriptionFromServer(r),!0):!1}catch(t){return console.error("Error unsubscribing from push notifications:",t),!1}}async removeSubscriptionFromServer(t){try{const r={"Content-Type":"application/json"},n=localStorage.getItem("user-session");n&&(r["x-user-data"]=encodeURIComponent(n));const s=await fetch("/api/push/unsubscribe",{method:"POST",headers:r,body:JSON.stringify({subscription:t.toJSON()})});s.ok?console.log(" Push subscription removed from server successfully"):console.error("Failed to remove subscription from server:",s.status)}catch(r){console.error("Error removing subscription from server:",r)}}async showLocalNotification(t,r,n,s){if(this.getPermissionStatus()!=="granted"&&await this.requestPermission()!=="granted")throw new Error("Notification permission denied");await(await navigator.serviceWorker.ready).showNotification(t,{body:r,icon:n||"/icon-192x192.png",badge:"/icon-72x72.png",data:s,requireInteraction:!0,tag:"frhighday-notification"})}async getCurrentSubscription(){try{return await(await navigator.serviceWorker.ready).pushManager.getSubscription()}catch(t){return console.error("Error getting current subscription:",t),null}}async createSimulatedSubscription(){try{const t={endpoint:"https://fcm.googleapis.com/fcm/send/simulated-development-endpoint",keys:{p256dh:"simulated-p256dh-key",auth:"simulated-auth-key"}},r={"Content-Type":"application/json"},n=localStorage.getItem("user-session");n&&(r["x-user-data"]=encodeURIComponent(n));const s=await fetch("/api/push/subscribe",{method:"POST",headers:r,body:JSON.stringify({subscription:t,userAgent:navigator.userAgent+" (Simulated)",isSimulated:!0})});return s.ok?(console.log(" Simulated push subscription saved to server successfully"),{success:!0}):(console.error("Failed to send simulated subscription to server:",s.status,s.statusText),{success:!1,error:"Failed to send simulated subscription to server"})}catch(t){return console.error("Error creating simulated subscription:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}}Rr.getInstance();const bA=Object.freeze(Object.defineProperty({__proto__:null,PushNotificationManager:Rr},Symbol.toStringTag,{value:"Module"}));function wA(){const[e,t]=f.useState(!1),[r,n]=f.useState("default"),[s,a]=f.useState(!1),{toast:o}=ke();f.useEffect(()=>{const h=Rr.getInstance();if(!h.isSupported())return;const p=h.getPermissionStatus();if(n(p),p==="default"){const m=setTimeout(()=>{t(!0)},3e3);return()=>clearTimeout(m)}p==="granted"&&l()},[]);const l=async()=>{try{const p=await(await navigator.serviceWorker.ready).pushManager.getSubscription();a(!!p)}catch(h){console.error("Error checking subscription status:",h)}},c=async()=>{try{const h=Rr.getInstance(),p=await h.requestPermission();if(n(p),p==="granted")if(await h.subscribe())a(!0),t(!1),o({title:"Notifications Enabled! ",description:"You'll now receive updates from The Shop and community announcements."});else throw new Error("Failed to subscribe");else p==="denied"&&(t(!1),o({title:"Notifications Blocked",description:"You can enable notifications in your browser settings if you change your mind.",variant:"destructive"}))}catch(h){console.error("Error enabling notifications:",h),o({title:"Error",description:"Failed to enable notifications. Please try again.",variant:"destructive"})}},d=async()=>{try{await Rr.getInstance().unsubscribe()&&(a(!1),o({title:"Notifications Disabled",description:"You won't receive push notifications anymore."}))}catch(h){console.error("Error disabling notifications:",h),o({title:"Error",description:"Failed to disable notifications. Please try again.",variant:"destructive"})}},u=()=>{t(!1),localStorage.setItem("notification-prompt-dismissed",Date.now().toString())};return!Rr.getInstance().isSupported()||r==="denied"?null:r==="granted"&&!e?i.jsxs(ae,{className:"bg-gradient-to-r from-green-500/10 to-green-600/10 border-green-500/20",children:[i.jsx(Ee,{className:"pb-3",children:i.jsx(Te,{className:"text-sm flex items-center gap-2",children:s?i.jsxs(i.Fragment,{children:[i.jsx(Mn,{className:"h-4 w-4 text-green-500"}),"Notifications Enabled"]}):i.jsxs(i.Fragment,{children:[i.jsx(Sj,{className:"h-4 w-4 text-gray-500"}),"Notifications Disabled"]})})}),i.jsx(oe,{className:"pt-0",children:s?i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:"You're receiving push notifications from The Shop"}),i.jsx(z,{variant:"outline",size:"sm",onClick:d,className:"text-xs",children:"Turn Off Notifications"})]}):i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Enable notifications to stay updated"}),i.jsx(z,{variant:"default",size:"sm",onClick:c,className:"text-xs",children:"Enable Notifications"})]})})]}):e?i.jsxs(ae,{className:"fixed bottom-4 right-4 z-50 max-w-sm bg-gradient-to-r from-green-500/10 to-green-600/10 border-green-500/20 shadow-lg",children:[i.jsxs(Ee,{className:"pb-3",children:[i.jsxs(Te,{className:"text-sm flex items-center gap-2",children:[i.jsx(Mn,{className:"h-4 w-4 text-green-500"}),"Stay Connected with The Shop"]}),i.jsx(Is,{className:"text-xs",children:"Get instant notifications for community updates, 420 reminders, and important announcements"})]}),i.jsx(oe,{className:"pt-0",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx(z,{variant:"default",size:"sm",onClick:c,className:"flex-1 text-xs","data-testid":"button-enable-notifications",children:"Enable"}),i.jsx(z,{variant:"outline",size:"sm",onClick:u,className:"text-xs","data-testid":"button-dismiss-notifications",children:"Later"})]})})]}):null}function NA(){return i.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:i.jsx(ae,{className:"w-full max-w-md mx-4",children:i.jsxs(oe,{className:"pt-6",children:[i.jsxs("div",{className:"flex mb-4 gap-2",children:[i.jsx(fl,{className:"h-8 w-8 text-red-500"}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),i.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}var Gy="Avatar",[jA,b9]=Qt(Gy),[SA,uk]=jA(Gy),hk=f.forwardRef((e,t)=>{const{__scopeAvatar:r,...n}=e,[s,a]=f.useState("idle");return i.jsx(SA,{scope:r,imageLoadingStatus:s,onImageLoadingStatusChange:a,children:i.jsx(ie.span,{...n,ref:t})})});hk.displayName=Gy;var fk="AvatarImage",pk=f.forwardRef((e,t)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:s=()=>{},...a}=e,o=uk(fk,r),l=kA(n,a),c=Ge(d=>{s(d),o.onImageLoadingStatusChange(d)});return ze(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?i.jsx(ie.img,{...a,ref:t,src:n}):null});pk.displayName=fk;var mk="AvatarFallback",gk=f.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:n,...s}=e,a=uk(mk,r),[o,l]=f.useState(n===void 0);return f.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(c)}},[n]),o&&a.imageLoadingStatus!=="loaded"?i.jsx(ie.span,{...s,ref:t}):null});gk.displayName=mk;function M0(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function kA(e,{referrerPolicy:t,crossOrigin:r}){const n=PA(),s=f.useRef(null),a=n?(s.current||(s.current=new window.Image),s.current):null,[o,l]=f.useState(()=>M0(a,e));return ze(()=>{l(M0(a,e))},[a,e]),ze(()=>{const c=h=>()=>{l(h)};if(!a)return;const d=c("loaded"),u=c("error");return a.addEventListener("load",d),a.addEventListener("error",u),t&&(a.referrerPolicy=t),typeof r=="string"&&(a.crossOrigin=r),()=>{a.removeEventListener("load",d),a.removeEventListener("error",u)}},[a,r,t]),o}function CA(){return()=>{}}function PA(){return f.useSyncExternalStore(CA,()=>!0,()=>!1)}var yk=hk,vk=pk,xk=gk;const rr=f.forwardRef(({className:e,...t},r)=>i.jsx(yk,{ref:r,className:re("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));rr.displayName=yk.displayName;const nr=f.forwardRef(({className:e,src:t,alt:r,...n},s)=>i.jsx(vk,{ref:s,className:re("aspect-square h-full w-full",e),src:t,alt:r,onError:a=>{a.currentTarget.style.display="none"},...n}));nr.displayName=vk.displayName;const sr=f.forwardRef(({className:e,...t},r)=>i.jsx(xk,{ref:r,className:re("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));sr.displayName=xk.displayName;function Qy(){const{user:e,isLoading:t}=Fe(),r=["admin-frhighday-1754353771865","admin-16south-1754353923978","theshop","MeanMug"],n=e&&(r.includes(e.id)||r.includes(e.username)||e.email==="Frhighday760@icloud.com"||e.email==="16southvideo@gmail.com"),s=(e==null?void 0:e.isAdmin)||(e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="super_admin"||n,a=(e==null?void 0:e.role)||(n?"admin":"user"),{data:o,isLoading:l}=xe({queryKey:["/api/admin/check",e==null?void 0:e.id],queryFn:async()=>{if(!(e!=null&&e.id))return null;const h=await fetch(`/api/admin/check/${e.id}`,{credentials:"include"});if(!h.ok)return{isAdmin:s,role:a};const p=await h.json();return localStorage.setItem(`frhighday_admin_status_${e.id}`,JSON.stringify({isAdmin:p.isAdmin||s,role:p.role||a,timestamp:Date.now()})),p},enabled:!!(e!=null&&e.id)&&!t,staleTime:6e4,gcTime:6e5,retry:1,retryDelay:500,initialData:()=>{if(s)return{isAdmin:s,role:a};if(e!=null&&e.id)try{const h=localStorage.getItem(`frhighday_admin_status_${e.id}`);if(h){const p=JSON.parse(h);if(Date.now()-p.timestamp<3*60*1e3)return p}}catch{}return{isAdmin:s,role:a}}}),c=s||(o==null?void 0:o.isAdmin)||!1,d=a!=="user"?a:(o==null?void 0:o.role)||"user";return{isAdmin:c,role:d,isLoading:t&&!c,adminCheck:o}}function EA(){const[e,t]=f.useState("off"),[r,n]=f.useState(!1),{toast:s}=ke();f.useEffect(()=>{const u=localStorage.getItem("progressier-notification-bell-state");(u==="on"||u==="off")&&t(u),a();const h=()=>{document.hidden||a()};return document.addEventListener("visibilitychange",h),()=>{document.removeEventListener("visibilitychange",h)}},[]);const a=()=>{if(typeof window.progressier<"u"&&"Notification"in window){const u=Notification.permission,h=u==="granted"?"on":"off";t(h),localStorage.setItem("progressier-notification-bell-state",h),console.log(" Progressier notification status:",{permission:u,bellState:h,progressierAvailable:!0})}},o=async()=>{if(!r){console.log(" Progressier notification bell clicked"),n(!0);try{let u=0;for(;typeof window.progressier>"u"&&u<50;)await new Promise(p=>setTimeout(p,100)),u++;if(typeof window.progressier>"u"){if(console.log("Progressier service unavailable, using native Web Push API"),e==="off")try{if(await Notification.requestPermission()==="granted")if("serviceWorker"in navigator&&"PushManager"in window)try{const m=await navigator.serviceWorker.ready;if(!await m.pushManager.getSubscription()){const y=await fetch("/api/push/vapid-public-key"),{publicKey:w}=await y.json(),v=await m.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:w});console.log(" Registering push subscription with backend"),console.log(" Subscription details:",v);const g=localStorage.getItem("user");let b={};if(g)try{b={"x-user-data":encodeURIComponent(g)}}catch(C){console.error("Error parsing user data for auth headers:",C)}const j=await fetch("/api/push/subscribe",{method:"POST",headers:{"Content-Type":"application/json",...b},credentials:"include",body:JSON.stringify({subscription:v,userAgent:navigator.userAgent})});if(console.log(" Backend response status:",j.status),!j.ok){const C=await j.text();console.error(" Failed to register push subscription:",C);try{const S=JSON.parse(C);throw new Error(`Registration failed: ${S.error||"Unknown error"}`)}catch{throw new Error(`Registration failed with status ${j.status}: ${C}`)}}const k=await j.json();console.log(" Push subscription registered successfully:",k)}t("on"),localStorage.setItem("progressier-notification-bell-state","on"),s({title:"Notifications On",description:"You'll receive updates from The Shop."})}catch(m){console.error("Push subscription error:",m),t("on"),localStorage.setItem("progressier-notification-bell-state","on"),s({title:"Notifications On (Visual Mode)",description:"Visual indicator enabled. Push notifications may have limited support."})}else t("on"),localStorage.setItem("progressier-notification-bell-state","on"),s({title:"Notifications On (Visual Mode)",description:"Visual indicator enabled. Push notifications not supported on this device."});else s({title:"Permission Denied",description:"Please enable notifications in your browser settings.",variant:"destructive"})}catch(p){console.error("Error requesting notification permission:",p),t("on"),localStorage.setItem("progressier-notification-bell-state","on"),s({title:"Notifications On (Visual Mode)",description:"Visual indicator enabled. Push notifications may not be fully supported."})}else t("off"),localStorage.setItem("progressier-notification-bell-state","off"),s({title:"Notifications Off",description:"Visual notification indicator disabled."});n(!1);return}const h=window.progressier;if(e==="off")try{await Notification.requestPermission()==="granted"?(t("on"),localStorage.setItem("progressier-notification-bell-state","on"),h.push&&typeof h.push.subscribe=="function"&&await h.push.subscribe(),s({title:"Notifications On",description:"You'll receive updates from The Shop."})):s({title:"Permission Denied",description:"Please enable notifications in your browser settings.",variant:"destructive"})}catch(p){console.error("Error requesting notification permission:",p),t("on"),localStorage.setItem("progressier-notification-bell-state","on"),s({title:"Notifications On (Visual Mode)",description:"Visual indicator enabled. Push notifications may not be fully supported on this device."})}else t("off"),localStorage.setItem("progressier-notification-bell-state","off"),h.push&&typeof h.push.unsubscribe=="function"&&await h.push.unsubscribe(),s({title:"Notifications Off",description:"You won't receive push notifications."})}catch(u){console.error("Error toggling Progressier notifications:",u),s({title:"Error",description:"Something went wrong. Please try again.",variant:"destructive"})}finally{n(!1)}}},l=e==="on",c=l?"text-green-500":"text-red-500",d=l?Mn:Sj;return i.jsxs("div",{className:`
        relative cursor-pointer p-2 rounded-lg transition-all duration-200
        hover:bg-gray-800 active:bg-gray-700 select-none touch-manipulation
        ${r?"opacity-60 pointer-events-none":""}
      `,onClick:o,onTouchStart:u=>{u.currentTarget&&u.currentTarget.style&&(u.currentTarget.style.backgroundColor="rgb(55, 65, 81)")},onTouchEnd:u=>{u.currentTarget&&u.currentTarget.style&&setTimeout(()=>{u.currentTarget&&u.currentTarget.style&&(u.currentTarget.style.backgroundColor="")},150)},"data-testid":"progressier-notification-bell",title:l?"Turn off notifications":"Turn on notifications",children:[i.jsx(d,{className:`h-6 w-6 ${c} transition-colors duration-200`}),r&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx("div",{className:"w-4 h-4 border-2 border-gray-600 border-t-green-500 rounded-full animate-spin"})})]})}function Ic(){const[e]=kc(),{user:t}=Fe();Qy();const{data:r}=xe({queryKey:["/api/neon-sign"],refetchInterval:5e3,staleTime:0});return i.jsx("nav",{className:"bg-frhigh-dark-secondary/90 backdrop-blur-md border-b border-frhigh-green/10 sticky top-0 z-50 shadow-lg",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"relative flex justify-between items-center h-18",children:[i.jsxs("div",{className:"flex items-center space-x-3 z-10",children:[i.jsx(cr,{href:"/",className:"flex items-center",children:i.jsx("img",{src:Ac,alt:"Frhighday Pharms",className:"w-12 h-10 object-contain hover:scale-105 transition-transform duration-200"})}),i.jsx(EA,{})]}),r&&i.jsx("div",{className:"absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 z-0",children:i.jsx("div",{className:`font-bold text-lg tracking-wide transition-all duration-700 ${r.isOn?"text-frhigh-green animate-pulse drop-shadow-[0_0_10px_rgba(34,197,94,0.8)]":"text-gray-500"}`,children:r.isOn?"OPEN":"CLOSED"})}),i.jsx("div",{className:"flex items-center space-x-3 z-10",children:t&&i.jsx(cr,{href:"/profile",children:i.jsxs(z,{variant:e==="/profile"?"default":"ghost",className:`flex items-center space-x-2 transition-all duration-300 transform hover:scale-105 ${e==="/profile"?"bg-frhigh-green text-frhigh-dark hover:bg-frhigh-green-light shadow-lg shadow-frhigh-green/25":"text-gray-300 hover:text-white hover:bg-frhigh-dark-tertiary hover:shadow-md"}`,"data-testid":"nav-profile",children:[i.jsxs(rr,{className:"w-7 h-7 ring-2 ring-frhigh-green/20 hover:ring-frhigh-green/60 transition-all duration-300 transform hover:scale-110",children:[i.jsx(nr,{src:t.avatar,alt:t.displayName}),i.jsx(sr,{className:"bg-frhigh-green text-frhigh-dark text-xs transition-colors duration-200",children:t.displayName.charAt(0).toUpperCase()})]}),i.jsx("span",{className:"transition-all duration-200",children:"Profile"})]})})})]})})})}function Ui(){const[e]=kc(),{user:t}=Fe();xe({queryKey:["/api/admin/check",t==null?void 0:t.id],enabled:!!(t!=null&&t.id)});const r=[{path:"/",icon:"fas fa-home",label:"Home"},{path:"/reels",icon:"fas fa-video",label:"Reels"},{path:"/strains",icon:"fas fa-flask",label:"Strains"},{path:"/products",icon:"fas fa-box",label:"New Products"},{path:"/merch",icon:"fas fa-tshirt",label:"Merch"},{path:"/notifications",icon:"fas fa-bell",label:"Notifications"},{path:"/messages",icon:"fas fa-envelope",label:"Messages"},{path:"/profile",icon:"fas fa-user",label:"Profile"}];return i.jsx("aside",{className:"fixed left-0 top-0 w-64 h-full bg-frhigh-dark-secondary border-r border-frhigh-dark-tertiary z-40 hidden",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center mb-8",children:[i.jsx("img",{src:Ac,alt:"Frhighday Pharms",className:"w-16 h-12 mr-3 object-contain"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-xl font-bold text-frhigh-green",children:"Frhighday"}),i.jsx("p",{className:"text-xs text-gray-400",children:"Pharms"})]})]}),i.jsx("nav",{className:"space-y-2",children:r.map(n=>{const s=e===n.path;return i.jsxs(cr,{href:n.path,className:`flex items-center px-4 py-3 rounded-lg transition-colors ${s?"text-white bg-frhigh-green":"text-gray-300 hover:text-white hover:bg-frhigh-dark-tertiary"}`,"data-testid":`link-nav-${n.label.toLowerCase()}`,children:[i.jsx("i",{className:`${n.icon} mr-3`}),n.label]},n.path)})}),i.jsxs("button",{className:"w-full mt-8 bg-frhigh-green hover:bg-frhigh-green-light text-white font-semibold py-3 px-4 rounded-lg transition-colors","data-testid":"button-new-post",children:[i.jsx("i",{className:"fas fa-plus mr-2"}),"New Post"]})]})})}function zi(){const[e]=kc();Fe();const{isNavigationVisible:t}=xS(),r=[{path:"/",icon:"fas fa-home",label:"Home"},{path:"/reels",icon:"fas fa-video",label:"Reels"},{path:"/strains",icon:"fas fa-flask",label:"Strains"},{path:"/products",icon:"fas fa-box",label:"Products"},{path:"/merch",icon:"fas fa-tshirt",label:"Merch"}];return i.jsx("div",{className:`fixed bottom-0 left-0 right-0 bg-frhigh-dark-secondary border-t border-frhigh-dark-tertiary z-50 mobile-safe-area transition-transform duration-300 ${t?"translate-y-0":"translate-y-full"}`,children:i.jsx("div",{className:"flex justify-around items-center py-1 px-2 min-h-[60px]",children:r.map((n,s)=>{const a=e===n.path;return i.jsxs(cr,{href:n.path,className:`relative flex flex-col items-center justify-center py-1 px-1 touch-target transition-all duration-300 transform hover:scale-110 active:scale-95 ${a?"text-frhigh-green scale-105":"text-gray-400 hover:text-frhigh-green"}`,style:{animationDelay:`${s*80}ms`},"data-testid":`link-mobile-${n.label.toLowerCase()}`,children:[i.jsxs("div",{className:`relative ${a?"animate-bounce":""}`,children:[i.jsx("i",{className:`${n.icon} text-lg transition-all duration-200 ${a?"drop-shadow-[0_0_8px_rgba(34,197,94,0.6)]":""}`}),a&&i.jsx("div",{className:"absolute -inset-1 bg-frhigh-green/20 rounded-full animate-pulse"})]}),i.jsx("span",{className:`text-[10px] mt-0.5 leading-none transition-all duration-200 ${a?"font-semibold":"font-normal"}`,children:n.label}),a&&i.jsx("div",{className:"absolute -top-0.5 left-1/2 transform -translate-x-1/2 w-1 h-1 bg-frhigh-green rounded-full animate-ping"})]},n.path)})})})}function _A({postId:e,likesCount:t,dislikesCount:r,userReaction:n}){const{toast:s}=ke(),a=Xe(),o=pe({mutationFn:async c=>{c==="like"?await ne("POST",`/api/posts/${e}/like`):n===c?await ne("DELETE",`/api/posts/${e}/reactions/${c}`):await ne("POST",`/api/posts/${e}/reactions`,{type:c})},onSuccess:()=>{a.invalidateQueries({queryKey:["/api/posts"]}),a.invalidateQueries({queryKey:["/api/posts",e,"likes"]}),a.invalidateQueries({queryKey:["/api/posts",e,"comments"]})},onError:c=>{s({title:"Failed to update reaction",description:"Please try again",variant:"destructive"})}}),l=c=>{o.mutate(c)};return i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("button",{onClick:()=>l("like"),disabled:o.isPending,className:`flex items-center gap-2 px-3 py-1.5 rounded-xl text-sm transition-all hover:scale-105 ${n==="like"?"bg-frhigh-green/20 border border-frhigh-green text-frhigh-green":"bg-gray-700/50 hover:bg-gray-600/50 text-gray-400 hover:text-white"}`,"data-testid":`like-button-${e}`,children:[i.jsx(Tj,{className:"w-4 h-4"}),i.jsx("span",{className:"font-medium",children:t})]}),i.jsxs("button",{onClick:()=>l("dislike"),disabled:o.isPending,className:`flex items-center gap-2 px-3 py-1.5 rounded-xl text-sm transition-all hover:scale-105 ${n==="dislike"?"bg-red-500/20 border border-red-500 text-red-400":"bg-gray-700/50 hover:bg-gray-600/50 text-gray-400 hover:text-white"}`,"data-testid":`dislike-button-${e}`,children:[i.jsx(mR,{className:"w-4 h-4"}),i.jsx("span",{className:"font-medium",children:r})]})]})}var Hf="focusScope.autoFocusOnMount",Wf="focusScope.autoFocusOnUnmount",A0={bubbles:!1,cancelable:!0},TA="FocusScope",Ih=f.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...o}=e,[l,c]=f.useState(null),d=Ge(s),u=Ge(a),h=f.useRef(null),p=me(t,y=>c(y)),m=f.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;f.useEffect(()=>{if(n){let y=function(b){if(m.paused||!l)return;const j=b.target;l.contains(j)?h.current=j:ns(h.current,{select:!0})},w=function(b){if(m.paused||!l)return;const j=b.relatedTarget;j!==null&&(l.contains(j)||ns(h.current,{select:!0}))},v=function(b){if(document.activeElement===document.body)for(const k of b)k.removedNodes.length>0&&ns(l)};document.addEventListener("focusin",y),document.addEventListener("focusout",w);const g=new MutationObserver(v);return l&&g.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",w),g.disconnect()}}},[n,l,m.paused]),f.useEffect(()=>{if(l){O0.add(m);const y=document.activeElement;if(!l.contains(y)){const v=new CustomEvent(Hf,A0);l.addEventListener(Hf,d),l.dispatchEvent(v),v.defaultPrevented||(RA(OA(bk(l)),{select:!0}),document.activeElement===y&&ns(l))}return()=>{l.removeEventListener(Hf,d),setTimeout(()=>{const v=new CustomEvent(Wf,A0);l.addEventListener(Wf,u),l.dispatchEvent(v),v.defaultPrevented||ns(y??document.body,{select:!0}),l.removeEventListener(Wf,u),O0.remove(m)},0)}}},[l,d,u,m]);const x=f.useCallback(y=>{if(!r&&!n||m.paused)return;const w=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,v=document.activeElement;if(w&&v){const g=y.currentTarget,[b,j]=FA(g);b&&j?!y.shiftKey&&v===j?(y.preventDefault(),r&&ns(b,{select:!0})):y.shiftKey&&v===b&&(y.preventDefault(),r&&ns(j,{select:!0})):v===g&&y.preventDefault()}},[r,n,m.paused]);return i.jsx(ie.div,{tabIndex:-1,...o,ref:p,onKeyDown:x})});Ih.displayName=TA;function RA(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(ns(n,{select:t}),document.activeElement!==r)return}function FA(e){const t=bk(e),r=I0(t,e),n=I0(t.reverse(),e);return[r,n]}function bk(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function I0(e,t){for(const r of e)if(!MA(r,{upTo:t}))return r}function MA(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function AA(e){return e instanceof HTMLInputElement&&"select"in e}function ns(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&AA(e)&&t&&e.select()}}var O0=IA();function IA(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=D0(e,t),e.unshift(t)},remove(t){var r;e=D0(e,t),(r=e[0])==null||r.resume()}}}function D0(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function OA(e){return e.filter(t=>t.tagName!=="A")}var Yy="Popover",[wk,w9]=Qt(Yy,[Ks]),Oc=Ks(),[DA,Gs]=wk(Yy),Nk=e=>{const{__scopePopover:t,children:r,open:n,defaultOpen:s,onOpenChange:a,modal:o=!1}=e,l=Oc(t),c=f.useRef(null),[d,u]=f.useState(!1),[h=!1,p]=Ls({prop:n,defaultProp:s,onChange:a});return i.jsx(Uy,{...l,children:i.jsx(DA,{scope:t,contentId:Dr(),triggerRef:c,open:h,onOpenChange:p,onOpenToggle:f.useCallback(()=>p(m=>!m),[p]),hasCustomAnchor:d,onCustomAnchorAdd:f.useCallback(()=>u(!0),[]),onCustomAnchorRemove:f.useCallback(()=>u(!1),[]),modal:o,children:r})})};Nk.displayName=Yy;var jk="PopoverAnchor",LA=f.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,s=Gs(jk,r),a=Oc(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=s;return f.useEffect(()=>(o(),()=>l()),[o,l]),i.jsx(Fc,{...a,...n,ref:t})});LA.displayName=jk;var Sk="PopoverTrigger",kk=f.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,s=Gs(Sk,r),a=Oc(r),o=me(t,s.triggerRef),l=i.jsx(ie.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Tk(s.open),...n,ref:o,onClick:K(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:i.jsx(Fc,{asChild:!0,...a,children:l})});kk.displayName=Sk;var Xy="PopoverPortal",[$A,UA]=wk(Xy,{forceMount:void 0}),Ck=e=>{const{__scopePopover:t,forceMount:r,children:n,container:s}=e,a=Gs(Xy,t);return i.jsx($A,{scope:t,forceMount:r,children:i.jsx(Hr,{present:r||a.open,children:i.jsx(Pc,{asChild:!0,container:s,children:n})})})};Ck.displayName=Xy;var fo="PopoverContent",Pk=f.forwardRef((e,t)=>{const r=UA(fo,e.__scopePopover),{forceMount:n=r.forceMount,...s}=e,a=Gs(fo,e.__scopePopover);return i.jsx(Hr,{present:n||a.open,children:a.modal?i.jsx(BA,{...s,ref:t}):i.jsx(VA,{...s,ref:t})})});Pk.displayName=fo;var zA=Mi("PopoverContent.RemoveScroll"),BA=f.forwardRef((e,t)=>{const r=Gs(fo,e.__scopePopover),n=f.useRef(null),s=me(t,n),a=f.useRef(!1);return f.useEffect(()=>{const o=n.current;if(o)return Mh(o)},[]),i.jsx(Mc,{as:zA,allowPinchZoom:!0,children:i.jsx(Ek,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:K(e.onCloseAutoFocus,o=>{var l;o.preventDefault(),a.current||(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:K(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;a.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:K(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),VA=f.forwardRef((e,t)=>{const r=Gs(fo,e.__scopePopover),n=f.useRef(!1),s=f.useRef(!1);return i.jsx(Ek,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,a),a.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),a.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:a=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,a),a.defaultPrevented||(n.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=a.target;((d=r.triggerRef.current)==null?void 0:d.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),Ek=f.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:a,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:u,...h}=e,p=Gs(fo,r),m=Oc(r);return Rh(),i.jsx(Ih,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:a,children:i.jsx(bo,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>p.onOpenChange(!1),children:i.jsx(Ch,{"data-state":Tk(p.open),role:"dialog",id:p.contentId,...m,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),_k="PopoverClose",HA=f.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,s=Gs(_k,r);return i.jsx(ie.button,{type:"button",...n,ref:t,onClick:K(e.onClick,()=>s.onOpenChange(!1))})});HA.displayName=_k;var WA="PopoverArrow",qA=f.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,s=Oc(r);return i.jsx(Ph,{...s,...n,ref:t})});qA.displayName=WA;function Tk(e){return e?"open":"closed"}var KA=Nk,GA=kk,QA=Ck,Rk=Pk;const YA=KA,XA=GA,Fk=f.forwardRef(({className:e,align:t="center",sideOffset:r=4,...n},s)=>i.jsx(QA,{children:i.jsx(Rk,{ref:s,align:t,sideOffset:r,className:re("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",e),...n})}));Fk.displayName=Rk.displayName;var JA=f.createContext(void 0);function Oh(e){const t=f.useContext(JA);return e||t||"ltr"}var qf="rovingFocusGroup.onEntryFocus",ZA={bubbles:!1,cancelable:!0},Dh="RovingFocusGroup",[Am,Mk,eI]=xh(Dh),[tI,Lh]=Qt(Dh,[eI]),[rI,nI]=tI(Dh),Ak=f.forwardRef((e,t)=>i.jsx(Am.Provider,{scope:e.__scopeRovingFocusGroup,children:i.jsx(Am.Slot,{scope:e.__scopeRovingFocusGroup,children:i.jsx(sI,{...e,ref:t})})}));Ak.displayName=Dh;var sI=f.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:s=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...h}=e,p=f.useRef(null),m=me(t,p),x=Oh(a),[y=null,w]=Ls({prop:o,defaultProp:l,onChange:c}),[v,g]=f.useState(!1),b=Ge(d),j=Mk(r),k=f.useRef(!1),[C,S]=f.useState(0);return f.useEffect(()=>{const _=p.current;if(_)return _.addEventListener(qf,b),()=>_.removeEventListener(qf,b)},[b]),i.jsx(rI,{scope:r,orientation:n,dir:x,loop:s,currentTabStopId:y,onItemFocus:f.useCallback(_=>w(_),[w]),onItemShiftTab:f.useCallback(()=>g(!0),[]),onFocusableItemAdd:f.useCallback(()=>S(_=>_+1),[]),onFocusableItemRemove:f.useCallback(()=>S(_=>_-1),[]),children:i.jsx(ie.div,{tabIndex:v||C===0?-1:0,"data-orientation":n,...h,ref:m,style:{outline:"none",...e.style},onMouseDown:K(e.onMouseDown,()=>{k.current=!0}),onFocus:K(e.onFocus,_=>{const P=!k.current;if(_.target===_.currentTarget&&P&&!v){const T=new CustomEvent(qf,ZA);if(_.currentTarget.dispatchEvent(T),!T.defaultPrevented){const F=j().filter(V=>V.focusable),R=F.find(V=>V.active),M=F.find(V=>V.id===y),H=[R,M,...F].filter(Boolean).map(V=>V.ref.current);Dk(H,u)}}k.current=!1}),onBlur:K(e.onBlur,()=>g(!1))})})}),Ik="RovingFocusGroupItem",Ok=f.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:s=!1,tabStopId:a,...o}=e,l=Dr(),c=a||l,d=nI(Ik,r),u=d.currentTabStopId===c,h=Mk(r),{onFocusableItemAdd:p,onFocusableItemRemove:m}=d;return f.useEffect(()=>{if(n)return p(),()=>m()},[n,p,m]),i.jsx(Am.ItemSlot,{scope:r,id:c,focusable:n,active:s,children:i.jsx(ie.span,{tabIndex:u?0:-1,"data-orientation":d.orientation,...o,ref:t,onMouseDown:K(e.onMouseDown,x=>{n?d.onItemFocus(c):x.preventDefault()}),onFocus:K(e.onFocus,()=>d.onItemFocus(c)),onKeyDown:K(e.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){d.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const y=oI(x,d.orientation,d.dir);if(y!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let v=h().filter(g=>g.focusable).map(g=>g.ref.current);if(y==="last")v.reverse();else if(y==="prev"||y==="next"){y==="prev"&&v.reverse();const g=v.indexOf(x.currentTarget);v=d.loop?lI(v,g+1):v.slice(g+1)}setTimeout(()=>Dk(v))}})})})});Ok.displayName=Ik;var iI={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function aI(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function oI(e,t,r){const n=aI(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return iI[n]}function Dk(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function lI(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var Lk=Ak,$k=Ok,Jy="Tabs",[cI,N9]=Qt(Jy,[Lh]),Uk=Lh(),[dI,Zy]=cI(Jy),zk=f.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:s,defaultValue:a,orientation:o="horizontal",dir:l,activationMode:c="automatic",...d}=e,u=Oh(l),[h,p]=Ls({prop:n,onChange:s,defaultProp:a});return i.jsx(dI,{scope:r,baseId:Dr(),value:h,onValueChange:p,orientation:o,dir:u,activationMode:c,children:i.jsx(ie.div,{dir:u,"data-orientation":o,...d,ref:t})})});zk.displayName=Jy;var Bk="TabsList",Vk=f.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...s}=e,a=Zy(Bk,r),o=Uk(r);return i.jsx(Lk,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:n,children:i.jsx(ie.div,{role:"tablist","aria-orientation":a.orientation,...s,ref:t})})});Vk.displayName=Bk;var Hk="TabsTrigger",Wk=f.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:s=!1,...a}=e,o=Zy(Hk,r),l=Uk(r),c=Gk(o.baseId,n),d=Qk(o.baseId,n),u=n===o.value;return i.jsx($k,{asChild:!0,...l,focusable:!s,active:u,children:i.jsx(ie.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...a,ref:t,onMouseDown:K(e.onMouseDown,h=>{!s&&h.button===0&&h.ctrlKey===!1?o.onValueChange(n):h.preventDefault()}),onKeyDown:K(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(n)}),onFocus:K(e.onFocus,()=>{const h=o.activationMode!=="manual";!u&&!s&&h&&o.onValueChange(n)})})})});Wk.displayName=Hk;var qk="TabsContent",Kk=f.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:s,children:a,...o}=e,l=Zy(qk,r),c=Gk(l.baseId,n),d=Qk(l.baseId,n),u=n===l.value,h=f.useRef(u);return f.useEffect(()=>{const p=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(p)},[]),i.jsx(Hr,{present:s||u,children:({present:p})=>i.jsx(ie.div,{"data-state":u?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!p,id:d,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:p&&a})})});Kk.displayName=qk;function Gk(e,t){return`${e}-trigger-${t}`}function Qk(e,t){return`${e}-content-${t}`}var uI=zk,Yk=Vk,Xk=Wk,Jk=Kk;const ev=uI,$h=f.forwardRef(({className:e,...t},r)=>i.jsx(Yk,{ref:r,className:re("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));$h.displayName=Yk.displayName;const ln=f.forwardRef(({className:e,...t},r)=>i.jsx(Xk,{ref:r,className:re("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));ln.displayName=Xk.displayName;const cn=f.forwardRef(({className:e,...t},r)=>i.jsx(Jk,{ref:r,className:re("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));cn.displayName=Jk.displayName;function hI({postId:e,maxVisible:t=6}){const{data:r=[],isLoading:n}=xe({queryKey:["/api/posts",e,"comments"]});if(n)return i.jsxs("div",{className:"flex items-center space-x-2 py-2",children:[i.jsx("div",{className:"flex -space-x-2",children:[...Array(3)].map((l,c)=>i.jsx("div",{className:"w-6 h-6 bg-gray-600 rounded-full border-2 border-frhigh-dark animate-pulse"},c))}),i.jsx("span",{className:"text-gray-400 text-xs",children:"Loading..."})]});const s=r.filter(l=>l.user).reduce((l,c)=>(c.user&&!l.find(d=>d.id===c.user.id)&&l.push({...c.user,interactionType:"comment",timestamp:c.createdAt}),l),[]),a=s.slice(0,t),o=Math.max(0,s.length-t);return s.length===0?null:i.jsxs("div",{className:"flex items-center space-x-3 py-2 border-b border-frhigh-dark-tertiary/30",children:[i.jsxs("div",{className:"flex -space-x-2",children:[a.map((l,c)=>i.jsxs("div",{className:"relative group",style:{zIndex:t-c},children:[l.avatar?i.jsx("img",{src:l.avatar,alt:l.displayName||l.username,className:"w-6 h-6 rounded-full border-2 border-frhigh-dark object-cover hover:scale-110 transition-transform cursor-pointer",title:`${l.displayName||l.username}${l.isVerified?" ":""} commented`,onError:d=>{d.currentTarget.style.display="none";const u=d.currentTarget.nextElementSibling;u&&(u.style.display="flex")}}):null,i.jsx("div",{className:"w-6 h-6 bg-frhigh-green rounded-full border-2 border-frhigh-dark flex items-center justify-center hover:scale-110 transition-transform cursor-pointer",title:`${l.displayName||l.username}${l.isVerified?" ":""} commented`,style:{display:l.avatar?"none":"flex"},children:i.jsx("span",{className:"text-xs font-bold text-frhigh-dark",children:(l.displayName||l.username||"U").charAt(0).toUpperCase()})}),i.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 rounded-full border border-frhigh-dark flex items-center justify-center",children:i.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})})]},l.id)),o>0&&i.jsxs("div",{className:"w-6 h-6 bg-gray-700 rounded-full border-2 border-frhigh-dark flex items-center justify-center text-xs text-gray-300 font-medium",children:["+",o]})]}),i.jsx("div",{className:"flex items-center space-x-3 text-xs text-gray-400",children:r.length>0&&i.jsxs("span",{className:"flex items-center space-x-1",children:[i.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),i.jsxs("span",{children:[r.length," comment",r.length!==1?"s":""]})]})})]})}function Uh({postId:e,likesCount:t,dislikesCount:r,commentsCount:n,sharesCount:s,isLiked:a=!1,userReaction:o,currentUserId:l}){const[c,d]=f.useState(!1),[u,h]=f.useState(""),{toast:p}=ke(),m=Xe(),{user:x}=Fe(),{data:y=[],isLoading:w}=xe({queryKey:["/api/posts",e,"comments"],enabled:c}),{data:v=[],isLoading:g}=xe({queryKey:["/api/posts",e,"likes"],enabled:c});xe({queryKey:["/api/admin/check",l]});const b=pe({mutationFn:async C=>{const S=(x==null?void 0:x.id)||l;if(!S)throw new Error("User not authenticated");return(await ne("POST",`/api/posts/${e}/comments`,{userId:S,content:C.trim()})).json()},onSuccess:()=>{h(""),m.invalidateQueries({queryKey:["/api/posts",e,"comments"]}),m.invalidateQueries({queryKey:["/api/posts"]}),p({title:"Comment added!",description:"Your comment has been posted."})},onError:()=>{p({title:"Error",description:"Failed to add comment",variant:"destructive"})}}),j=()=>{u.trim()&&b.mutate(u)},k=C=>{const S=`${window.location.origin}/post/${e}`,_=`Check out this post on Frhighday: ${S}`;C==="text"?(navigator.clipboard.writeText(_),p({title:"Link copied to clipboard!"})):C==="messenger"&&window.open(`https://www.facebook.com/dialog/send?link=${encodeURIComponent(S)}&app_id=YOUR_APP_ID`,"_blank")};return i.jsxs("div",{className:"pt-3 mt-3 space-y-3",children:[i.jsx(_A,{postId:e,likesCount:t,dislikesCount:r,userReaction:o}),i.jsx(hI,{postId:e}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"flex items-center space-x-4",children:i.jsxs(dr,{open:c,onOpenChange:d,children:[i.jsx(Wy,{asChild:!0,children:i.jsxs("button",{className:"text-white hover:text-frhigh-green transition-colors flex items-center space-x-1","data-testid":`button-comment-${e}`,children:[i.jsx("span",{className:"text-sm",children:"Comments"}),i.jsx("span",{className:"text-xs text-gray-400","data-testid":`text-comments-${e}`,children:n})]})}),i.jsxs(qt,{className:"bg-frhigh-dark border-frhigh-dark-tertiary max-w-2xl",children:[i.jsxs(ur,{children:[i.jsx(hr,{className:"text-white",children:"Post Engagement"}),i.jsx(Wn,{className:"text-gray-400",children:"View comments and likes for this post"})]}),i.jsxs(ev,{defaultValue:"comments",className:"w-full",children:[i.jsxs($h,{className:"bg-frhigh-dark-secondary w-full",children:[i.jsxs(ln,{value:"comments",className:"flex-1 data-[state=active]:bg-frhigh-green data-[state=active]:text-frhigh-dark",children:["Comments (",y.length,")"]}),i.jsxs(ln,{value:"likes",className:"flex-1 data-[state=active]:bg-frhigh-green data-[state=active]:text-frhigh-dark",children:["Likes (",v.length,")"]})]}),i.jsxs(cn,{value:"comments",className:"space-y-4",children:[i.jsx("div",{className:"max-h-80 overflow-y-auto space-y-3",children:w?i.jsx("div",{className:"text-center text-gray-400 py-4",children:"Loading comments..."}):y.length===0?i.jsx("div",{className:"text-center text-gray-400 py-4",children:"No comments yet. Be the first to comment!"}):y.map(C=>{var S,_,P,T,F,R;return i.jsx("div",{className:"bg-frhigh-dark-secondary p-3 rounded-lg",children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{className:"flex-shrink-0",children:(S=C.user)!=null&&S.avatar?i.jsx("img",{src:C.user.avatar,alt:C.user.displayName||C.user.username,className:"w-8 h-8 rounded-full object-cover"}):i.jsx("div",{className:"w-8 h-8 bg-frhigh-green rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-xs font-bold text-frhigh-dark",children:(((_=C.user)==null?void 0:_.displayName)||((P=C.user)==null?void 0:P.username)||"U").charAt(0).toUpperCase()})})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[i.jsx("span",{className:"text-white font-medium text-sm truncate",children:((T=C.user)==null?void 0:T.displayName)||((F=C.user)==null?void 0:F.username)||"Unknown User"}),((R=C.user)==null?void 0:R.isVerified)&&i.jsx("span",{className:"text-frhigh-green text-lg",title:"Verified",children:""}),i.jsx("span",{className:"text-gray-400 text-xs flex-shrink-0",children:new Date(C.createdAt).toLocaleString()})]}),i.jsx("p",{className:"text-gray-300 text-sm",children:C.content})]})]})},C.id)})}),i.jsxs("div",{className:"flex space-x-2 pt-4 border-t border-frhigh-dark-tertiary",children:[i.jsx("input",{type:"text",value:u,onChange:C=>h(C.target.value),placeholder:"Share your thoughts...",className:"flex-1 bg-frhigh-dark-secondary border border-frhigh-dark-tertiary rounded-lg px-3 py-2 text-white placeholder-gray-400 focus:border-frhigh-green focus:outline-none transition-colors",onKeyPress:C=>C.key==="Enter"&&!b.isPending&&j(),disabled:b.isPending}),i.jsx("button",{onClick:j,disabled:b.isPending,className:"bg-frhigh-green text-frhigh-dark px-4 py-2 rounded-lg font-medium hover:bg-opacity-90 transition-colors disabled:opacity-50",children:b.isPending?"Posting...":"Post"})]})]}),i.jsx(cn,{value:"likes",className:"space-y-4",children:i.jsx("div",{className:"max-h-80 overflow-y-auto space-y-3",children:g?i.jsx("div",{className:"text-center text-gray-400 py-4",children:"Loading likes..."}):v.length===0?i.jsx("div",{className:"text-center text-gray-400 py-4",children:"No likes yet. Be the first to like this post!"}):v.map(C=>{var S,_,P,T,F,R;return i.jsx("div",{className:"bg-frhigh-dark-secondary p-3 rounded-lg",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"flex-shrink-0",children:(S=C.user)!=null&&S.avatar?i.jsx("img",{src:C.user.avatar,alt:C.user.displayName||C.user.username,className:"w-8 h-8 rounded-full object-cover"}):i.jsx("div",{className:"w-8 h-8 bg-frhigh-green rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-xs font-bold text-frhigh-dark",children:(((_=C.user)==null?void 0:_.displayName)||((P=C.user)==null?void 0:P.username)||"U").charAt(0).toUpperCase()})})}),i.jsx("div",{className:"flex-1 min-w-0",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("span",{className:"text-white font-medium text-sm truncate",children:((T=C.user)==null?void 0:T.displayName)||((F=C.user)==null?void 0:F.username)||"Unknown User"}),((R=C.user)==null?void 0:R.isVerified)&&i.jsx("span",{className:"text-frhigh-green text-lg",title:"Verified",children:""}),i.jsx("span",{className:"text-gray-400 text-xs flex-shrink-0",children:new Date(C.createdAt).toLocaleString()})]})})]})},C.id)})})})]})]})]})}),i.jsxs(YA,{children:[i.jsx(XA,{asChild:!0,children:i.jsxs("button",{className:"text-white hover:text-frhigh-green transition-colors flex items-center space-x-1","data-testid":`button-share-${e}`,children:[i.jsx("span",{className:"text-sm",children:"Share"}),i.jsx("span",{className:"text-xs text-gray-400","data-testid":`text-shares-${e}`,children:s})]})}),i.jsx(Fk,{className:"bg-frhigh-dark border-frhigh-dark-tertiary p-2 w-40",children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("button",{onClick:()=>k("text"),className:"w-full text-left px-3 py-2 text-white hover:bg-frhigh-green hover:bg-opacity-20 rounded-lg transition-colors text-sm",children:"Copy Link"}),i.jsx("button",{onClick:()=>k("messenger"),className:"w-full text-left px-3 py-2 text-white hover:bg-frhigh-green hover:bg-opacity-20 rounded-lg transition-colors text-sm",children:"Share to Messenger"})]})})]})]})]})}function zh({text:e,className:t=""}){const r=e.split(/(@\w+)/g);return i.jsx("span",{className:t,children:r.map((n,s)=>{if(n.startsWith("@")&&n.length>1){const a=n.slice(1);return i.jsx(cr,{href:`/profile/${a}`,className:"text-frhigh-green hover:text-frhigh-green/80 font-medium transition-colors","data-testid":`mention-link-${a}`,children:n},s)}return i.jsx("span",{children:n},s)})})}var Im=["Enter"," "],fI=["ArrowDown","PageUp","Home"],Zk=["ArrowUp","PageDown","End"],pI=[...fI,...Zk],mI={ltr:[...Im,"ArrowRight"],rtl:[...Im,"ArrowLeft"]},gI={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Dc="Menu",[zl,yI,vI]=xh(Dc),[Bi,e2]=Qt(Dc,[vI,Ks,Lh]),Bh=Ks(),t2=Lh(),[xI,Vi]=Bi(Dc),[bI,Lc]=Bi(Dc),r2=e=>{const{__scopeMenu:t,open:r=!1,children:n,dir:s,onOpenChange:a,modal:o=!0}=e,l=Bh(t),[c,d]=f.useState(null),u=f.useRef(!1),h=Ge(a),p=Oh(s);return f.useEffect(()=>{const m=()=>{u.current=!0,document.addEventListener("pointerdown",x,{capture:!0,once:!0}),document.addEventListener("pointermove",x,{capture:!0,once:!0})},x=()=>u.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",x,{capture:!0}),document.removeEventListener("pointermove",x,{capture:!0})}},[]),i.jsx(Uy,{...l,children:i.jsx(xI,{scope:t,open:r,onOpenChange:h,content:c,onContentChange:d,children:i.jsx(bI,{scope:t,onClose:f.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:u,dir:p,modal:o,children:n})})})};r2.displayName=Dc;var wI="MenuAnchor",tv=f.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,s=Bh(r);return i.jsx(Fc,{...s,...n,ref:t})});tv.displayName=wI;var rv="MenuPortal",[NI,n2]=Bi(rv,{forceMount:void 0}),s2=e=>{const{__scopeMenu:t,forceMount:r,children:n,container:s}=e,a=Vi(rv,t);return i.jsx(NI,{scope:t,forceMount:r,children:i.jsx(Hr,{present:r||a.open,children:i.jsx(Pc,{asChild:!0,container:s,children:n})})})};s2.displayName=rv;var ar="MenuContent",[jI,nv]=Bi(ar),i2=f.forwardRef((e,t)=>{const r=n2(ar,e.__scopeMenu),{forceMount:n=r.forceMount,...s}=e,a=Vi(ar,e.__scopeMenu),o=Lc(ar,e.__scopeMenu);return i.jsx(zl.Provider,{scope:e.__scopeMenu,children:i.jsx(Hr,{present:n||a.open,children:i.jsx(zl.Slot,{scope:e.__scopeMenu,children:o.modal?i.jsx(SI,{...s,ref:t}):i.jsx(kI,{...s,ref:t})})})})}),SI=f.forwardRef((e,t)=>{const r=Vi(ar,e.__scopeMenu),n=f.useRef(null),s=me(t,n);return f.useEffect(()=>{const a=n.current;if(a)return Mh(a)},[]),i.jsx(sv,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:K(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),kI=f.forwardRef((e,t)=>{const r=Vi(ar,e.__scopeMenu);return i.jsx(sv,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),CI=Mi("MenuContent.ScrollLock"),sv=f.forwardRef((e,t)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:p,onDismiss:m,disableOutsideScroll:x,...y}=e,w=Vi(ar,r),v=Lc(ar,r),g=Bh(r),b=t2(r),j=yI(r),[k,C]=f.useState(null),S=f.useRef(null),_=me(t,S,w.onContentChange),P=f.useRef(0),T=f.useRef(""),F=f.useRef(0),R=f.useRef(null),M=f.useRef("right"),I=f.useRef(0),H=x?Mc:f.Fragment,V=x?{as:CI,allowPinchZoom:!0}:void 0,Q=L=>{var Z,q;const G=T.current+L,B=j().filter(se=>!se.disabled),X=document.activeElement,ye=(Z=B.find(se=>se.ref.current===X))==null?void 0:Z.textValue,fe=B.map(se=>se.textValue),He=LI(fe,G,ye),_e=(q=B.find(se=>se.textValue===He))==null?void 0:q.ref.current;(function se(te){T.current=te,window.clearTimeout(P.current),te!==""&&(P.current=window.setTimeout(()=>se(""),1e3))})(G),_e&&setTimeout(()=>_e.focus())};f.useEffect(()=>()=>window.clearTimeout(P.current),[]),Rh();const A=f.useCallback(L=>{var B,X;return M.current===((B=R.current)==null?void 0:B.side)&&UI(L,(X=R.current)==null?void 0:X.area)},[]);return i.jsx(jI,{scope:r,searchRef:T,onItemEnter:f.useCallback(L=>{A(L)&&L.preventDefault()},[A]),onItemLeave:f.useCallback(L=>{var G;A(L)||((G=S.current)==null||G.focus(),C(null))},[A]),onTriggerLeave:f.useCallback(L=>{A(L)&&L.preventDefault()},[A]),pointerGraceTimerRef:F,onPointerGraceIntentChange:f.useCallback(L=>{R.current=L},[]),children:i.jsx(H,{...V,children:i.jsx(Ih,{asChild:!0,trapped:s,onMountAutoFocus:K(a,L=>{var G;L.preventDefault(),(G=S.current)==null||G.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:i.jsx(bo,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:p,onDismiss:m,children:i.jsx(Lk,{asChild:!0,...b,dir:v.dir,orientation:"vertical",loop:n,currentTabStopId:k,onCurrentTabStopIdChange:C,onEntryFocus:K(c,L=>{v.isUsingKeyboardRef.current||L.preventDefault()}),preventScrollOnEntryFocus:!0,children:i.jsx(Ch,{role:"menu","aria-orientation":"vertical","data-state":w2(w.open),"data-radix-menu-content":"",dir:v.dir,...g,...y,ref:_,style:{outline:"none",...y.style},onKeyDown:K(y.onKeyDown,L=>{const B=L.target.closest("[data-radix-menu-content]")===L.currentTarget,X=L.ctrlKey||L.altKey||L.metaKey,ye=L.key.length===1;B&&(L.key==="Tab"&&L.preventDefault(),!X&&ye&&Q(L.key));const fe=S.current;if(L.target!==fe||!pI.includes(L.key))return;L.preventDefault();const _e=j().filter(Z=>!Z.disabled).map(Z=>Z.ref.current);Zk.includes(L.key)&&_e.reverse(),OI(_e)}),onBlur:K(e.onBlur,L=>{L.currentTarget.contains(L.target)||(window.clearTimeout(P.current),T.current="")}),onPointerMove:K(e.onPointerMove,Bl(L=>{const G=L.target,B=I.current!==L.clientX;if(L.currentTarget.contains(G)&&B){const X=L.clientX>I.current?"right":"left";M.current=X,I.current=L.clientX}}))})})})})})})});i2.displayName=ar;var PI="MenuGroup",iv=f.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return i.jsx(ie.div,{role:"group",...n,ref:t})});iv.displayName=PI;var EI="MenuLabel",a2=f.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return i.jsx(ie.div,{...n,ref:t})});a2.displayName=EI;var Iu="MenuItem",L0="menu.itemSelect",Vh=f.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:n,...s}=e,a=f.useRef(null),o=Lc(Iu,e.__scopeMenu),l=nv(Iu,e.__scopeMenu),c=me(t,a),d=f.useRef(!1),u=()=>{const h=a.current;if(!r&&h){const p=new CustomEvent(L0,{bubbles:!0,cancelable:!0});h.addEventListener(L0,m=>n==null?void 0:n(m),{once:!0}),jy(h,p),p.defaultPrevented?d.current=!1:o.onClose()}};return i.jsx(o2,{...s,ref:c,disabled:r,onClick:K(e.onClick,u),onPointerDown:h=>{var p;(p=e.onPointerDown)==null||p.call(e,h),d.current=!0},onPointerUp:K(e.onPointerUp,h=>{var p;d.current||(p=h.currentTarget)==null||p.click()}),onKeyDown:K(e.onKeyDown,h=>{const p=l.searchRef.current!=="";r||p&&h.key===" "||Im.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});Vh.displayName=Iu;var o2=f.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:n=!1,textValue:s,...a}=e,o=nv(Iu,r),l=t2(r),c=f.useRef(null),d=me(t,c),[u,h]=f.useState(!1),[p,m]=f.useState("");return f.useEffect(()=>{const x=c.current;x&&m((x.textContent??"").trim())},[a.children]),i.jsx(zl.ItemSlot,{scope:r,disabled:n,textValue:s??p,children:i.jsx($k,{asChild:!0,...l,focusable:!n,children:i.jsx(ie.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...a,ref:d,onPointerMove:K(e.onPointerMove,Bl(x=>{n?o.onItemLeave(x):(o.onItemEnter(x),x.defaultPrevented||x.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:K(e.onPointerLeave,Bl(x=>o.onItemLeave(x))),onFocus:K(e.onFocus,()=>h(!0)),onBlur:K(e.onBlur,()=>h(!1))})})})}),_I="MenuCheckboxItem",l2=f.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:n,...s}=e;return i.jsx(f2,{scope:e.__scopeMenu,checked:r,children:i.jsx(Vh,{role:"menuitemcheckbox","aria-checked":Ou(r)?"mixed":r,...s,ref:t,"data-state":ov(r),onSelect:K(s.onSelect,()=>n==null?void 0:n(Ou(r)?!0:!r),{checkForDefaultPrevented:!1})})})});l2.displayName=_I;var c2="MenuRadioGroup",[TI,RI]=Bi(c2,{value:void 0,onValueChange:()=>{}}),d2=f.forwardRef((e,t)=>{const{value:r,onValueChange:n,...s}=e,a=Ge(n);return i.jsx(TI,{scope:e.__scopeMenu,value:r,onValueChange:a,children:i.jsx(iv,{...s,ref:t})})});d2.displayName=c2;var u2="MenuRadioItem",h2=f.forwardRef((e,t)=>{const{value:r,...n}=e,s=RI(u2,e.__scopeMenu),a=r===s.value;return i.jsx(f2,{scope:e.__scopeMenu,checked:a,children:i.jsx(Vh,{role:"menuitemradio","aria-checked":a,...n,ref:t,"data-state":ov(a),onSelect:K(n.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,r)},{checkForDefaultPrevented:!1})})})});h2.displayName=u2;var av="MenuItemIndicator",[f2,FI]=Bi(av,{checked:!1}),p2=f.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:n,...s}=e,a=FI(av,r);return i.jsx(Hr,{present:n||Ou(a.checked)||a.checked===!0,children:i.jsx(ie.span,{...s,ref:t,"data-state":ov(a.checked)})})});p2.displayName=av;var MI="MenuSeparator",m2=f.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return i.jsx(ie.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});m2.displayName=MI;var AI="MenuArrow",g2=f.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,s=Bh(r);return i.jsx(Ph,{...s,...n,ref:t})});g2.displayName=AI;var II="MenuSub",[j9,y2]=Bi(II),Yo="MenuSubTrigger",v2=f.forwardRef((e,t)=>{const r=Vi(Yo,e.__scopeMenu),n=Lc(Yo,e.__scopeMenu),s=y2(Yo,e.__scopeMenu),a=nv(Yo,e.__scopeMenu),o=f.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=a,d={__scopeMenu:e.__scopeMenu},u=f.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return f.useEffect(()=>u,[u]),f.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),i.jsx(tv,{asChild:!0,...d,children:i.jsx(o2,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":s.contentId,"data-state":w2(r.open),...e,ref:Cc(t,s.onTriggerChange),onClick:h=>{var p;(p=e.onClick)==null||p.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:K(e.onPointerMove,Bl(h=>{a.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!r.open&&!o.current&&(a.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{r.onOpenChange(!0),u()},100))})),onPointerLeave:K(e.onPointerLeave,Bl(h=>{var m,x;u();const p=(m=r.content)==null?void 0:m.getBoundingClientRect();if(p){const y=(x=r.content)==null?void 0:x.dataset.side,w=y==="right",v=w?-5:5,g=p[w?"left":"right"],b=p[w?"right":"left"];a.onPointerGraceIntentChange({area:[{x:h.clientX+v,y:h.clientY},{x:g,y:p.top},{x:b,y:p.top},{x:b,y:p.bottom},{x:g,y:p.bottom}],side:y}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(h),h.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:K(e.onKeyDown,h=>{var m;const p=a.searchRef.current!=="";e.disabled||p&&h.key===" "||mI[n.dir].includes(h.key)&&(r.onOpenChange(!0),(m=r.content)==null||m.focus(),h.preventDefault())})})})});v2.displayName=Yo;var x2="MenuSubContent",b2=f.forwardRef((e,t)=>{const r=n2(ar,e.__scopeMenu),{forceMount:n=r.forceMount,...s}=e,a=Vi(ar,e.__scopeMenu),o=Lc(ar,e.__scopeMenu),l=y2(x2,e.__scopeMenu),c=f.useRef(null),d=me(t,c);return i.jsx(zl.Provider,{scope:e.__scopeMenu,children:i.jsx(Hr,{present:n||a.open,children:i.jsx(zl.Slot,{scope:e.__scopeMenu,children:i.jsx(sv,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:d,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var h;o.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:K(e.onFocusOutside,u=>{u.target!==l.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:K(e.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:K(e.onKeyDown,u=>{var m;const h=u.currentTarget.contains(u.target),p=gI[o.dir].includes(u.key);h&&p&&(a.onOpenChange(!1),(m=l.trigger)==null||m.focus(),u.preventDefault())})})})})})});b2.displayName=x2;function w2(e){return e?"open":"closed"}function Ou(e){return e==="indeterminate"}function ov(e){return Ou(e)?"indeterminate":e?"checked":"unchecked"}function OI(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function DI(e,t){return e.map((r,n)=>e[(t+n)%e.length])}function LI(e,t,r){const s=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,a=r?e.indexOf(r):-1;let o=DI(e,Math.max(a,0));s.length===1&&(o=o.filter(d=>d!==r));const c=o.find(d=>d.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function $I(e,t){const{x:r,y:n}=e;let s=!1;for(let a=0,o=t.length-1;a<t.length;o=a++){const l=t[a].x,c=t[a].y,d=t[o].x,u=t[o].y;c>n!=u>n&&r<(d-l)*(n-c)/(u-c)+l&&(s=!s)}return s}function UI(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return $I(r,t)}function Bl(e){return t=>t.pointerType==="mouse"?e(t):void 0}var zI=r2,BI=tv,VI=s2,HI=i2,WI=iv,qI=a2,KI=Vh,GI=l2,QI=d2,YI=h2,XI=p2,JI=m2,ZI=g2,eO=v2,tO=b2,lv="DropdownMenu",[rO,S9]=Qt(lv,[e2]),_t=e2(),[nO,N2]=rO(lv),j2=e=>{const{__scopeDropdownMenu:t,children:r,dir:n,open:s,defaultOpen:a,onOpenChange:o,modal:l=!0}=e,c=_t(t),d=f.useRef(null),[u=!1,h]=Ls({prop:s,defaultProp:a,onChange:o});return i.jsx(nO,{scope:t,triggerId:Dr(),triggerRef:d,contentId:Dr(),open:u,onOpenChange:h,onOpenToggle:f.useCallback(()=>h(p=>!p),[h]),modal:l,children:i.jsx(zI,{...c,open:u,onOpenChange:h,dir:n,modal:l,children:r})})};j2.displayName=lv;var S2="DropdownMenuTrigger",k2=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...s}=e,a=N2(S2,r),o=_t(r);return i.jsx(BI,{asChild:!0,...o,children:i.jsx(ie.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...s,ref:Cc(t,a.triggerRef),onPointerDown:K(e.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(a.onOpenToggle(),a.open||l.preventDefault())}),onKeyDown:K(e.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&a.onOpenToggle(),l.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});k2.displayName=S2;var sO="DropdownMenuPortal",C2=e=>{const{__scopeDropdownMenu:t,...r}=e,n=_t(t);return i.jsx(VI,{...n,...r})};C2.displayName=sO;var P2="DropdownMenuContent",E2=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=N2(P2,r),a=_t(r),o=f.useRef(!1);return i.jsx(HI,{id:s.contentId,"aria-labelledby":s.triggerId,...a,...n,ref:t,onCloseAutoFocus:K(e.onCloseAutoFocus,l=>{var c;o.current||(c=s.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:K(e.onInteractOutside,l=>{const c=l.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,u=c.button===2||d;(!s.modal||u)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});E2.displayName=P2;var iO="DropdownMenuGroup",aO=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=_t(r);return i.jsx(WI,{...s,...n,ref:t})});aO.displayName=iO;var oO="DropdownMenuLabel",_2=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=_t(r);return i.jsx(qI,{...s,...n,ref:t})});_2.displayName=oO;var lO="DropdownMenuItem",T2=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=_t(r);return i.jsx(KI,{...s,...n,ref:t})});T2.displayName=lO;var cO="DropdownMenuCheckboxItem",R2=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=_t(r);return i.jsx(GI,{...s,...n,ref:t})});R2.displayName=cO;var dO="DropdownMenuRadioGroup",uO=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=_t(r);return i.jsx(QI,{...s,...n,ref:t})});uO.displayName=dO;var hO="DropdownMenuRadioItem",F2=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=_t(r);return i.jsx(YI,{...s,...n,ref:t})});F2.displayName=hO;var fO="DropdownMenuItemIndicator",M2=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=_t(r);return i.jsx(XI,{...s,...n,ref:t})});M2.displayName=fO;var pO="DropdownMenuSeparator",A2=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=_t(r);return i.jsx(JI,{...s,...n,ref:t})});A2.displayName=pO;var mO="DropdownMenuArrow",gO=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=_t(r);return i.jsx(ZI,{...s,...n,ref:t})});gO.displayName=mO;var yO="DropdownMenuSubTrigger",I2=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=_t(r);return i.jsx(eO,{...s,...n,ref:t})});I2.displayName=yO;var vO="DropdownMenuSubContent",O2=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=_t(r);return i.jsx(tO,{...s,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});O2.displayName=vO;var xO=j2,bO=k2,wO=C2,D2=E2,L2=_2,$2=T2,U2=R2,z2=F2,B2=M2,V2=A2,H2=I2,W2=O2;const On=xO,Dn=bO,NO=f.forwardRef(({className:e,inset:t,children:r,...n},s)=>i.jsxs(H2,{ref:s,className:re("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...n,children:[r,i.jsx(kj,{className:"ml-auto"})]}));NO.displayName=H2.displayName;const jO=f.forwardRef(({className:e,...t},r)=>i.jsx(W2,{ref:r,className:re("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...t}));jO.displayName=W2.displayName;const pn=f.forwardRef(({className:e,sideOffset:t=4,...r},n)=>i.jsx(wO,{children:i.jsx(D2,{ref:n,sideOffset:t,className:re("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...r})}));pn.displayName=D2.displayName;const Pe=f.forwardRef(({className:e,inset:t,...r},n)=>i.jsx($2,{ref:n,className:re("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...r}));Pe.displayName=$2.displayName;const SO=f.forwardRef(({className:e,children:t,checked:r,...n},s)=>i.jsxs(U2,{ref:s,className:re("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(B2,{children:i.jsx(Tc,{className:"h-4 w-4"})})}),t]}));SO.displayName=U2.displayName;const kO=f.forwardRef(({className:e,children:t,...r},n)=>i.jsxs(z2,{ref:n,className:re("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(B2,{children:i.jsx(J5,{className:"h-2 w-2 fill-current"})})}),t]}));kO.displayName=z2.displayName;const q2=f.forwardRef(({className:e,inset:t,...r},n)=>i.jsx(L2,{ref:n,className:re("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));q2.displayName=L2.displayName;const Qd=f.forwardRef(({className:e,...t},r)=>i.jsx(V2,{ref:r,className:re("-mx-1 my-1 h-px bg-muted",e),...t}));Qd.displayName=V2.displayName;function CO({isOpen:e,onClose:t,mediaItems:r,currentIndex:n,onIndexChange:s}){const[a,o]=f.useState(null);f.useEffect(()=>{if(e){document.body.style.overflow="hidden";const p=m=>{m.key==="Escape"&&t(),m.key==="ArrowLeft"&&n>0&&s(n-1),m.key==="ArrowRight"&&n<r.length-1&&s(n+1)};return document.addEventListener("keydown",p),()=>{document.body.style.overflow="unset",document.removeEventListener("keydown",p)}}},[e,t,n,r.length,s]);const l=p=>{const m=p.touches[0];o({x:m.clientX,y:m.clientY})},c=p=>{if(!a)return;const m=p.changedTouches[0],x=m.clientX-a.x,y=m.clientY-a.y;Math.abs(x)>Math.abs(y)&&Math.abs(x)>50&&(x>0&&n>0?s(n-1):x<0&&n<r.length-1&&s(n+1)),o(null)},d=()=>{n>0&&s(n-1)},u=()=>{n<r.length-1&&s(n+1)};if(!e||!r.length)return null;const h=r[n];return i.jsxs("div",{className:"fixed inset-0 bg-black/95 z-[9999] flex items-center justify-center",onClick:p=>p.target===p.currentTarget&&t(),onTouchStart:l,onTouchEnd:c,"data-testid":"fullscreen-media-viewer",children:[i.jsx(z,{variant:"ghost",size:"icon",className:"absolute top-4 right-4 text-white hover:bg-white/20 z-10",onClick:t,"data-testid":"close-fullscreen",children:i.jsx($r,{className:"w-6 h-6"})}),r.length>1&&i.jsxs("div",{className:"absolute top-4 left-4 bg-black/50 text-white px-3 py-1 rounded-full text-sm z-10",children:[n+1," / ",r.length]}),r.length>1&&i.jsxs(i.Fragment,{children:[i.jsx(z,{variant:"ghost",size:"icon",className:`absolute left-4 top-1/2 -translate-y-1/2 text-white hover:bg-white/20 z-10 ${n===0?"opacity-50 cursor-not-allowed":""}`,onClick:d,disabled:n===0,"data-testid":"previous-media",children:i.jsx(Q5,{className:"w-8 h-8"})}),i.jsx(z,{variant:"ghost",size:"icon",className:`absolute right-4 top-1/2 -translate-y-1/2 text-white hover:bg-white/20 z-10 ${n===r.length-1?"opacity-50 cursor-not-allowed":""}`,onClick:u,disabled:n===r.length-1,"data-testid":"next-media",children:i.jsx(kj,{className:"w-8 h-8"})})]}),i.jsx("div",{className:"max-w-full max-h-full flex items-center justify-center",children:h.type==="video"?i.jsx("video",{src:h.url,controls:!0,autoPlay:!0,className:"max-w-full max-h-full object-contain","data-testid":"fullscreen-video",onClick:p=>p.stopPropagation()}):i.jsx("img",{src:h.url,alt:h.alt||`Media ${n+1}`,className:"max-w-full max-h-full object-contain","data-testid":"fullscreen-image",onClick:p=>p.stopPropagation()})}),r.length>1&&i.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex space-x-2",children:r.map((p,m)=>i.jsx("button",{className:`w-2 h-2 rounded-full ${m===n?"bg-white":"bg-white/40"}`,onClick:x=>{x.stopPropagation(),s(m)},"data-testid":`media-indicator-${m}`},m))})]})}function PO(){const[e,t]=f.useState(!1),[r,n]=f.useState([]),[s,a]=f.useState(0);return{isOpen:e,mediaItems:r,currentIndex:s,openFullscreen:(d,u=0)=>{n(d),a(u),t(!0)},closeFullscreen:()=>{t(!1),a(0),n([])},goToIndex:d=>{d>=0&&d<r.length&&a(d)}}}var EO="Label",K2=f.forwardRef((e,t)=>i.jsx(ie.label,{...e,ref:t,onMouseDown:r=>{var s;r.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));K2.displayName=EO;var G2=K2;const _O=_c("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ce=f.forwardRef(({className:e,...t},r)=>i.jsx(G2,{ref:r,className:re(_O(),e),...t}));ce.displayName=G2.displayName;function TO({post:e,open:t,onOpenChange:r}){const[n,s]=f.useState(""),[a,o]=f.useState([]),[l,c]=f.useState(!1),{toast:d}=ke();Fe();const u=Xe();f.useEffect(()=>{e&&(s(e.content),o([]))},[e]);const h=pe({mutationFn:async w=>{if(!e)throw new Error("No post to update");return console.log("Updating post:",e.id,w),(await ne("PUT",`/api/posts/${e.id}`,w)).json()},onSuccess:()=>{console.log("Post updated successfully"),u.invalidateQueries({queryKey:["/api/posts"]}),d({title:"Success!",description:"Your post has been updated."}),x()},onError:w=>{console.error("Failed to update post:",w),d({title:"Error",description:`Failed to update post: ${w.message}`,variant:"destructive"})}}),p=w=>{const g=Array.from(w.target.files||[]).filter(b=>b.type.startsWith("image/"));g.length>0&&o(b=>[...b,...g].slice(0,5))},m=w=>{o(v=>v.filter((g,b)=>b!==w))},x=()=>{s(""),o([]),c(!1),r(!1)},y=async()=>{if(!e){d({title:"Error",description:"No post selected to edit.",variant:"destructive"});return}if(!n.trim()){d({title:"Content required",description:"Please enter some content for your post.",variant:"destructive"});return}c(!0);try{const w=[];for(const b of a)try{console.log("Uploading new image:",b.name);const j=await ne("POST","/api/objects/upload");if(!j.ok)throw new Error(`Upload URL request failed: ${j.status}`);const{uploadURL:k}=await j.json(),C=await fetch(k,{method:"PUT",body:b,headers:{"Content-Type":b.type}});if(!C.ok)throw new Error(`Upload failed: ${C.status}`);const S=await ne("PUT","/api/posts/media",{mediaURL:k,mediaType:"image",originalFileName:b.name}),{objectPath:_}=await S.json();w.push(_)}catch(j){console.error("Image upload failed:",j),d({title:"Image upload failed",description:`Failed to upload ${b.name}. Continuing with other images.`,variant:"destructive"})}const v=[...e.images||[],...w],g={content:n.trim(),...a.length>0&&{images:v}};console.log("Attempting to update post with data:",g),await h.mutateAsync(g)}catch(w){console.error("Update error:",w),d({title:"Update failed",description:`Failed to update post: ${w instanceof Error?w.message:"Unknown error"}`,variant:"destructive"})}finally{c(!1)}};return e?i.jsx(dr,{open:t,onOpenChange:x,children:i.jsxs(qt,{className:"bg-frhigh-dark border-frhigh-dark-tertiary max-w-2xl max-h-[90vh] overflow-y-auto",children:[i.jsxs(ur,{children:[i.jsxs(hr,{className:"text-white flex items-center gap-2",children:[i.jsx(In,{className:"w-5 h-5 text-frhigh-green"}),"Edit Post"]}),i.jsx(Wn,{className:"text-gray-400",children:"Make changes to your post content and images"})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsx(ae,{className:"bg-frhigh-dark-secondary/50 border-frhigh-dark-tertiary",children:i.jsx(oe,{className:"p-4 space-y-4",children:i.jsxs("div",{children:[i.jsx(ce,{htmlFor:"post-content",className:"text-gray-300",children:"Post Content *"}),i.jsx(xt,{id:"post-content",value:n,onChange:w=>s(w.target.value),placeholder:"What's on your mind?",className:"bg-frhigh-dark border-frhigh-dark-tertiary text-white placeholder-gray-400 min-h-[120px]",rows:5})]})})}),e.images&&e.images.length>0&&i.jsx(ae,{className:"bg-frhigh-dark-secondary/50 border-frhigh-dark-tertiary",children:i.jsxs(oe,{className:"p-4",children:[i.jsx("h3",{className:"text-white font-medium mb-3",children:"Current Images"}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:e.images.map((w,v)=>i.jsxs("div",{className:"relative group",children:[i.jsx("img",{src:w,alt:`Post image ${v+1}`,className:"w-full h-24 object-cover rounded-lg"}),i.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg"})]},v))})]})}),i.jsx(ae,{className:"bg-frhigh-dark-secondary/50 border-frhigh-dark-tertiary",children:i.jsxs(oe,{className:"p-4 space-y-4",children:[i.jsx("h3",{className:"text-white font-medium",children:"Add New Images"}),i.jsxs("div",{className:"border-2 border-dashed border-frhigh-dark-tertiary rounded-lg p-6 text-center",children:[i.jsx("input",{type:"file",id:"new-images",multiple:!0,accept:"image/*",onChange:p,className:"hidden"}),i.jsxs("label",{htmlFor:"new-images",className:"cursor-pointer",children:[i.jsx(Nm,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),i.jsx("p",{className:"text-gray-400 mb-1",children:"Click to add new images"}),i.jsx("p",{className:"text-gray-500 text-sm",children:"PNG, JPG, GIF up to 10MB each"})]})]}),a.length>0&&i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:a.map((w,v)=>i.jsxs("div",{className:"relative group",children:[i.jsx("img",{src:URL.createObjectURL(w),alt:`New image ${v+1}`,className:"w-full h-24 object-cover rounded-lg"}),i.jsx("button",{onClick:()=>m(v),className:"absolute top-1 right-1 bg-red-500 hover:bg-red-600 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:i.jsx($r,{className:"w-3 h-3"})})]},v))})]})}),i.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[i.jsx(z,{variant:"outline",onClick:x,className:"border-frhigh-dark-tertiary text-gray-300 hover:bg-frhigh-dark-secondary",children:"Cancel"}),i.jsx(z,{onClick:y,disabled:l||!n.trim(),className:"bg-frhigh-green hover:bg-frhigh-green/80 text-white",children:l?"Updating...":"Update Post"})]})]})]})}):null}function Hh({post:e}){const[t,r]=f.useState(!1),[n,s]=f.useState(!1),[a,o]=f.useState(!1),{toast:l}=ke(),c=Xe(),{user:d}=Fe(),{isOpen:u,mediaItems:h,currentIndex:p,openFullscreen:m,closeFullscreen:x,goToIndex:y}=PO(),{data:w}=xe({queryKey:["/api/admin/check",d==null?void 0:d.id],enabled:!!(d!=null&&d.id)}),{data:v}=xe({queryKey:["/api/admin/check",e.userId],enabled:!(d!=null&&d.id)||!w}),b=w&&typeof w=="object"&&"isAdmin"in w&&w.isAdmin||v&&typeof v=="object"&&"isAdmin"in v&&v.isAdmin||d&&e.userId===d.id,j=pe({mutationFn:async R=>{const M={"Content-Type":"application/json"};d&&(M["x-user-data"]=encodeURIComponent(JSON.stringify({id:d.id})));const I=await fetch(`/api/posts/${R}`,{method:"DELETE",headers:M,credentials:"include"});if(!I.ok)throw new Error(`Failed to delete post: ${I.statusText}`);return I.json()},onSuccess:()=>{c.invalidateQueries({queryKey:["/api/posts"]}),l({title:"Post Deleted",description:"Your post has been permanently removed",variant:"destructive"})},onError:R=>{l({title:"Error",description:R.message||"Failed to delete post",variant:"destructive"})}}),k=pe({mutationFn:async({postId:R,imageUrl:M})=>{const I=await fetch(`/api/posts/${R}/remove-image`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({imageUrl:M})});if(!I.ok)throw new Error(`Failed to remove image: ${I.statusText}`);return I.json()},onSuccess:()=>{c.invalidateQueries({queryKey:["/api/posts"]}),l({title:"Image Removed",description:"Image has been removed from the post"})},onError:R=>{l({title:"Error",description:R.message||"Failed to remove image",variant:"destructive"})}}),C=()=>{console.log("Edit post:",e.id),o(!0),s(!1)},S=()=>{var R;console.log("Edit image:",(R=e.images)==null?void 0:R[0]),l({title:"Edit Feature",description:"Image editing will be available soon!"})},_=()=>{var R;(R=e.images)!=null&&R[0]&&(confirm("Are you sure you want to remove this image?")&&k.mutate({postId:e.id,imageUrl:e.images[0]}),r(!1))},P=()=>{confirm("Delete this post?")&&j.mutate(e.id),s(!1)},T=()=>{var R;if((R=e.images)!=null&&R[0]){const M=document.createElement("a");M.href=e.images[0],M.download="frhighday-image.jpg",document.body.appendChild(M),M.click(),document.body.removeChild(M),l({title:"Image Saved",description:"Image has been downloaded to your device"})}r(!1)},F=R=>{const I=new Date().getTime()-new Date(R).getTime(),H=Math.floor(I/(1e3*60*60));return H<1?"now":H<24?`${H}h`:`${Math.floor(H/24)}d`};return i.jsxs(i.Fragment,{children:[i.jsx("article",{className:"bg-frhigh-dark-secondary rounded-2xl p-4 sm:p-6 mb-4 border border-frhigh-green/10 hover:border-frhigh-green/20 hover:bg-frhigh-dark-tertiary/50 transition-all duration-300 shadow-lg hover:shadow-xl hover:shadow-frhigh-green/5 no-scroll-x backdrop-blur-sm",children:i.jsxs("div",{className:"flex space-x-3",children:[i.jsxs(rr,{className:"w-10 h-10 sm:w-12 sm:h-12 flex-shrink-0 ring-2 ring-frhigh-green/20 hover:ring-frhigh-green/40 transition-all duration-200",children:[i.jsx(nr,{src:e.user.avatar||void 0,alt:`${e.user.displayName} profile`,className:"object-cover"}),i.jsx(sr,{className:"bg-frhigh-green text-frhigh-dark text-xs font-medium",children:e.user.displayName.charAt(0).toUpperCase()})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("h3",{className:"font-semibold text-white text-base","data-testid":`text-username-${e.id}`,children:e.user.displayName}),i.jsxs("span",{className:"text-gray-400 text-xs","data-testid":`text-handle-${e.id}`,children:["@",e.user.username]}),e.user.isVerified&&i.jsx("span",{className:"text-gray-400 text-lg ml-1",title:"Verified",children:""}),i.jsx("span",{className:"text-gray-400 text-xs",children:""}),i.jsx("span",{className:"text-gray-400 text-xs","data-testid":`text-time-${e.id}`,children:F(e.createdAt||new Date)})]}),b?i.jsxs(On,{open:n,onOpenChange:s,children:[i.jsx(Dn,{asChild:!0,children:i.jsx(z,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-gray-400 hover:text-white hover:bg-gray-700/50 rounded-full","data-testid":`button-post-menu-${e.id}`,children:i.jsx(An,{className:"w-4 h-4"})})}),i.jsxs(pn,{align:"end",className:"bg-frhigh-dark-secondary border-frhigh-dark-tertiary",children:[i.jsxs(Pe,{onClick:C,className:"text-white hover:bg-frhigh-dark-tertiary cursor-pointer","data-testid":`menu-edit-post-${e.id}`,children:[i.jsx(In,{className:"w-4 h-4 mr-2"}),"Edit Post"]}),i.jsxs(Pe,{onClick:P,className:"text-red-400 hover:bg-red-900/20 cursor-pointer","data-testid":`menu-remove-post-${e.id}`,children:[i.jsx(Ir,{className:"w-4 h-4 mr-2"}),"Delete Post"]})]})]}):null]}),i.jsx("p",{className:"text-white text-base leading-relaxed mb-4","data-testid":`text-content-${e.id}`,children:i.jsx(zh,{text:e.content})}),e.type==="community"&&i.jsxs("div",{className:"bg-gradient-to-r from-frhigh-green to-frhigh-green-light rounded-xl p-4 mt-3 shadow-md",children:[i.jsx("h4",{className:"text-frhigh-dark font-semibold mb-2 text-sm",children:"Community Guidelines"}),i.jsxs("ul",{className:"text-frhigh-dark text-xs space-y-1",children:[i.jsx("li",{children:" Respect all community members"}),i.jsx("li",{children:" Share educational content"}),i.jsx("li",{children:" No illegal activity discussions"}),i.jsx("li",{children:" Age verification required (21+)"})]})]}),e.type==="educational"&&i.jsxs("div",{className:"bg-frhigh-dark-tertiary rounded-xl p-4 mt-3 border-l-4 border-frhigh-green shadow-md",children:[i.jsx("h4",{className:"text-frhigh-green font-semibold mb-2 text-sm",children:"Myrcene Quick Facts"}),i.jsxs("ul",{className:"text-gray-300 text-xs space-y-1",children:[i.jsx("li",{children:" Boiling point: 167C (332F)"}),i.jsx("li",{children:" Aroma: Earthy, musky, herbal"}),i.jsx("li",{children:" Effects: Sedating, relaxing"}),i.jsx("li",{children:" Also found in: Mangoes, hops, bay leaves"})]})]}),e.images&&e.images.length>0&&i.jsxs("div",{className:"mb-4 rounded-2xl overflow-hidden relative shadow-lg hover:shadow-xl transition-all duration-300",children:[i.jsx("img",{src:e.images[0],alt:"Post content",className:"w-full h-60 object-cover cursor-pointer hover:scale-105 transition-transform duration-300","data-testid":`img-post-${e.id}`,onClick:()=>{var M;const R=((M=e.images)==null?void 0:M.map(I=>({url:I,type:"image",alt:"Post image"})))||[];m(R,0)}}),i.jsx("div",{className:"absolute top-2 right-2 z-10",children:i.jsxs(On,{open:t,onOpenChange:r,children:[i.jsx(Dn,{asChild:!0,children:i.jsx(z,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 bg-black/50 hover:bg-black/70 text-white rounded-full","data-testid":`button-image-menu-${e.id}`,children:i.jsx(An,{className:"w-4 h-4"})})}),i.jsxs(pn,{align:"end",className:"bg-frhigh-dark-secondary border-frhigh-dark-tertiary",children:[b?i.jsxs(i.Fragment,{children:[i.jsxs(Pe,{onClick:S,className:"text-white hover:bg-frhigh-dark-tertiary cursor-pointer","data-testid":`menu-edit-image-${e.id}`,children:[i.jsx(In,{className:"w-4 h-4 mr-2"}),"Edit"]}),i.jsxs(Pe,{onClick:_,className:"text-red-400 hover:bg-red-900/20 cursor-pointer","data-testid":`menu-remove-image-${e.id}`,children:[i.jsx(Ir,{className:"w-4 h-4 mr-2"}),"Remove"]})]}):null,i.jsxs(Pe,{onClick:T,className:"text-white hover:bg-frhigh-dark-tertiary cursor-pointer","data-testid":`menu-save-image-${e.id}`,children:[i.jsx(co,{className:"w-4 h-4 mr-2"}),"Save"]})]})]})})]}),e.videos&&e.videos.length>0&&i.jsxs("div",{className:"mb-4 rounded-2xl overflow-hidden relative shadow-lg hover:shadow-xl transition-all duration-300",children:[i.jsx("video",{src:typeof e.videos[0]=="string"?e.videos[0]:e.videos[0].url,controls:!0,className:"w-full h-60 object-cover cursor-pointer hover:scale-105 transition-transform duration-300","data-testid":`video-post-${e.id}`,onClick:R=>{var I;R.preventDefault();const M=((I=e.videos)==null?void 0:I.map(H=>({url:typeof H=="string"?H:H.url,type:"video",alt:"Post video"})))||[];m(M,0)}}),i.jsx("div",{className:"absolute top-2 right-2 z-10",children:i.jsxs(On,{children:[i.jsx(Dn,{asChild:!0,children:i.jsx(z,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 bg-black/50 hover:bg-black/70 text-white rounded-full","data-testid":`button-video-menu-${e.id}`,children:i.jsx(An,{className:"w-4 h-4"})})}),i.jsxs(pn,{align:"end",className:"bg-frhigh-dark-secondary border-frhigh-dark-tertiary",children:[b?i.jsxs(i.Fragment,{children:[i.jsxs(Pe,{onClick:()=>{},className:"text-white hover:bg-frhigh-dark-tertiary cursor-pointer","data-testid":`menu-edit-video-${e.id}`,children:[i.jsx(In,{className:"w-4 h-4 mr-2"}),"Edit"]}),i.jsxs(Pe,{onClick:()=>{},className:"text-red-400 hover:bg-red-900/20 cursor-pointer","data-testid":`menu-remove-video-${e.id}`,children:[i.jsx(Ir,{className:"w-4 h-4 mr-2"}),"Remove"]})]}):null,i.jsxs(Pe,{onClick:()=>{},className:"text-white hover:bg-frhigh-dark-tertiary cursor-pointer","data-testid":`menu-save-video-${e.id}`,children:[i.jsx(co,{className:"w-4 h-4 mr-2"}),"Save"]})]})]})})]}),i.jsx(Uh,{postId:e.id,likesCount:e.likesCount||0,dislikesCount:e.dislikesCount||0,commentsCount:e.commentsCount||0,sharesCount:e.sharesCount||0,isLiked:!1,userReaction:e.userReaction||null,currentUserId:d==null?void 0:d.id})]})]})}),i.jsx(CO,{isOpen:u,onClose:x,mediaItems:h,currentIndex:p,onIndexChange:y}),i.jsx(TO,{post:e,open:a,onOpenChange:o})]})}function RO(e,t,r){const n=[];return e.forEach(s=>typeof s!="string"?n.push(s):t[Symbol.split](s).forEach((a,o,l)=>{a!==""&&n.push(a),o<l.length-1&&n.push(r)})),n}/**
 * Takes a string with placeholder variables like `%{smart_count} file selected`
 * and replaces it with values from options `{smart_count: 5}`
 *
 * @license https://github.com/airbnb/polyglot.js/blob/master/LICENSE
 * taken from https://github.com/airbnb/polyglot.js/blob/master/lib/polyglot.js#L299
 *
 * @param phrase that needs interpolation, with placeholders
 * @param options with values that will be used to replace placeholders
 */function $0(e,t){const r=/\$/g,n="$$$$";let s=[e];if(t==null)return s;for(const a of Object.keys(t))if(a!=="_"){let o=t[a];typeof o=="string"&&(o=r[Symbol.replace](o,n)),s=RO(s,new RegExp(`%\\{${a}\\}`,"g"),o)}return s}const FO=e=>{throw new Error(`missing string: ${e}`)};var Jl,Zl,Om;class Q2{constructor(t,{onMissingKey:r=FO}={}){D(this,Zl);O(this,"locale");D(this,Jl);this.locale={strings:{},pluralize(n){return n===1?0:1}},Array.isArray(t)?t.forEach(U(this,Zl,Om),this):U(this,Zl,Om).call(this,t),$(this,Jl,r)}translate(t,r){return this.translateArray(t,r).join("")}translateArray(t,r){let n=this.locale.strings[t];if(n==null&&(N(this,Jl).call(this,t),n=t),typeof n=="object"){if(r&&typeof r.smart_count<"u"){const a=this.locale.pluralize(r.smart_count);return $0(n[a],r)}throw new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}if(typeof n!="string")throw new Error("string was not a string");return $0(n,r)}}Jl=new WeakMap,Zl=new WeakSet,Om=function(t){if(!(t!=null&&t.strings))return;const r=this.locale;Object.assign(this.locale,{strings:{...r.strings,...t.strings},pluralize:t.pluralize||r.pluralize})};class Y2{constructor(t,r){O(this,"uppy");O(this,"opts");O(this,"id");O(this,"defaultLocale");O(this,"i18n");O(this,"i18nArray");O(this,"type");O(this,"VERSION");this.uppy=t,this.opts=r??{}}getPluginState(){const{plugins:t}=this.uppy.getState();return(t==null?void 0:t[this.id])||{}}setPluginState(t){const{plugins:r}=this.uppy.getState();this.uppy.setState({plugins:{...r,[this.id]:{...r[this.id],...t}}})}setOptions(t){this.opts={...this.opts,...t},this.setPluginState(void 0),this.i18nInit()}i18nInit(){const t=new Q2([this.defaultLocale,this.uppy.locale,this.opts.locale]);this.i18n=t.translate.bind(t),this.i18nArray=t.translateArray.bind(t),this.setPluginState(void 0)}addTarget(t){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")}install(){}uninstall(){}update(t){}afterUpdate(){}}function Kf(e){return e<10?`0${e}`:e.toString()}function Yd(){const e=new Date,t=Kf(e.getHours()),r=Kf(e.getMinutes()),n=Kf(e.getSeconds());return`${t}:${r}:${n}`}const MO={debug:()=>{},warn:()=>{},error:(...e)=>console.error(`[Uppy] [${Yd()}]`,...e)},AO={debug:(...e)=>console.debug(`[Uppy] [${Yd()}]`,...e),warn:(...e)=>console.warn(`[Uppy] [${Yd()}]`,...e),error:(...e)=>console.error(`[Uppy] [${Yd()}]`,...e)};function X2(e){return typeof e!="object"||e===null||!("nodeType"in e)?!1:e.nodeType===Node.ELEMENT_NODE}function IO(e,t=document){return typeof e=="string"?t.querySelector(e):X2(e)?e:null}function J2(e){for(;e&&!e.dir;)e=e.parentNode;return e==null?void 0:e.dir}var $c,ue,Z2,ti,U0,eC,tC,rC,cv,Dm,Lm,Vl={},nC=[],OO=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Uc=Array.isArray;function dn(e,t){for(var r in t)e[r]=t[r];return e}function dv(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Hl(e,t,r){var n,s,a,o={};for(a in t)a=="key"?n=t[a]:a=="ref"?s=t[a]:o[a]=t[a];if(arguments.length>2&&(o.children=arguments.length>3?$c.call(arguments,2):r),typeof e=="function"&&e.defaultProps!=null)for(a in e.defaultProps)o[a]===void 0&&(o[a]=e.defaultProps[a]);return ml(e,o,n,s,null)}function ml(e,t,r,n,s){var a={type:e,props:t,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:s??++Z2,__i:-1,__u:0};return s==null&&ue.vnode!=null&&ue.vnode(a),a}function DO(){return{current:null}}function Fr(e){return e.children}function Dt(e,t){this.props=e,this.context=t}function po(e,t){if(t==null)return e.__?po(e.__,e.__i+1):null;for(var r;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null)return r.__e;return typeof e.type=="function"?po(e):null}function sC(e){var t,r;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null){e.__e=e.__c.base=r.__e;break}return sC(e)}}function z0(e){(!e.__d&&(e.__d=!0)&&ti.push(e)&&!Du.__r++||U0!=ue.debounceRendering)&&((U0=ue.debounceRendering)||eC)(Du)}function Du(){for(var e,t,r,n,s,a,o,l=1;ti.length;)ti.length>l&&ti.sort(tC),e=ti.shift(),l=ti.length,e.__d&&(r=void 0,s=(n=(t=e).__v).__e,a=[],o=[],t.__P&&((r=dn({},n)).__v=n.__v+1,ue.vnode&&ue.vnode(r),uv(t.__P,r,n,t.__n,t.__P.namespaceURI,32&n.__u?[s]:null,a,s??po(n),!!(32&n.__u),o),r.__v=n.__v,r.__.__k[r.__i]=r,oC(a,r,o),r.__e!=s&&sC(r)));Du.__r=0}function iC(e,t,r,n,s,a,o,l,c,d,u){var h,p,m,x,y,w,v=n&&n.__k||nC,g=t.length;for(c=LO(r,t,v,c,g),h=0;h<g;h++)(m=r.__k[h])!=null&&(p=m.__i==-1?Vl:v[m.__i]||Vl,m.__i=h,w=uv(e,m,p,s,a,o,l,c,d,u),x=m.__e,m.ref&&p.ref!=m.ref&&(p.ref&&hv(p.ref,null,m),u.push(m.ref,m.__c||x,m)),y==null&&x!=null&&(y=x),4&m.__u||p.__k===m.__k?c=aC(m,c,e):typeof m.type=="function"&&w!==void 0?c=w:x&&(c=x.nextSibling),m.__u&=-7);return r.__e=y,c}function LO(e,t,r,n,s){var a,o,l,c,d,u=r.length,h=u,p=0;for(e.__k=new Array(s),a=0;a<s;a++)(o=t[a])!=null&&typeof o!="boolean"&&typeof o!="function"?(c=a+p,(o=e.__k[a]=typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?ml(null,o,null,null,null):Uc(o)?ml(Fr,{children:o},null,null,null):o.constructor==null&&o.__b>0?ml(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=e,o.__b=e.__b+1,l=null,(d=o.__i=$O(o,r,c,h))!=-1&&(h--,(l=r[d])&&(l.__u|=2)),l==null||l.__v==null?(d==-1&&(s>u?p--:s<u&&p++),typeof o.type!="function"&&(o.__u|=4)):d!=c&&(d==c-1?p--:d==c+1?p++:(d>c?p--:p++,o.__u|=4))):e.__k[a]=null;if(h)for(a=0;a<u;a++)(l=r[a])!=null&&!(2&l.__u)&&(l.__e==n&&(n=po(l)),cC(l,l));return n}function aC(e,t,r){var n,s;if(typeof e.type=="function"){for(n=e.__k,s=0;n&&s<n.length;s++)n[s]&&(n[s].__=e,t=aC(n[s],t,r));return t}e.__e!=t&&(t&&e.type&&!r.contains(t)&&(t=po(e)),r.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function _r(e,t){return t=t||[],e==null||typeof e=="boolean"||(Uc(e)?e.some(function(r){_r(r,t)}):t.push(e)),t}function $O(e,t,r,n){var s,a,o,l=e.key,c=e.type,d=t[r],u=d!=null&&(2&d.__u)==0;if(d===null&&e.key==null||u&&l==d.key&&c==d.type)return r;if(n>(u?1:0)){for(s=r-1,a=r+1;s>=0||a<t.length;)if((d=t[o=s>=0?s--:a++])!=null&&!(2&d.__u)&&l==d.key&&c==d.type)return o}return-1}function B0(e,t,r){t[0]=="-"?e.setProperty(t,r??""):e[t]=r==null?"":typeof r!="number"||OO.test(t)?r:r+"px"}function vd(e,t,r,n,s){var a,o;e:if(t=="style")if(typeof r=="string")e.style.cssText=r;else{if(typeof n=="string"&&(e.style.cssText=n=""),n)for(t in n)r&&t in r||B0(e.style,t,"");if(r)for(t in r)n&&r[t]==n[t]||B0(e.style,t,r[t])}else if(t[0]=="o"&&t[1]=="n")a=t!=(t=t.replace(rC,"$1")),o=t.toLowerCase(),t=o in e||t=="onFocusOut"||t=="onFocusIn"?o.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+a]=r,r?n?r.u=n.u:(r.u=cv,e.addEventListener(t,a?Lm:Dm,a)):e.removeEventListener(t,a?Lm:Dm,a);else{if(s=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&r==1?"":r))}}function V0(e){return function(t){if(this.l){var r=this.l[t.type+e];if(t.t==null)t.t=cv++;else if(t.t<r.u)return;return r(ue.event?ue.event(t):t)}}}function uv(e,t,r,n,s,a,o,l,c,d){var u,h,p,m,x,y,w,v,g,b,j,k,C,S,_,P,T,F=t.type;if(t.constructor!=null)return null;128&r.__u&&(c=!!(32&r.__u),a=[l=t.__e=r.__e]),(u=ue.__b)&&u(t);e:if(typeof F=="function")try{if(v=t.props,g="prototype"in F&&F.prototype.render,b=(u=F.contextType)&&n[u.__c],j=u?b?b.props.value:u.__:n,r.__c?w=(h=t.__c=r.__c).__=h.__E:(g?t.__c=h=new F(v,j):(t.__c=h=new Dt(v,j),h.constructor=F,h.render=zO),b&&b.sub(h),h.props=v,h.state||(h.state={}),h.context=j,h.__n=n,p=h.__d=!0,h.__h=[],h._sb=[]),g&&h.__s==null&&(h.__s=h.state),g&&F.getDerivedStateFromProps!=null&&(h.__s==h.state&&(h.__s=dn({},h.__s)),dn(h.__s,F.getDerivedStateFromProps(v,h.__s))),m=h.props,x=h.state,h.__v=t,p)g&&F.getDerivedStateFromProps==null&&h.componentWillMount!=null&&h.componentWillMount(),g&&h.componentDidMount!=null&&h.__h.push(h.componentDidMount);else{if(g&&F.getDerivedStateFromProps==null&&v!==m&&h.componentWillReceiveProps!=null&&h.componentWillReceiveProps(v,j),!h.__e&&h.shouldComponentUpdate!=null&&h.shouldComponentUpdate(v,h.__s,j)===!1||t.__v==r.__v){for(t.__v!=r.__v&&(h.props=v,h.state=h.__s,h.__d=!1),t.__e=r.__e,t.__k=r.__k,t.__k.some(function(R){R&&(R.__=t)}),k=0;k<h._sb.length;k++)h.__h.push(h._sb[k]);h._sb=[],h.__h.length&&o.push(h);break e}h.componentWillUpdate!=null&&h.componentWillUpdate(v,h.__s,j),g&&h.componentDidUpdate!=null&&h.__h.push(function(){h.componentDidUpdate(m,x,y)})}if(h.context=j,h.props=v,h.__P=e,h.__e=!1,C=ue.__r,S=0,g){for(h.state=h.__s,h.__d=!1,C&&C(t),u=h.render(h.props,h.state,h.context),_=0;_<h._sb.length;_++)h.__h.push(h._sb[_]);h._sb=[]}else do h.__d=!1,C&&C(t),u=h.render(h.props,h.state,h.context),h.state=h.__s;while(h.__d&&++S<25);h.state=h.__s,h.getChildContext!=null&&(n=dn(dn({},n),h.getChildContext())),g&&!p&&h.getSnapshotBeforeUpdate!=null&&(y=h.getSnapshotBeforeUpdate(m,x)),P=u,u!=null&&u.type===Fr&&u.key==null&&(P=lC(u.props.children)),l=iC(e,Uc(P)?P:[P],t,r,n,s,a,o,l,c,d),h.base=t.__e,t.__u&=-161,h.__h.length&&o.push(h),w&&(h.__E=h.__=null)}catch(R){if(t.__v=null,c||a!=null)if(R.then){for(t.__u|=c?160:128;l&&l.nodeType==8&&l.nextSibling;)l=l.nextSibling;a[a.indexOf(l)]=null,t.__e=l}else{for(T=a.length;T--;)dv(a[T]);$m(t)}else t.__e=r.__e,t.__k=r.__k,R.then||$m(t);ue.__e(R,t,r)}else a==null&&t.__v==r.__v?(t.__k=r.__k,t.__e=r.__e):l=t.__e=UO(r.__e,t,r,n,s,a,o,c,d);return(u=ue.diffed)&&u(t),128&t.__u?void 0:l}function $m(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach($m)}function oC(e,t,r){for(var n=0;n<r.length;n++)hv(r[n],r[++n],r[++n]);ue.__c&&ue.__c(t,e),e.some(function(s){try{e=s.__h,s.__h=[],e.some(function(a){a.call(s)})}catch(a){ue.__e(a,s.__v)}})}function lC(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:Uc(e)?e.map(lC):dn({},e)}function UO(e,t,r,n,s,a,o,l,c){var d,u,h,p,m,x,y,w=r.props,v=t.props,g=t.type;if(g=="svg"?s="http://www.w3.org/2000/svg":g=="math"?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),a!=null){for(d=0;d<a.length;d++)if((m=a[d])&&"setAttribute"in m==!!g&&(g?m.localName==g:m.nodeType==3)){e=m,a[d]=null;break}}if(e==null){if(g==null)return document.createTextNode(v);e=document.createElementNS(s,g,v.is&&v),l&&(ue.__m&&ue.__m(t,a),l=!1),a=null}if(g==null)w===v||l&&e.data==v||(e.data=v);else{if(a=a&&$c.call(e.childNodes),w=r.props||Vl,!l&&a!=null)for(w={},d=0;d<e.attributes.length;d++)w[(m=e.attributes[d]).name]=m.value;for(d in w)if(m=w[d],d!="children"){if(d=="dangerouslySetInnerHTML")h=m;else if(!(d in v)){if(d=="value"&&"defaultValue"in v||d=="checked"&&"defaultChecked"in v)continue;vd(e,d,null,m,s)}}for(d in v)m=v[d],d=="children"?p=m:d=="dangerouslySetInnerHTML"?u=m:d=="value"?x=m:d=="checked"?y=m:l&&typeof m!="function"||w[d]===m||vd(e,d,m,w[d],s);if(u)l||h&&(u.__html==h.__html||u.__html==e.innerHTML)||(e.innerHTML=u.__html),t.__k=[];else if(h&&(e.innerHTML=""),iC(t.type=="template"?e.content:e,Uc(p)?p:[p],t,r,n,g=="foreignObject"?"http://www.w3.org/1999/xhtml":s,a,o,a?a[0]:r.__k&&po(r,0),l,c),a!=null)for(d=a.length;d--;)dv(a[d]);l||(d="value",g=="progress"&&x==null?e.removeAttribute("value"):x!=null&&(x!==e[d]||g=="progress"&&!x||g=="option"&&x!=w[d])&&vd(e,d,x,w[d],s),d="checked",y!=null&&y!=e[d]&&vd(e,d,y,w[d],s))}return e}function hv(e,t,r){try{if(typeof e=="function"){var n=typeof e.__u=="function";n&&e.__u(),n&&t==null||(e.__u=e(t))}else e.current=t}catch(s){ue.__e(s,r)}}function cC(e,t,r){var n,s;if(ue.unmount&&ue.unmount(e),(n=e.ref)&&(n.current&&n.current!=e.__e||hv(n,null,t)),(n=e.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(a){ue.__e(a,t)}n.base=n.__P=null}if(n=e.__k)for(s=0;s<n.length;s++)n[s]&&cC(n[s],t,r||typeof e.type!="function");r||dv(e.__e),e.__c=e.__=e.__e=void 0}function zO(e,t,r){return this.constructor(e,r)}function BO(e,t,r){var n,s,a,o;t==document&&(t=document.documentElement),ue.__&&ue.__(e,t),s=(n=typeof r=="function")?null:t.__k,a=[],o=[],uv(t,e=(!n&&r||t).__k=Hl(Fr,null,[e]),s||Vl,Vl,t.namespaceURI,!n&&r?[r]:s?null:t.firstChild?$c.call(t.childNodes):null,a,!n&&r?r:s?s.__e:t.firstChild,n,o),oC(a,e,o)}function dC(e,t,r){var n,s,a,o,l=dn({},e.props);for(a in e.type&&e.type.defaultProps&&(o=e.type.defaultProps),t)a=="key"?n=t[a]:a=="ref"?s=t[a]:l[a]=t[a]===void 0&&o!=null?o[a]:t[a];return arguments.length>2&&(l.children=arguments.length>3?$c.call(arguments,2):r),ml(e.type,l,n||e.key,s||e.ref,null)}$c=nC.slice,ue={__e:function(e,t,r,n){for(var s,a,o;t=t.__;)if((s=t.__c)&&!s.__)try{if((a=s.constructor)&&a.getDerivedStateFromError!=null&&(s.setState(a.getDerivedStateFromError(e)),o=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(e,n||{}),o=s.__d),o)return s.__E=s}catch(l){e=l}throw e}},Z2=0,Dt.prototype.setState=function(e,t){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=dn({},this.state),typeof e=="function"&&(e=e(dn({},r),this.props)),e&&dn(r,e),e!=null&&this.__v&&(t&&this._sb.push(t),z0(this))},Dt.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),z0(this))},Dt.prototype.render=Fr,ti=[],eC=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,tC=function(e,t){return e.__v.__b-t.__v.__b},Du.__r=0,rC=/(PointerCapture)$|Capture$/i,cv=0,Dm=V0(!1),Lm=V0(!0);var Wl,qe,Gf,H0,ql=0,uC=[],Qe=ue,W0=Qe.__b,q0=Qe.__r,K0=Qe.diffed,G0=Qe.__c,Q0=Qe.unmount,Y0=Qe.__;function fv(e,t){Qe.__h&&Qe.__h(qe,e,ql||t),ql=0;var r=qe.__H||(qe.__H={__:[],__h:[]});return e>=r.__.length&&r.__.push({}),r.__[e]}function Lu(e){return ql=1,VO(fC,e)}function VO(e,t,r){var n=fv(Wl++,2);if(n.t=e,!n.__c&&(n.__=[r?r(t):fC(void 0,t),function(l){var c=n.__N?n.__N[0]:n.__[0],d=n.t(c,l);c!==d&&(n.__N=[d,n.__[1]],n.__c.setState({}))}],n.__c=qe,!qe.__f)){var s=function(l,c,d){if(!n.__c.__H)return!0;var u=n.__c.__H.__.filter(function(p){return!!p.__c});if(u.every(function(p){return!p.__N}))return!a||a.call(this,l,c,d);var h=n.__c.props!==l;return u.forEach(function(p){if(p.__N){var m=p.__[0];p.__=p.__N,p.__N=void 0,m!==p.__[0]&&(h=!0)}}),a&&a.call(this,l,c,d)||h};qe.__f=!0;var a=qe.shouldComponentUpdate,o=qe.componentWillUpdate;qe.componentWillUpdate=function(l,c,d){if(this.__e){var u=a;a=void 0,s(l,c,d),a=u}o&&o.call(this,l,c,d)},qe.shouldComponentUpdate=s}return n.__N||n.__}function Um(e,t){var r=fv(Wl++,3);!Qe.__s&&hC(r.__H,t)&&(r.__=e,r.u=t,qe.__H.__h.push(r))}function Xd(e){return ql=5,pv(function(){return{current:e}},[])}function pv(e,t){var r=fv(Wl++,7);return hC(r.__H,t)&&(r.__=e(),r.__H=t,r.__h=e),r.__}function HO(e,t){return ql=8,pv(function(){return e},t)}function WO(){for(var e;e=uC.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Jd),e.__H.__h.forEach(zm),e.__H.__h=[]}catch(t){e.__H.__h=[],Qe.__e(t,e.__v)}}Qe.__b=function(e){qe=null,W0&&W0(e)},Qe.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Y0&&Y0(e,t)},Qe.__r=function(e){q0&&q0(e),Wl=0;var t=(qe=e.__c).__H;t&&(Gf===qe?(t.__h=[],qe.__h=[],t.__.forEach(function(r){r.__N&&(r.__=r.__N),r.u=r.__N=void 0})):(t.__h.forEach(Jd),t.__h.forEach(zm),t.__h=[],Wl=0)),Gf=qe},Qe.diffed=function(e){K0&&K0(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(uC.push(t)!==1&&H0===Qe.requestAnimationFrame||((H0=Qe.requestAnimationFrame)||qO)(WO)),t.__H.__.forEach(function(r){r.u&&(r.__H=r.u),r.u=void 0})),Gf=qe=null},Qe.__c=function(e,t){t.some(function(r){try{r.__h.forEach(Jd),r.__h=r.__h.filter(function(n){return!n.__||zm(n)})}catch(n){t.some(function(s){s.__h&&(s.__h=[])}),t=[],Qe.__e(n,r.__v)}}),G0&&G0(e,t)},Qe.unmount=function(e){Q0&&Q0(e);var t,r=e.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{Jd(n)}catch(s){t=s}}),r.__H=void 0,t&&Qe.__e(t,r.__v))};var X0=typeof requestAnimationFrame=="function";function qO(e){var t,r=function(){clearTimeout(n),X0&&cancelAnimationFrame(t),setTimeout(e)},n=setTimeout(r,35);X0&&(t=requestAnimationFrame(r))}function Jd(e){var t=qe,r=e.__c;typeof r=="function"&&(e.__c=void 0,r()),qe=t}function zm(e){var t=qe;e.__c=e.__(),qe=t}function hC(e,t){return!e||e.length!==t.length||t.some(function(r,n){return r!==e[n]})}function fC(e,t){return typeof t=="function"?t(e):t}function KO(e,t){for(var r in t)e[r]=t[r];return e}function J0(e,t){for(var r in e)if(r!=="__source"&&!(r in t))return!0;for(var n in t)if(n!=="__source"&&e[n]!==t[n])return!0;return!1}function Z0(e,t){this.props=e,this.context=t}(Z0.prototype=new Dt).isPureReactComponent=!0,Z0.prototype.shouldComponentUpdate=function(e,t){return J0(this.props,e)||J0(this.state,t)};var eb=ue.__b;ue.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),eb&&eb(e)};var GO=ue.__e;ue.__e=function(e,t,r,n){if(e.then){for(var s,a=t;a=a.__;)if((s=a.__c)&&s.__c)return t.__e==null&&(t.__e=r.__e,t.__k=r.__k),s.__c(e,t)}GO(e,t,r,n)};var tb=ue.unmount;function pC(e,t,r){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(n){typeof n.__c=="function"&&n.__c()}),e.__c.__H=null),(e=KO({},e)).__c!=null&&(e.__c.__P===r&&(e.__c.__P=t),e.__c.__e=!0,e.__c=null),e.__k=e.__k&&e.__k.map(function(n){return pC(n,t,r)})),e}function mC(e,t,r){return e&&r&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(n){return mC(n,t,r)}),e.__c&&e.__c.__P===t&&(e.__e&&r.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=r)),e}function Qf(){this.__u=0,this.o=null,this.__b=null}function gC(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function xd(){this.i=null,this.l=null}ue.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),tb&&tb(e)},(Qf.prototype=new Dt).__c=function(e,t){var r=t.__c,n=this;n.o==null&&(n.o=[]),n.o.push(r);var s=gC(n.__v),a=!1,o=function(){a||(a=!0,r.__R=null,s?s(l):l())};r.__R=o;var l=function(){if(!--n.__u){if(n.state.__a){var c=n.state.__a;n.__v.__k[0]=mC(c,c.__c.__P,c.__c.__O)}var d;for(n.setState({__a:n.__b=null});d=n.o.pop();)d.forceUpdate()}};n.__u++||32&t.__u||n.setState({__a:n.__b=n.__v.__k[0]}),e.then(o,o)},Qf.prototype.componentWillUnmount=function(){this.o=[]},Qf.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var r=document.createElement("div"),n=this.__v.__k[0].__c;this.__v.__k[0]=pC(this.__b,r,n.__O=n.__P)}this.__b=null}var s=t.__a&&Hl(Fr,null,e.fallback);return s&&(s.__u&=-33),[Hl(Fr,null,t.__a?null:e.children),s]};var rb=function(e,t,r){if(++r[1]===r[0]&&e.l.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.l.size))for(r=e.i;r;){for(;r.length>3;)r.pop()();if(r[1]<r[0])break;e.i=r=r[2]}};(xd.prototype=new Dt).__a=function(e){var t=this,r=gC(t.__v),n=t.l.get(e);return n[0]++,function(s){var a=function(){t.props.revealOrder?(n.push(s),rb(t,e,n)):s()};r?r(a):a()}},xd.prototype.render=function(e){this.i=null,this.l=new Map;var t=_r(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var r=t.length;r--;)this.l.set(t[r],this.i=[1,0,this.i]);return e.children},xd.prototype.componentDidUpdate=xd.prototype.componentDidMount=function(){var e=this;this.l.forEach(function(t,r){rb(e,r,t)})};var QO=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,YO=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,XO=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,JO=/[A-Z0-9]/g,ZO=typeof document<"u",eD=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};function nb(e,t,r){return t.__k==null&&(t.textContent=""),BO(e,t),typeof r=="function"&&r(),e?e.__c:null}Dt.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(Dt.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var sb=ue.event;function tD(){}function rD(){return this.cancelBubble}function nD(){return this.defaultPrevented}ue.event=function(e){return sb&&(e=sb(e)),e.persist=tD,e.isPropagationStopped=rD,e.isDefaultPrevented=nD,e.nativeEvent=e};var sD={enumerable:!1,configurable:!0,get:function(){return this.class}},ib=ue.vnode;ue.vnode=function(e){typeof e.type=="string"&&function(t){var r=t.props,n=t.type,s={},a=n.indexOf("-")===-1;for(var o in r){var l=r[o];if(!(o==="value"&&"defaultValue"in r&&l==null||ZO&&o==="children"&&n==="noscript"||o==="class"||o==="className")){var c=o.toLowerCase();o==="defaultValue"&&"value"in r&&r.value==null?o="value":o==="download"&&l===!0?l="":c==="translate"&&l==="no"?l=!1:c[0]==="o"&&c[1]==="n"?c==="ondoubleclick"?o="ondblclick":c!=="onchange"||n!=="input"&&n!=="textarea"||eD(r.type)?c==="onfocus"?o="onfocusin":c==="onblur"?o="onfocusout":XO.test(o)&&(o=c):c=o="oninput":a&&YO.test(o)?o=o.replace(JO,"-$&").toLowerCase():l===null&&(l=void 0),c==="oninput"&&s[o=c]&&(o="oninputCapture"),s[o]=l}}n=="select"&&s.multiple&&Array.isArray(s.value)&&(s.value=_r(r.children).forEach(function(d){d.props.selected=s.value.indexOf(d.props.value)!=-1})),n=="select"&&s.defaultValue!=null&&(s.value=_r(r.children).forEach(function(d){d.props.selected=s.multiple?s.defaultValue.indexOf(d.props.value)!=-1:s.defaultValue==d.props.value})),r.class&&!r.className?(s.class=r.class,Object.defineProperty(s,"className",sD)):(r.className&&!r.class||r.class&&r.className)&&(s.class=s.className=r.className),t.props=s}(e),e.$$typeof=QO,ib&&ib(e)};var ab=ue.__r;ue.__r=function(e){ab&&ab(e),e.__c};var ob=ue.diffed;ue.diffed=function(e){ob&&ob(e);var t=e.props,r=e.__e;r!=null&&e.type==="textarea"&&"value"in t&&t.value!==r.value&&(r.value=t.value==null?"":t.value)};function iD(e){let t=null,r;return(...n)=>(r=n,t||(t=Promise.resolve().then(()=>(t=null,e(...r)))),t)}var ec;const Bu=class Bu extends Y2{constructor(){super(...arguments);D(this,ec);O(this,"isTargetDOMEl");O(this,"el");O(this,"parent");O(this,"title")}getTargetPlugin(r){let n;if(typeof(r==null?void 0:r.addTarget)=="function")n=r,n instanceof Bu||console.warn(new Error("The provided plugin is not an instance of UIPlugin. This is an indication of a bug with the way Uppy is bundled.",{cause:{targetPlugin:n,UIPlugin:Bu}}));else if(typeof r=="function"){const s=r;this.uppy.iteratePlugins(a=>{a instanceof s&&(n=a)})}return n}mount(r,n){const s=n.id,a=IO(r);if(a){this.isTargetDOMEl=!0;const c=document.createElement("div");return c.classList.add("uppy-Root"),$(this,ec,iD(d=>{this.uppy.getPlugin(this.id)&&(nb(this.render(d,c),c),this.afterUpdate())})),this.uppy.log(`Installing ${s} to a DOM element '${r}'`),this.opts.replaceTargetContent&&(a.innerHTML=""),nb(this.render(this.uppy.getState(),c),c),this.el=c,a.appendChild(c),c.dir=this.opts.direction||J2(c)||"ltr",this.onMount(),this.el}const o=this.getTargetPlugin(r);if(o)return this.uppy.log(`Installing ${s} to ${o.id}`),this.parent=o,this.el=o.addTarget(n),this.onMount(),this.el;this.uppy.log(`Not installing ${s}`);let l=`Invalid target option given to ${s}.`;throw typeof r=="function"?l+=" The given target is not a Plugin class. Please check that you're not specifying a React Component instead of a plugin. If you are using @uppy/* packages directly, make sure you have only 1 version of @uppy/core installed: run `npm ls @uppy/core` on the command line and verify that all the versions match and are deduped correctly.":l+="If you meant to target an HTML element, please make sure that the element exists. Check that the <script> tag initializing Uppy is right before the closing </body> tag at the end of the page. (see https://github.com/transloadit/uppy/issues/1042)\n\nIf you meant to target a plugin, please confirm that your `import` statements or `require` calls are correct.",new Error(l)}render(r,n){throw new Error("Extend the render method to add your plugin to a DOM element")}update(r){var n;this.el!=null&&((n=N(this,ec))==null||n.call(this,r))}unmount(){var r;this.isTargetDOMEl&&((r=this.el)==null||r.remove()),this.onUnmount()}onMount(){}onUnmount(){}};ec=new WeakMap;let mo=Bu;const aD="@uppy/store-default",oD="The default simple object-based store for Uppy.",lD="4.3.2",cD="MIT",dD="lib/index.js",uD="module",hD={build:"tsc --build tsconfig.build.json",typecheck:"tsc --build",test:"vitest run --environment=jsdom --silent='passed-only'"},fD=["file uploader","uppy","uppy-store"],pD="https://uppy.io",mD={url:"https://github.com/transloadit/uppy/issues"},gD={jsdom:"^26.1.0",typescript:"^5.8.3",vitest:"^3.2.4"},yD={type:"git",url:"git+https://github.com/transloadit/uppy.git"},vD=["src","lib","dist","CHANGELOG.md"],xD={name:aD,description:oD,version:lD,license:cD,main:dD,type:uD,scripts:hD,keywords:fD,homepage:pD,bugs:mD,devDependencies:gD,repository:yD,files:vD};var Ia,Vu,vC;class yC{constructor(){D(this,Vu);O(this,"state",{});D(this,Ia,new Set)}getState(){return this.state}setState(t){const r={...this.state},n={...this.state,...t};this.state=n,U(this,Vu,vC).call(this,r,n,t)}subscribe(t){return N(this,Ia).add(t),()=>{N(this,Ia).delete(t)}}}Ia=new WeakMap,Vu=new WeakSet,vC=function(...t){N(this,Ia).forEach(r=>{r(...t)})},O(yC,"VERSION",xD.version);function xC(e){const t=e.lastIndexOf(".");return t===-1||t===e.length-1?{name:e,extension:void 0}:{name:e.slice(0,t),extension:e.slice(t+1)}}const lb={__proto__:null,md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",webp:"image/webp",gif:"image/gif",heic:"image/heic",heif:"image/heif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",dicom:"application/dicom",doc:"application/msword",msg:"application/vnd.ms-outlook",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel",txt:"text/plain",text:"text/plain",conf:"text/plain",log:"text/plain",pdf:"application/pdf",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",tar:"application/x-tar",gz:"application/gzip",dmg:"application/x-apple-diskimage"};function bC(e){var r;if(e.type)return e.type;const t=e.name?(r=xC(e.name).extension)==null?void 0:r.toLowerCase():null;return t&&t in lb?lb[t]:"application/octet-stream"}function bD(e){return e.charCodeAt(0).toString(32)}function cb(e){let t="";return e.replace(/[^A-Z0-9]/gi,r=>(t+=`-${bD(r)}`,"/"))+t}function wD(e,t){let r=t||"uppy";return typeof e.name=="string"&&(r+=`-${cb(e.name.toLowerCase())}`),e.type!==void 0&&(r+=`-${e.type}`),e.meta&&typeof e.meta.relativePath=="string"&&(r+=`-${cb(e.meta.relativePath.toLowerCase())}`),e.data.size!==void 0&&(r+=`-${e.data.size}`),e.data.lastModified!==void 0&&(r+=`-${e.data.lastModified}`),r}function ND(e){return!e.isRemote||!e.remote?!1:new Set(["box","dropbox","drive","facebook","unsplash"]).has(e.remote.provider)}function jD(e,t){if(ND(e))return e.id;const r=bC(e);return wD({...e,type:r},t)}function SD(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var mv=SD,kD=typeof Wc=="object"&&Wc&&Wc.Object===Object&&Wc,CD=kD,PD=CD,ED=typeof self=="object"&&self&&self.Object===Object&&self,_D=PD||ED||Function("return this")(),wC=_D,TD=wC,RD=function(){return TD.Date.now()},FD=RD,MD=/\s/;function AD(e){for(var t=e.length;t--&&MD.test(e.charAt(t)););return t}var ID=AD,OD=ID,DD=/^\s+/;function LD(e){return e&&e.slice(0,OD(e)+1).replace(DD,"")}var $D=LD,UD=wC,zD=UD.Symbol,NC=zD,db=NC,jC=Object.prototype,BD=jC.hasOwnProperty,VD=jC.toString,Lo=db?db.toStringTag:void 0;function HD(e){var t=BD.call(e,Lo),r=e[Lo];try{e[Lo]=void 0;var n=!0}catch{}var s=VD.call(e);return n&&(t?e[Lo]=r:delete e[Lo]),s}var WD=HD,qD=Object.prototype,KD=qD.toString;function GD(e){return KD.call(e)}var QD=GD,ub=NC,YD=WD,XD=QD,JD="[object Null]",ZD="[object Undefined]",hb=ub?ub.toStringTag:void 0;function eL(e){return e==null?e===void 0?ZD:JD:hb&&hb in Object(e)?YD(e):XD(e)}var tL=eL;function rL(e){return e!=null&&typeof e=="object"}var nL=rL,sL=tL,iL=nL,aL="[object Symbol]";function oL(e){return typeof e=="symbol"||iL(e)&&sL(e)==aL}var lL=oL,cL=$D,fb=mv,dL=lL,pb=NaN,uL=/^[-+]0x[0-9a-f]+$/i,hL=/^0b[01]+$/i,fL=/^0o[0-7]+$/i,pL=parseInt;function mL(e){if(typeof e=="number")return e;if(dL(e))return pb;if(fb(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=fb(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=cL(e);var r=hL.test(e);return r||fL.test(e)?pL(e.slice(2),r?2:8):uL.test(e)?pb:+e}var gL=mL,yL=mv,Yf=FD,mb=gL,vL="Expected a function",xL=Math.max,bL=Math.min;function wL(e,t,r){var n,s,a,o,l,c,d=0,u=!1,h=!1,p=!0;if(typeof e!="function")throw new TypeError(vL);t=mb(t)||0,yL(r)&&(u=!!r.leading,h="maxWait"in r,a=h?xL(mb(r.maxWait)||0,t):a,p="trailing"in r?!!r.trailing:p);function m(C){var S=n,_=s;return n=s=void 0,d=C,o=e.apply(_,S),o}function x(C){return d=C,l=setTimeout(v,t),u?m(C):o}function y(C){var S=C-c,_=C-d,P=t-S;return h?bL(P,a-_):P}function w(C){var S=C-c,_=C-d;return c===void 0||S>=t||S<0||h&&_>=a}function v(){var C=Yf();if(w(C))return g(C);l=setTimeout(v,y(C))}function g(C){return l=void 0,p&&n?m(C):(n=s=void 0,o)}function b(){l!==void 0&&clearTimeout(l),d=0,n=c=s=l=void 0}function j(){return l===void 0?o:g(Yf())}function k(){var C=Yf(),S=w(C);if(n=arguments,s=this,c=C,S){if(l===void 0)return x(c);if(h)return clearTimeout(l),l=setTimeout(v,t),m(c)}return l===void 0&&(l=setTimeout(v,t)),o}return k.cancel=b,k.flush=j,k}var SC=wL;const NL=Gn(SC);var jL=SC,SL=mv,kL="Expected a function";function CL(e,t,r){var n=!0,s=!0;if(typeof e!="function")throw new TypeError(kL);return SL(r)&&(n="leading"in r?!!r.leading:n,s="trailing"in r?!!r.trailing:s),jL(e,t,{leading:n,maxWait:t,trailing:s})}var PL=CL;const EL=Gn(PL);var _L=function(){var t={},r=t._fns={};t.emit=function(o,l,c,d,u,h,p){var m=n(o);m.length&&s(o,m,[l,c,d,u,h,p])},t.on=function(o,l){r[o]||(r[o]=[]),r[o].push(l)},t.once=function(o,l){function c(){l.apply(this,arguments),t.off(o,c)}this.on(o,c)},t.off=function(o,l){var c=[];if(o&&l){var d=this._fns[o],u=0,h=d?d.length:0;for(u;u<h;u++)d[u]!==l&&c.push(d[u])}c.length?this._fns[o]=c:delete this._fns[o]};function n(a){var o=r[a]?r[a]:[],l=a.indexOf(":"),c=l===-1?[a]:[a.substring(0,l),a.substring(l+1)],d=Object.keys(r),u=0,h=d.length;for(u;u<h;u++){var p=d[u];if(p==="*"&&(o=o.concat(r[p])),c.length===2&&c[0]===p){o=o.concat(r[p]);break}}return o}function s(a,o,l){var c=0,d=o.length;for(c;c<d&&o[c];c++)o[c].event=a,o[c].apply(o[c],l)}return t};const TL=Gn(_L);let RL="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",FL=(e=21)=>{let t="",r=e|0;for(;r--;)t+=RL[Math.random()*64|0];return t};const ML="@uppy/core",AL="Core module for the extensible JavaScript file upload widget with support for drag&drop, resumable uploads, previews, restrictions, file processing/encoding, remote providers like Instagram, Dropbox, Google Drive, S3 and more :dog:",IL="4.5.2",OL="MIT",DL="lib/index.js",LL="dist/style.min.css",$L="module",UL=["*.css"],zL={build:"tsc --build tsconfig.build.json","build:css":"sass --load-path=../../ src/style.scss dist/style.css && postcss dist/style.css -u cssnano -o dist/style.min.css",typecheck:"tsc --build",test:"vitest run --environment=jsdom --silent='passed-only'"},BL=["file uploader","uppy","uppy-plugin"],VL="https://uppy.io",HL={url:"https://github.com/transloadit/uppy/issues"},WL={type:"git",url:"git+https://github.com/transloadit/uppy.git"},qL=["src","lib","dist","CHANGELOG.md"],KL={"@transloadit/prettier-bytes":"^0.3.4","@uppy/store-default":"^4.3.2","@uppy/utils":"^6.2.2",lodash:"^4.17.21","mime-match":"^1.0.2","namespace-emitter":"^2.0.1",nanoid:"^5.0.9",preact:"^10.5.13"},GL={"@types/deep-freeze":"^0",cssnano:"^7.0.7","deep-freeze":"^0.0.1",jsdom:"^26.1.0",postcss:"^8.5.6","postcss-cli":"^11.0.1",sass:"^1.89.2",typescript:"^5.8.3",vitest:"^3.2.4"},QL={name:ML,description:AL,version:IL,license:OL,main:DL,style:LL,type:$L,sideEffects:UL,scripts:zL,keywords:BL,homepage:VL,bugs:HL,repository:WL,files:qL,dependencies:KL,devDependencies:GL};function YL(e,t){return t.name?t.name:e.split("/")[0]==="image"?`${e.split("/")[0]}.${e.split("/")[1]}`:"noname"}const XL={strings:{addBulkFilesFailed:{0:"Failed to add %{smart_count} file due to an internal error",1:"Failed to add %{smart_count} files due to internal errors"},youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},aggregateExceedsSize:"You selected %{size} of files, but maximum allowed size is %{sizeAllowed}",exceedsSize:"%{file} exceeds maximum allowed size of %{size}",missingRequiredMetaField:"Missing required meta fields",missingRequiredMetaFieldOnFile:"Missing required meta fields in %{fileName}",inferiorSize:"This file is smaller than the allowed size of %{size}",youCanOnlyUploadFileTypes:"You can only upload: %{types}",noMoreFilesAllowed:"Cannot add more files",noDuplicates:"Cannot add the duplicate file '%{fileName}', it already exists",companionError:"Connection with Companion failed",authAborted:"Authentication aborted",companionUnauthorizeHint:"To unauthorize to your %{provider} account, please go to %{url}",failedToUpload:"Failed to upload %{file}",noInternetConnection:"No Internet connection",connectedToInternet:"Connected to the Internet",noFilesFound:"You have no files or folders here",noSearchResults:"Unfortunately, there are no results for this search",selectX:{0:"Select %{smart_count}",1:"Select %{smart_count}"},allFilesFromFolderNamed:"All files from folder %{name}",openFolderNamed:"Open folder %{name}",cancel:"Cancel",logOut:"Log out",logIn:"Log in",pickFiles:"Pick files",pickPhotos:"Pick photos",filter:"Filter",resetFilter:"Reset filter",loading:"Loading...",loadedXFiles:"Loaded %{numFiles} files",authenticateWithTitle:"Please authenticate with %{pluginName} to select files",authenticateWith:"Connect to %{pluginName}",signInWithGoogle:"Sign in with Google",searchImages:"Search for images",enterTextToSearch:"Enter text to search for images",search:"Search",resetSearch:"Reset search",emptyFolderAdded:"No files were added from empty folder",addedNumFiles:"Added %{numFiles} file(s)",folderAlreadyAdded:'The folder "%{folder}" was already added',folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"},additionalRestrictionsFailed:"%{count} additional restrictions were not fulfilled",unnamed:"Unnamed",pleaseWait:"Please wait"}};var JL=function(t){if(typeof t!="number"||Number.isNaN(t))throw new TypeError(`Expected a number, got ${typeof t}`);const r=t<0;let n=Math.abs(t);if(r&&(n=-n),n===0)return"0 B";const s=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],a=Math.min(Math.floor(Math.log(n)/Math.log(1024)),s.length-1),o=Number(n/1024**a),l=s[a];return`${o>=10||o%1===0?Math.round(o):o.toFixed(1)} ${l}`};const ii=Gn(JL);function kC(e,t){this.text=e=e||"",this.hasWild=~e.indexOf("*"),this.separator=t,this.parts=e.split(t)}kC.prototype.match=function(e){var t=!0,r=this.parts,n,s=r.length,a;if(typeof e=="string"||e instanceof String)if(!this.hasWild&&this.text!=e)t=!1;else{for(a=(e||"").split(this.separator),n=0;t&&n<s;n++)r[n]!=="*"&&(n<a.length?t=r[n]===a[n]:t=!1);t=t&&a}else if(typeof e.splice=="function")for(t=[],n=e.length;n--;)this.match(e[n])&&(t[t.length]=e[n]);else if(typeof e=="object"){t={};for(var o in e)this.match(o)&&(t[o]=e[o])}return t};var ZL=function(e,t,r){var n=new kC(e,r||/[\/\.]/);return typeof t<"u"?n.match(t):n},e$=ZL,t$=/[\/\+\.]/,r$=function(e,t){function r(n){var s=e$(n,e,t$);return s&&s.length>=2}return t?r(t.split(";")[0]):r};const n$=Gn(r$),s$={maxFileSize:null,minFileSize:null,maxTotalFileSize:null,maxNumberOfFiles:null,minNumberOfFiles:null,allowedFileTypes:null,requiredMetaFields:[]};class kr extends Error{constructor(r,n){super(r);O(this,"isUserFacing");O(this,"file");O(this,"isRestriction",!0);this.isUserFacing=(n==null?void 0:n.isUserFacing)??!0,n!=null&&n.file&&(this.file=n.file)}}class i${constructor(t,r){O(this,"getI18n");O(this,"getOpts");this.getI18n=r,this.getOpts=()=>{var s;const n=t();if(((s=n.restrictions)==null?void 0:s.allowedFileTypes)!=null&&!Array.isArray(n.restrictions.allowedFileTypes))throw new TypeError("`restrictions.allowedFileTypes` must be an array");return n}}validateAggregateRestrictions(t,r){const{maxTotalFileSize:n,maxNumberOfFiles:s}=this.getOpts().restrictions;if(s&&t.filter(o=>!o.isGhost).length+r.length>s)throw new kr(`${this.getI18n()("youCanOnlyUploadX",{smart_count:s})}`);if(n){const a=[...t,...r].reduce((o,l)=>o+(l.size??0),0);if(a>n)throw new kr(this.getI18n()("aggregateExceedsSize",{sizeAllowed:ii(n),size:ii(a)}))}}validateSingleFile(t){const{maxFileSize:r,minFileSize:n,allowedFileTypes:s}=this.getOpts().restrictions;if(s&&!s.some(o=>o.includes("/")?t.type?n$(t.type.replace(/;.*?$/,""),o):!1:o[0]==="."&&t.extension?t.extension.toLowerCase()===o.slice(1).toLowerCase():!1)){const o=s.join(", ");throw new kr(this.getI18n()("youCanOnlyUploadFileTypes",{types:o}),{file:t})}if(r&&t.size!=null&&t.size>r)throw new kr(this.getI18n()("exceedsSize",{size:ii(r),file:t.name??this.getI18n()("unnamed")}),{file:t});if(n&&t.size!=null&&t.size<n)throw new kr(this.getI18n()("inferiorSize",{size:ii(n)}),{file:t})}validate(t,r){r.forEach(n=>{this.validateSingleFile(n)}),this.validateAggregateRestrictions(t,r)}validateMinNumberOfFiles(t){const{minNumberOfFiles:r}=this.getOpts().restrictions;if(r&&Object.keys(t).length<r)throw new kr(this.getI18n()("youHaveToAtLeastSelectX",{smart_count:r}))}getMissingRequiredMetaFields(t){const r=new kr(this.getI18n()("missingRequiredMetaFieldOnFile",{fileName:t.name??this.getI18n()("unnamed")})),{requiredMetaFields:n}=this.getOpts().restrictions,s=[];for(const a of n)(!Object.hasOwn(t.meta,a)||t.meta[a]==="")&&s.push(a);return{missingFields:s,error:r}}}function a$(e){if(e==null&&typeof navigator<"u"&&(e=navigator.userAgent),!e)return!0;const t=/Edge\/(\d+\.\d+)/.exec(e);if(!t)return!0;const n=t[1].split(".",2),s=parseInt(n[0],10),a=parseInt(n[1],10);return s<15||s===15&&a<15063||s>18||s===18&&a>=18218}const bd={totalProgress:0,allowNewUpload:!0,error:null,recoveredState:null};var vr,xr,tc,fi,Oa,Da,pi,ee,ei,Vm,CC,Hm,PC,Wm,qm,Km,Gm,Hu,Qm,mi,EC,_C,vs,rc,Xo,TC,Zd,Jo;const Wu=class Wu{constructor(t){D(this,ee);D(this,vr,Object.create(null));D(this,xr);D(this,tc);D(this,fi,TL());D(this,Oa,new Set);D(this,Da,new Set);D(this,pi,new Set);O(this,"defaultLocale");O(this,"locale");O(this,"opts");O(this,"store");O(this,"i18n");O(this,"i18nArray");O(this,"scheduledAutoProceed",null);O(this,"wasOffline",!1);D(this,Hu,(t,r)=>{const n=t?this.getFile(t.id):void 0;if(t==null||!n){this.log(`Not setting progress for a file that has been removed: ${t==null?void 0:t.id}`);return}if(n.progress.percentage===100){this.log(`Not setting progress for a file that has been already uploaded: ${t.id}`);return}const s={bytesTotal:r.bytesTotal,percentage:r.bytesTotal!=null&&Number.isFinite(r.bytesTotal)&&r.bytesTotal>0?Math.round(r.bytesUploaded/r.bytesTotal*100):void 0};n.progress.uploadStarted!=null?this.setFileState(t.id,{progress:{...n.progress,...s,bytesUploaded:r.bytesUploaded}}):this.setFileState(t.id,{progress:{...n.progress,...s}}),N(this,mi).call(this)});D(this,mi,EL(()=>U(this,ee,Qm).call(this),500,{leading:!0,trailing:!0}));D(this,vs,this.updateOnlineStatus.bind(this));D(this,rc,new Map);this.defaultLocale=XL;const r={id:"uppy",autoProceed:!1,allowMultipleUploadBatches:!0,debug:!1,restrictions:s$,meta:{},onBeforeFileAdded:(s,a)=>!Object.hasOwn(a,s.id),onBeforeUpload:s=>s,store:new yC,logger:MO,infoTimeout:5e3},n={...r,...t};this.opts={...n,restrictions:{...r.restrictions,...t==null?void 0:t.restrictions}},t!=null&&t.logger&&t.debug?this.log("You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.","warning"):t!=null&&t.debug&&(this.opts.logger=AO),this.log(`Using Core v${Wu.VERSION}`),this.i18nInit(),this.store=this.opts.store,this.setState({...bd,plugins:{},files:{},currentUploads:{},capabilities:{uploadProgress:a$(),individualCancellation:!0,resumableUploads:!1},meta:{...this.opts.meta},info:[]}),$(this,xr,new i$(()=>this.opts,()=>this.i18n)),$(this,tc,this.store.subscribe((s,a,o)=>{this.emit("state-update",s,a,o),this.updateAll(a)})),this.opts.debug&&typeof window<"u"&&(window[this.opts.id]=this),U(this,ee,_C).call(this)}emit(t,...r){N(this,fi).emit(t,...r)}on(t,r){return N(this,fi).on(t,r),this}once(t,r){return N(this,fi).once(t,r),this}off(t,r){return N(this,fi).off(t,r),this}updateAll(t){this.iteratePlugins(r=>{r.update(t)})}setState(t){this.store.setState(t)}getState(){return this.store.getState()}patchFilesState(t){const r=this.getState().files;this.setState({files:{...r,...Object.fromEntries(Object.entries(t).map(([n,s])=>[n,{...r[n],...s}]))}})}setFileState(t,r){if(!this.getState().files[t])throw new Error(`Cant set state for ${t} (the file could have been removed)`);this.patchFilesState({[t]:r})}i18nInit(){const t=n=>this.log(`Missing i18n string: ${n}`,"error"),r=new Q2([this.defaultLocale,this.opts.locale],{onMissingKey:t});this.i18n=r.translate.bind(r),this.i18nArray=r.translateArray.bind(r),this.locale=r.locale}setOptions(t){this.opts={...this.opts,...t,restrictions:{...this.opts.restrictions,...t==null?void 0:t.restrictions}},t.meta&&this.setMeta(t.meta),this.i18nInit(),t.locale&&this.iteratePlugins(r=>{r.setOptions(t)}),this.setState(void 0)}resetProgress(){const t={percentage:0,bytesUploaded:!1,uploadComplete:!1,uploadStarted:null},r={...this.getState().files},n=Object.create(null);Object.keys(r).forEach(s=>{n[s]={...r[s],progress:{...r[s].progress,...t},tus:void 0,transloadit:void 0}}),this.setState({files:n,...bd})}clear(){const{capabilities:t,currentUploads:r}=this.getState();if(Object.keys(r).length>0&&!t.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");this.setState({...bd,files:{}})}addPreProcessor(t){N(this,Oa).add(t)}removePreProcessor(t){return N(this,Oa).delete(t)}addPostProcessor(t){N(this,pi).add(t)}removePostProcessor(t){return N(this,pi).delete(t)}addUploader(t){N(this,Da).add(t)}removeUploader(t){return N(this,Da).delete(t)}setMeta(t){const r={...this.getState().meta,...t},n={...this.getState().files};Object.keys(n).forEach(s=>{n[s]={...n[s],meta:{...n[s].meta,...t}}}),this.log("Adding metadata:"),this.log(t),this.setState({meta:r,files:n})}setFileMeta(t,r){const n={...this.getState().files};if(!n[t]){this.log(`Was trying to set metadata for a file that has been removed: ${t}`);return}const s={...n[t].meta,...r};n[t]={...n[t],meta:s},this.setState({files:n})}getFile(t){return this.getState().files[t]}getFiles(){const{files:t}=this.getState();return Object.values(t)}getFilesByIds(t){return t.map(r=>this.getFile(r))}getObjectOfFilesPerState(){const{files:t,totalProgress:r,error:n}=this.getState(),s=Object.values(t),a=[],o=[],l=[],c=[],d=[],u=[],h=[],p=[],m=[];for(const x of s){const{progress:y}=x;!y.uploadComplete&&y.uploadStarted&&(a.push(x),x.isPaused||p.push(x)),y.uploadStarted||o.push(x),(y.uploadStarted||y.preprocess||y.postprocess)&&l.push(x),y.uploadStarted&&c.push(x),x.isPaused&&d.push(x),y.uploadComplete&&u.push(x),x.error&&h.push(x),(y.preprocess||y.postprocess)&&m.push(x)}return{newFiles:o,startedFiles:l,uploadStartedFiles:c,pausedFiles:d,completeFiles:u,erroredFiles:h,inProgressFiles:a,inProgressNotPausedFiles:p,processingFiles:m,isUploadStarted:c.length>0,isAllComplete:r===100&&u.length===s.length&&m.length===0,isAllErrored:!!n&&h.length===s.length,isAllPaused:a.length!==0&&d.length===a.length,isUploadInProgress:a.length>0,isSomeGhost:s.some(x=>x.isGhost)}}validateRestrictions(t,r=this.getFiles()){try{N(this,xr).validate(r,[t])}catch(n){return n}return null}validateSingleFile(t){try{N(this,xr).validateSingleFile(t)}catch(r){return r.message}return null}validateAggregateRestrictions(t){const r=this.getFiles();try{N(this,xr).validateAggregateRestrictions(r,t)}catch(n){return n.message}return null}checkIfFileAlreadyExists(t){const{files:r}=this.getState();return!!(r[t]&&!r[t].isGhost)}addFile(t){U(this,ee,Hm).call(this,t);const{nextFilesState:r,validFilesToAdd:n,errors:s}=U(this,ee,qm).call(this,[t]),a=s.filter(l=>l.isRestriction);if(U(this,ee,ei).call(this,a),s.length>0)throw s[0];this.setState({files:r});const[o]=n;return this.emit("file-added",o),this.emit("files-added",n),this.log(`Added file: ${o.name}, ${o.id}, mime type: ${o.type}`),U(this,ee,Wm).call(this),o.id}addFiles(t){U(this,ee,Hm).call(this);const{nextFilesState:r,validFilesToAdd:n,errors:s}=U(this,ee,qm).call(this,t),a=s.filter(l=>l.isRestriction);U(this,ee,ei).call(this,a);const o=s.filter(l=>!l.isRestriction);if(o.length>0){let l=`Multiple errors occurred while adding files:
`;if(o.forEach(c=>{l+=`
 * ${c.message}`}),this.info({message:this.i18n("addBulkFilesFailed",{smart_count:o.length}),details:l},"error",this.opts.infoTimeout),typeof AggregateError=="function")throw new AggregateError(o,l);{const c=new Error(l);throw c.errors=o,c}}this.setState({files:r}),n.forEach(l=>{this.emit("file-added",l)}),this.emit("files-added",n),n.length>5?this.log(`Added batch of ${n.length} files`):Object.values(n).forEach(l=>{this.log(`Added file: ${l.name}
 id: ${l.id}
 type: ${l.type}`)}),n.length>0&&U(this,ee,Wm).call(this)}removeFiles(t){const{files:r,currentUploads:n}=this.getState(),s={...r},a={...n},o=Object.create(null);t.forEach(u=>{r[u]&&(o[u]=r[u],delete s[u])});function l(u){return o[u]===void 0}Object.keys(a).forEach(u=>{const h=n[u].fileIDs.filter(l);if(h.length===0){delete a[u];return}const{capabilities:p}=this.getState();if(h.length!==n[u].fileIDs.length&&!p.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");a[u]={...n[u],fileIDs:h}});const c={currentUploads:a,files:s};Object.keys(s).length===0&&(c.allowNewUpload=!0,c.error=null,c.recoveredState=null),this.setState(c),N(this,mi).call(this);const d=Object.keys(o);d.forEach(u=>{this.emit("file-removed",o[u])}),d.length>5?this.log(`Removed ${d.length} files`):this.log(`Removed files: ${d.join(", ")}`)}removeFile(t){this.removeFiles([t])}pauseResume(t){if(!this.getState().capabilities.resumableUploads||this.getFile(t).progress.uploadComplete)return;const r=this.getFile(t),s=!(r.isPaused||!1);return this.setFileState(t,{isPaused:s}),this.emit("upload-pause",r,s),s}pauseAll(){const t={...this.getState().files};Object.keys(t).filter(n=>!t[n].progress.uploadComplete&&t[n].progress.uploadStarted).forEach(n=>{const s={...t[n],isPaused:!0};t[n]=s}),this.setState({files:t}),this.emit("pause-all")}resumeAll(){const t={...this.getState().files};Object.keys(t).filter(n=>!t[n].progress.uploadComplete&&t[n].progress.uploadStarted).forEach(n=>{const s={...t[n],isPaused:!1,error:null};t[n]=s}),this.setState({files:t}),this.emit("resume-all")}async retryAll(){const t=await U(this,ee,Gm).call(this);return this.emit("complete",t),t}cancelAll(){this.emit("cancel-all");const{files:t}=this.getState(),r=Object.keys(t);r.length&&this.removeFiles(r),this.setState(bd)}retryUpload(t){this.setFileState(t,{error:null,isPaused:!1}),this.emit("upload-retry",this.getFile(t));const r=U(this,ee,Xo).call(this,[t],{forceAllowNewUpload:!0});return U(this,ee,Jo).call(this,r)}logout(){this.iteratePlugins(t=>{var r,n;(n=(r=t.provider)==null?void 0:r.logout)==null||n.call(r)})}[Symbol.for("uppy test: updateTotalProgress")](){return U(this,ee,Qm).call(this)}updateOnlineStatus(){window.navigator.onLine??!0?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info(this.i18n("connectedToInternet"),"success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info(this.i18n("noInternetConnection"),"error",0),this.wasOffline=!0)}getID(){return this.opts.id}use(t,...r){if(typeof t!="function"){const o=`Expected a plugin class, but got ${t===null?"null":typeof t}. Please verify that the plugin was imported and spelled correctly.`;throw new TypeError(o)}const n=new t(this,...r),s=n.id;if(!s)throw new Error("Your plugin must have an id");if(!n.type)throw new Error("Your plugin must have a type");const a=this.getPlugin(s);if(a){const o=`Already found a plugin named '${a.id}'. Tried to use: '${s}'.
Uppy plugins must have unique \`id\` options.`;throw new Error(o)}return t.VERSION&&this.log(`Using ${s} v${t.VERSION}`),n.type in N(this,vr)?N(this,vr)[n.type].push(n):N(this,vr)[n.type]=[n],n.install(),this.emit("plugin-added",n),this}getPlugin(t){for(const r of Object.values(N(this,vr))){const n=r.find(s=>s.id===t);if(n!=null)return n}}[Symbol.for("uppy test: getPlugins")](t){return N(this,vr)[t]}iteratePlugins(t){Object.values(N(this,vr)).flat(1).forEach(t)}removePlugin(t){this.log(`Removing plugin ${t.id}`),this.emit("plugin-remove",t),t.uninstall&&t.uninstall();const r=N(this,vr)[t.type],n=r.findIndex(o=>o.id===t.id);n!==-1&&r.splice(n,1);const a={plugins:{...this.getState().plugins,[t.id]:void 0}};this.setState(a)}destroy(){this.log(`Closing Uppy instance ${this.opts.id}: removing all files and uninstalling plugins`),this.cancelAll(),N(this,tc).call(this),this.iteratePlugins(t=>{this.removePlugin(t)}),typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("online",N(this,vs)),window.removeEventListener("offline",N(this,vs)))}hideInfo(){const{info:t}=this.getState();this.setState({info:t.slice(1)}),this.emit("info-hidden")}info(t,r="info",n=3e3){const s=typeof t=="object";this.setState({info:[...this.getState().info,{type:r,message:s?t.message:t,details:s?t.details:null}]}),setTimeout(()=>this.hideInfo(),n),this.emit("info-visible")}log(t,r){const{logger:n}=this.opts;switch(r){case"error":n.error(t);break;case"warning":n.warn(t);break;default:n.debug(t);break}}registerRequestClient(t,r){N(this,rc).set(t,r)}getRequestClientForFile(t){if(!t.remote)throw new Error(`Tried to get RequestClient for a non-remote file ${t.id}`);const r=N(this,rc).get(t.remote.requestClientId);if(r==null)throw new Error(`requestClientId "${t.remote.requestClientId}" not registered for file "${t.id}"`);return r}restore(t){return this.log(`Core: attempting to restore upload "${t}"`),this.getState().currentUploads[t]?U(this,ee,Jo).call(this,t):(U(this,ee,Zd).call(this,t),Promise.reject(new Error("Nonexistent upload")))}[Symbol.for("uppy test: createUpload")](...t){return U(this,ee,Xo).call(this,...t)}addResultData(t,r){if(!U(this,ee,TC).call(this,t)){this.log(`Not setting result for an upload that has been removed: ${t}`);return}const{currentUploads:n}=this.getState(),s={...n[t],result:{...n[t].result,...r}};this.setState({currentUploads:{...n,[t]:s}})}async upload(){var s;(s=N(this,vr).uploader)!=null&&s.length||this.log("No uploader type plugins are used","warning");let{files:t}=this.getState();if(U(this,ee,Km).call(this).length>0){const a=await U(this,ee,Gm).call(this);if(!(this.getFiles().filter(l=>l.progress.uploadStarted==null).length>0))return this.emit("complete",a),a;({files:t}=this.getState())}const n=this.opts.onBeforeUpload(t);return n===!1?Promise.reject(new Error("Not starting the upload because onBeforeUpload returned false")):(n&&typeof n=="object"&&(t=n,this.setState({files:t})),Promise.resolve().then(()=>N(this,xr).validateMinNumberOfFiles(t)).catch(a=>{throw U(this,ee,ei).call(this,[a]),a}).then(()=>{if(!U(this,ee,CC).call(this,t))throw new kr(this.i18n("missingRequiredMetaField"))}).catch(a=>{throw a}).then(async()=>{const{currentUploads:a}=this.getState(),o=Object.values(a).flatMap(u=>u.fileIDs),l=[];Object.keys(t).forEach(u=>{const h=this.getFile(u);!h.progress.uploadStarted&&o.indexOf(u)===-1&&l.push(h.id)});const c=U(this,ee,Xo).call(this,l),d=await U(this,ee,Jo).call(this,c);return this.emit("complete",d),d}).catch(a=>{throw this.emit("error",a),this.log(a,"error"),a}))}};vr=new WeakMap,xr=new WeakMap,tc=new WeakMap,fi=new WeakMap,Oa=new WeakMap,Da=new WeakMap,pi=new WeakMap,ee=new WeakSet,ei=function(t){for(const o of t)o.isRestriction?this.emit("restriction-failed",o.file,o):this.emit("error",o,o.file),this.log(o,"warning");const r=t.filter(o=>o.isUserFacing),n=4,s=r.slice(0,n),a=r.slice(n);s.forEach(({message:o,details:l=""})=>{this.info({message:o,details:l},"error",this.opts.infoTimeout)}),a.length>0&&this.info({message:this.i18n("additionalRestrictionsFailed",{count:a.length})})},Vm=function(t){const{missingFields:r,error:n}=N(this,xr).getMissingRequiredMetaFields(t);return r.length>0?(this.setFileState(t.id,{missingRequiredMetaFields:r}),this.log(n.message),this.emit("restriction-failed",t,n),!1):(r.length===0&&t.missingRequiredMetaFields&&this.setFileState(t.id,{missingRequiredMetaFields:[]}),!0)},CC=function(t){let r=!0;for(const n of Object.values(t))U(this,ee,Vm).call(this,n)||(r=!1);return r},Hm=function(t){const{allowNewUpload:r}=this.getState();if(r===!1){const n=new kr(this.i18n("noMoreFilesAllowed"),{file:t});throw U(this,ee,ei).call(this,[n]),n}},PC=function(t){const r=t instanceof File?{name:t.name,type:t.type,size:t.size,data:t}:t,n=bC(r),s=YL(n,r),a=xC(s).extension,o=jD(r,this.getID()),l=r.meta||{};l.name=s,l.type=n;const c=Number.isFinite(r.data.size)?r.data.size:null;return{source:r.source||"",id:o,name:s,extension:a||"",meta:{...this.getState().meta,...l},type:n,data:r.data,progress:{percentage:0,bytesUploaded:!1,bytesTotal:c,uploadComplete:!1,uploadStarted:null},size:c,isGhost:!1,isRemote:r.isRemote||!1,remote:r.remote,preview:r.preview}},Wm=function(){this.opts.autoProceed&&!this.scheduledAutoProceed&&(this.scheduledAutoProceed=setTimeout(()=>{this.scheduledAutoProceed=null,this.upload().catch(t=>{t.isRestriction||this.log(t.stack||t.message||t)})},4))},qm=function(t){var o;let{files:r}=this.getState(),n={...r};const s=[],a=[];for(const l of t)try{let c=U(this,ee,PC).call(this,l);const d=(o=r[c.id])==null?void 0:o.isGhost;d&&(c={...r[c.id],isGhost:!1,data:l.data},this.log(`Replaced the blob in the restored ghost file: ${c.name}, ${c.id}`));const u=this.opts.onBeforeFileAdded(c,n);if(r=this.getState().files,n={...r,...n},!u&&this.checkIfFileAlreadyExists(c.id))throw new kr(this.i18n("noDuplicates",{fileName:c.name??this.i18n("unnamed")}),{file:l});if(u===!1&&!d)throw new kr("Cannot add the file because onBeforeFileAdded returned false.",{isUserFacing:!1,file:l});typeof u=="object"&&u!==null&&(c=u),N(this,xr).validateSingleFile(c),n[c.id]=c,s.push(c)}catch(c){a.push(c)}try{N(this,xr).validateAggregateRestrictions(Object.values(r),s)}catch(l){return a.push(l),{nextFilesState:r,validFilesToAdd:[],errors:a}}return{nextFilesState:n,validFilesToAdd:s,errors:a}},Km=function(){const{files:t}=this.getState();return Object.keys(t).filter(r=>t[r].error)},Gm=async function(){const t=U(this,ee,Km).call(this),r={...this.getState().files};if(t.forEach(s=>{r[s]={...r[s],isPaused:!1,error:null}}),this.setState({files:r,error:null}),this.emit("retry-all",this.getFilesByIds(t)),t.length===0)return{successful:[],failed:[]};const n=U(this,ee,Xo).call(this,t,{forceAllowNewUpload:!0});return U(this,ee,Jo).call(this,n)},Hu=new WeakMap,Qm=function(){const t=U(this,ee,EC).call(this);let r=null;t!=null&&(r=Math.round(t*100),r>100?r=100:r<0&&(r=0)),this.emit("progress",r??0),this.setState({totalProgress:r??0})},mi=new WeakMap,EC=function(){const r=this.getFiles().filter(c=>c.progress.uploadStarted||c.progress.preprocess||c.progress.postprocess);if(r.length===0)return 0;if(r.every(c=>c.progress.uploadComplete))return 1;const n=c=>c.progress.bytesTotal!=null&&c.progress.bytesTotal!==0,s=r.filter(n),a=r.filter(c=>!n(c));if(s.every(c=>c.progress.uploadComplete)&&a.length>0&&!a.every(c=>c.progress.uploadComplete))return null;const o=s.reduce((c,d)=>c+(d.progress.bytesTotal??0),0),l=s.reduce((c,d)=>c+(d.progress.bytesUploaded||0),0);return o===0?0:l/o},_C=function(){const t=(s,a,o)=>{let l=s.message||"Unknown error";s.details&&(l+=` ${s.details}`),this.setState({error:l}),a!=null&&a.id in this.getState().files&&this.setFileState(a.id,{error:l,response:o})};this.on("error",t),this.on("upload-error",(s,a,o)=>{if(t(a,s,o),typeof a=="object"&&a.message){this.log(a.message,"error");const l=new Error(this.i18n("failedToUpload",{file:(s==null?void 0:s.name)??""}));l.isUserFacing=!0,l.details=a.message,a.details&&(l.details+=` ${a.details}`),U(this,ee,ei).call(this,[l])}else U(this,ee,ei).call(this,[a])});let r=null;this.on("upload-stalled",(s,a)=>{const{message:o}=s,l=a.map(c=>c.meta.name).join(", ");r||(this.info({message:o,details:l},"warning",this.opts.infoTimeout),r=setTimeout(()=>{r=null},this.opts.infoTimeout)),this.log(`${o} ${l}`.trim(),"warning")}),this.on("upload",()=>{this.setState({error:null})});const n=s=>{const a=s.filter(l=>{const c=l!=null&&this.getFile(l.id);return c||this.log(`Not setting progress for a file that has been removed: ${l==null?void 0:l.id}`),c}),o=Object.fromEntries(a.map(l=>[l.id,{progress:{uploadStarted:Date.now(),uploadComplete:!1,bytesUploaded:0,bytesTotal:l.size}}]));this.patchFilesState(o)};this.on("upload-start",n),this.on("upload-progress",N(this,Hu)),this.on("upload-success",(s,a)=>{if(s==null||!this.getFile(s.id)){this.log(`Not setting progress for a file that has been removed: ${s==null?void 0:s.id}`);return}const o=this.getFile(s.id).progress;this.setFileState(s.id,{progress:{...o,postprocess:N(this,pi).size>0?{mode:"indeterminate"}:void 0,uploadComplete:!0,percentage:100,bytesUploaded:o.bytesTotal},response:a,uploadURL:a.uploadURL,isPaused:!1}),s.size==null&&this.setFileState(s.id,{size:a.bytesUploaded||o.bytesTotal}),N(this,mi).call(this)}),this.on("preprocess-progress",(s,a)=>{if(s==null||!this.getFile(s.id)){this.log(`Not setting progress for a file that has been removed: ${s==null?void 0:s.id}`);return}this.setFileState(s.id,{progress:{...this.getFile(s.id).progress,preprocess:a}})}),this.on("preprocess-complete",s=>{if(s==null||!this.getFile(s.id)){this.log(`Not setting progress for a file that has been removed: ${s==null?void 0:s.id}`);return}const a={...this.getState().files};a[s.id]={...a[s.id],progress:{...a[s.id].progress}},delete a[s.id].progress.preprocess,this.setState({files:a})}),this.on("postprocess-progress",(s,a)=>{if(s==null||!this.getFile(s.id)){this.log(`Not setting progress for a file that has been removed: ${s==null?void 0:s.id}`);return}this.setFileState(s.id,{progress:{...this.getState().files[s.id].progress,postprocess:a}})}),this.on("postprocess-complete",s=>{if(s==null||!this.getFile(s.id)){this.log(`Not setting progress for a file that has been removed: ${s==null?void 0:s.id}`);return}const a={...this.getState().files};a[s.id]={...a[s.id],progress:{...a[s.id].progress}},delete a[s.id].progress.postprocess,this.setState({files:a})}),this.on("restored",()=>{N(this,mi).call(this)}),this.on("dashboard:file-edit-complete",s=>{s&&U(this,ee,Vm).call(this,s)}),typeof window<"u"&&window.addEventListener&&(window.addEventListener("online",N(this,vs)),window.addEventListener("offline",N(this,vs)),setTimeout(N(this,vs),3e3))},vs=new WeakMap,rc=new WeakMap,Xo=function(t,r={}){const{forceAllowNewUpload:n=!1}=r,{allowNewUpload:s,currentUploads:a}=this.getState();if(!s&&!n)throw new Error("Cannot create a new upload: already uploading.");const o=FL();return this.emit("upload",o,this.getFilesByIds(t)),this.setState({allowNewUpload:this.opts.allowMultipleUploadBatches!==!1&&this.opts.allowMultipleUploads!==!1,currentUploads:{...a,[o]:{fileIDs:t,step:0,result:{}}}}),o},TC=function(t){const{currentUploads:r}=this.getState();return r[t]},Zd=function(t){const r={...this.getState().currentUploads};delete r[t],this.setState({currentUploads:r})},Jo=async function(t){const r=()=>{const{currentUploads:o}=this.getState();return o[t]};let n=r();const s=[...N(this,Oa),...N(this,Da),...N(this,pi)];try{for(let o=n.step||0;o<s.length&&n;o++){const l=s[o];this.setState({currentUploads:{...this.getState().currentUploads,[t]:{...n,step:o}}});const{fileIDs:c}=n;await l(c,t),n=r()}}catch(o){throw U(this,ee,Zd).call(this,t),o}if(n){n.fileIDs.forEach(d=>{const u=this.getFile(d);u!=null&&u.progress.postprocess&&this.emit("postprocess-complete",u)});const o=n.fileIDs.map(d=>this.getFile(d)),l=o.filter(d=>!d.error),c=o.filter(d=>d.error);this.addResultData(t,{successful:l,failed:c,uploadID:t}),n=r()}let a;return n&&(a=n.result,U(this,ee,Zd).call(this,t)),a==null&&(this.log(`Not setting result for an upload that has been removed: ${t}`),a={successful:[],failed:[],uploadID:t}),a},O(Wu,"VERSION",QL.version);let Bm=Wu;var o$=0;function E(e,t,r,n,s,a){t||(t={});var o,l,c=t;if("ref"in c)for(l in c={},t)l=="ref"?o=t[l]:c[l]=t[l];var d={type:e,props:c,key:r,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--o$,__i:-1,__u:0,__source:s,__self:a};if(typeof e=="function"&&(o=e.defaultProps))for(l in o)c[l]===void 0&&(c[l]=o[l]);return ue.vnode&&ue.vnode(d),d}const l$="@uppy/informer",c$="A notification and error pop-up bar for Uppy.",d$="4.3.2",u$="MIT",h$="lib/index.js",f$="dist/style.min.css",p$="module",m$={build:"tsc --build tsconfig.build.json","build:css":"sass --load-path=../../ src/style.scss dist/style.css && postcss dist/style.css -u cssnano -o dist/style.min.css",typecheck:"tsc --build"},g$=["file uploader","uppy","uppy-plugin","notification","bar","ui"],y$="https://uppy.io",v$={url:"https://github.com/transloadit/uppy/issues"},x$={type:"git",url:"git+https://github.com/transloadit/uppy.git"},b$=["src","lib","dist","CHANGELOG.md"],w$={"@uppy/utils":"^6.2.2",preact:"^10.5.13"},N$={"@uppy/core":"^4.5.2"},j$={cssnano:"^7.0.7",postcss:"^8.5.6","postcss-cli":"^11.0.1",sass:"^1.89.2",typescript:"^5.8.3"},S$={name:l$,description:c$,version:d$,license:u$,main:h$,style:f$,type:p$,scripts:m$,keywords:g$,homepage:y$,bugs:v$,repository:x$,files:b$,dependencies:w$,peerDependencies:N$,devDependencies:j$},gb=300;class k$ extends Dt{constructor(){super(...arguments);O(this,"ref",DO())}componentWillEnter(r){this.ref.current.style.opacity="1",this.ref.current.style.transform="none",setTimeout(r,gb)}componentWillLeave(r){this.ref.current.style.opacity="0",this.ref.current.style.transform="translateY(350%)",setTimeout(r,gb)}render(){const{children:r}=this.props;return E("div",{className:"uppy-Informer-animated",ref:this.ref,children:r})}}function C$(e,t){return Object.assign(e,t)}function P$(e,t){return(e==null?void 0:e.key)??t}function E$(e,t){const r=e._ptgLinkedRefs||(e._ptgLinkedRefs={});return r[t]||(r[t]=n=>{e.refs[t]=n})}function $o(e){const t={};for(let r=0;r<e.length;r++)if(e[r]!=null){const n=P$(e[r],r.toString(36));t[n]=e[r]}return t}function _$(e,t){e=e||{},t=t||{};const r=o=>Object.hasOwn(t,o)?t[o]:e[o],n={};let s=[];for(const o in e)Object.hasOwn(t,o)?s.length&&(n[o]=s,s=[]):s.push(o);const a={};for(const o in t){if(Object.hasOwn(n,o))for(let l=0;l<n[o].length;l++){const c=n[o][l];a[n[o][l]]=r(c)}a[o]=r(o)}for(let o=0;o<s.length;o++)a[s[o]]=r(s[o]);return a}const T$=e=>e;class RC extends Dt{constructor(t,r){super(t,r),this.refs={},this.state={children:$o(_r(_r(this.props.children))||[])},this.performAppear=this.performAppear.bind(this),this.performEnter=this.performEnter.bind(this),this.performLeave=this.performLeave.bind(this)}componentWillMount(){this.currentlyTransitioningKeys={},this.keysToAbortLeave=[],this.keysToEnter=[],this.keysToLeave=[]}componentDidMount(){const t=this.state.children;for(const r in t)t[r]&&this.performAppear(r)}componentWillReceiveProps(t){const r=$o(_r(t.children)||[]),n=this.state.children;this.setState(a=>({children:_$(a.children,r)}));let s;for(s in r)if(Object.hasOwn(r,s)){const a=n&&Object.hasOwn(n,s);r[s]&&a&&this.currentlyTransitioningKeys[s]?(this.keysToEnter.push(s),this.keysToAbortLeave.push(s)):r[s]&&!a&&!this.currentlyTransitioningKeys[s]&&this.keysToEnter.push(s)}for(s in n)if(Object.hasOwn(n,s)){const a=r&&Object.hasOwn(r,s);n[s]&&!a&&!this.currentlyTransitioningKeys[s]&&this.keysToLeave.push(s)}}componentDidUpdate(){const{keysToEnter:t}=this;this.keysToEnter=[],t.forEach(this.performEnter);const{keysToLeave:r}=this;this.keysToLeave=[],r.forEach(this.performLeave)}_finishAbort(t){const r=this.keysToAbortLeave.indexOf(t);r!==-1&&this.keysToAbortLeave.splice(r,1)}performAppear(t){this.currentlyTransitioningKeys[t]=!0;const r=this.refs[t];r!=null&&r.componentWillAppear?r.componentWillAppear(this._handleDoneAppearing.bind(this,t)):this._handleDoneAppearing(t)}_handleDoneAppearing(t){const r=this.refs[t];r!=null&&r.componentDidAppear&&r.componentDidAppear(),delete this.currentlyTransitioningKeys[t],this._finishAbort(t);const n=$o(_r(this.props.children)||[]);(!n||!Object.hasOwn(n,t))&&this.performLeave(t)}performEnter(t){this.currentlyTransitioningKeys[t]=!0;const r=this.refs[t];r!=null&&r.componentWillEnter?r.componentWillEnter(this._handleDoneEntering.bind(this,t)):this._handleDoneEntering(t)}_handleDoneEntering(t){const r=this.refs[t];r!=null&&r.componentDidEnter&&r.componentDidEnter(),delete this.currentlyTransitioningKeys[t],this._finishAbort(t);const n=$o(_r(this.props.children)||[]);(!n||!Object.hasOwn(n,t))&&this.performLeave(t)}performLeave(t){if(this.keysToAbortLeave.indexOf(t)!==-1)return;this.currentlyTransitioningKeys[t]=!0;const n=this.refs[t];n!=null&&n.componentWillLeave?n.componentWillLeave(this._handleDoneLeaving.bind(this,t)):this._handleDoneLeaving(t)}_handleDoneLeaving(t){if(this.keysToAbortLeave.indexOf(t)!==-1)return;const n=this.refs[t];n!=null&&n.componentDidLeave&&n.componentDidLeave(),delete this.currentlyTransitioningKeys[t];const s=$o(_r(this.props.children)||[]);if(s&&Object.hasOwn(s,t))this.performEnter(t);else{const a=C$({},this.state.children);delete a[t],this.setState({children:a})}}render({childFactory:t,transitionLeave:r,transitionName:n,transitionAppear:s,transitionEnter:a,transitionLeaveTimeout:o,transitionEnterTimeout:l,transitionAppearTimeout:c,component:d,...u},{children:h}){const p=Object.entries(h).map(([m,x])=>{if(!x)return;const y=E$(this,m);return dC(t(x),{ref:y,key:m})}).filter(Boolean);return Hl(d,u,p)}}RC.defaultProps={component:"span",childFactory:T$};class FC extends mo{constructor(r,n){super(r,n);O(this,"render",r=>E("div",{className:"uppy uppy-Informer",children:E(RC,{children:r.info.map(n=>E(k$,{children:E("p",{role:"alert",children:[n.message," ",n.details&&E("span",{"aria-label":n.details,"data-microtip-position":"top-left","data-microtip-size":"medium",role:"tooltip",onClick:()=>alert(`${n.message} 

 ${n.details}`),children:"?"})]})},n.message))})}));this.type="progressindicator",this.id=this.opts.id||"Informer",this.title="Informer"}install(){const{target:r}=this.opts;r&&this.mount(r,this)}}O(FC,"VERSION",S$.version);var MC={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function r(){for(var a="",o=0;o<arguments.length;o++){var l=arguments[o];l&&(a=s(a,n(l)))}return a}function n(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return r.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var o="";for(var l in a)t.call(a,l)&&a[l]&&(o=s(o,l));return o}function s(a,o){return o?a?a+" "+o:a+o:a}e.exports?(r.default=r,e.exports=r):window.classNames=r})()})(MC);var R$=MC.exports;const Br=Gn(R$),F$={position:"relative",width:"100%",minHeight:"100%"},M$={position:"absolute",top:0,left:0,width:"100%",overflow:"visible"};class A$ extends Dt{constructor(r){super(r);O(this,"handleScroll",()=>{this.setState({offset:this.base.scrollTop})});O(this,"handleResize",()=>{this.resize()});this.focusElement=null,this.state={offset:0,height:0}}componentDidMount(){this.resize(),window.addEventListener("resize",this.handleResize)}componentWillUpdate(){this.base.contains(document.activeElement)&&(this.focusElement=document.activeElement)}componentDidUpdate(){var r;(r=this.focusElement)!=null&&r.parentNode&&document.activeElement!==this.focusElement&&this.focusElement.focus(),this.focusElement=null,this.resize()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}resize(){const{height:r}=this.state;r!==this.base.offsetHeight&&this.setState({height:this.base.offsetHeight})}render({data:r,rowHeight:n,renderRow:s,overscanCount:a=10,...o}){const{offset:l,height:c}=this.state;let d=Math.floor(l/n),u=Math.floor(c/n);a&&(d=Math.max(0,d-d%a),u+=a);const h=d+u+4,p=r.slice(d,h),m={...F$,height:r.length*n},x={...M$,top:d*n};return E("div",{onScroll:this.handleScroll,...o,children:E("div",{role:"presentation",style:m,children:E("div",{role:"presentation",style:x,children:p.map(s)})})})}}function I$(){return E("svg",{"aria-hidden":"true",focusable:"false",width:"30",height:"30",viewBox:"0 0 30 30",children:E("path",{d:"M15 30c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15C6.716 0 0 6.716 0 15c0 8.284 6.716 15 15 15zm4.258-12.676v6.846h-8.426v-6.846H5.204l9.82-12.364 9.82 12.364H19.26z"})})}function yb(e,t,r,n){return e===t?e:n===0?t:e+(t-e)*2**(-n/r)}const O$="@uppy/status-bar",D$="A progress bar for Uppy, with many bells and whistles.",L$="4.2.3",$$="MIT",U$="lib/index.js",z$="dist/style.min.css",B$="module",V$={build:"tsc --build tsconfig.build.json","build:css":"sass --load-path=../../ src/style.scss dist/style.css && postcss dist/style.css -u cssnano -o dist/style.min.css",typecheck:"tsc --build"},H$=["file uploader","uppy","uppy-plugin","progress bar","status bar","progress","upload","eta","speed"],W$="https://uppy.io",q$={url:"https://github.com/transloadit/uppy/issues"},K$={type:"git",url:"git+https://github.com/transloadit/uppy.git"},G$=["src","lib","dist","CHANGELOG.md"],Q$={"@transloadit/prettier-bytes":"^0.3.4","@uppy/utils":"^6.2.2",classnames:"^2.2.6",preact:"^10.5.13"},Y$={"@uppy/core":"^4.5.2"},X$={cssnano:"^7.0.7",postcss:"^8.5.6","postcss-cli":"^11.0.1",sass:"^1.89.2",typescript:"^5.8.3"},J$={name:O$,description:D$,version:L$,license:$$,main:U$,style:z$,type:B$,scripts:V$,keywords:H$,homepage:W$,bugs:q$,repository:K$,files:G$,dependencies:Q$,peerDependencies:Y$,devDependencies:X$},Z$={strings:{uploading:"Uploading",complete:"Complete",uploadFailed:"Upload failed",paused:"Paused",retry:"Retry",cancel:"Cancel",pause:"Pause",resume:"Resume",done:"Done",filesUploadedOfTotal:{0:"%{complete} of %{smart_count} file uploaded",1:"%{complete} of %{smart_count} files uploaded"},dataUploadedOfTotal:"%{complete} of %{total}",dataUploadedOfUnknown:"%{complete} of unknown",xTimeLeft:"%{time} left",uploadXFiles:{0:"Upload %{smart_count} file",1:"Upload %{smart_count} files"},uploadXNewFiles:{0:"Upload +%{smart_count} file",1:"Upload +%{smart_count} files"},upload:"Upload",retryUpload:"Retry upload",xMoreFilesAdded:{0:"%{smart_count} more file added",1:"%{smart_count} more files added"},showErrorDetails:"Show error details"}},Yr={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete"};function e6(e){const t=Math.floor(e/3600)%24,r=Math.floor(e/60)%60,n=Math.floor(e%60);return{hours:t,minutes:r,seconds:n}}function t6(e){const t=e6(e),r=t.hours===0?"":`${t.hours}h`,n=t.minutes===0?"":`${t.hours===0?t.minutes:` ${t.minutes.toString(10).padStart(2,"0")}`}m`,s=t.hours!==0?"":`${t.minutes===0?t.seconds:` ${t.seconds.toString(10).padStart(2,"0")}`}s`;return`${r}${n}${s}`}const r6="",vb=()=>` ${r6} `;function n6(e){const{newFiles:t,isUploadStarted:r,recoveredState:n,i18n:s,uploadState:a,isSomeGhost:o,startUpload:l}=e,c=Br("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--upload",{"uppy-c-btn-primary":a===Yr.STATE_WAITING},{"uppy-StatusBar-actionBtn--disabled":o}),d=t&&r&&!n?s("uploadXNewFiles",{smart_count:t}):s("uploadXFiles",{smart_count:t});return E("button",{type:"button",className:c,"aria-label":s("uploadXFiles",{smart_count:t}),onClick:l,disabled:o,"data-uppy-super-focusable":!0,children:d})}function s6(e){const{i18n:t,uppy:r}=e;return E("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--retry","aria-label":t("retryUpload"),onClick:()=>r.retryAll().catch(()=>{}),"data-uppy-super-focusable":!0,"data-cy":"retry",children:[E("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"8",height:"10",viewBox:"0 0 8 10",children:E("path",{d:"M4 2.408a2.75 2.75 0 1 0 2.75 2.75.626.626 0 0 1 1.25.018v.023a4 4 0 1 1-4-4.041V.25a.25.25 0 0 1 .389-.208l2.299 1.533a.25.25 0 0 1 0 .416l-2.3 1.533A.25.25 0 0 1 4 3.316v-.908z"})}),t("retry")]})}function i6(e){const{i18n:t,uppy:r}=e;return E("button",{type:"button",className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",title:t("cancel"),"aria-label":t("cancel"),onClick:()=>r.cancelAll(),"data-cy":"cancel","data-uppy-super-focusable":!0,children:E("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16",children:E("g",{fill:"none",fillRule:"evenodd",children:[E("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),E("path",{fill:"#FFF",d:"M9.283 8l2.567 2.567-1.283 1.283L8 9.283 5.433 11.85 4.15 10.567 6.717 8 4.15 5.433 5.433 4.15 8 6.717l2.567-2.567 1.283 1.283z"})]})})})}function a6(e){const{isAllPaused:t,i18n:r,isAllComplete:n,resumableUploads:s,uppy:a}=e,o=r(t?"resume":"pause");function l(){if(!n){if(!s){a.cancelAll();return}if(t){a.resumeAll();return}a.pauseAll()}}return E("button",{title:o,"aria-label":o,className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",type:"button",onClick:l,"data-cy":"togglePauseResume","data-uppy-super-focusable":!0,children:E("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16",children:E("g",{fill:"none",fillRule:"evenodd",children:[E("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),E("path",{fill:"#FFF",d:t?"M6 4.25L11.5 8 6 11.75z":"M5 4.5h2v7H5v-7zm4 0h2v7H9v-7z"})]})})})}function o6(e){const{i18n:t,doneButtonHandler:r}=e;return E("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--done",onClick:r,"data-uppy-super-focusable":!0,children:t("done")})}function AC(){return E("svg",{className:"uppy-StatusBar-spinner","aria-hidden":"true",focusable:"false",width:"14",height:"14",children:E("path",{d:"M13.983 6.547c-.12-2.509-1.64-4.893-3.939-5.936-2.48-1.127-5.488-.656-7.556 1.094C.524 3.367-.398 6.048.162 8.562c.556 2.495 2.46 4.52 4.94 5.183 2.932.784 5.61-.602 7.256-3.015-1.493 1.993-3.745 3.309-6.298 2.868-2.514-.434-4.578-2.349-5.153-4.84a6.226 6.226 0 0 1 2.98-6.778C6.34.586 9.74 1.1 11.373 3.493c.407.596.693 1.282.842 1.988.127.598.073 1.197.161 1.794.078.525.543 1.257 1.15.864.525-.341.49-1.05.456-1.592-.007-.15.02.3 0 0",fillRule:"evenodd"})})}function l6(e){const{progress:t}=e,{value:r,mode:n,message:s}=t;return E("div",{className:"uppy-StatusBar-content",children:[E(AC,{}),n==="determinate"?`${Math.round(r*100)}%  `:"",s]})}function c6(e){const{numUploads:t,complete:r,totalUploadedSize:n,totalSize:s,totalETA:a,i18n:o}=e,l=t>1,c=ii(n);return E("div",{className:"uppy-StatusBar-statusSecondary",children:[l&&o("filesUploadedOfTotal",{complete:r,smart_count:t}),E("span",{className:"uppy-StatusBar-additionalInfo",children:[l&&vb(),s!=null?o("dataUploadedOfTotal",{complete:c,total:ii(s)}):o("dataUploadedOfUnknown",{complete:c}),vb(),a!=null&&o("xTimeLeft",{time:t6(a)})]})]})}function IC(e){const{i18n:t,complete:r,numUploads:n}=e;return E("div",{className:"uppy-StatusBar-statusSecondary",children:t("filesUploadedOfTotal",{complete:r,smart_count:n})})}function d6(e){const{i18n:t,newFiles:r,startUpload:n}=e,s=Br("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--uploadNewlyAdded");return E("div",{className:"uppy-StatusBar-statusSecondary",children:[E("div",{className:"uppy-StatusBar-statusSecondaryHint",children:t("xMoreFilesAdded",{smart_count:r})}),E("button",{type:"button",className:s,"aria-label":t("uploadXFiles",{smart_count:r}),onClick:n,children:t("upload")})]})}function u6(e){const{i18n:t,supportsUploadProgress:r,totalProgress:n,showProgressDetails:s,isUploadStarted:a,isAllComplete:o,isAllPaused:l,newFiles:c,numUploads:d,complete:u,totalUploadedSize:h,totalSize:p,totalETA:m,startUpload:x}=e,y=c&&a;if(!a||o)return null;const w=t(l?"paused":"uploading");function v(){return!l&&!y&&s?r?E(c6,{numUploads:d,complete:u,totalUploadedSize:h,totalSize:p,totalETA:m,i18n:t}):E(IC,{i18n:t,complete:u,numUploads:d}):null}return E("div",{className:"uppy-StatusBar-content",title:w,children:[l?null:E(AC,{}),E("div",{className:"uppy-StatusBar-status",children:[E("div",{className:"uppy-StatusBar-statusPrimary",children:r&&n!==0?`${w}: ${n}%`:w}),v(),y?E(d6,{i18n:t,newFiles:c,startUpload:x}):null]})]})}function h6(e){const{i18n:t}=e;return E("div",{className:"uppy-StatusBar-content",role:"status",title:t("complete"),children:E("div",{className:"uppy-StatusBar-status",children:E("div",{className:"uppy-StatusBar-statusPrimary",children:[E("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"15",height:"11",viewBox:"0 0 15 11",children:E("path",{d:"M.414 5.843L1.627 4.63l3.472 3.472L13.202 0l1.212 1.213L5.1 10.528z"})}),t("complete")]})})})}function f6(e){const{error:t,i18n:r,complete:n,numUploads:s}=e;function a(){const o=`${r("uploadFailed")} 

 ${t}`;alert(o)}return E("div",{className:"uppy-StatusBar-content",title:r("uploadFailed"),children:[E("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"11",height:"11",viewBox:"0 0 11 11",children:E("path",{d:"M4.278 5.5L0 1.222 1.222 0 5.5 4.278 9.778 0 11 1.222 6.722 5.5 11 9.778 9.778 11 5.5 6.722 1.222 11 0 9.778z"})}),E("div",{className:"uppy-StatusBar-status",children:[E("div",{className:"uppy-StatusBar-statusPrimary",children:[r("uploadFailed"),E("button",{className:"uppy-u-reset uppy-StatusBar-details","aria-label":r("showErrorDetails"),"data-microtip-position":"top-right","data-microtip-size":"medium",onClick:a,type:"button",children:"?"})]}),E(IC,{i18n:r,complete:n,numUploads:s})]})]})}function Xf(e){const t=[];let r="indeterminate",n;for(const{progress:a}of Object.values(e)){const{preprocess:o,postprocess:l}=a;n==null&&(o||l)&&({mode:r,message:n}=o||l),(o==null?void 0:o.mode)==="determinate"&&t.push(o.value),(l==null?void 0:l.mode)==="determinate"&&t.push(l.value)}const s=t.reduce((a,o)=>a+o/t.length,0);return{mode:r,message:n,value:s}}const{STATE_ERROR:xb,STATE_WAITING:p6,STATE_PREPROCESSING:Jf,STATE_UPLOADING:wd,STATE_POSTPROCESSING:Zf,STATE_COMPLETE:Nd}=Yr;function m6({newFiles:e,allowNewUpload:t,isUploadInProgress:r,isAllPaused:n,resumableUploads:s,error:a,hideUploadButton:o=void 0,hidePauseResumeButton:l=!1,hideCancelButton:c=!1,hideRetryButton:d=!1,recoveredState:u,uploadState:h,totalProgress:p,files:m,supportsUploadProgress:x,hideAfterFinish:y=!1,isSomeGhost:w,doneButtonHandler:v=void 0,isUploadStarted:g,i18n:b,startUpload:j,uppy:k,isAllComplete:C,showProgressDetails:S=void 0,numUploads:_,complete:P,totalSize:T,totalETA:F,totalUploadedSize:R}){function M(){switch(h){case Zf:case Jf:{const q=Xf(m);return q.mode==="determinate"?q.value*100:p}case xb:return null;case wd:return x?p:null;default:return p}}function I(){switch(h){case Zf:case Jf:{const{mode:q}=Xf(m);return q==="indeterminate"}case wd:return!x;default:return!1}}const H=M(),V=H??100,Q=!a&&e&&(!r&&!n||u)&&t&&!o,A=!c&&h!==p6&&h!==Nd,L=s&&!l&&h===wd,G=a&&!C&&!d,B=v&&h===Nd,X=Br("uppy-StatusBar-progress",{"is-indeterminate":I()}),ye=Br("uppy-StatusBar",`is-${h}`,{"has-ghosts":w}),fe=(()=>{switch(h){case Jf:case Zf:return E(l6,{progress:Xf(m)});case Nd:return E(h6,{i18n:b});case xb:return E(f6,{error:a,i18n:b,numUploads:_,complete:P});case wd:return E(u6,{i18n:b,supportsUploadProgress:x,totalProgress:p,showProgressDetails:S,isUploadStarted:g,isAllComplete:C,isAllPaused:n,newFiles:e,numUploads:_,complete:P,totalUploadedSize:R,totalSize:T,totalETA:F,startUpload:j});default:return null}})();return!(Q||G||L||A||B)&&!fe||h===Nd&&y?null:E("div",{className:ye,children:[E("div",{className:X,style:{width:`${V}%`},role:"progressbar","aria-label":`${V}%`,"aria-valuetext":`${V}%`,"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":H}),fe,E("div",{className:"uppy-StatusBar-actions",children:[Q?E(n6,{newFiles:e,isUploadStarted:g,recoveredState:u,i18n:b,isSomeGhost:w,startUpload:j,uploadState:h}):null,G?E(s6,{i18n:b,uppy:k}):null,L?E(a6,{isAllPaused:n,i18n:b,isAllComplete:C,resumableUploads:s,uppy:k}):null,A?E(i6,{i18n:b,uppy:k}):null,B?E(o6,{i18n:b,doneButtonHandler:v}):null]})]})}const g6=2e3,y6=2e3;function v6(e,t,r,n){if(e)return Yr.STATE_ERROR;if(t)return Yr.STATE_COMPLETE;if(r)return Yr.STATE_WAITING;let s=Yr.STATE_WAITING;const a=Object.keys(n);for(let o=0;o<a.length;o++){const{progress:l}=n[a[o]];if(l.uploadStarted&&!l.uploadComplete)return Yr.STATE_UPLOADING;l.preprocess&&(s=Yr.STATE_PREPROCESSING),l.postprocess&&s!==Yr.STATE_PREPROCESSING&&(s=Yr.STATE_POSTPROCESSING)}return s}const x6={hideUploadButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideCancelButton:!1,showProgressDetails:!1,hideAfterFinish:!0,doneButtonHandler:null};var dp,xs,bs,gi,Sn,qu,OC,nc;let b6=(dp=class extends mo{constructor(r,n){super(r,{...x6,...n});D(this,qu);D(this,xs);D(this,bs);D(this,gi);D(this,Sn);O(this,"startUpload",()=>this.uppy.upload().catch(()=>{}));D(this,nc,()=>{const{recoveredState:r}=this.uppy.getState();if($(this,gi,null),$(this,Sn,null),r){$(this,bs,Object.values(r.files).reduce((n,{progress:s})=>n+s.bytesUploaded,0)),this.uppy.emit("restore-confirmed");return}$(this,xs,performance.now()),$(this,bs,0)});this.id=this.opts.id||"StatusBar",this.title="StatusBar",this.type="progressindicator",this.defaultLocale=Z$,this.i18nInit(),this.render=this.render.bind(this),this.install=this.install.bind(this)}render(r){const{capabilities:n,files:s,allowNewUpload:a,totalProgress:o,error:l,recoveredState:c}=r,{newFiles:d,startedFiles:u,completeFiles:h,isUploadStarted:p,isAllComplete:m,isAllPaused:x,isUploadInProgress:y,isSomeGhost:w}=this.uppy.getObjectOfFilesPerState(),v=c?Object.values(s):d,g=!!n.resumableUploads,b=n.uploadProgress!==!1;let j=null,k=0;u.every(S=>S.progress.bytesTotal!=null&&S.progress.bytesTotal!==0)?(j=0,u.forEach(S=>{j+=S.progress.bytesTotal||0,k+=S.progress.bytesUploaded||0})):u.forEach(S=>{k+=S.progress.bytesUploaded||0});const C=U(this,qu,OC).call(this,{uploaded:k,total:j});return m6({error:l,uploadState:v6(l,m,c,r.files||{}),allowNewUpload:a,totalProgress:o,totalSize:j,totalUploadedSize:k,isAllComplete:!1,isAllPaused:x,isUploadStarted:p,isUploadInProgress:y,isSomeGhost:w,recoveredState:c,complete:h.length,newFiles:v.length,numUploads:u.length,totalETA:C,files:s,i18n:this.i18n,uppy:this.uppy,startUpload:this.startUpload,doneButtonHandler:this.opts.doneButtonHandler,resumableUploads:g,supportsUploadProgress:b,showProgressDetails:this.opts.showProgressDetails,hideUploadButton:this.opts.hideUploadButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,hideCancelButton:this.opts.hideCancelButton,hideAfterFinish:this.opts.hideAfterFinish})}onMount(){const r=this.el;J2(r)||(r.dir="ltr")}install(){const{target:r}=this.opts;r&&this.mount(r,this),this.uppy.on("upload",N(this,nc)),$(this,xs,performance.now()),$(this,bs,this.uppy.getFiles().reduce((n,s)=>n+s.progress.bytesUploaded,0))}uninstall(){this.unmount(),this.uppy.off("upload",N(this,nc))}},xs=new WeakMap,bs=new WeakMap,gi=new WeakMap,Sn=new WeakMap,qu=new WeakSet,OC=function(r){if(r.total==null||r.total===0)return null;const n=r.total-r.uploaded;if(n<=0)return null;N(this,xs)??$(this,xs,performance.now());const s=performance.now()-N(this,xs);if(s===0)return Math.round((N(this,Sn)??0)/100)/10;const a=r.uploaded-N(this,bs);if($(this,bs,r.uploaded),a<=0)return Math.round((N(this,Sn)??0)/100)/10;const o=a/s,l=N(this,gi)==null?o:yb(o,N(this,gi),g6,s);$(this,gi,l);const c=n/l,d=Math.max(N(this,Sn)-s,0),u=N(this,Sn)==null?c:yb(c,d,y6,s);return $(this,Sn,u),$(this,xs,performance.now()),Math.round(u/100)/10},nc=new WeakMap,O(dp,"VERSION",J$.version),dp);const w6=/^data:([^/]+\/[^,;]+(?:[^,]*?))(;base64)?,([\s\S]*)$/;function N6(e,t,r){const n=w6.exec(e),s=t.mimeType??(n==null?void 0:n[1])??"plain/text";let a;if((n==null?void 0:n[2])!=null){const o=atob(decodeURIComponent(n[3])),l=new Uint8Array(o.length);for(let c=0;c<o.length;c++)l[c]=o.charCodeAt(c);a=[l]}else(n==null?void 0:n[3])!=null&&(a=[decodeURIComponent(n[3])]);return new Blob(a,{type:s})}function bb(e){return e.startsWith("blob:")}function wb(e){return e?/^[^/]+\/(jpe?g|gif|png|svg|svg\+xml|bmp|webp|avif)$/.test(e):!1}function je(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var DC=typeof self<"u"?self:global;const Kl=typeof navigator<"u",j6=Kl&&typeof HTMLImageElement>"u",Nb=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),LC=DC.Buffer,$C=!!LC,S6=e=>e!==void 0;function UC(e){return e===void 0||(e instanceof Map?e.size===0:Object.values(e).filter(S6).length===0)}function at(e){let t=new Error(e);throw delete t.stack,t}function jb(e){let t=function(r){let n=0;return r.ifd0.enabled&&(n+=1024),r.exif.enabled&&(n+=2048),r.makerNote&&(n+=2048),r.userComment&&(n+=1024),r.gps.enabled&&(n+=512),r.interop.enabled&&(n+=100),r.ifd1.enabled&&(n+=1024),n+2048}(e);return e.jfif.enabled&&(t+=50),e.xmp.enabled&&(t+=2e4),e.iptc.enabled&&(t+=14e3),e.icc.enabled&&(t+=6e3),t}const ep=e=>String.fromCharCode.apply(null,e),Sb=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;class Tr{static from(t,r){return t instanceof this&&t.le===r?t:new Tr(t,void 0,void 0,r)}constructor(t,r=0,n,s){if(typeof s=="boolean"&&(this.le=s),Array.isArray(t)&&(t=new Uint8Array(t)),t===0)this.byteOffset=0,this.byteLength=0;else if(t instanceof ArrayBuffer){n===void 0&&(n=t.byteLength-r);let a=new DataView(t,r,n);this._swapDataView(a)}else if(t instanceof Uint8Array||t instanceof DataView||t instanceof Tr){n===void 0&&(n=t.byteLength-r),(r+=t.byteOffset)+n>t.byteOffset+t.byteLength&&at("Creating view outside of available memory in ArrayBuffer");let a=new DataView(t.buffer,r,n);this._swapDataView(a)}else if(typeof t=="number"){let a=new DataView(new ArrayBuffer(t));this._swapDataView(a)}else at("Invalid input argument for BufferView: "+t)}_swapArrayBuffer(t){this._swapDataView(new DataView(t))}_swapBuffer(t){this._swapDataView(new DataView(t.buffer,t.byteOffset,t.byteLength))}_swapDataView(t){this.dataView=t,this.buffer=t.buffer,this.byteOffset=t.byteOffset,this.byteLength=t.byteLength}_lengthToEnd(t){return this.byteLength-t}set(t,r,n=Tr){return t instanceof DataView||t instanceof Tr?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer&&(t=new Uint8Array(t)),t instanceof Uint8Array||at("BufferView.set(): Invalid data argument."),this.toUint8().set(t,r),new n(this,r,t.byteLength)}subarray(t,r){return r=r||this._lengthToEnd(t),new Tr(this,t,r)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(t,r){return new Uint8Array(this.buffer,this.byteOffset+t,r)}getString(t=0,r=this.byteLength){return s=this.getUint8Array(t,r),Sb?Sb.decode(s):$C?Buffer.from(s).toString("utf8"):decodeURIComponent(escape(ep(s)));var s}getLatin1String(t=0,r=this.byteLength){let n=this.getUint8Array(t,r);return ep(n)}getUnicodeString(t=0,r=this.byteLength){const n=[];for(let s=0;s<r&&t+s<this.byteLength;s+=2)n.push(this.getUint16(t+s));return ep(n)}getInt8(t){return this.dataView.getInt8(t)}getUint8(t){return this.dataView.getUint8(t)}getInt16(t,r=this.le){return this.dataView.getInt16(t,r)}getInt32(t,r=this.le){return this.dataView.getInt32(t,r)}getUint16(t,r=this.le){return this.dataView.getUint16(t,r)}getUint32(t,r=this.le){return this.dataView.getUint32(t,r)}getFloat32(t,r=this.le){return this.dataView.getFloat32(t,r)}getFloat64(t,r=this.le){return this.dataView.getFloat64(t,r)}getFloat(t,r=this.le){return this.dataView.getFloat32(t,r)}getDouble(t,r=this.le){return this.dataView.getFloat64(t,r)}getUintBytes(t,r,n){switch(r){case 1:return this.getUint8(t,n);case 2:return this.getUint16(t,n);case 4:return this.getUint32(t,n);case 8:return this.getUint64&&this.getUint64(t,n)}}getUint(t,r,n){switch(r){case 8:return this.getUint8(t,n);case 16:return this.getUint16(t,n);case 32:return this.getUint32(t,n);case 64:return this.getUint64&&this.getUint64(t,n)}}toString(t){return this.dataView.toString(t,this.constructor.name)}ensureChunk(){}}function Ym(e,t){at(`${e} '${t}' was not loaded, try using full build of exifr.`)}let gv=class extends Map{constructor(t){super(),this.kind=t}get(t,r){return this.has(t)||Ym(this.kind,t),r&&(t in r||function(n,s){at(`Unknown ${n} '${s}'.`)}(this.kind,t),r[t].enabled||Ym(this.kind,t)),super.get(t)}keyList(){return Array.from(this.keys())}};var zC=new gv("file parser"),Cr=new gv("segment parser"),yv=new gv("file reader");let k6=DC.fetch;function kb(e,t){return(r=e).startsWith("data:")||r.length>1e4?Jm(e,t,"base64"):Nb&&e.includes("://")?Xm(e,t,"url",Cb):Nb?Jm(e,t,"fs"):Kl?Xm(e,t,"url",Cb):void at("Invalid input argument");var r}async function Xm(e,t,r,n){return yv.has(r)?Jm(e,t,r):n?async function(s,a){let o=await a(s);return new Tr(o)}(e,n):void at(`Parser ${r} is not loaded`)}async function Jm(e,t,r){let n=new(yv.get(r))(e,t);return await n.read(),n}const Cb=e=>k6(e).then(t=>t.arrayBuffer()),Zm=e=>new Promise((t,r)=>{let n=new FileReader;n.onloadend=()=>t(n.result||new ArrayBuffer),n.onerror=r,n.readAsArrayBuffer(e)}),vv=new Map,C6=new Map,P6=new Map,jd=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],BC=["jfif","xmp","icc","iptc","ihdr"],eg=["tiff",...BC],nt=["ifd0","ifd1","exif","gps","interop"],Sd=[...eg,...nt],kd=["makerNote","userComment"],VC=["translateKeys","translateValues","reviveValues","multiSegment"],Cd=[...VC,"sanitize","mergeOutput","silentErrors"];class HC{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class Uo extends HC{get needed(){return this.enabled||this.deps.size>0}constructor(t,r,n,s){if(super(),je(this,"enabled",!1),je(this,"skip",new Set),je(this,"pick",new Set),je(this,"deps",new Set),je(this,"translateKeys",!1),je(this,"translateValues",!1),je(this,"reviveValues",!1),this.key=t,this.enabled=r,this.parse=this.enabled,this.applyInheritables(s),this.canBeFiltered=nt.includes(t),this.canBeFiltered&&(this.dict=vv.get(t)),n!==void 0)if(Array.isArray(n))this.parse=this.enabled=!0,this.canBeFiltered&&n.length>0&&this.translateTagSet(n,this.pick);else if(typeof n=="object"){if(this.enabled=!0,this.parse=n.parse!==!1,this.canBeFiltered){let{pick:a,skip:o}=n;a&&a.length>0&&this.translateTagSet(a,this.pick),o&&o.length>0&&this.translateTagSet(o,this.skip)}this.applyInheritables(n)}else n===!0||n===!1?this.parse=this.enabled=n:at(`Invalid options argument: ${n}`)}applyInheritables(t){let r,n;for(r of VC)n=t[r],n!==void 0&&(this[r]=n)}translateTagSet(t,r){if(this.dict){let n,s,{tagKeys:a,tagValues:o}=this.dict;for(n of t)typeof n=="string"?(s=o.indexOf(n),s===-1&&(s=a.indexOf(Number(n))),s!==-1&&r.add(Number(a[s]))):r.add(n)}else for(let n of t)r.add(n)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,$u(this.pick,this.deps)):this.enabled&&this.pick.size>0&&$u(this.pick,this.deps)}}var wt={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},Pb=new Map;class xv extends HC{static useCached(t){let r=Pb.get(t);return r!==void 0||(r=new this(t),Pb.set(t,r)),r}constructor(t){super(),t===!0?this.setupFromTrue():t===void 0?this.setupFromUndefined():Array.isArray(t)?this.setupFromArray(t):typeof t=="object"?this.setupFromObject(t):at(`Invalid options argument ${t}`),this.firstChunkSize===void 0&&(this.firstChunkSize=Kl?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let t;for(t of jd)this[t]=wt[t];for(t of Cd)this[t]=wt[t];for(t of kd)this[t]=wt[t];for(t of Sd)this[t]=new Uo(t,wt[t],void 0,this)}setupFromTrue(){let t;for(t of jd)this[t]=wt[t];for(t of Cd)this[t]=wt[t];for(t of kd)this[t]=!0;for(t of Sd)this[t]=new Uo(t,!0,void 0,this)}setupFromArray(t){let r;for(r of jd)this[r]=wt[r];for(r of Cd)this[r]=wt[r];for(r of kd)this[r]=wt[r];for(r of Sd)this[r]=new Uo(r,!1,void 0,this);this.setupGlobalFilters(t,void 0,nt)}setupFromObject(t){let r;for(r of(nt.ifd0=nt.ifd0||nt.image,nt.ifd1=nt.ifd1||nt.thumbnail,Object.assign(this,t),jd))this[r]=tp(t[r],wt[r]);for(r of Cd)this[r]=tp(t[r],wt[r]);for(r of kd)this[r]=tp(t[r],wt[r]);for(r of eg)this[r]=new Uo(r,wt[r],t[r],this);for(r of nt)this[r]=new Uo(r,wt[r],t[r],this.tiff);this.setupGlobalFilters(t.pick,t.skip,nt,Sd),t.tiff===!0?this.batchEnableWithBool(nt,!0):t.tiff===!1?this.batchEnableWithUserValue(nt,t):Array.isArray(t.tiff)?this.setupGlobalFilters(t.tiff,void 0,nt):typeof t.tiff=="object"&&this.setupGlobalFilters(t.tiff.pick,t.tiff.skip,nt)}batchEnableWithBool(t,r){for(let n of t)this[n].enabled=r}batchEnableWithUserValue(t,r){for(let n of t){let s=r[n];this[n].enabled=s!==!1&&s!==void 0}}setupGlobalFilters(t,r,n,s=n){if(t&&t.length){for(let o of s)this[o].enabled=!1;let a=Eb(t,n);for(let[o,l]of a)$u(this[o].pick,l),this[o].enabled=!0}else if(r&&r.length){let a=Eb(r,n);for(let[o,l]of a)$u(this[o].skip,l)}}filterNestedSegmentTags(){let{ifd0:t,exif:r,xmp:n,iptc:s,icc:a}=this;this.makerNote?r.deps.add(37500):r.skip.add(37500),this.userComment?r.deps.add(37510):r.skip.add(37510),n.enabled||t.skip.add(700),s.enabled||t.skip.add(33723),a.enabled||t.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:t,exif:r,gps:n,interop:s}=this;s.needed&&(r.deps.add(40965),t.deps.add(40965)),r.needed&&t.deps.add(34665),n.needed&&t.deps.add(34853),this.tiff.enabled=nt.some(a=>this[a].enabled===!0)||this.makerNote||this.userComment;for(let a of nt)this[a].finalizeFilters()}get onlyTiff(){return!BC.map(t=>this[t].enabled).some(t=>t===!0)&&this.tiff.enabled}checkLoadedPlugins(){for(let t of eg)this[t].enabled&&!Cr.has(t)&&Ym("segment parser",t)}}function Eb(e,t){let r,n,s,a,o=[];for(s of t){for(a of(r=vv.get(s),n=[],r))(e.includes(a[0])||e.includes(a[1]))&&n.push(a[0]);n.length&&o.push([s,n])}return o}function tp(e,t){return e!==void 0?e:t!==void 0?t:void 0}function $u(e,t){for(let r of t)e.add(r)}je(xv,"default",wt);class E6{constructor(t){je(this,"parsers",{}),je(this,"output",{}),je(this,"errors",[]),je(this,"pushToErrors",r=>this.errors.push(r)),this.options=xv.useCached(t)}async read(t){this.file=await function(r,n){return typeof r=="string"?kb(r,n):Kl&&!j6&&r instanceof HTMLImageElement?kb(r.src,n):r instanceof Uint8Array||r instanceof ArrayBuffer||r instanceof DataView?new Tr(r):Kl&&r instanceof Blob?Xm(r,n,"blob",Zm):void at("Invalid input argument")}(t,this.options)}setup(){if(this.fileParser)return;let{file:t}=this,r=t.getUint16(0);for(let[n,s]of zC)if(s.canHandle(t,r))return this.fileParser=new s(this.options,this.file,this.parsers),t[n]=!0;this.file.close&&this.file.close(),at("Unknown file format")}async parse(){let{output:t,errors:r}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),r.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&r.length>0&&(t.errors=r),UC(n=t)?void 0:n;var n}async executeParsers(){let{output:t}=this;await this.fileParser.parse();let r=Object.values(this.parsers).map(async n=>{let s=await n.parse();n.assignToOutput(t,s)});this.options.silentErrors&&(r=r.map(n=>n.catch(this.pushToErrors))),await Promise.all(r)}async extractThumbnail(){this.setup();let{options:t,file:r}=this,n=Cr.get("tiff",t);var s;if(r.tiff?s={start:0,type:"tiff"}:r.jpeg&&(s=await this.fileParser.getOrFindSegment("tiff")),s===void 0)return;let a=await this.fileParser.ensureSegmentChunk(s),o=this.parsers.tiff=new n(a,t,r),l=await o.extractThumbnail();return r.close&&r.close(),l}}class ua{static findPosition(t,r){let n=t.getUint16(r+2)+2,s=typeof this.headerLength=="function"?this.headerLength(t,r,n):this.headerLength,a=r+s,o=n-s;return{offset:r,length:n,headerLength:s,start:a,size:o,end:a+o}}static parse(t,r={}){return new this(t,new xv({[this.type]:r}),t).parse()}normalizeInput(t){return t instanceof Tr?t:new Tr(t)}constructor(t,r={},n){je(this,"errors",[]),je(this,"raw",new Map),je(this,"handleError",s=>{if(!this.options.silentErrors)throw s;this.errors.push(s.message)}),this.chunk=this.normalizeInput(t),this.file=n,this.type=this.constructor.type,this.globalOptions=this.options=r,this.localOptions=r[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(t,r){let n=P6.get(r),s=C6.get(r),a=vv.get(r),o=this.options[r],l=o.reviveValues&&!!n,c=o.translateValues&&!!s,d=o.translateKeys&&!!a,u={};for(let[h,p]of t)l&&n.has(h)?p=n.get(h)(p):c&&s.has(h)&&(p=this.translateValue(p,s.get(h))),d&&a.has(h)&&(h=a.get(h)||h),u[h]=p;return u}translateValue(t,r){return r[t]||r.DEFAULT||t}assignToOutput(t,r){this.assignObjectToOutput(t,this.constructor.type,r)}assignObjectToOutput(t,r,n){if(this.globalOptions.mergeOutput)return Object.assign(t,n);t[r]?Object.assign(t[r],n):t[r]=n}}je(ua,"headerLength",4),je(ua,"type",void 0),je(ua,"multiSegment",!1),je(ua,"canHandle",()=>!1);function _6(e){return e===192||e===194||e===196||e===219||e===221||e===218||e===254}function T6(e){return e>=224&&e<=239}function R6(e,t,r){for(let[n,s]of Cr)if(s.canHandle(e,t,r))return n}class _b extends class{constructor(t,r,n){je(this,"errors",[]),je(this,"ensureSegmentChunk",async s=>{let a=s.start,o=s.size||65536;if(this.file.chunked)if(this.file.available(a,o))s.chunk=this.file.subarray(a,o);else try{s.chunk=await this.file.readChunk(a,o)}catch(l){at(`Couldn't read segment: ${JSON.stringify(s)}. ${l.message}`)}else this.file.byteLength>a+o?s.chunk=this.file.subarray(a,o):s.size===void 0?s.chunk=this.file.subarray(a):at("Segment unreachable: "+JSON.stringify(s));return s.chunk}),this.extendOptions&&this.extendOptions(t),this.options=t,this.file=r,this.parsers=n}injectSegment(t,r){this.options[t].enabled&&this.createParser(t,r)}createParser(t,r){let n=new(Cr.get(t))(r,this.options,this.file);return this.parsers[t]=n}createParsers(t){for(let r of t){let{type:n,chunk:s}=r,a=this.options[n];if(a&&a.enabled){let o=this.parsers[n];o&&o.append||o||this.createParser(n,s)}}}async readSegments(t){let r=t.map(this.ensureSegmentChunk);await Promise.all(r)}}{constructor(...t){super(...t),je(this,"appSegments",[]),je(this,"jpegSegments",[]),je(this,"unknownSegments",[])}static canHandle(t,r){return r===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(t){t===!0?(this.findAll=!0,this.wanted=new Set(Cr.keyList())):(t=t===void 0?Cr.keyList().filter(r=>this.options[r].enabled):t.filter(r=>this.options[r].enabled&&Cr.has(r)),this.findAll=!1,this.remaining=new Set(t),this.wanted=new Set(t)),this.unfinishedMultiSegment=!1}async findAppSegments(t=0,r){this.setupSegmentFinderArgs(r);let{file:n,findAll:s,wanted:a,remaining:o}=this;if(!s&&this.file.chunked&&(s=Array.from(a).some(l=>{let c=Cr.get(l),d=this.options[l];return c.multiSegment&&d.multiSegment}),s&&await this.file.readWhole()),t=this.findAppSegmentsInRange(t,n.byteLength),!this.options.onlyTiff&&n.chunked){let l=!1;for(;o.size>0&&!l&&(n.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:c}=n,d=this.appSegments.some(u=>!this.file.available(u.offset||u.start,u.length||u.size));if(l=t>c&&!d?!await n.readNextChunk(t):!await n.readNextChunk(c),(t=this.findAppSegmentsInRange(t,n.byteLength))===void 0)return}}}findAppSegmentsInRange(t,r){r-=2;let n,s,a,o,l,c,{file:d,findAll:u,wanted:h,remaining:p,options:m}=this;for(;t<r;t++)if(d.getUint8(t)===255){if(n=d.getUint8(t+1),T6(n)){if(s=d.getUint16(t+2),a=R6(d,t,s),a&&h.has(a)&&(o=Cr.get(a),l=o.findPosition(d,t),c=m[a],l.type=a,this.appSegments.push(l),!u&&(o.multiSegment&&c.multiSegment?(this.unfinishedMultiSegment=l.chunkNumber<l.chunkCount,this.unfinishedMultiSegment||p.delete(a)):p.delete(a),p.size===0)))break;m.recordUnknownSegments&&(l=ua.findPosition(d,t),l.marker=n,this.unknownSegments.push(l)),t+=s+1}else if(_6(n)){if(s=d.getUint16(t+2),n===218&&m.stopAfterSos!==!1)return;m.recordJpegSegments&&this.jpegSegments.push({offset:t,length:s,marker:n}),t+=s+1}}return t}mergeMultiSegments(){if(!this.appSegments.some(r=>r.multiSegment))return;let t=function(r,n){let s,a,o,l=new Map;for(let c=0;c<r.length;c++)s=r[c],a=s[n],l.has(a)?o=l.get(a):l.set(a,o=[]),o.push(s);return Array.from(l)}(this.appSegments,"type");this.mergedAppSegments=t.map(([r,n])=>{let s=Cr.get(r,this.options);return s.handleMultiSegments?{type:r,chunk:s.handleMultiSegments(n)}:n[0]})}getSegment(t){return this.appSegments.find(r=>r.type===t)}async getOrFindSegment(t){let r=this.getSegment(t);return r===void 0&&(await this.findAppSegments(0,[t]),r=this.getSegment(t)),r}}je(_b,"type","jpeg"),zC.set("jpeg",_b);const F6=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class M6 extends ua{parseHeader(){var t=this.chunk.getUint16();t===18761?this.le=!0:t===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(t,r,n=new Map){let{pick:s,skip:a}=this.options[r];s=new Set(s);let o=s.size>0,l=a.size===0,c=this.chunk.getUint16(t);t+=2;for(let d=0;d<c;d++){let u=this.chunk.getUint16(t);if(o){if(s.has(u)&&(n.set(u,this.parseTag(t,u,r)),s.delete(u),s.size===0))break}else!l&&a.has(u)||n.set(u,this.parseTag(t,u,r));t+=12}return n}parseTag(t,r,n){let{chunk:s}=this,a=s.getUint16(t+2),o=s.getUint32(t+4),l=F6[a];if(l*o<=4?t+=8:t=s.getUint32(t+8),(a<1||a>13)&&at(`Invalid TIFF value type. block: ${n.toUpperCase()}, tag: ${r.toString(16)}, type: ${a}, offset ${t}`),t>s.byteLength&&at(`Invalid TIFF value offset. block: ${n.toUpperCase()}, tag: ${r.toString(16)}, type: ${a}, offset ${t} is outside of chunk size ${s.byteLength}`),a===1)return s.getUint8Array(t,o);if(a===2)return(c=function(d){for(;d.endsWith("\0");)d=d.slice(0,-1);return d}(c=s.getString(t,o)).trim())===""?void 0:c;var c;if(a===7)return s.getUint8Array(t,o);if(o===1)return this.parseTagValue(a,t);{let d=new(function(h){switch(h){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}}(a))(o),u=l;for(let h=0;h<o;h++)d[h]=this.parseTagValue(a,t),t+=u;return d}}parseTagValue(t,r){let{chunk:n}=this;switch(t){case 1:return n.getUint8(r);case 3:return n.getUint16(r);case 4:return n.getUint32(r);case 5:return n.getUint32(r)/n.getUint32(r+4);case 6:return n.getInt8(r);case 8:return n.getInt16(r);case 9:return n.getInt32(r);case 10:return n.getInt32(r)/n.getInt32(r+4);case 11:return n.getFloat(r);case 12:return n.getDouble(r);case 13:return n.getUint32(r);default:at(`Invalid tiff type ${t}`)}}}class rp extends M6{static canHandle(t,r){return t.getUint8(r+1)===225&&t.getUint32(r+4)===1165519206&&t.getUint16(r+8)===0}async parse(){this.parseHeader();let{options:t}=this;return t.ifd0.enabled&&await this.parseIfd0Block(),t.exif.enabled&&await this.safeParse("parseExifBlock"),t.gps.enabled&&await this.safeParse("parseGpsBlock"),t.interop.enabled&&await this.safeParse("parseInteropBlock"),t.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(t){let r=this[t]();return r.catch!==void 0&&(r=r.catch(this.handleError)),r}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let t=this.chunk.getUint16(this.ifd0Offset),r=this.ifd0Offset+2+12*t;this.ifd1Offset=this.chunk.getUint32(r)}}parseBlock(t,r){let n=new Map;return this[r]=n,this.parseTags(t,r,n),n}async parseIfd0Block(){if(this.ifd0)return;let{file:t}=this;this.findIfd0Offset(),this.ifd0Offset<8&&at("Malformed EXIF data"),!t.chunked&&this.ifd0Offset>t.byteLength&&at(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${t.byteLength}`),t.tiff&&await t.ensureChunk(this.ifd0Offset,jb(this.options));let r=this.parseBlock(this.ifd0Offset,"ifd0");return r.size!==0?(this.exifOffset=r.get(34665),this.interopOffset=r.get(40965),this.gpsOffset=r.get(34853),this.xmp=r.get(700),this.iptc=r.get(33723),this.icc=r.get(34675),this.options.sanitize&&(r.delete(34665),r.delete(40965),r.delete(34853),r.delete(700),r.delete(33723),r.delete(34675)),r):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,jb(this.options));let t=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=t.get(40965)),this.makerNote=t.get(37500),this.userComment=t.get(37510),this.options.sanitize&&(t.delete(40965),t.delete(37500),t.delete(37510)),this.unpack(t,41728),this.unpack(t,41729),t}unpack(t,r){let n=t.get(r);n&&n.length===1&&t.set(r,n[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let t=this.parseBlock(this.gpsOffset,"gps");return t&&t.has(2)&&t.has(4)&&(t.set("latitude",Tb(...t.get(2),t.get(1))),t.set("longitude",Tb(...t.get(4),t.get(3)))),t}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(t=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||t))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let t=this.ifd1.get(513),r=this.ifd1.get(514);return this.chunk.getUint8Array(t,r)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let t,r,n,s={};for(r of nt)if(t=this[r],!UC(t))if(n=this.canTranslate?this.translateBlock(t,r):Object.fromEntries(t),this.options.mergeOutput){if(r==="ifd1")continue;Object.assign(s,n)}else s[r]=n;return this.makerNote&&(s.makerNote=this.makerNote),this.userComment&&(s.userComment=this.userComment),s}assignToOutput(t,r){if(this.globalOptions.mergeOutput)Object.assign(t,r);else for(let[n,s]of Object.entries(r))this.assignObjectToOutput(t,n,s)}}function Tb(e,t,r,n){var s=e+t/60+r/3600;return n!=="S"&&n!=="W"||(s*=-1),s}je(rp,"type","tiff"),je(rp,"headerLength",10),Cr.set("tiff",rp);const bv={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1};Object.assign({},bv,{firstChunkSize:4e4,gps:[1,2,3,4]});Object.assign({},bv,{tiff:!1,ifd1:!0,mergeOutput:!1});const A6=Object.assign({},bv,{firstChunkSize:4e4,ifd0:[274]});async function I6(e){let t=new E6(A6);await t.read(e);let r=await t.parse();if(r&&r.ifd0)return r.ifd0[274]}const O6=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let Zo=!0,el=!0;if(typeof navigator=="object"){let e=navigator.userAgent;if(e.includes("iPad")||e.includes("iPhone")){let t=e.match(/OS (\d+)_(\d+)/);if(t){let[,r,n]=t;Zo=Number(r)+.1*Number(n)<13.4,el=!1}}else if(e.includes("OS X 10")){let[,t]=e.match(/OS X 10[_.](\d+)/);Zo=el=Number(t)<15}if(e.includes("Chrome/")){let[,t]=e.match(/Chrome\/(\d+)/);Zo=el=Number(t)<81}else if(e.includes("Firefox/")){let[,t]=e.match(/Firefox\/(\d+)/);Zo=el=Number(t)<77}}async function D6(e){let t=await I6(e);return Object.assign({canvas:Zo,css:el},O6[t])}class L6 extends Tr{constructor(...t){super(...t),je(this,"ranges",new $6),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(t,r,n){if(t===0&&this.byteLength===0&&n){let s=new DataView(n.buffer||n,n.byteOffset,n.byteLength);this._swapDataView(s)}else{let s=t+r;if(s>this.byteLength){let{dataView:a}=this._extend(s);this._swapDataView(a)}}}_extend(t){let r;r=$C?LC.allocUnsafe(t):new Uint8Array(t);let n=new DataView(r.buffer,r.byteOffset,r.byteLength);return r.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:r,dataView:n}}subarray(t,r,n=!1){return r=r||this._lengthToEnd(t),n&&this._tryExtend(t,r),this.ranges.add(t,r),super.subarray(t,r)}set(t,r,n=!1){n&&this._tryExtend(r,t.byteLength,t);let s=super.set(t,r);return this.ranges.add(r,s.byteLength),s}async ensureChunk(t,r){this.chunked&&(this.ranges.available(t,r)||await this.readChunk(t,r))}available(t,r){return this.ranges.available(t,r)}}class $6{constructor(){je(this,"list",[])}get length(){return this.list.length}add(t,r,n=0){let s=t+r,a=this.list.filter(o=>Rb(t,o.offset,s)||Rb(t,o.end,s));if(a.length>0){t=Math.min(t,...a.map(l=>l.offset)),s=Math.max(s,...a.map(l=>l.end)),r=s-t;let o=a.shift();o.offset=t,o.length=r,o.end=s,this.list=this.list.filter(l=>!a.includes(l))}else this.list.push({offset:t,length:r,end:s})}available(t,r){let n=t+r;return this.list.some(s=>s.offset<=t&&n<=s.end)}}function Rb(e,t,r){return e<=t&&t<=r}class U6 extends L6{constructor(t,r){super(0),je(this,"chunksRead",0),this.input=t,this.options=r}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(t=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let r=this.options.chunkSize,n=await this.readChunk(t,r);return!!n&&n.byteLength===r}async readChunk(t,r){if(this.chunksRead++,(r=this.safeWrapAddress(t,r))!==0)return this._readChunk(t,r)}safeWrapAddress(t,r){return this.size!==void 0&&t+r>this.size?Math.max(0,this.size-t):r}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}yv.set("blob",class extends U6{async readWhole(){this.chunked=!1;let e=await Zm(this.input);this._swapArrayBuffer(e)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(e,t){let r=t?e+t:void 0,n=this.input.slice(e,r),s=await Zm(n);return this.set(s,e,!0)}});const z6="@uppy/thumbnail-generator",B6="Uppy plugin that generates small previews of images to show on your upload UI.",V6="4.2.2",H6="MIT",W6="lib/index.js",q6="module",K6={build:"tsc --build tsconfig.build.json",typecheck:"tsc --build",test:"vitest run --environment=jsdom --silent='passed-only'"},G6=["file uploader","uppy","uppy-plugin","thumbnail","preview","resize"],Q6="https://uppy.io",Y6={url:"https://github.com/transloadit/uppy/issues"},X6={type:"git",url:"git+https://github.com/transloadit/uppy.git"},J6=["src","lib","dist","CHANGELOG.md"],Z6={"@uppy/utils":"^6.2.2",exifr:"^7.0.0"},eU={jsdom:"^26.1.0","namespace-emitter":"2.0.1",typescript:"^5.8.3",vitest:"^3.2.4"},tU={"@uppy/core":"^4.5.2"},rU={name:z6,description:B6,version:V6,license:H6,main:W6,type:q6,scripts:K6,keywords:G6,homepage:Q6,bugs:Y6,repository:X6,files:J6,dependencies:Z6,devDependencies:eU,peerDependencies:tU},nU={strings:{generatingThumbnails:"Generating thumbnails..."}};function sU(e,t,r){try{e.getContext("2d").getImageData(0,0,1,1)}catch(n){if(n.code===18)return Promise.reject(new Error("cannot read image, probably an svg with external resources"))}return e.toBlob?new Promise(n=>{e.toBlob(n,t,r)}).then(n=>{if(n===null)throw new Error("cannot read image, probably an svg with external resources");return n}):Promise.resolve().then(()=>N6(e.toDataURL(t,r),{})).then(n=>{if(n===null)throw new Error("could not extract blob, probably an old browser");return n})}function iU(e,t){let r=e.width,n=e.height;(t.deg===90||t.deg===270)&&(r=e.height,n=e.width);const s=document.createElement("canvas");s.width=r,s.height=n;const a=s.getContext("2d");return a.translate(r/2,n/2),t.canvas&&(a.rotate(t.rad),a.scale(t.scaleX,t.scaleY)),a.drawImage(e,-e.width/2,-e.height/2,e.width,e.height),s}function aU(e){const t=e.width/e.height,r=5e6,n=4096;let s=Math.floor(Math.sqrt(r*t)),a=Math.floor(r/Math.sqrt(r*t));if(s>n&&(s=n,a=Math.round(s/t)),a>n&&(a=n,s=Math.round(t*a)),e.width>s){const o=document.createElement("canvas");return o.width=s,o.height=a,o.getContext("2d").drawImage(e,0,0,s,a),o}return e}const oU={thumbnailWidth:null,thumbnailHeight:null,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,lazy:!1};class WC extends mo{constructor(r,n){super(r,{...oU,...n});O(this,"queue");O(this,"queueProcessing");O(this,"defaultThumbnailDimension");O(this,"thumbnailType");O(this,"onFileAdded",r=>{!r.preview&&r.data&&wb(r.type)&&!r.isRemote&&this.addToQueue(r.id)});O(this,"onCancelRequest",r=>{const n=this.queue.indexOf(r.id);n!==-1&&this.queue.splice(n,1)});O(this,"onFileRemoved",r=>{const n=this.queue.indexOf(r.id);n!==-1&&this.queue.splice(n,1),r.preview&&bb(r.preview)&&URL.revokeObjectURL(r.preview)});O(this,"onRestored",()=>{this.uppy.getFiles().filter(n=>n.isRestored).forEach(n=>{(!n.preview||bb(n.preview))&&this.addToQueue(n.id)})});O(this,"onAllFilesRemoved",()=>{this.queue=[]});O(this,"waitUntilAllProcessed",r=>{r.forEach(s=>{const a=this.uppy.getFile(s);this.uppy.emit("preprocess-progress",a,{mode:"indeterminate",message:this.i18n("generatingThumbnails")})});const n=()=>{r.forEach(s=>{const a=this.uppy.getFile(s);this.uppy.emit("preprocess-complete",a)})};return new Promise(s=>{this.queueProcessing?this.uppy.once("thumbnail:all-generated",()=>{n(),s()}):(n(),s())})});if(this.type="modifier",this.id=this.opts.id||"ThumbnailGenerator",this.title="Thumbnail Generator",this.queue=[],this.queueProcessing=!1,this.defaultThumbnailDimension=200,this.thumbnailType=this.opts.thumbnailType,this.defaultLocale=nU,this.i18nInit(),this.opts.lazy&&this.opts.waitForThumbnailsBeforeUpload)throw new Error("ThumbnailGenerator: The `lazy` and `waitForThumbnailsBeforeUpload` options are mutually exclusive. Please ensure at most one of them is set to `true`.")}createThumbnail(r,n,s){const a=URL.createObjectURL(r.data),o=new Promise((c,d)=>{const u=new Image;u.src=a,u.addEventListener("load",()=>{URL.revokeObjectURL(a),c(u)}),u.addEventListener("error",h=>{URL.revokeObjectURL(a),d(h.error||new Error("Could not create thumbnail"))})}),l=D6(r.data).catch(()=>1);return Promise.all([o,l]).then(([c,d])=>{const u=this.getProportionalDimensions(c,n,s,d.deg),h=iU(c,d),p=this.resizeImage(h,u.width,u.height);return sU(p,this.thumbnailType,80)}).then(c=>URL.createObjectURL(c))}getProportionalDimensions(r,n,s,a){let o=r.width/r.height;return(a===90||a===270)&&(o=r.height/r.width),n!=null?{width:n,height:Math.round(n/o)}:s!=null?{width:Math.round(s*o),height:s}:{width:this.defaultThumbnailDimension,height:Math.round(this.defaultThumbnailDimension/o)}}resizeImage(r,n,s){let a=aU(r),o=Math.ceil(Math.log2(a.width/n));o<1&&(o=1);let l=n*2**(o-1),c=s*2**(o-1);const d=2;for(;o--;){const u=document.createElement("canvas");u.width=l,u.height=c,u.getContext("2d").drawImage(a,0,0,l,c),a=u,l=Math.round(l/d),c=Math.round(c/d)}return a}setPreviewURL(r,n){this.uppy.setFileState(r,{preview:n})}addToQueue(r){this.queue.push(r),this.queueProcessing===!1&&this.processQueue()}processQueue(){if(this.queueProcessing=!0,this.queue.length>0){const r=this.uppy.getFile(this.queue.shift());return r?this.requestThumbnail(r).catch(()=>{}).then(()=>this.processQueue()):(this.uppy.log("[ThumbnailGenerator] file was removed before a thumbnail could be generated, but not removed from the queue. This is probably a bug","error"),Promise.resolve())}return this.queueProcessing=!1,this.uppy.log("[ThumbnailGenerator] Emptied thumbnail queue"),this.uppy.emit("thumbnail:all-generated"),Promise.resolve()}requestThumbnail(r){return wb(r.type)&&!r.isRemote?this.createThumbnail(r,this.opts.thumbnailWidth,this.opts.thumbnailHeight).then(n=>{this.setPreviewURL(r.id,n),this.uppy.log(`[ThumbnailGenerator] Generated thumbnail for ${r.id}`),this.uppy.emit("thumbnail:generated",this.uppy.getFile(r.id),n)}).catch(n=>{this.uppy.log(`[ThumbnailGenerator] Failed thumbnail for ${r.id}:`,"warning"),this.uppy.log(n,"warning"),this.uppy.emit("thumbnail:error",this.uppy.getFile(r.id),n)}):Promise.resolve()}install(){this.uppy.on("file-removed",this.onFileRemoved),this.uppy.on("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("thumbnail:cancel",this.onCancelRequest)):(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("file-added",this.onFileAdded),this.uppy.on("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.addPreProcessor(this.waitUntilAllProcessed)}uninstall(){this.uppy.off("file-removed",this.onFileRemoved),this.uppy.off("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("thumbnail:cancel",this.onCancelRequest)):(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("file-added",this.onFileAdded),this.uppy.off("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.removePreProcessor(this.waitUntilAllProcessed)}}O(WC,"VERSION",rU.version);function Fb(e){if(typeof e=="string"){const t=document.querySelectorAll(e);return t.length===0?null:Array.from(t)}return typeof e=="object"&&X2(e)?[e]:null}const gl=Array.from;function lU(e){const t=gl(e.files);return Promise.resolve(t)}function qC(e,t,r,{onSuccess:n}){e.readEntries(s=>{const a=[...t,...s];s.length?queueMicrotask(()=>{qC(e,a,r,{onSuccess:n})}):n(a)},s=>{r(s),n(t)})}function KC(e,t){return e==null?e:{kind:e.isFile?"file":e.isDirectory?"directory":void 0,name:e.name,getFile(){return new Promise((r,n)=>e.file(r,n))},async*values(){const r=e.createReader();yield*await new Promise(s=>{qC(r,[],t,{onSuccess:a=>s(a.map(o=>KC(o,t)))})})},isSameEntry:void 0}}async function*GC(e,t,r=void 0){const n=()=>`${t}/${e.name}`;if(e.kind==="file"){const s=await e.getFile();s!=null?(s.relativePath=t?n():null,yield s):r!=null&&(yield r)}else if(e.kind==="directory")for await(const s of e.values())yield*GC(s,t?n():e.name);else r!=null&&(yield r)}async function*cU(e,t){const r=await Promise.all(Array.from(e.items,async n=>{let s;return s??(s=KC(typeof n.getAsEntry=="function"?n.getAsEntry():n.webkitGetAsEntry(),t)),{fileSystemHandle:s,lastResortFile:n.getAsFile()}}));for(const{lastResortFile:n,fileSystemHandle:s}of r)if(s!=null)try{yield*GC(s,"",n)}catch(a){n!=null?yield n:t(a)}else n!=null&&(yield n)}async function dU(e,t){const r=(t==null?void 0:t.logDropError)??Function.prototype;try{const n=[];for await(const s of cU(e,r))n.push(s);return n}catch{return lU(e)}}let uU="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",QC=(e=21)=>{let t="",r=e|0;for(;r--;)t+=uU[Math.random()*64|0];return t};const hU="@uppy/dashboard",fU="Universal UI plugin for Uppy.",pU="4.4.3",mU="MIT",gU="lib/index.js",yU="dist/style.min.css",vU="module",xU={build:"tsc --build tsconfig.build.json","build:css":"sass --load-path=../../ src/style.scss dist/style.css && postcss dist/style.css -u cssnano -o dist/style.min.css",typecheck:"tsc --build",test:"vitest run --silent='passed-only'","test:e2e":"vitest watch --project browser --browser.headless false"},bU=["file uploader","uppy","uppy-plugin","dashboard","ui"],wU="https://uppy.io",NU={url:"https://github.com/transloadit/uppy/issues"},jU={type:"git",url:"git+https://github.com/transloadit/uppy.git"},SU=["src","lib","dist","CHANGELOG.md"],kU={"@transloadit/prettier-bytes":"^0.3.4","@uppy/informer":"^4.3.2","@uppy/provider-views":"^4.5.2","@uppy/status-bar":"^4.2.3","@uppy/thumbnail-generator":"^4.2.2","@uppy/utils":"^6.2.2",classnames:"^2.2.6",lodash:"^4.17.21",nanoid:"^5.0.9",preact:"^10.5.13","shallow-equal":"^3.0.0"},CU={"@uppy/core":"^4.5.2","@uppy/google-drive":"^4.4.2","@uppy/status-bar":"^4.2.3","@uppy/url":"^4.3.2","@uppy/webcam":"^4.3.2","@vitest/browser":"^3.2.4",cssnano:"^7.0.7",jsdom:"^26.1.0",postcss:"^8.5.6","postcss-cli":"^11.0.1","resize-observer-polyfill":"^1.5.0",sass:"^1.89.2",typescript:"^5.8.3",vitest:"^3.2.4"},PU={"@uppy/core":"^4.5.2"},EU={name:hU,description:fU,version:pU,license:mU,main:gU,style:yU,type:vU,scripts:xU,keywords:bU,homepage:wU,bugs:NU,repository:jU,files:SU,dependencies:kU,devDependencies:CU,peerDependencies:PU};function _U(){const e=document.body;return!(!("draggable"in e)||!("ondragstart"in e&&"ondrop"in e)||!("FormData"in window)||!("FileReader"in window))}class YC extends Dt{constructor(){super(...arguments);O(this,"fileInput",null);O(this,"folderInput",null);O(this,"mobilePhotoFileInput",null);O(this,"mobileVideoFileInput",null);O(this,"triggerFileInputClick",()=>{var r;(r=this.fileInput)==null||r.click()});O(this,"triggerFolderInputClick",()=>{var r;(r=this.folderInput)==null||r.click()});O(this,"triggerVideoCameraInputClick",()=>{var r;(r=this.mobileVideoFileInput)==null||r.click()});O(this,"triggerPhotoCameraInputClick",()=>{var r;(r=this.mobilePhotoFileInput)==null||r.click()});O(this,"onFileInputChange",r=>{this.props.handleInputChange(r),r.currentTarget.value=""});O(this,"renderHiddenInput",(r,n)=>{var s;return E("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,webkitdirectory:r,type:"file",name:"files[]",multiple:this.props.maxNumberOfFiles!==1,onChange:this.onFileInputChange,accept:(s=this.props.allowedFileTypes)==null?void 0:s.join(", "),ref:n})});O(this,"renderHiddenCameraInput",(r,n,s)=>{const o={photo:"image/*",video:"video/*"}[r];return E("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,type:"file",name:`camera-${r}`,onChange:this.onFileInputChange,capture:n===""?"environment":n,accept:o,ref:s})});O(this,"renderMyDeviceAcquirer",()=>E("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MyDevice",children:E("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerFileInputClick,children:[E("div",{className:"uppy-DashboardTab-inner",children:E("svg",{className:"uppy-DashboardTab-iconMyDevice","aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32",children:E("path",{d:"M8.45 22.087l-1.305-6.674h17.678l-1.572 6.674H8.45zm4.975-12.412l1.083 1.765a.823.823 0 00.715.386h7.951V13.5H8.587V9.675h4.838zM26.043 13.5h-1.195v-2.598c0-.463-.336-.75-.798-.75h-8.356l-1.082-1.766A.823.823 0 0013.897 8H7.728c-.462 0-.815.256-.815.718V13.5h-.956a.97.97 0 00-.746.37.972.972 0 00-.19.81l1.724 8.565c.095.44.484.755.933.755H24c.44 0 .824-.3.929-.727l2.043-8.568a.972.972 0 00-.176-.825.967.967 0 00-.753-.38z",fill:"currentcolor","fill-rule":"evenodd"})})}),E("div",{className:"uppy-DashboardTab-name",children:this.props.i18n("myDevice")})]})}));O(this,"renderPhotoCamera",()=>E("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobilePhotoCamera",children:E("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerPhotoCameraInputClick,children:[E("div",{className:"uppy-DashboardTab-inner",children:E("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32",children:E("path",{d:"M23.5 9.5c1.417 0 2.5 1.083 2.5 2.5v9.167c0 1.416-1.083 2.5-2.5 2.5h-15c-1.417 0-2.5-1.084-2.5-2.5V12c0-1.417 1.083-2.5 2.5-2.5h2.917l1.416-2.167C13 7.167 13.25 7 13.5 7h5c.25 0 .5.167.667.333L20.583 9.5H23.5zM16 11.417a4.706 4.706 0 00-4.75 4.75 4.704 4.704 0 004.75 4.75 4.703 4.703 0 004.75-4.75c0-2.663-2.09-4.75-4.75-4.75zm0 7.825c-1.744 0-3.076-1.332-3.076-3.074 0-1.745 1.333-3.077 3.076-3.077 1.744 0 3.074 1.333 3.074 3.076s-1.33 3.075-3.074 3.075z",fill:"#02B383","fill-rule":"nonzero"})})}),E("div",{className:"uppy-DashboardTab-name",children:this.props.i18n("takePictureBtn")})]})}));O(this,"renderVideoCamera",()=>E("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobileVideoCamera",children:E("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerVideoCameraInputClick,children:[E("div",{className:"uppy-DashboardTab-inner",children:E("svg",{"aria-hidden":"true",width:"32",height:"32",viewBox:"0 0 32 32",children:E("path",{fill:"#FF675E",fillRule:"nonzero",d:"m21.254 14.277 2.941-2.588c.797-.313 1.243.818 1.09 1.554-.01 2.094.02 4.189-.017 6.282-.126.915-1.145 1.08-1.58.34l-2.434-2.142c-.192.287-.504 1.305-.738.468-.104-1.293-.028-2.596-.05-3.894.047-.312.381.823.426 1.069.063-.384.206-.744.362-1.09zm-12.939-3.73c3.858.013 7.717-.025 11.574.02.912.129 1.492 1.237 1.351 2.217-.019 2.412.04 4.83-.03 7.239-.17 1.025-1.166 1.59-2.029 1.429-3.705-.012-7.41.025-11.114-.019-.913-.129-1.492-1.237-1.352-2.217.018-2.404-.036-4.813.029-7.214.136-.82.83-1.473 1.571-1.454z "})})}),E("div",{className:"uppy-DashboardTab-name",children:this.props.i18n("recordVideoBtn")})]})}));O(this,"renderBrowseButton",(r,n)=>{const s=this.props.acquirers.length;return E("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-browse",onClick:n,"data-uppy-super-focusable":s===0,children:r})});O(this,"renderDropPasteBrowseTagline",r=>{const n=this.renderBrowseButton(this.props.i18n("browseFiles"),this.triggerFileInputClick),s=this.renderBrowseButton(this.props.i18n("browseFolders"),this.triggerFolderInputClick),a=this.props.fileManagerSelectionType,o=a.charAt(0).toUpperCase()+a.slice(1);return E("div",{class:"uppy-Dashboard-AddFiles-title",children:this.props.disableLocalFiles?this.props.i18n("importFiles"):r>0?this.props.i18nArray(`dropPasteImport${o}`,{browseFiles:n,browseFolders:s,browse:n}):this.props.i18nArray(`dropPaste${o}`,{browseFiles:n,browseFolders:s,browse:n})})});O(this,"renderAcquirer",r=>{var n;return E("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":r.id,children:E("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-cy":r.id,"aria-controls":`uppy-DashboardContent-panel--${r.id}`,"aria-selected":((n=this.props.activePickerPanel)==null?void 0:n.id)===r.id,"data-uppy-super-focusable":!0,onClick:()=>this.props.showPanel(r.id),children:[E("div",{className:"uppy-DashboardTab-inner",children:r.icon()}),E("div",{className:"uppy-DashboardTab-name",children:r.name})]})})});O(this,"renderAcquirers",r=>{const n=[...r],s=n.splice(r.length-2,r.length);return E(Fr,{children:[n.map(a=>this.renderAcquirer(a)),E("span",{role:"presentation",style:{"white-space":"nowrap"},children:s.map(a=>this.renderAcquirer(a))})]})});O(this,"renderSourcesList",(r,n)=>{const{showNativePhotoCameraButton:s,showNativeVideoCameraButton:a}=this.props;let o=[];const l="myDevice";n||o.push({key:l,elements:this.renderMyDeviceAcquirer()}),s&&o.push({key:"nativePhotoCameraButton",elements:this.renderPhotoCamera()}),a&&o.push({key:"nativePhotoCameraButton",elements:this.renderVideoCamera()}),o.push(...r.map(h=>({key:h.id,elements:this.renderAcquirer(h)}))),o.length===1&&o[0].key===l&&(o=[]);const d=[...o],u=d.splice(o.length-2,o.length);return E(Fr,{children:[this.renderDropPasteBrowseTagline(o.length),E("div",{className:"uppy-Dashboard-AddFiles-list",role:"tablist",children:[d.map(({key:h,elements:p})=>E(Fr,{children:p},h)),E("span",{role:"presentation",style:{"white-space":"nowrap"},children:u.map(({key:h,elements:p})=>E(Fr,{children:p},h))})]})]})})}[Symbol.for("uppy test: disable unused locale key warning")](){this.props.i18nArray("dropPasteBoth"),this.props.i18nArray("dropPasteFiles"),this.props.i18nArray("dropPasteFolders"),this.props.i18nArray("dropPasteImportBoth"),this.props.i18nArray("dropPasteImportFiles"),this.props.i18nArray("dropPasteImportFolders")}renderPoweredByUppy(){const{i18nArray:r}=this.props,n=E("span",{children:[E("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-poweredByIcon",width:"11",height:"11",viewBox:"0 0 11 11",children:E("path",{d:"M7.365 10.5l-.01-4.045h2.612L5.5.806l-4.467 5.65h2.604l.01 4.044h3.718z",fillRule:"evenodd"})}),E("span",{className:"uppy-Dashboard-poweredByUppy",children:"Uppy"})]}),s=r("poweredBy",{uppy:n});return E("a",{tabIndex:-1,href:"https://uppy.io",rel:"noreferrer noopener",target:"_blank",className:"uppy-Dashboard-poweredBy",children:s})}render(){const{showNativePhotoCameraButton:r,showNativeVideoCameraButton:n,nativeCameraFacingMode:s}=this.props;return E("div",{className:"uppy-Dashboard-AddFiles",children:[this.renderHiddenInput(!1,a=>{this.fileInput=a}),this.renderHiddenInput(!0,a=>{this.folderInput=a}),r&&this.renderHiddenCameraInput("photo",s,a=>{this.mobilePhotoFileInput=a}),n&&this.renderHiddenCameraInput("video",s,a=>{this.mobileVideoFileInput=a}),this.renderSourcesList(this.props.acquirers,this.props.disableLocalFiles),E("div",{className:"uppy-Dashboard-AddFiles-info",children:[this.props.note&&E("div",{className:"uppy-Dashboard-note",children:this.props.note}),this.props.proudlyDisplayPoweredByUppy&&this.renderPoweredByUppy()]})]})}}const TU=e=>E("div",{className:Br("uppy-Dashboard-AddFilesPanel",e.className),"data-uppy-panelType":"AddFiles","aria-hidden":!e.showAddFilesPanel,children:[E("div",{className:"uppy-DashboardContent-bar",children:[E("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:e.i18n("addingMoreFiles")}),E("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>e.toggleAddFilesPanel(!1),children:e.i18n("back")})]}),E(YC,{...e})]});function RU(e){const t=e.files[e.fileCardFor],r=()=>{e.uppy.emit("file-editor:cancel",t),e.closeFileEditor()};return E("div",{className:Br("uppy-DashboardContent-panel",e.className),role:"tabpanel","data-uppy-panelType":"FileEditor",id:"uppy-DashboardContent-panel--editor",children:[E("div",{className:"uppy-DashboardContent-bar",children:[E("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:e.i18nArray("editing",{file:E("span",{className:"uppy-DashboardContent-titleFile",children:t.meta?t.meta.name:t.name})})}),E("button",{className:"uppy-DashboardContent-back",type:"button",onClick:r,children:e.i18n("cancel")}),E("button",{className:"uppy-DashboardContent-save",type:"button",onClick:e.saveFileEditor,children:e.i18n("save")})]}),E("div",{className:"uppy-DashboardContent-panelBody",children:e.editors.map(n=>e.uppy.getPlugin(n.id).render(e.state))})]})}function FU(){return E("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25",children:E("g",{fill:"#686DE0",fillRule:"evenodd",children:[E("path",{d:"M5 7v10h15V7H5zm0-1h15a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1z",fillRule:"nonzero"}),E("path",{d:"M6.35 17.172l4.994-5.026a.5.5 0 0 1 .707 0l2.16 2.16 3.505-3.505a.5.5 0 0 1 .707 0l2.336 2.31-.707.72-1.983-1.97-3.505 3.505a.5.5 0 0 1-.707 0l-2.16-2.159-3.938 3.939-1.409.026z",fillRule:"nonzero"}),E("circle",{cx:"7.5",cy:"9.5",r:"1.5"})]})})}function MU(){return E("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:E("path",{d:"M9.5 18.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V7.25a.5.5 0 0 1 .379-.485l9-2.25A.5.5 0 0 1 18.5 5v11.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V8.67l-8 2v7.97zm8-11v-2l-8 2v2l8-2zM7 19.64c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1zm9-2c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1z",fill:"#049BCF",fillRule:"nonzero"})})}function AU(){return E("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:E("path",{d:"M16 11.834l4.486-2.691A1 1 0 0 1 22 10v6a1 1 0 0 1-1.514.857L16 14.167V17a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v2.834zM15 9H5v8h10V9zm1 4l5 3v-6l-5 3z",fill:"#19AF67",fillRule:"nonzero"})})}function IU(){return E("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:E("path",{d:"M9.766 8.295c-.691-1.843-.539-3.401.747-3.726 1.643-.414 2.505.938 2.39 3.299-.039.79-.194 1.662-.537 3.148.324.49.66.967 1.055 1.51.17.231.382.488.629.757 1.866-.128 3.653.114 4.918.655 1.487.635 2.192 1.685 1.614 2.84-.566 1.133-1.839 1.084-3.416.249-1.141-.604-2.457-1.634-3.51-2.707a13.467 13.467 0 0 0-2.238.426c-1.392 4.051-4.534 6.453-5.707 4.572-.986-1.58 1.38-4.206 4.914-5.375.097-.322.185-.656.264-1.001.08-.353.306-1.31.407-1.737-.678-1.059-1.2-2.031-1.53-2.91zm2.098 4.87c-.033.144-.068.287-.104.427l.033-.01-.012.038a14.065 14.065 0 0 1 1.02-.197l-.032-.033.052-.004a7.902 7.902 0 0 1-.208-.271c-.197-.27-.38-.526-.555-.775l-.006.028-.002-.003c-.076.323-.148.632-.186.8zm5.77 2.978c1.143.605 1.832.632 2.054.187.26-.519-.087-1.034-1.113-1.473-.911-.39-2.175-.608-3.55-.608.845.766 1.787 1.459 2.609 1.894zM6.559 18.789c.14.223.693.16 1.425-.413.827-.648 1.61-1.747 2.208-3.206-2.563 1.064-4.102 2.867-3.633 3.62zm5.345-10.97c.088-1.793-.351-2.48-1.146-2.28-.473.119-.564 1.05-.056 2.405.213.566.52 1.188.908 1.859.18-.858.268-1.453.294-1.984z",fill:"#E2514A",fillRule:"nonzero"})})}function OU(){return E("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25",children:E("path",{d:"M10.45 2.05h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V2.55a.5.5 0 0 1 .5-.5zm2.05 1.024h1.05a.5.5 0 0 1 .5.5V3.6a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5v-.001zM10.45 0h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V.5a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 3.074h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 1.024h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm-2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-1.656 3.074l-.82 5.946c.52.302 1.174.458 1.976.458.803 0 1.455-.156 1.975-.458l-.82-5.946h-2.311zm0-1.025h2.312c.512 0 .946.378 1.015.885l.82 5.946c.056.412-.142.817-.501 1.026-.686.398-1.515.597-2.49.597-.974 0-1.804-.199-2.49-.597a1.025 1.025 0 0 1-.5-1.026l.819-5.946c.07-.507.503-.885 1.015-.885zm.545 6.6a.5.5 0 0 1-.397-.561l.143-.999a.5.5 0 0 1 .495-.429h.74a.5.5 0 0 1 .495.43l.143.998a.5.5 0 0 1-.397.561c-.404.08-.819.08-1.222 0z",fill:"#00C469",fillRule:"nonzero"})})}function DU(){return E("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:E("g",{fill:"#A7AFB7",fillRule:"nonzero",children:[E("path",{d:"M5.5 22a.5.5 0 0 1-.5-.5v-18a.5.5 0 0 1 .5-.5h10.719a.5.5 0 0 1 .367.16l3.281 3.556a.5.5 0 0 1 .133.339V21.5a.5.5 0 0 1-.5.5h-14zm.5-1h13V7.25L16 4H6v17z"}),E("path",{d:"M15 4v3a1 1 0 0 0 1 1h3V7h-3V4h-1z"})]})})}function LU(){return E("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:E("path",{d:"M4.5 7h13a.5.5 0 1 1 0 1h-13a.5.5 0 0 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h10a.5.5 0 1 1 0 1h-10a.5.5 0 1 1 0-1z",fill:"#5A5E69",fillRule:"nonzero"})})}function wv(e){const t={color:"#838999",icon:DU()};if(!e)return t;const r=e.split("/")[0],n=e.split("/")[1];return r==="text"?{color:"#5a5e69",icon:LU()}:r==="image"?{color:"#686de0",icon:FU()}:r==="audio"?{color:"#068dbb",icon:MU()}:r==="video"?{color:"#19af67",icon:AU()}:r==="application"&&n==="pdf"?{color:"#e25149",icon:IU()}:r==="application"&&["zip","x-7z-compressed","x-zip-compressed","x-rar-compressed","x-tar","x-gzip","x-apple-diskimage"].indexOf(n)!==-1?{color:"#00C469",icon:OU()}:t}function js(e){const{tagName:t}=e.target;if(t==="INPUT"||t==="TEXTAREA"){e.stopPropagation();return}e.preventDefault(),e.stopPropagation()}function XC(e){const{file:t}=e;if(t.preview)return E("img",{draggable:!1,className:"uppy-Dashboard-Item-previewImg",alt:t.name,src:t.preview});const{color:r,icon:n}=wv(t.type);return E("div",{className:"uppy-Dashboard-Item-previewIconWrap",children:[E("span",{className:"uppy-Dashboard-Item-previewIcon",style:{color:r},children:n}),E("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-Dashboard-Item-previewIconBg",width:"58",height:"76",viewBox:"0 0 58 76",children:E("rect",{fill:"#FFF",width:"58",height:"76",rx:"3",fillRule:"evenodd"})})]})}function $U(e){const{computedMetaFields:t,requiredMetaFields:r,updateMeta:n,form:s,formState:a}=e,o={text:"uppy-u-reset uppy-c-textInput uppy-Dashboard-FileCard-input"};return t.map(l=>{const c=`uppy-Dashboard-FileCard-input-${l.id}`,d=r.includes(l.id);return E("fieldset",{className:"uppy-Dashboard-FileCard-fieldset",children:[E("label",{className:"uppy-Dashboard-FileCard-label",htmlFor:c,children:l.name}),l.render!==void 0?l.render({value:a[l.id],onChange:u=>n(u,l.id),fieldCSSClasses:o,required:d,form:s.id},Hl):E("input",{className:o.text,id:c,form:s.id,type:l.type||"text",required:d,value:a[l.id],placeholder:l.placeholder,onInput:u=>n(u.target.value,l.id),"data-uppy-super-focusable":!0})]},l.id)})}function UU(e){const{files:t,fileCardFor:r,toggleFileCard:n,saveFileCard:s,metaFields:a,requiredMetaFields:o,openFileEditor:l,i18n:c,i18nArray:d,className:u,canEditFile:h}=e,p=()=>typeof a=="function"?a(t[r]):a,m=t[r],x=p()??[],y=h(m),w={};x.forEach(S=>{w[S.id]=m.meta[S.id]??""});const[v,g]=Lu(w),b=HO(S=>{S.preventDefault(),s(v,r)},[s,v,r]),j=(S,_)=>{g({...v,[_]:S})},k=()=>{n(!1)},[C]=Lu(()=>{const S=document.createElement("form");return S.setAttribute("tabindex","-1"),S.id=QC(),S});return Um(()=>(document.body.appendChild(C),C.addEventListener("submit",b),()=>{C.removeEventListener("submit",b),document.body.removeChild(C)}),[C,b]),E("div",{className:Br("uppy-Dashboard-FileCard",u),"data-uppy-panelType":"FileCard",onDragOver:js,onDragLeave:js,onDrop:js,onPaste:js,children:[E("div",{className:"uppy-DashboardContent-bar",children:[E("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:d("editing",{file:E("span",{className:"uppy-DashboardContent-titleFile",children:m.meta?m.meta.name:m.name})})}),E("button",{className:"uppy-DashboardContent-back",type:"button",form:C.id,title:c("finishEditingFile"),onClick:k,children:c("cancel")})]}),E("div",{className:"uppy-Dashboard-FileCard-inner",children:[E("div",{className:"uppy-Dashboard-FileCard-preview",style:{backgroundColor:wv(m.type).color},children:[E(XC,{file:m}),y&&E("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-FileCard-edit",onClick:S=>{b(S),l(m)},children:c("editImage")})]}),E("div",{className:"uppy-Dashboard-FileCard-info",children:E($U,{computedMetaFields:x,requiredMetaFields:o,updateMeta:j,form:C,formState:v})}),E("div",{className:"uppy-Dashboard-FileCard-actions",children:[E("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Dashboard-FileCard-actionsBtn",type:"submit",form:C.id,children:c("saveChanges")}),E("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-link uppy-Dashboard-FileCard-actionsBtn",type:"button",onClick:k,form:C.id,children:c("cancel")})]})]})]})}function zU(e,t){if(e===t)return!0;if(!e||!t)return!1;const r=Object.keys(e),n=Object.keys(t),s=r.length;if(n.length!==s)return!1;for(let a=0;a<s;a++){const o=r[a];if(e[o]!==t[o]||!Object.prototype.hasOwnProperty.call(t,o))return!1}return!0}function BU(e,t="Copy the URL below"){return new Promise(r=>{const n=document.createElement("textarea");n.setAttribute("style",{position:"fixed",top:0,left:0,width:"2em",height:"2em",padding:0,border:"none",outline:"none",boxShadow:"none",background:"transparent"}),n.value=e,document.body.appendChild(n),n.select();const s=()=>{document.body.removeChild(n),window.prompt(t,e),r()};try{return document.execCommand("copy")?(document.body.removeChild(n),r()):s()}catch{return document.body.removeChild(n),s()}})}function VU({file:e,uploadInProgressOrComplete:t,metaFields:r,canEditFile:n,i18n:s,onClick:a}){return!t&&r&&r.length>0||!t&&n(e)?E("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-action uppy-Dashboard-Item-action--edit",type:"button","aria-label":s("editFileWithFilename",{file:e.meta.name}),title:s("editFileWithFilename",{file:e.meta.name}),onClick:()=>a(),children:E("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 14",children:E("g",{fillRule:"evenodd",children:[E("path",{d:"M1.5 10.793h2.793A1 1 0 0 0 5 10.5L11.5 4a1 1 0 0 0 0-1.414L9.707.793a1 1 0 0 0-1.414 0l-6.5 6.5A1 1 0 0 0 1.5 8v2.793zm1-1V8L9 1.5l1.793 1.793-6.5 6.5H2.5z",fillRule:"nonzero"}),E("rect",{x:"1",y:"12.293",width:"11",height:"1",rx:".5"}),E("path",{fillRule:"nonzero",d:"M6.793 2.5L9.5 5.207l.707-.707L7.5 1.793z"})]})})}):null}function HU({i18n:e,onClick:t,file:r}){return E("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--remove",type:"button","aria-label":e("removeFile",{file:r.meta.name}),title:e("removeFile",{file:r.meta.name}),onClick:()=>t(),children:E("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"18",height:"18",viewBox:"0 0 18 18",children:[E("path",{d:"M9 0C4.034 0 0 4.034 0 9s4.034 9 9 9 9-4.034 9-9-4.034-9-9-9z"}),E("path",{fill:"#FFF",d:"M13 12.222l-.778.778L9 9.778 5.778 13 5 12.222 8.222 9 5 5.778 5.778 5 9 8.222 12.222 5l.778.778L9.778 9z"})]})})}function WU({file:e,uppy:t,i18n:r}){const n=s=>{BU(e.uploadURL,r("copyLinkToClipboardFallback")).then(()=>{t.log("Link copied to clipboard."),t.info(r("copyLinkToClipboardSuccess"),"info",3e3)}).catch(t.log).then(()=>s.target.focus({preventScroll:!0}))};return E("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--copyLink",type:"button","aria-label":r("copyLink"),title:r("copyLink"),onClick:s=>n(s),children:E("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 12",children:E("path",{d:"M7.94 7.703a2.613 2.613 0 0 1-.626 2.681l-.852.851a2.597 2.597 0 0 1-1.849.766A2.616 2.616 0 0 1 2.764 7.54l.852-.852a2.596 2.596 0 0 1 2.69-.625L5.267 7.099a1.44 1.44 0 0 0-.833.407l-.852.851a1.458 1.458 0 0 0 1.03 2.486c.39 0 .755-.152 1.03-.426l.852-.852c.231-.231.363-.522.406-.824l1.04-1.038zm4.295-5.937A2.596 2.596 0 0 0 10.387 1c-.698 0-1.355.272-1.849.766l-.852.851a2.614 2.614 0 0 0-.624 2.688l1.036-1.036c.041-.304.173-.6.407-.833l.852-.852c.275-.275.64-.426 1.03-.426a1.458 1.458 0 0 1 1.03 2.486l-.852.851a1.442 1.442 0 0 1-.824.406l-1.04 1.04a2.596 2.596 0 0 0 2.683-.628l.851-.85a2.616 2.616 0 0 0 0-3.697zm-6.88 6.883a.577.577 0 0 0 .82 0l3.474-3.474a.579.579 0 1 0-.819-.82L5.355 7.83a.579.579 0 0 0 0 .819z"})})})}function qU(e){const{uppy:t,file:r,uploadInProgressOrComplete:n,canEditFile:s,metaFields:a,showLinkToFileUploadResult:o,showRemoveButton:l,i18n:c,toggleFileCard:d,openFileEditor:u}=e;return E("div",{className:"uppy-Dashboard-Item-actionWrapper",children:[E(VU,{i18n:c,file:r,uploadInProgressOrComplete:n,canEditFile:s,metaFields:a,onClick:()=>{a&&a.length>0?d(!0,r.id):u(r)}}),o&&r.uploadURL?E(WU,{file:r,uppy:t,i18n:c}):null,l?E(HU,{i18n:c,file:r,onClick:()=>t.removeFile(r.id)}):null]})}const np="...";function JC(e,t){if(t===0)return"";if(e.length<=t)return e;if(t<=np.length+1)return`${e.slice(0,t-1)}`;const r=t-np.length,n=Math.ceil(r/2),s=Math.floor(r/2);return e.slice(0,n)+np+e.slice(-s)}const KU=(e,t)=>(typeof t=="function"?t():t).filter(s=>s.id===e)[0].name;function ZC(e){const{file:t,toggleFileCard:r,i18n:n,metaFields:s}=e,{missingRequiredMetaFields:a}=t;if(!(a!=null&&a.length))return null;const o=a.map(l=>KU(l,s)).join(", ");return E("div",{className:"uppy-Dashboard-Item-errorMessage",children:[n("missingRequiredMetaFields",{smart_count:a.length,fields:o})," ",E("button",{type:"button",class:"uppy-u-reset uppy-Dashboard-Item-errorMessageBtn",onClick:()=>r(!0,t.id),children:n("editFile")})]})}const GU=e=>{const{author:t,name:r}=e.file.meta;function n(){return e.isSingleFile&&e.containerHeight>=350?90:e.containerWidth<=352?35:e.containerWidth<=576?60:t?20:30}return E("div",{className:"uppy-Dashboard-Item-name",title:r,children:JC(r,n())})},QU=e=>{var s;const{author:t}=e.file.meta,r=(s=e.file.remote)==null?void 0:s.providerName,n="";return t?E("div",{className:"uppy-Dashboard-Item-author",children:[E("a",{href:`${t.url}?utm_source=Companion&utm_medium=referral`,target:"_blank",rel:"noopener noreferrer",children:JC(t.name,13)}),r?E(Fr,{children:[` ${n} `,r,` ${n} `]}):null]}):null},YU=e=>e.file.size&&E("div",{className:"uppy-Dashboard-Item-statusSize",children:ii(e.file.size)}),XU=e=>e.file.isGhost&&E("span",{children:["  ",E("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-reSelect",type:"button",onClick:()=>e.toggleAddFilesPanel(!0),children:e.i18n("reSelect")})]}),JU=({file:e,onClick:t})=>e.error?E("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-errorDetails","aria-label":e.error,"data-microtip-position":"bottom","data-microtip-size":"medium",onClick:t,type:"button",children:"?"}):null;function ZU(e){const{file:t,i18n:r,toggleFileCard:n,metaFields:s,toggleAddFilesPanel:a,isSingleFile:o,containerHeight:l,containerWidth:c}=e;return E("div",{className:"uppy-Dashboard-Item-fileInfo","data-uppy-file-source":t.source,children:[E("div",{className:"uppy-Dashboard-Item-fileName",children:[GU({file:t,isSingleFile:o,containerHeight:l,containerWidth:c}),E(JU,{file:t,onClick:()=>alert(t.error)})]}),E("div",{className:"uppy-Dashboard-Item-status",children:[QU({file:t}),YU({file:t}),XU({file:t,toggleAddFilesPanel:a,i18n:r})]}),E(ZC,{file:t,i18n:r,toggleFileCard:n,metaFields:s})]})}function e8(e){const{file:t,i18n:r,toggleFileCard:n,metaFields:s,showLinkToFileUploadResult:a}=e,l=t.preview?"rgba(255, 255, 255, 0.5)":wv(t.type).color;return E("div",{className:"uppy-Dashboard-Item-previewInnerWrap",style:{backgroundColor:l},children:[a&&t.uploadURL&&E("a",{className:"uppy-Dashboard-Item-previewLink",href:t.uploadURL,rel:"noreferrer noopener",target:"_blank","aria-label":t.meta.name,children:E("span",{hidden:!0,children:t.meta.name})}),E(XC,{file:t}),E(ZC,{file:t,i18n:r,toggleFileCard:n,metaFields:s})]})}function t8(e){if(!e.isUploaded){if(e.error&&!e.hideRetryButton){e.uppy.retryUpload(e.file.id);return}e.resumableUploads&&!e.hidePauseResumeButton?e.uppy.pauseResume(e.file.id):e.individualCancellation&&!e.hideCancelButton&&e.uppy.removeFile(e.file.id)}}function Mb(e){return e.isUploaded?e.i18n("uploadComplete"):e.error?e.i18n("retryUpload"):e.resumableUploads?e.file.isPaused?e.i18n("resumeUpload"):e.i18n("pauseUpload"):e.individualCancellation?e.i18n("cancelUpload"):""}function sp(e){return E("div",{className:"uppy-Dashboard-Item-progress",children:E("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-progressIndicator",type:"button","aria-label":Mb(e),title:Mb(e),onClick:()=>t8(e),children:e.children})})}function Pd({children:e}){return E("svg",{"aria-hidden":"true",focusable:"false",width:"70",height:"70",viewBox:"0 0 36 36",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--circle",children:e})}function ip({progress:e}){const t=2*Math.PI*15;return E("g",{children:[E("circle",{className:"uppy-Dashboard-Item-progressIcon--bg",r:"15",cx:"18",cy:"18","stroke-width":"2",fill:"none"}),E("circle",{className:"uppy-Dashboard-Item-progressIcon--progress",r:"15",cx:"18",cy:"18",transform:"rotate(-90, 18, 18)",fill:"none","stroke-width":"2","stroke-dasharray":t,"stroke-dashoffset":t-t/100*e})]})}function r8(e){return!e.file.progress.uploadStarted||e.file.progress.percentage===void 0?null:e.isUploaded?E("div",{className:"uppy-Dashboard-Item-progress",children:E("div",{className:"uppy-Dashboard-Item-progressIndicator",children:E(Pd,{children:[E("circle",{r:"15",cx:"18",cy:"18",fill:"#1bb240"}),E("polygon",{className:"uppy-Dashboard-Item-progressIcon--check",transform:"translate(2, 3)",points:"14 22.5 7 15.2457065 8.99985857 13.1732815 14 18.3547104 22.9729883 9 25 11.1005634"})]})})}):e.recoveredState?null:e.error&&!e.hideRetryButton?E(sp,{...e,children:E("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--retry",width:"28",height:"31",viewBox:"0 0 16 19",children:[E("path",{d:"M16 11a8 8 0 1 1-8-8v2a6 6 0 1 0 6 6h2z"}),E("path",{d:"M7.9 3H10v2H7.9z"}),E("path",{d:"M8.536.5l3.535 3.536-1.414 1.414L7.12 1.914z"}),E("path",{d:"M10.657 2.621l1.414 1.415L8.536 7.57 7.12 6.157z"})]})}):e.resumableUploads&&!e.hidePauseResumeButton?E(sp,{...e,children:E(Pd,{children:[E(ip,{progress:e.file.progress.percentage}),e.file.isPaused?E("polygon",{className:"uppy-Dashboard-Item-progressIcon--play",transform:"translate(3, 3)",points:"12 20 12 10 20 15"}):E("g",{className:"uppy-Dashboard-Item-progressIcon--pause",transform:"translate(14.5, 13)",children:[E("rect",{x:"0",y:"0",width:"2",height:"10",rx:"0"}),E("rect",{x:"5",y:"0",width:"2",height:"10",rx:"0"})]})]})}):!e.resumableUploads&&e.individualCancellation&&!e.hideCancelButton?E(sp,{...e,children:E(Pd,{children:[E(ip,{progress:e.file.progress.percentage}),E("polygon",{className:"cancel",transform:"translate(2, 2)",points:"19.8856516 11.0625 16 14.9481516 12.1019737 11.0625 11.0625 12.1143484 14.9481516 16 11.0625 19.8980263 12.1019737 20.9375 16 17.0518484 19.8856516 20.9375 20.9375 19.8980263 17.0518484 16 20.9375 12"})]})}):E("div",{className:"uppy-Dashboard-Item-progress",children:E("div",{className:"uppy-Dashboard-Item-progressIndicator",children:E(Pd,{children:E(ip,{progress:e.file.progress.percentage})})})})}class n8 extends Dt{componentDidMount(){const{file:t}=this.props;t.preview||this.props.handleRequestThumbnail(t)}shouldComponentUpdate(t){return!zU(this.props,t)}componentDidUpdate(){const{file:t}=this.props;t.preview||this.props.handleRequestThumbnail(t)}componentWillUnmount(){const{file:t}=this.props;t.preview||this.props.handleCancelThumbnail(t)}render(){const{file:t}=this.props,r=t.progress.preprocess||t.progress.postprocess,n=!!t.progress.uploadComplete&&!r&&!t.error,s=!!t.progress.uploadStarted||!!r,a=t.progress.uploadStarted&&!t.progress.uploadComplete||r,o=t.error||!1,{isGhost:l}=t;let c=(this.props.individualCancellation||!a)&&!n;n&&this.props.showRemoveButtonAfterComplete&&(c=!0);const d=Br({"uppy-Dashboard-Item":!0,"is-inprogress":a&&!this.props.recoveredState,"is-processing":r,"is-complete":n,"is-error":!!o,"is-resumable":this.props.resumableUploads,"is-noIndividualCancellation":!this.props.individualCancellation,"is-ghost":l});return E("div",{className:d,id:`uppy_${t.id}`,role:this.props.role,children:[E("div",{className:"uppy-Dashboard-Item-preview",children:[E(e8,{file:t,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,i18n:this.props.i18n,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields}),E(r8,{uppy:this.props.uppy,file:t,error:o,isUploaded:n,hideRetryButton:this.props.hideRetryButton,hideCancelButton:this.props.hideCancelButton,hidePauseResumeButton:this.props.hidePauseResumeButton,recoveredState:this.props.recoveredState,resumableUploads:this.props.resumableUploads,individualCancellation:this.props.individualCancellation,i18n:this.props.i18n})]}),E("div",{className:"uppy-Dashboard-Item-fileInfoAndButtons",children:[E(ZU,{file:t,containerWidth:this.props.containerWidth,containerHeight:this.props.containerHeight,i18n:this.props.i18n,toggleAddFilesPanel:this.props.toggleAddFilesPanel,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields,isSingleFile:this.props.isSingleFile}),E(qU,{file:t,metaFields:this.props.metaFields,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,showRemoveButton:c,canEditFile:this.props.canEditFile,uploadInProgressOrComplete:s,toggleFileCard:this.props.toggleFileCard,openFileEditor:this.props.openFileEditor,uppy:this.props.uppy,i18n:this.props.i18n})]})]})}}function s8(e,t){const r=[];let n=[];return e.forEach(s=>{n.length<t?n.push(s):(r.push(n),n=[s])}),n.length&&r.push(n),r}function i8({id:e,i18n:t,uppy:r,files:n,resumableUploads:s,hideRetryButton:a,hidePauseResumeButton:o,hideCancelButton:l,showLinkToFileUploadResult:c,showRemoveButtonAfterComplete:d,metaFields:u,isSingleFile:h,toggleFileCard:p,handleRequestThumbnail:m,handleCancelThumbnail:x,recoveredState:y,individualCancellation:w,itemsPerRow:v,openFileEditor:g,canEditFile:b,toggleAddFilesPanel:j,containerWidth:k,containerHeight:C}){const S=v===1?71:200,_=pv(()=>{const T=(R,M)=>Number(n[M].isGhost)-Number(n[R].isGhost),F=Object.keys(n);return y&&F.sort(T),s8(F,v)},[n,v,y]),P=T=>E("div",{class:"uppy-Dashboard-filesInner",role:"presentation",children:T.map(F=>E(n8,{uppy:r,id:e,i18n:t,resumableUploads:s,individualCancellation:w,hideRetryButton:a,hidePauseResumeButton:o,hideCancelButton:l,showLinkToFileUploadResult:c,showRemoveButtonAfterComplete:d,metaFields:u,recoveredState:y,isSingleFile:h,containerWidth:k,containerHeight:C,toggleFileCard:p,handleRequestThumbnail:m,handleCancelThumbnail:x,role:"listitem",openFileEditor:g,canEditFile:b,toggleAddFilesPanel:j,file:n[F]},F))},T[0]);return h?E("div",{class:"uppy-Dashboard-files",children:P(_[0])}):E(A$,{class:"uppy-Dashboard-files",role:"list",data:_,renderRow:P,rowHeight:S})}function a8({activePickerPanel:e,className:t,hideAllPanels:r,i18n:n,state:s,uppy:a}){const o=Xd(null);return E("div",{className:Br("uppy-DashboardContent-panel",t),role:"tabpanel","data-uppy-panelType":"PickerPanel",id:`uppy-DashboardContent-panel--${e.id}`,onDragOver:js,onDragLeave:js,onDrop:js,onPaste:js,children:[E("div",{className:"uppy-DashboardContent-bar",children:[E("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:n("importFrom",{name:e.name})}),E("button",{className:"uppy-DashboardContent-back",type:"button",onClick:r,children:n("cancel")})]}),E("div",{ref:o,className:"uppy-DashboardContent-panelBody",children:a.getPlugin(e.id).render(s,o.current)})]})}const Gr={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete",STATE_PAUSED:"paused"};function o8(e,t,r,n={}){if(e)return Gr.STATE_ERROR;if(t)return Gr.STATE_COMPLETE;if(r)return Gr.STATE_PAUSED;let s=Gr.STATE_WAITING;const a=Object.keys(n);for(let o=0;o<a.length;o++){const{progress:l}=n[a[o]];if(l.uploadStarted&&!l.uploadComplete)return Gr.STATE_UPLOADING;l.preprocess&&s!==Gr.STATE_UPLOADING&&(s=Gr.STATE_PREPROCESSING),l.postprocess&&s!==Gr.STATE_UPLOADING&&s!==Gr.STATE_PREPROCESSING&&(s=Gr.STATE_POSTPROCESSING)}return s}function l8({files:e,i18n:t,isAllComplete:r,isAllErrored:n,isAllPaused:s,inProgressNotPausedFiles:a,newFiles:o,processingFiles:l}){switch(o8(n,r,s,e)){case"uploading":return t("uploadingXFiles",{smart_count:a.length});case"preprocessing":case"postprocessing":return t("processingXFiles",{smart_count:l.length});case"paused":return t("uploadPaused");case"waiting":return t("xFilesSelected",{smart_count:o.length});case"complete":return t("uploadComplete");case"error":return t("error")}}function c8(e){const{i18n:t,isAllComplete:r,hideCancelButton:n,maxNumberOfFiles:s,toggleAddFilesPanel:a,uppy:o}=e;let{allowNewUpload:l}=e;return l&&s&&(l=e.totalFileCount<e.maxNumberOfFiles),E("div",{className:"uppy-DashboardContent-bar",children:[!r&&!n?E("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>o.cancelAll(),children:t("cancel")}):E("div",{}),E("div",{className:"uppy-DashboardContent-title",children:E(l8,{...e})}),l?E("button",{className:"uppy-DashboardContent-addMore",type:"button","aria-label":t("addMoreFiles"),title:t("addMoreFiles"),onClick:()=>a(!0),children:[E("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"15",height:"15",viewBox:"0 0 15 15",children:E("path",{d:"M8 6.5h6a.5.5 0 0 1 .5.5v.5a.5.5 0 0 1-.5.5H8v6a.5.5 0 0 1-.5.5H7a.5.5 0 0 1-.5-.5V8h-6a.5.5 0 0 1-.5-.5V7a.5.5 0 0 1 .5-.5h6v-6A.5.5 0 0 1 7 0h.5a.5.5 0 0 1 .5.5v6z"})}),E("span",{className:"uppy-DashboardContent-addMoreCaption",children:t("addMore")})]}):E("div",{})]})}const Qi="uppy-transition-slideDownUp",Ab=250;function Ed({children:e}){const[t,r]=Lu(null),[n,s]=Lu(""),a=Xd(),o=Xd(),l=Xd(),c=()=>{s(`${Qi}-enter`),cancelAnimationFrame(l.current),clearTimeout(o.current),o.current=void 0,l.current=requestAnimationFrame(()=>{s(`${Qi}-enter ${Qi}-enter-active`),a.current=setTimeout(()=>{s("")},Ab)})},d=()=>{s(`${Qi}-leave`),cancelAnimationFrame(l.current),clearTimeout(a.current),a.current=void 0,l.current=requestAnimationFrame(()=>{s(`${Qi}-leave ${Qi}-leave-active`),o.current=setTimeout(()=>{r(null),s("")},Ab)})};return Um(()=>{const u=_r(e)[0];t!==u&&(u&&!t?c():t&&!u&&!o.current&&d(),r(u))},[e,t]),Um(()=>()=>{clearTimeout(a.current),clearTimeout(o.current),cancelAnimationFrame(l.current)},[]),t?dC(t,{className:Br(n,t.props.className)}):null}const Ib=900,Ob=700,ap=576,Db=330;function d8(e){const t=e.totalFileCount===0,r=e.totalFileCount===1,n=e.containerWidth>ap,s=e.containerHeight>Db,a=Br({"uppy-Dashboard":!0,"uppy-Dashboard--isDisabled":e.disabled,"uppy-Dashboard--animateOpenClose":e.animateOpenClose,"uppy-Dashboard--isClosing":e.isClosing,"uppy-Dashboard--isDraggingOver":e.isDraggingOver,"uppy-Dashboard--modal":!e.inline,"uppy-size--md":e.containerWidth>ap,"uppy-size--lg":e.containerWidth>Ob,"uppy-size--xl":e.containerWidth>Ib,"uppy-size--height-md":e.containerHeight>Db,"uppy-Dashboard--isAddFilesPanelVisible":e.showAddFilesPanel,"uppy-Dashboard--isInnerWrapVisible":e.areInsidesReadyToBeVisible,"uppy-Dashboard--singleFile":e.singleFileFullScreen&&r&&s});let o=1;e.containerWidth>Ib?o=5:e.containerWidth>Ob?o=4:e.containerWidth>ap&&(o=3);const l=e.showSelectedFiles&&!t,c=e.recoveredState?Object.keys(e.recoveredState.files).length:null,d=e.files?Object.keys(e.files).filter(p=>e.files[p].isGhost).length:0,u=()=>d>0?e.i18n("recoveredXFiles",{smart_count:d}):e.i18n("recoveredAllFiles");return E("div",{className:a,"data-uppy-theme":e.theme,"data-uppy-num-acquirers":e.acquirers.length,"data-uppy-drag-drop-supported":!e.disableLocalFiles&&_U(),"aria-hidden":e.inline?"false":e.isHidden,"aria-disabled":e.disabled,"aria-label":e.inline?e.i18n("dashboardTitle"):e.i18n("dashboardWindowTitle"),onPaste:e.handlePaste,onDragOver:e.handleDragOver,onDragLeave:e.handleDragLeave,onDrop:e.handleDrop,children:[E("div",{"aria-hidden":"true",className:"uppy-Dashboard-overlay",tabIndex:-1,onClick:e.handleClickOutside}),E("div",{className:"uppy-Dashboard-inner",role:e.inline?void 0:"dialog",style:{width:e.inline&&e.width?e.width:"",height:e.inline&&e.height?e.height:""},children:[e.inline?null:E("button",{className:"uppy-u-reset uppy-Dashboard-close",type:"button","aria-label":e.i18n("closeModal"),title:e.i18n("closeModal"),onClick:e.closeModal,children:E("span",{"aria-hidden":"true",children:""})}),E("div",{className:"uppy-Dashboard-innerWrap",children:[E("div",{className:"uppy-Dashboard-dropFilesHereHint",children:e.i18n("dropHint")}),l&&E(c8,{...e}),c&&E("div",{className:"uppy-Dashboard-serviceMsg",children:[E("svg",{className:"uppy-Dashboard-serviceMsg-icon","aria-hidden":"true",focusable:"false",width:"21",height:"16",viewBox:"0 0 24 19",children:E("g",{transform:"translate(0 -1)",fill:"none",fillRule:"evenodd",children:[E("path",{d:"M12.857 1.43l10.234 17.056A1 1 0 0122.234 20H1.766a1 1 0 01-.857-1.514L11.143 1.429a1 1 0 011.714 0z",fill:"#FFD300"}),E("path",{fill:"#000",d:"M11 6h2l-.3 8h-1.4z"}),E("circle",{fill:"#000",cx:"12",cy:"17",r:"1"})]})}),E("strong",{className:"uppy-Dashboard-serviceMsg-title",children:e.i18n("sessionRestored")}),E("div",{className:"uppy-Dashboard-serviceMsg-text",children:u()})]}),l?E(i8,{id:e.id,i18n:e.i18n,uppy:e.uppy,files:e.files,resumableUploads:e.resumableUploads,hideRetryButton:e.hideRetryButton,hidePauseResumeButton:e.hidePauseResumeButton,hideCancelButton:e.hideCancelButton,showLinkToFileUploadResult:e.showLinkToFileUploadResult,showRemoveButtonAfterComplete:e.showRemoveButtonAfterComplete,metaFields:e.metaFields,toggleFileCard:e.toggleFileCard,handleRequestThumbnail:e.handleRequestThumbnail,handleCancelThumbnail:e.handleCancelThumbnail,recoveredState:e.recoveredState,individualCancellation:e.individualCancellation,openFileEditor:e.openFileEditor,canEditFile:e.canEditFile,toggleAddFilesPanel:e.toggleAddFilesPanel,isSingleFile:r,itemsPerRow:o,containerWidth:e.containerWidth,containerHeight:e.containerHeight}):E(YC,{i18n:e.i18n,i18nArray:e.i18nArray,acquirers:e.acquirers,handleInputChange:e.handleInputChange,maxNumberOfFiles:e.maxNumberOfFiles,allowedFileTypes:e.allowedFileTypes,showNativePhotoCameraButton:e.showNativePhotoCameraButton,showNativeVideoCameraButton:e.showNativeVideoCameraButton,nativeCameraFacingMode:e.nativeCameraFacingMode,showPanel:e.showPanel,activePickerPanel:e.activePickerPanel,disableLocalFiles:e.disableLocalFiles,fileManagerSelectionType:e.fileManagerSelectionType,note:e.note,proudlyDisplayPoweredByUppy:e.proudlyDisplayPoweredByUppy}),E(Ed,{children:e.showAddFilesPanel?E(TU,{...e,isSizeMD:n},"AddFiles"):null}),E(Ed,{children:e.fileCardFor?E(UU,{...e},"FileCard"):null}),E(Ed,{children:e.activePickerPanel?E(a8,{...e},"Picker"):null}),E(Ed,{children:e.showFileEditor?E(RU,{...e},"Editor"):null}),E("div",{className:"uppy-Dashboard-progressindicators",children:e.progressindicators.map(p=>e.uppy.getPlugin(p.id).render(e.state))})]})]})]})}const u8={strings:{closeModal:"Close Modal",addMoreFiles:"Add more files",addingMoreFiles:"Adding more files",importFrom:"Import from %{name}",dashboardWindowTitle:"Uppy Dashboard Window (Press escape to close)",dashboardTitle:"Uppy Dashboard",copyLinkToClipboardSuccess:"Link copied to clipboard.",copyLinkToClipboardFallback:"Copy the URL below",copyLink:"Copy link",back:"Back",removeFile:"Remove file",editFile:"Edit file",editImage:"Edit image",editing:"Editing %{file}",error:"Error",finishEditingFile:"Finish editing file",saveChanges:"Save changes",myDevice:"My Device",dropHint:"Drop your files here",uploadComplete:"Upload complete",uploadPaused:"Upload paused",resumeUpload:"Resume upload",pauseUpload:"Pause upload",retryUpload:"Retry upload",cancelUpload:"Cancel upload",xFilesSelected:{0:"%{smart_count} file selected",1:"%{smart_count} files selected"},uploadingXFiles:{0:"Uploading %{smart_count} file",1:"Uploading %{smart_count} files"},processingXFiles:{0:"Processing %{smart_count} file",1:"Processing %{smart_count} files"},poweredBy:"Powered by %{uppy}",addMore:"Add more",editFileWithFilename:"Edit file %{file}",save:"Save",cancel:"Cancel",dropPasteFiles:"Drop files here or %{browseFiles}",dropPasteFolders:"Drop files here or %{browseFolders}",dropPasteBoth:"Drop files here, %{browseFiles} or %{browseFolders}",dropPasteImportFiles:"Drop files here, %{browseFiles} or import from:",dropPasteImportFolders:"Drop files here, %{browseFolders} or import from:",dropPasteImportBoth:"Drop files here, %{browseFiles}, %{browseFolders} or import from:",importFiles:"Import files from:",browseFiles:"browse files",browseFolders:"browse folders",recoveredXFiles:{0:"We could not fully recover 1 file. Please re-select it and resume the upload.",1:"We could not fully recover %{smart_count} files. Please re-select them and resume the upload."},recoveredAllFiles:"We restored all files. You can now resume the upload.",sessionRestored:"Session restored",reSelect:"Re-select",missingRequiredMetaFields:{0:"Missing required meta field: %{fields}.",1:"Missing required meta fields: %{fields}."},takePictureBtn:"Take Picture",recordVideoBtn:"Record Video"}},eP=['a[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','area[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])',"input:not([disabled]):not([inert]):not([aria-hidden])","select:not([disabled]):not([inert]):not([aria-hidden])","textarea:not([disabled]):not([inert]):not([aria-hidden])","button:not([disabled]):not([inert]):not([aria-hidden])",'iframe:not([tabindex^="-"]):not([inert]):not([aria-hidden])','object:not([tabindex^="-"]):not([inert]):not([aria-hidden])','embed:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[contenteditable]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[tabindex]:not([tabindex^="-"]):not([inert]):not([aria-hidden])'];function tP(e,t){if(t){const r=e.querySelector(`[data-uppy-paneltype="${t}"]`);if(r)return r}return e}function h8(){let e=!1;return NL((r,n)=>{const s=tP(r,n),a=s.contains(document.activeElement);if(a&&e)return;const o=s.querySelector("[data-uppy-super-focusable]");if(!(a&&!o))if(o)o.focus({preventScroll:!0}),e=!0;else{const l=s.querySelector(eP);l==null||l.focus({preventScroll:!0}),e=!1}},260)}function Lb(e,t){const r=t[0];r&&(r.focus(),e.preventDefault())}function f8(e,t){const r=t[t.length-1];r&&(r.focus(),e.preventDefault())}function p8(e){return e.contains(document.activeElement)}function rP(e,t,r){const n=tP(r,t),s=gl(n.querySelectorAll(eP)),a=s.indexOf(document.activeElement);p8(n)?e.shiftKey&&a===0?f8(e,s):!e.shiftKey&&a===s.length-1&&Lb(e,s):Lb(e,s)}function m8(e,t,r){t===null||rP(e,t,r)}const $b=9,g8=27;function Ub(){const e={};return e.promise=new Promise((t,r)=>{e.resolve=t,e.reject=r}),e}const y8={target:"body",metaFields:[],thumbnailWidth:280,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,defaultPickerIcon:I$,showLinkToFileUploadResult:!1,showProgressDetails:!1,hideUploadButton:!1,hideCancelButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideProgressAfterFinish:!1,note:null,singleFileFullScreen:!0,disableStatusBar:!1,disableInformer:!1,disableThumbnailGenerator:!1,fileManagerSelectionType:"files",proudlyDisplayPoweredByUppy:!0,showSelectedFiles:!0,showRemoveButtonAfterComplete:!1,showNativePhotoCameraButton:!1,showNativeVideoCameraButton:!1,theme:"light",autoOpen:null,disabled:!1,disableLocalFiles:!1,nativeCameraFacingMode:"",onDragLeave:()=>{},onDragOver:()=>{},onDrop:()=>{},plugins:[],doneButtonHandler:void 0,onRequestCloseModal:null,inline:!1,animateOpenClose:!0,browserBackButtonClose:!1,closeAfterFinish:!1,closeModalOnClickOutside:!1,disablePageScrollWhenModalOpen:!0,trigger:null,width:750,height:550};var up,La,yi,sc,$a,Ku,Gu,Qu,vi,Yu,Xu,Ua,ot,tg,rg,nP,ng,sg,sP;let v8=(up=class extends mo{constructor(r,n){var a;const s=(n==null?void 0:n.autoOpen)??null;super(r,{...y8,...n,autoOpen:s});D(this,ot);D(this,La);O(this,"modalName",`uppy-Dashboard-${QC()}`);O(this,"superFocus",h8());O(this,"ifFocusedOnUppyRecently",!1);O(this,"dashboardIsDisabled");O(this,"savedScrollPosition");O(this,"savedActiveElement");O(this,"resizeObserver");O(this,"darkModeMediaQuery");O(this,"makeDashboardInsidesVisibleAnywayTimeout");O(this,"removeTarget",r=>{const s=this.getPluginState().targets.filter(a=>a.id!==r.id);this.setPluginState({targets:s})});O(this,"addTarget",r=>{const n=r.id||r.constructor.name,s=r.title||n,a=r.type;if(a!=="acquirer"&&a!=="progressindicator"&&a!=="editor")return this.uppy.log("Dashboard: can only be targeted by plugins of types: acquirer, progressindicator, editor","error"),null;const o={id:n,name:s,type:a},c=this.getPluginState().targets.slice();return c.push(o),this.setPluginState({targets:c}),this.el});O(this,"hideAllPanels",()=>{var s;const r=this.getPluginState(),n={activePickerPanel:void 0,showAddFilesPanel:!1,activeOverlayType:null,fileCardFor:null,showFileEditor:!1};r.activePickerPanel===n.activePickerPanel&&r.showAddFilesPanel===n.showAddFilesPanel&&r.showFileEditor===n.showFileEditor&&r.activeOverlayType===n.activeOverlayType||(this.setPluginState(n),this.uppy.emit("dashboard:close-panel",(s=r.activePickerPanel)==null?void 0:s.id))});O(this,"showPanel",r=>{const{targets:n}=this.getPluginState(),s=n.find(a=>a.type==="acquirer"&&a.id===r);this.setPluginState({activePickerPanel:s,activeOverlayType:"PickerPanel"}),this.uppy.emit("dashboard:show-panel",r)});O(this,"canEditFile",r=>{const{targets:n}=this.getPluginState();return N(this,vi).call(this,n).some(a=>this.uppy.getPlugin(a.id).canEditFile(r))});O(this,"openFileEditor",r=>{const{targets:n}=this.getPluginState(),s=N(this,vi).call(this,n);this.setPluginState({showFileEditor:!0,fileCardFor:r.id||null,activeOverlayType:"FileEditor"}),s.forEach(a=>{this.uppy.getPlugin(a.id).selectFile(r)})});O(this,"closeFileEditor",()=>{const{metaFields:r}=this.getPluginState();r&&r.length>0?this.setPluginState({showFileEditor:!1,activeOverlayType:"FileCard"}):this.setPluginState({showFileEditor:!1,fileCardFor:null,activeOverlayType:"AddFiles"})});O(this,"saveFileEditor",()=>{const{targets:r}=this.getPluginState();N(this,vi).call(this,r).forEach(s=>{this.uppy.getPlugin(s.id).save()}),this.closeFileEditor()});O(this,"openModal",()=>{const{promise:r,resolve:n}=Ub();if(this.savedScrollPosition=window.pageYOffset,this.savedActiveElement=document.activeElement,this.opts.disablePageScrollWhenModalOpen&&document.body.classList.add("uppy-Dashboard-isFixed"),this.opts.animateOpenClose&&this.getPluginState().isClosing){const s=()=>{this.setPluginState({isHidden:!1}),this.el.removeEventListener("animationend",s,!1),n()};this.el.addEventListener("animationend",s,!1)}else this.setPluginState({isHidden:!1}),n();return this.opts.browserBackButtonClose&&this.updateBrowserHistory(),document.addEventListener("keydown",this.handleKeyDownInModal),this.uppy.emit("dashboard:modal-open"),r});O(this,"closeModal",r=>{var c;const n=(r==null?void 0:r.manualClose)??!0,{isHidden:s,isClosing:a}=this.getPluginState();if(s||a)return;const{promise:o,resolve:l}=Ub();if(this.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),this.opts.animateOpenClose){this.setPluginState({isClosing:!0});const d=()=>{this.setPluginState({isHidden:!0,isClosing:!1}),this.superFocus.cancel(),this.savedActiveElement.focus(),this.el.removeEventListener("animationend",d,!1),l()};this.el.addEventListener("animationend",d,!1)}else this.setPluginState({isHidden:!0}),this.superFocus.cancel(),this.savedActiveElement.focus(),l();return document.removeEventListener("keydown",this.handleKeyDownInModal),n&&this.opts.browserBackButtonClose&&(c=history.state)!=null&&c[this.modalName]&&history.back(),this.uppy.emit("dashboard:modal-closed"),o});O(this,"isModalOpen",()=>!this.getPluginState().isHidden||!1);O(this,"requestCloseModal",()=>this.opts.onRequestCloseModal?this.opts.onRequestCloseModal():this.closeModal());O(this,"setDarkModeCapability",r=>{const{capabilities:n}=this.uppy.getState();this.uppy.setState({capabilities:{...n,darkMode:r}})});O(this,"handleSystemDarkModeChange",r=>{const n=r.matches;this.uppy.log(`[Dashboard] Dark mode is ${n?"on":"off"}`),this.setDarkModeCapability(n)});O(this,"toggleFileCard",(r,n)=>{const s=this.uppy.getFile(n);r?this.uppy.emit("dashboard:file-edit-start",s):this.uppy.emit("dashboard:file-edit-complete",s),this.setPluginState({fileCardFor:r?n:null,activeOverlayType:r?"FileCard":null})});O(this,"toggleAddFilesPanel",r=>{this.setPluginState({showAddFilesPanel:r,activeOverlayType:r?"AddFiles":null})});O(this,"addFiles",r=>{const n=r.map(s=>({source:this.id,name:s.name,type:s.type,data:s,meta:{relativePath:s.relativePath||s.webkitRelativePath||null}}));try{this.uppy.addFiles(n)}catch(s){this.uppy.log(s)}});O(this,"startListeningToResize",()=>{this.resizeObserver=new ResizeObserver(r=>{const n=r[0],{width:s,height:a}=n.contentRect;this.setPluginState({containerWidth:s,containerHeight:a,areInsidesReadyToBeVisible:!0})}),this.resizeObserver.observe(this.el.querySelector(".uppy-Dashboard-inner")),this.makeDashboardInsidesVisibleAnywayTimeout=setTimeout(()=>{const r=this.getPluginState(),n=!this.opts.inline&&r.isHidden;!r.areInsidesReadyToBeVisible&&!n&&(this.uppy.log("[Dashboard] resize event didnt fire on time: defaulted to mobile layout","warning"),this.setPluginState({areInsidesReadyToBeVisible:!0}))},1e3)});O(this,"stopListeningToResize",()=>{this.resizeObserver.disconnect(),clearTimeout(this.makeDashboardInsidesVisibleAnywayTimeout)});O(this,"recordIfFocusedOnUppyRecently",r=>{this.el.contains(r.target)?this.ifFocusedOnUppyRecently=!0:(this.ifFocusedOnUppyRecently=!1,this.superFocus.cancel())});O(this,"disableInteractiveElements",r=>{const n=["a[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])",'[role="button"]:not([disabled])'],s=N(this,La)??gl(this.el.querySelectorAll(n)).filter(a=>!a.classList.contains("uppy-Dashboard-close"));for(const a of s)a.tagName==="A"?a.setAttribute("aria-disabled",r):a.disabled=r;r?$(this,La,s):$(this,La,null),this.dashboardIsDisabled=r});O(this,"updateBrowserHistory",()=>{var r;(r=history.state)!=null&&r[this.modalName]||history.pushState({...history.state,[this.modalName]:!0},""),window.addEventListener("popstate",this.handlePopState,!1)});O(this,"handlePopState",r=>{var n;this.isModalOpen()&&(!r.state||!r.state[this.modalName])&&this.closeModal({manualClose:!1}),!this.isModalOpen()&&((n=r.state)!=null&&n[this.modalName])&&history.back()});O(this,"handleKeyDownInModal",r=>{r.keyCode===g8&&this.requestCloseModal(),r.keyCode===$b&&rP(r,this.getPluginState().activeOverlayType,this.el)});O(this,"handleClickOutside",()=>{this.opts.closeModalOnClickOutside&&this.requestCloseModal()});O(this,"handlePaste",r=>{this.uppy.iteratePlugins(s=>{var a;s.type==="acquirer"&&((a=s.handleRootPaste)==null||a.call(s,r))});const n=gl(r.clipboardData.files);n.length>0&&(this.uppy.log("[Dashboard] Files pasted"),this.addFiles(n))});O(this,"handleInputChange",r=>{r.preventDefault();const n=gl(r.currentTarget.files||[]);n.length>0&&(this.uppy.log("[Dashboard] Files selected through input"),this.addFiles(n))});O(this,"handleDragOver",r=>{r.preventDefault(),r.stopPropagation();const n=()=>{let l=!0;return this.uppy.iteratePlugins(c=>{var d;(d=c.canHandleRootDrop)!=null&&d.call(c,r)&&(l=!0)}),l},s=()=>{const{types:l}=r.dataTransfer;return l.some(c=>c==="Files")},a=n(),o=s();if(!a&&!o||this.opts.disabled||this.opts.disableLocalFiles&&(o||!a)||!this.uppy.getState().allowNewUpload){r.dataTransfer.dropEffect="none";return}r.dataTransfer.dropEffect="copy",this.setPluginState({isDraggingOver:!0}),this.opts.onDragOver(r)});O(this,"handleDragLeave",r=>{r.preventDefault(),r.stopPropagation(),this.setPluginState({isDraggingOver:!1}),this.opts.onDragLeave(r)});O(this,"handleDrop",async r=>{r.preventDefault(),r.stopPropagation(),this.setPluginState({isDraggingOver:!1}),this.uppy.iteratePlugins(o=>{var l;o.type==="acquirer"&&((l=o.handleRootDrop)==null||l.call(o,r))});let n=!1;const s=o=>{this.uppy.log(o,"error"),n||(this.uppy.info(o.message,"error"),n=!0)};this.uppy.log("[Dashboard] Processing dropped files");const a=await dU(r.dataTransfer,{logDropError:s});a.length>0&&(this.uppy.log("[Dashboard] Files dropped"),this.addFiles(a)),this.opts.onDrop(r)});O(this,"handleRequestThumbnail",r=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:request",r)});O(this,"handleCancelThumbnail",r=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:cancel",r)});O(this,"handleKeyDownInInline",r=>{r.keyCode===$b&&m8(r,this.getPluginState().activeOverlayType,this.el)});O(this,"handlePasteOnBody",r=>{this.el.contains(document.activeElement)&&this.handlePaste(r)});O(this,"handleComplete",({failed:r})=>{this.opts.closeAfterFinish&&!(r!=null&&r.length)&&this.requestCloseModal()});O(this,"handleCancelRestore",()=>{this.uppy.emit("restore-canceled")});D(this,yi,()=>{if(this.opts.disableThumbnailGenerator)return;const r=600,n=this.uppy.getFiles();if(n.length===1){const s=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);s==null||s.setOptions({thumbnailWidth:r});const a={...n[0],preview:void 0};s==null||s.requestThumbnail(a).then(()=>{s==null||s.setOptions({thumbnailWidth:this.opts.thumbnailWidth})})}});D(this,sc,r=>{const n=r[0],{metaFields:s}=this.getPluginState(),a=s&&s.length>0,o=this.canEditFile(n);a&&this.opts.autoOpen==="metaEditor"?this.toggleFileCard(!0,n.id):o&&this.opts.autoOpen==="imageEditor"&&this.openFileEditor(n)});O(this,"initEvents",()=>{if(this.opts.trigger&&!this.opts.inline){const r=Fb(this.opts.trigger);r?r.forEach(n=>n.addEventListener("click",this.openModal)):this.uppy.log("Dashboard modal trigger not found. Make sure `trigger` is set in Dashboard options, unless you are planning to call `dashboard.openModal()` method yourself","warning")}this.startListeningToResize(),document.addEventListener("paste",this.handlePasteOnBody),this.uppy.on("plugin-added",N(this,Ua)),this.uppy.on("plugin-remove",this.removeTarget),this.uppy.on("file-added",this.hideAllPanels),this.uppy.on("dashboard:modal-closed",this.hideAllPanels),this.uppy.on("complete",this.handleComplete),this.uppy.on("files-added",N(this,yi)),this.uppy.on("file-removed",N(this,yi)),document.addEventListener("focus",this.recordIfFocusedOnUppyRecently,!0),document.addEventListener("click",this.recordIfFocusedOnUppyRecently,!0),this.opts.inline&&this.el.addEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpen&&this.uppy.on("files-added",N(this,sc))});O(this,"removeEvents",()=>{const r=Fb(this.opts.trigger);!this.opts.inline&&r&&r.forEach(n=>n.removeEventListener("click",this.openModal)),this.stopListeningToResize(),document.removeEventListener("paste",this.handlePasteOnBody),window.removeEventListener("popstate",this.handlePopState,!1),this.uppy.off("plugin-added",N(this,Ua)),this.uppy.off("plugin-remove",this.removeTarget),this.uppy.off("file-added",this.hideAllPanels),this.uppy.off("dashboard:modal-closed",this.hideAllPanels),this.uppy.off("complete",this.handleComplete),this.uppy.off("files-added",N(this,yi)),this.uppy.off("file-removed",N(this,yi)),document.removeEventListener("focus",this.recordIfFocusedOnUppyRecently),document.removeEventListener("click",this.recordIfFocusedOnUppyRecently),this.opts.inline&&this.el.removeEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpen&&this.uppy.off("files-added",N(this,sc))});O(this,"superFocusOnEachUpdate",()=>{const r=this.el.contains(document.activeElement),n=document.activeElement===document.body||document.activeElement===null,s=this.uppy.getState().info.length===0,a=!this.opts.inline;s&&(a||r||n&&this.ifFocusedOnUppyRecently)?this.superFocus(this.el,this.getPluginState().activeOverlayType):this.superFocus.cancel()});O(this,"afterUpdate",()=>{if(this.opts.disabled&&!this.dashboardIsDisabled){this.disableInteractiveElements(!0);return}!this.opts.disabled&&this.dashboardIsDisabled&&this.disableInteractiveElements(!1),this.superFocusOnEachUpdate()});O(this,"saveFileCard",(r,n)=>{this.uppy.setFileMeta(n,r),this.toggleFileCard(!1,n)});D(this,$a,r=>{const n=this.uppy.getPlugin(r.id);return{...r,icon:n.icon||this.opts.defaultPickerIcon,render:n.render}});D(this,Ku,r=>{const n=this.uppy.getPlugin(r.id);return typeof n.isSupported!="function"?!0:n.isSupported()});D(this,Gu,r=>r.filter(n=>n.type==="acquirer"&&N(this,Ku).call(this,n)).map(N(this,$a)));D(this,Qu,r=>r.filter(n=>n.type==="progressindicator").map(N(this,$a)));D(this,vi,r=>r.filter(n=>n.type==="editor").map(N(this,$a)));O(this,"render",r=>{const n=this.getPluginState(),{files:s,capabilities:a,allowNewUpload:o}=r,{newFiles:l,uploadStartedFiles:c,completeFiles:d,erroredFiles:u,inProgressFiles:h,inProgressNotPausedFiles:p,processingFiles:m,isUploadStarted:x,isAllComplete:y,isAllPaused:w}=this.uppy.getObjectOfFilesPerState(),v=N(this,Gu).call(this,n.targets),g=N(this,Qu).call(this,n.targets),b=N(this,vi).call(this,n.targets);let j;return this.opts.theme==="auto"?j=a.darkMode?"dark":"light":j=this.opts.theme,["files","folders","both"].indexOf(this.opts.fileManagerSelectionType)<0&&(this.opts.fileManagerSelectionType="files",console.warn(`Unsupported option for "fileManagerSelectionType". Using default of "${this.opts.fileManagerSelectionType}".`)),d8({state:r,isHidden:n.isHidden,files:s,newFiles:l,uploadStartedFiles:c,completeFiles:d,erroredFiles:u,inProgressFiles:h,inProgressNotPausedFiles:p,processingFiles:m,isUploadStarted:x,isAllComplete:y,isAllPaused:w,totalFileCount:Object.keys(s).length,totalProgress:r.totalProgress,allowNewUpload:o,acquirers:v,theme:j,disabled:this.opts.disabled,disableLocalFiles:this.opts.disableLocalFiles,direction:this.opts.direction,activePickerPanel:n.activePickerPanel,showFileEditor:n.showFileEditor,saveFileEditor:this.saveFileEditor,closeFileEditor:this.closeFileEditor,disableInteractiveElements:this.disableInteractiveElements,animateOpenClose:this.opts.animateOpenClose,isClosing:n.isClosing,progressindicators:g,editors:b,autoProceed:this.uppy.opts.autoProceed,id:this.id,closeModal:this.requestCloseModal,handleClickOutside:this.handleClickOutside,handleInputChange:this.handleInputChange,handlePaste:this.handlePaste,inline:this.opts.inline,showPanel:this.showPanel,hideAllPanels:this.hideAllPanels,i18n:this.i18n,i18nArray:this.i18nArray,uppy:this.uppy,note:this.opts.note,recoveredState:r.recoveredState,metaFields:n.metaFields,resumableUploads:a.resumableUploads||!1,individualCancellation:a.individualCancellation,isMobileDevice:a.isMobileDevice,fileCardFor:n.fileCardFor,toggleFileCard:this.toggleFileCard,toggleAddFilesPanel:this.toggleAddFilesPanel,showAddFilesPanel:n.showAddFilesPanel,saveFileCard:this.saveFileCard,openFileEditor:this.openFileEditor,canEditFile:this.canEditFile,width:this.opts.width,height:this.opts.height,showLinkToFileUploadResult:this.opts.showLinkToFileUploadResult,fileManagerSelectionType:this.opts.fileManagerSelectionType,proudlyDisplayPoweredByUppy:this.opts.proudlyDisplayPoweredByUppy,hideCancelButton:this.opts.hideCancelButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,showRemoveButtonAfterComplete:this.opts.showRemoveButtonAfterComplete,containerWidth:n.containerWidth,containerHeight:n.containerHeight,areInsidesReadyToBeVisible:n.areInsidesReadyToBeVisible,parentElement:this.el,allowedFileTypes:this.uppy.opts.restrictions.allowedFileTypes,maxNumberOfFiles:this.uppy.opts.restrictions.maxNumberOfFiles,requiredMetaFields:this.uppy.opts.restrictions.requiredMetaFields,showSelectedFiles:this.opts.showSelectedFiles,showNativePhotoCameraButton:this.opts.showNativePhotoCameraButton,showNativeVideoCameraButton:this.opts.showNativeVideoCameraButton,nativeCameraFacingMode:this.opts.nativeCameraFacingMode,singleFileFullScreen:this.opts.singleFileFullScreen,handleCancelRestore:this.handleCancelRestore,handleRequestThumbnail:this.handleRequestThumbnail,handleCancelThumbnail:this.handleCancelThumbnail,isDraggingOver:n.isDraggingOver,handleDragOver:this.handleDragOver,handleDragLeave:this.handleDragLeave,handleDrop:this.handleDrop})});D(this,Yu,()=>{const{plugins:r}=this.opts;r.forEach(n=>{const s=this.uppy.getPlugin(n);s?s.mount(this,s):this.uppy.log(`[Uppy] Dashboard could not find plugin '${n}', make sure to uppy.use() the plugins you are specifying`,"warning")})});D(this,Xu,()=>{this.uppy.iteratePlugins(N(this,Ua))});D(this,Ua,r=>{var s;const n=["acquirer","editor"];r&&!((s=r.opts)!=null&&s.target)&&n.includes(r.type)&&(this.getPluginState().targets.some(o=>r.id===o.id)||r.mount(this,r))});O(this,"install",()=>{var c;this.setPluginState({isHidden:!0,fileCardFor:null,activeOverlayType:null,showAddFilesPanel:!1,activePickerPanel:void 0,showFileEditor:!1,metaFields:this.opts.metaFields,targets:[],areInsidesReadyToBeVisible:!1,isDraggingOver:!1});const{inline:r,closeAfterFinish:n}=this.opts;if(r&&n)throw new Error("[Dashboard] `closeAfterFinish: true` cannot be used on an inline Dashboard, because an inline Dashboard cannot be closed at all. Either set `inline: false`, or disable the `closeAfterFinish` option.");const{allowMultipleUploads:s,allowMultipleUploadBatches:a}=this.uppy.opts;(s||a)&&n&&this.uppy.log("[Dashboard] When using `closeAfterFinish`, we recommended setting the `allowMultipleUploadBatches` option to `false` in the Uppy constructor. See https://uppy.io/docs/uppy/#allowMultipleUploads-true","warning");const{target:o}=this.opts;o&&this.mount(o,this),this.opts.disableStatusBar||this.uppy.use(b6,{id:U(this,ot,ng).call(this),target:this,...U(this,ot,tg).call(this)}),this.opts.disableInformer||this.uppy.use(FC,{id:U(this,ot,sP).call(this),target:this,...U(this,ot,nP).call(this)}),this.opts.disableThumbnailGenerator||this.uppy.use(WC,{id:U(this,ot,sg).call(this),...U(this,ot,rg).call(this)}),this.darkModeMediaQuery=typeof window<"u"&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null;const l=this.darkModeMediaQuery?this.darkModeMediaQuery.matches:!1;this.uppy.log(`[Dashboard] Dark mode is ${l?"on":"off"}`),this.setDarkModeCapability(l),this.opts.theme==="auto"&&((c=this.darkModeMediaQuery)==null||c.addListener(this.handleSystemDarkModeChange)),N(this,Yu).call(this),N(this,Xu).call(this),this.initEvents()});O(this,"uninstall",()=>{var n;if(!this.opts.disableInformer){const s=this.uppy.getPlugin(`${this.id}:Informer`);s&&this.uppy.removePlugin(s)}if(!this.opts.disableStatusBar){const s=this.uppy.getPlugin(`${this.id}:StatusBar`);s&&this.uppy.removePlugin(s)}if(!this.opts.disableThumbnailGenerator){const s=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);s&&this.uppy.removePlugin(s)}const{plugins:r}=this.opts;r.forEach(s=>{const a=this.uppy.getPlugin(s);a&&a.unmount()}),this.opts.theme==="auto"&&((n=this.darkModeMediaQuery)==null||n.removeListener(this.handleSystemDarkModeChange)),this.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),this.unmount(),this.removeEvents()});this.id=this.opts.id||"Dashboard",this.title="Dashboard",this.type="orchestrator",this.defaultLocale=u8,this.opts.doneButtonHandler===void 0&&(this.opts.doneButtonHandler=()=>{this.uppy.clear(),this.requestCloseModal()}),(a=this.opts).onRequestCloseModal??(a.onRequestCloseModal=()=>this.closeModal()),this.i18nInit()}setOptions(r){var n,s;super.setOptions(r),(n=this.uppy.getPlugin(U(this,ot,ng).call(this)))==null||n.setOptions(U(this,ot,tg).call(this)),(s=this.uppy.getPlugin(U(this,ot,sg).call(this)))==null||s.setOptions(U(this,ot,rg).call(this))}},La=new WeakMap,yi=new WeakMap,sc=new WeakMap,$a=new WeakMap,Ku=new WeakMap,Gu=new WeakMap,Qu=new WeakMap,vi=new WeakMap,Yu=new WeakMap,Xu=new WeakMap,Ua=new WeakMap,ot=new WeakSet,tg=function(){const{hideUploadButton:r,hideRetryButton:n,hidePauseResumeButton:s,hideCancelButton:a,showProgressDetails:o,hideProgressAfterFinish:l,locale:c,doneButtonHandler:d}=this.opts;return{hideUploadButton:r,hideRetryButton:n,hidePauseResumeButton:s,hideCancelButton:a,showProgressDetails:o,hideAfterFinish:l,locale:c,doneButtonHandler:d}},rg=function(){const{thumbnailWidth:r,thumbnailHeight:n,thumbnailType:s,waitForThumbnailsBeforeUpload:a}=this.opts;return{thumbnailWidth:r,thumbnailHeight:n,thumbnailType:s,waitForThumbnailsBeforeUpload:a,lazy:!a}},nP=function(){return{}},ng=function(){return`${this.id}:StatusBar`},sg=function(){return`${this.id}:ThumbnailGenerator`},sP=function(){return`${this.id}:Informer`},O(up,"VERSION",EU.version),up);const x8=["defaultChecked","defaultValue","suppressContentEditableWarning","suppressHydrationWarning","dangerouslySetInnerHTML","accessKey","className","contentEditable","contextMenu","dir","draggable","hidden","id","lang","placeholder","slot","spellCheck","style","tabIndex","title","translate","radioGroup","role","about","datatype","inlist","prefix","property","resource","typeof","vocab","autoCapitalize","autoCorrect","autoSave","color","itemProp","itemScope","itemType","itemID","itemRef","results","security","unselectable","inputMode","is","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],b8=/^(aria-|data-)/,iP=e=>Object.fromEntries(Object.entries(e).filter(([t])=>b8.test(t)||x8.includes(t)));function w8(e,t){const r=iP(e);return Object.keys(e).some(n=>!Object.hasOwn(r,n)&&e[n]!==t[n])}class aP extends f.Component{constructor(){super(...arguments);O(this,"container");O(this,"plugin")}componentDidMount(){this.installPlugin()}componentDidUpdate(r){const{uppy:n,open:s,onRequestClose:a}=this.props;if(r.uppy!==n)this.uninstallPlugin(r),this.installPlugin();else if(w8(this.props,r)){const{uppy:o,...l}={...this.props,inline:!1,onRequestCloseModal:a};this.plugin.setOptions(l)}r.open&&!s?this.plugin.closeModal():!r.open&&s&&this.plugin.openModal()}componentWillUnmount(){this.uninstallPlugin()}installPlugin(){const{target:r=this.container,open:n,onRequestClose:s,uppy:a,...o}=this.props,l={id:"DashboardModal",...o,inline:!1,target:r,open:n,onRequestCloseModal:s};a.use(v8,l),this.plugin=a.getPlugin(l.id),n&&this.plugin.openModal()}uninstallPlugin(r=this.props){const{uppy:n}=r;n.removePlugin(this.plugin)}render(){return f.createElement("div",{className:"uppy-Container",ref:r=>{this.container=r},...iP(this.props)})}}O(aP,"defaultProps",{open:void 0,onRequestClose:void 0});f.createContext({uppy:void 0,status:"init",progress:0});var N8={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zc=f;function j8(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var S8=typeof Object.is=="function"?Object.is:j8,k8=zc.useSyncExternalStore,C8=zc.useRef,P8=zc.useEffect,E8=zc.useMemo,_8=zc.useDebugValue;N8.useSyncExternalStoreWithSelector=function(e,t,r,n,s){var a=C8(null);if(a.current===null){var o={hasValue:!1,value:null};a.current=o}else o=a.current;a=E8(function(){function c(m){if(!d){if(d=!0,u=m,m=n(m),s!==void 0&&o.hasValue){var x=o.value;if(s(x,m))return h=x}return h=m}if(x=h,S8(u,m))return x;var y=n(m);return s!==void 0&&s(x,y)?x:(u=m,h=y)}var d=!1,u,h,p=r===void 0?null:r;return[function(){return c(t())},p===null?void 0:function(){return c(p())}]},[t,r,n,s]);var l=k8(e,a[0],a[1]);return P8(function(){o.hasValue=!0,o.value=l},[l]),_8(l),l};function oP(e,t){return Object.hasOwn(e,t)}class T8 extends Error{constructor(r,n){super(r);O(this,"isNetworkError");O(this,"cause");this.cause=n==null?void 0:n.cause,this.cause&&oP(this.cause,"isNetworkError")?this.isNetworkError=this.cause.isNetworkError:this.isNetworkError=!1}}class R8 extends Error{constructor(r,n=null){super("This looks like a network error, the endpoint might be blocked by an internet provider or a firewall.");O(this,"cause");O(this,"isNetworkError");O(this,"request");this.cause=r,this.isNetworkError=!0,this.request=n}}function F8(...e){return fetch(...e).catch(t=>{throw t.name==="AbortError"?t:new R8(t)})}function M8(e){var s;const r=(s=/^(?:https?:\/\/|\/\/)?(?:[^@\n]+@)?([^\n]+)/i.exec(e))==null?void 0:s[1];return`${/^http:\/\//i.test(e)?"ws":"wss"}://${r}`}class A8 extends Error{constructor(){super(...arguments);O(this,"name","UserFacingApiError")}}var lP={};function fr(e,t){typeof t=="boolean"&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}var I8=fr;fr.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};fr.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};fr.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=new Date().getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var r=this._timeouts.shift();if(r===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1);else return!1;var n=this;return this._timer=setTimeout(function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout(function(){n._operationTimeoutCb(n._attempts)},n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)},r),this._options.unref&&this._timer.unref(),!0};fr.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};fr.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)};fr.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)};fr.prototype.start=fr.prototype.try;fr.prototype.errors=function(){return this._errors};fr.prototype.attempts=function(){return this._attempts};fr.prototype.mainError=function(){if(this._errors.length===0)return null;for(var e={},t=null,r=0,n=0;n<this._errors.length;n++){var s=this._errors[n],a=s.message,o=(e[a]||0)+1;e[a]=o,o>=r&&(t=s,r=o)}return t};(function(e){var t=I8;e.operation=function(r){var n=e.timeouts(r);return new t(n,{forever:r&&(r.forever||r.retries===1/0),unref:r&&r.unref,maxRetryTime:r&&r.maxRetryTime})},e.timeouts=function(r){if(r instanceof Array)return[].concat(r);var n={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var s in r)n[s]=r[s];if(n.minTimeout>n.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var a=[],o=0;o<n.retries;o++)a.push(this.createTimeout(o,n));return r&&r.forever&&!a.length&&a.push(this.createTimeout(o,n)),a.sort(function(l,c){return l-c}),a},e.createTimeout=function(r,n){var s=n.randomize?Math.random()+1:1,a=Math.round(s*Math.max(n.minTimeout,1)*Math.pow(n.factor,r));return a=Math.min(a,n.maxTimeout),a},e.wrap=function(r,n,s){if(n instanceof Array&&(s=n,n=null),!s){s=[];for(var a in r)typeof r[a]=="function"&&s.push(a)}for(var o=0;o<s.length;o++){var l=s[o],c=r[l];r[l]=(function(u){var h=e.operation(n),p=Array.prototype.slice.call(arguments,1),m=p.pop();p.push(function(x){h.retry(x)||(x&&(arguments[0]=h.mainError()),m.apply(this,arguments))}),h.attempt(function(){u.apply(r,p)})}).bind(r,c),r[l].options=n}}})(lP);var O8=lP;const D8=Gn(O8),L8=Object.prototype.toString,$8=e=>L8.call(e)==="[object Error]",U8=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Load failed","Network request failed","fetch failed","terminated"]);function z8(e){return e&&$8(e)&&e.name==="TypeError"&&typeof e.message=="string"?e.message==="Load failed"?e.stack===void 0:U8.has(e.message):!1}class ig extends Error{constructor(t){super(),t instanceof Error?(this.originalError=t,{message:t}=t):(this.originalError=new Error(t),this.originalError.stack=this.stack),this.name="AbortError",this.message=t}}const zb=(e,t,r)=>{const n=r.retries-(t-1);return e.attemptNumber=t,e.retriesLeft=n,e};async function Bb(e,t){return new Promise((r,n)=>{t={...t},t.onFailedAttempt??(t.onFailedAttempt=()=>{}),t.shouldRetry??(t.shouldRetry=()=>!0),t.retries??(t.retries=10);const s=D8.operation(t),a=()=>{var l;s.stop(),n((l=t.signal)==null?void 0:l.reason)};t.signal&&!t.signal.aborted&&t.signal.addEventListener("abort",a,{once:!0});const o=()=>{var l;(l=t.signal)==null||l.removeEventListener("abort",a),s.stop()};s.attempt(async l=>{try{const c=await e(l);o(),r(c)}catch(c){try{if(!(c instanceof Error))throw new TypeError(`Non-error was thrown: "${c}". You should only throw errors.`);if(c instanceof ig)throw c.originalError;if(c instanceof TypeError&&!z8(c))throw c;if(zb(c,l,t),await t.shouldRetry(c)||(s.stop(),n(c)),await t.onFailedAttempt(c),!s.retry(c))throw s.mainError()}catch(d){zb(d,l,t),o(),n(d)}}})})}const B8="@uppy/companion-client",V8="Client library for communication with Companion. Intended for use in Uppy plugins.",H8="4.5.2",W8="MIT",q8="lib/index.js",K8="module",G8={build:"tsc --build tsconfig.build.json",typecheck:"tsc --build",test:"vitest run --environment=jsdom --silent='passed-only'"},Q8=["file uploader","uppy","uppy-plugin","companion","provider"],Y8="https://uppy.io",X8={url:"https://github.com/transloadit/uppy/issues"},J8={type:"git",url:"git+https://github.com/transloadit/uppy.git"},Z8=["src","lib","dist","CHANGELOG.md"],e7={"@uppy/utils":"^6.2.2","namespace-emitter":"^2.0.1","p-retry":"^6.1.0"},t7={jsdom:"^26.1.0",typescript:"^5.8.3",vitest:"^3.2.4"},r7={"@uppy/core":"^4.5.2"},n7={name:B8,description:V8,version:H8,license:W8,main:q8,type:K8,scripts:G8,keywords:Q8,homepage:Y8,bugs:X8,repository:J8,files:Z8,dependencies:e7,devDependencies:t7,peerDependencies:r7};class s7 extends Error{constructor(){super("Authorization required");O(this,"isAuthError");this.name="AuthError",this.isAuthError=!0}}function i7(e){return e.replace(/\/$/,"")}const Vb=10,a7=5*60*1e3,o7=401;class l7 extends Error{constructor({statusCode:r,message:n}){super(n);O(this,"statusCode");this.name="HttpError",this.statusCode=r}}async function c7(e){if(e.status===o7)throw new s7;if(e.ok)return e.json();let t=`Failed request with status: ${e.status}. ${e.statusText}`,r;try{r=await e.json(),r.message&&(t=`${t} message: ${r.message}`),r.requestId&&(t=`${t} request-Id: ${r.requestId}`)}catch(n){throw new Error(t,{cause:n})}throw e.status>=400&&e.status<=499&&r.message?new A8(r.message):new l7({statusCode:e.status,message:t})}function d7(e,t,r){const{progress:n,bytesUploaded:s,bytesTotal:a}=t;n&&(e.uppy.log(`Upload progress: ${n}`),e.uppy.emit("upload-progress",r,{uploadStarted:r.progress.uploadStarted??0,bytesUploaded:s,bytesTotal:a}))}var xi,Bs,ag,Ju,og;class cP{constructor(t,r){D(this,Bs);D(this,xi);O(this,"uppy");O(this,"opts");D(this,Ju,async({file:t,postBody:r,signal:n})=>{var a;if(((a=t.remote)==null?void 0:a.url)==null)throw new Error("Cannot connect to an undefined URL");return(await this.post(t.remote.url,{...t.remote.body,...r},{signal:n})).token});this.uppy=t,this.opts=r,this.onReceiveResponse=this.onReceiveResponse.bind(this),$(this,xi,r.companionHeaders)}setCompanionHeaders(t){$(this,xi,t)}[Symbol.for("uppy test: getCompanionHeaders")](){return N(this,xi)}get hostname(){const{companion:t}=this.uppy.getState(),r=this.opts.companionUrl;return i7(t!=null&&t[r]?t[r]:r)}async headers(t=!1){return{...{Accept:"application/json",...t?void 0:{"Content-Type":"application/json"}},...N(this,xi)}}onReceiveResponse(t){const{headers:r}=t,s=this.uppy.getState().companion||{},a=this.opts.companionUrl;r.has("i-am")&&r.get("i-am")!==s[a]&&this.uppy.setState({companion:{...s,[a]:r.get("i-am")}})}async request({path:t,method:r="GET",data:n,skipPostResponse:s,signal:a}){try{const o=await this.headers(!n),l=await F8(U(this,Bs,ag).call(this,t),{method:r,signal:a,headers:o,credentials:this.opts.companionCookiesRule||"same-origin",body:n?JSON.stringify(n):null});return s||this.onReceiveResponse(l),await c7(l)}catch(o){throw o.isAuthError||o.name==="UserFacingApiError"||o.name==="AbortError"?o:new T8(`Could not ${r} ${U(this,Bs,ag).call(this,t)}`,{cause:o})}}async get(t,r){return this.request({...r,path:t})}async post(t,r,n){return this.request({...n,path:t,method:"POST",data:r})}async delete(t,r,n){return this.request({...n,path:t,method:"DELETE",data:r})}async uploadRemoteFile(t,r,n){try{const{signal:s,getQueue:a}=n||{};return await Bb(async()=>{var d;const o=(d=this.uppy.getFile(t.id))==null?void 0:d.serverToken;if(o!=null)return this.uppy.log(`Connecting to exiting websocket ${o}`),U(this,Bs,og).call(this,{file:t,queue:a(),signal:s});const c=await a().wrapPromiseFunction(async(...u)=>{try{return await N(this,Ju).call(this,...u)}catch(h){if(h.isAuthError)throw new ig(h);if(h.cause==null)throw h;const p=h.cause,m=()=>[408,409,429,418,423].includes(p.statusCode)||p.statusCode>=500&&p.statusCode<=599&&![501,505].includes(p.statusCode);throw p.name==="HttpError"&&!m()?new ig(p):p}},{priority:-1})({file:t,postBody:r,signal:s}).abortOn(s);if(this.uppy.getFile(t.id))return this.uppy.setFileState(t.id,{serverToken:c}),U(this,Bs,og).call(this,{file:this.uppy.getFile(t.id),queue:a(),signal:s})},{retries:Vb,signal:s,onFailedAttempt:o=>this.uppy.log(`Retrying upload due to: ${o.message}`,"warning")})}catch(s){if(s.name==="AbortError")return;throw this.uppy.emit("upload-error",t,s),s}}}xi=new WeakMap,Bs=new WeakSet,ag=function(t){return/^(https?:|)\/\//.test(t)?t:`${this.hostname}/${t}`},Ju=new WeakMap,og=async function({file:t,queue:r,signal:n}){let s;const{capabilities:a}=this.uppy.getState();try{return await new Promise((o,l)=>{const c=t.serverToken,d=M8(t.remote.companionUrl);let u,h,p,{isPaused:m}=t;const x=(S,_)=>{if(u==null||u.readyState!==u.OPEN){this.uppy.log(`Cannot send "${S}" to socket ${t.id} because the socket state was ${String(u==null?void 0:u.readyState)}`,"warning");return}u.send(JSON.stringify({action:S,payload:_??{}}))};function y(){a.resumableUploads&&x(m?"pause":"resume")}const w=async()=>{h&&h.abort(),h=new AbortController;const S=P=>{var T;this.uppy.setFileState(t.id,{serverToken:null}),(T=h==null?void 0:h.abort)==null||T.call(h),l(P)};function _(){clearTimeout(p),!m&&(p=setTimeout(()=>S(new Error("Timeout waiting for message from Companion socket")),a7))}try{await r.wrapPromiseFunction(async()=>{await Bb(async()=>new Promise((T,F)=>{u=new WebSocket(`${d}/api/${c}`),_(),u.addEventListener("close",()=>{u=void 0,F(new Error("Socket closed unexpectedly"))}),u.addEventListener("error",M=>{this.uppy.log(`Companion socket error ${JSON.stringify(M)}, closing socket`,"warning"),u==null||u.close()}),u.addEventListener("open",()=>{y()}),u.addEventListener("message",M=>{var I,H,V;_();try{const{action:Q,payload:A}=JSON.parse(M.data);switch(Q){case"progress":{d7(this,A,this.uppy.getFile(t.id));break}case"success":{const L=(I=A.response)==null?void 0:I.responseText;this.uppy.emit("upload-success",this.uppy.getFile(t.id),{uploadURL:A.url,status:((H=A.response)==null?void 0:H.status)??200,body:L?JSON.parse(L):void 0}),(V=h==null?void 0:h.abort)==null||V.call(h),o();break}case"error":{const{message:L}=A.error;throw Object.assign(new Error(L),{cause:A.error})}default:this.uppy.log(`Companion socket unknown action ${Q}`,"warning")}}catch(Q){S(Q)}});const R=()=>{this.uppy.log(`Closing socket ${t.id}`),clearTimeout(p),u&&u.close(),u=void 0};h.signal.addEventListener("abort",()=>{R()})}),{retries:Vb,signal:h.signal,onFailedAttempt:()=>{h.signal.aborted||this.uppy.log(`Retrying websocket ${t.id}`)}})})().abortOn(h.signal)}catch(P){if(h.signal.aborted)return;S(P)}},v=S=>{a.resumableUploads&&(m=S,u&&y())},g=S=>{var _;a.individualCancellation&&S.id===t.id&&(x("cancel"),(_=h==null?void 0:h.abort)==null||_.call(h),this.uppy.log(`upload ${t.id} was removed`),o())},b=()=>{var S;x("cancel"),(S=h==null?void 0:h.abort)==null||S.call(h),this.uppy.log(`upload ${t.id} was canceled`),o()},j=(S,_)=>{(S==null?void 0:S.id)===t.id&&v(_)},k=()=>v(!0),C=()=>v(!1);this.uppy.on("file-removed",g),this.uppy.on("cancel-all",b),this.uppy.on("upload-pause",j),this.uppy.on("pause-all",k),this.uppy.on("resume-all",C),s=()=>{this.uppy.off("file-removed",g),this.uppy.off("cancel-all",b),this.uppy.off("upload-pause",j),this.uppy.off("pause-all",k),this.uppy.off("resume-all",C)},n.addEventListener("abort",()=>{h==null||h.abort()}),w()})}finally{s==null||s()}},O(cP,"VERSION",n7.version);var tn,ic;class u7{constructor(t){D(this,tn);D(this,ic,[]);$(this,tn,t)}on(t,r){return N(this,ic).push([t,r]),N(this,tn).on(t,r)}remove(){for(const[t,r]of N(this,ic).splice(0))N(this,tn).off(t,r)}onFilePause(t,r){this.on("upload-pause",(n,s)=>{t===(n==null?void 0:n.id)&&r(s)})}onFileRemove(t,r){this.on("file-removed",n=>{t===n.id&&r(n.id)})}onPause(t,r){this.on("upload-pause",(n,s)=>{t===(n==null?void 0:n.id)&&r(s)})}onRetry(t,r){this.on("upload-retry",n=>{t===(n==null?void 0:n.id)&&r()})}onRetryAll(t,r){this.on("retry-all",()=>{N(this,tn).getFile(t)&&r()})}onPauseAll(t,r){this.on("pause-all",()=>{N(this,tn).getFile(t)&&r()})}onCancelAll(t,r){this.on("cancel-all",(...n)=>{N(this,tn).getFile(t)&&r(...n)})}onResumeAll(t,r){this.on("resume-all",()=>{N(this,tn).getFile(t)&&r()})}}tn=new WeakMap,ic=new WeakMap;const{AbortController:op}=globalThis,dP=(e="Aborted",t)=>{const r=new DOMException(e,"AbortError");return t!=null&&oP(t,"cause")&&Object.defineProperty(r,"cause",{__proto__:null,configurable:!0,writable:!0,value:t.cause}),r};function h7(e){const t=r=>"error"in r&&!!r.error;return e.filter(r=>!t(r))}function f7(e){return e.filter(t=>{var r;return!((r=t.progress)!=null&&r.uploadStarted)||!t.isRestored})}function Hb(e,t){return e===!0?Object.keys(t):Array.isArray(e)?e:[]}function p7(e){return new Error("Cancelled",{cause:e})}function Wb(e){var t;if(e!=null){const r=()=>this.abort(e.reason);e.addEventListener("abort",r,{once:!0});const n=()=>{e.removeEventListener("abort",r)};(t=this.then)==null||t.call(this,n,n)}return this}var kn,rn,Cn,za,nn,Ba,bi,vt,lg,tl,uP,hP,fP,Zu,Va;class m7{constructor(t){D(this,vt);D(this,kn,0);D(this,rn,[]);D(this,Cn,!1);D(this,za);D(this,nn,1);D(this,Ba);D(this,bi);O(this,"limit");D(this,Zu,()=>this.resume());D(this,Va,()=>{if(N(this,Cn)){$(this,bi,setTimeout(N(this,Va),0));return}$(this,nn,this.limit),this.limit=Math.ceil((N(this,Ba)+N(this,nn))/2);for(let t=N(this,nn);t<=this.limit;t++)U(this,vt,tl).call(this);N(this,Ba)-N(this,nn)>3?$(this,bi,setTimeout(N(this,Va),2e3)):$(this,nn,Math.floor(N(this,nn)/2))});typeof t!="number"||t===0?this.limit=1/0:this.limit=t}run(t,r){return!N(this,Cn)&&N(this,kn)<this.limit?U(this,vt,lg).call(this,t):U(this,vt,hP).call(this,t,r)}wrapSyncFunction(t,r){return(...n)=>{const s=this.run(()=>(t(...n),queueMicrotask(()=>s.done()),()=>{}),r);return{abortOn:Wb,abort(){s.abort()}}}}wrapPromiseFunction(t,r){return(...n)=>{let s;const a=new Promise((o,l)=>{s=this.run(()=>{let c,d;try{d=Promise.resolve(t(...n))}catch(u){d=Promise.reject(u)}return d.then(u=>{c?l(c):(s.done(),o(u))},u=>{c?l(c):(s.done(),l(u))}),u=>{c=p7(u)}},r)});return a.abort=o=>{s.abort(o)},a.abortOn=Wb,a}}resume(){$(this,Cn,!1),clearTimeout(N(this,za));for(let t=0;t<this.limit;t++)U(this,vt,tl).call(this)}pause(t=null){$(this,Cn,!0),clearTimeout(N(this,za)),t!=null&&$(this,za,setTimeout(N(this,Zu),t))}rateLimit(t){clearTimeout(N(this,bi)),this.pause(t),this.limit>1&&Number.isFinite(this.limit)&&($(this,Ba,this.limit-1),this.limit=N(this,nn),$(this,bi,setTimeout(N(this,Va),t)))}get isPaused(){return N(this,Cn)}}kn=new WeakMap,rn=new WeakMap,Cn=new WeakMap,za=new WeakMap,nn=new WeakMap,Ba=new WeakMap,bi=new WeakMap,vt=new WeakSet,lg=function(t){$(this,kn,N(this,kn)+1);let r=!1,n;try{n=t()}catch(s){throw $(this,kn,N(this,kn)-1),s}return{abort:s=>{r||(r=!0,$(this,kn,N(this,kn)-1),n==null||n(s),U(this,vt,tl).call(this))},done:()=>{r||(r=!0,$(this,kn,N(this,kn)-1),U(this,vt,tl).call(this))}}},tl=function(){queueMicrotask(()=>U(this,vt,uP).call(this))},uP=function(){if(N(this,Cn)||N(this,kn)>=this.limit||N(this,rn).length===0)return;const t=N(this,rn).shift();if(t==null)throw new Error("Invariant violation: next is null");const r=U(this,vt,lg).call(this,t.fn);t.abort=r.abort,t.done=r.done},hP=function(t,r){const n={fn:t,priority:(r==null?void 0:r.priority)||0,abort:()=>{U(this,vt,fP).call(this,n)},done:()=>{throw new Error("Cannot mark a queued request as done: this indicates a bug")}},s=N(this,rn).findIndex(a=>n.priority>a.priority);return s===-1?N(this,rn).push(n):N(this,rn).splice(s,0,n),n},fP=function(t){const r=N(this,rn).indexOf(t);r!==-1&&N(this,rn).splice(r,1)},Zu=new WeakMap,Va=new WeakMap;const g7="@uppy/aws-s3",y7="Upload to Amazon S3 with Uppy",v7="4.3.2",x7="MIT",b7="lib/index.js",w7="module",N7={build:"tsc --build tsconfig.build.json",typecheck:"tsc --build",test:"vitest run --environment=jsdom --silent='passed-only'"},j7=["file uploader","aws s3","amazon s3","s3","uppy","uppy-plugin","multipart"],S7="https://uppy.io",k7={url:"https://github.com/transloadit/uppy/issues"},C7={type:"git",url:"git+https://github.com/transloadit/uppy.git"},P7=["src","lib","dist","CHANGELOG.md"],E7={"@uppy/companion-client":"^4.5.2","@uppy/utils":"^6.2.2"},_7={"@aws-sdk/client-s3":"^3.362.0","@aws-sdk/s3-request-presigner":"^3.362.0","@uppy/core":"^4.5.2",jsdom:"^26.1.0",nock:"^13.1.0",typescript:"^5.8.3",vitest:"^3.2.4","whatwg-fetch":"3.6.2"},T7={"@uppy/core":"^4.5.2"},R7={name:g7,description:y7,version:v7,license:x7,main:b7,type:w7,scripts:N7,keywords:j7,homepage:S7,bugs:k7,repository:C7,files:P7,dependencies:E7,devDependencies:_7,peerDependencies:T7};function F7({method:e="PUT",CanonicalUri:t="/",CanonicalQueryString:r="",SignedHeaders:n,HashedPayload:s}){const a=Object.keys(n).map(o=>o.toLowerCase()).sort();return[e,t,r,...a.map(o=>`${o}:${n[o]}`),"",a.join(";"),s].join(`
`)}const Nv=new TextEncoder,jv={name:"HMAC",hash:"SHA-256"};async function M7(e){const{subtle:t}=globalThis.crypto;return t.digest(jv.hash,Nv.encode(e))}async function A7(e){const{subtle:t}=globalThis.crypto;return t.importKey("raw",typeof e=="string"?Nv.encode(e):e,jv,!1,["sign"])}function qb(e){const t=new Uint8Array(e);let r="";for(let n=0;n<t.length;n++)r+=t[n].toString(16).padStart(2,"0");return r}async function zo(e,t){const{subtle:r}=globalThis.crypto;return r.sign(jv,await A7(e),Nv.encode(t))}async function I7({accountKey:e,accountSecret:t,sessionToken:r,bucketName:n,Key:s,Region:a,expires:o,uploadId:l,partNumber:c}){const d="s3",u=`${d}.${a}.amazonaws.com`,h=`/${n}/${encodeURI(s).replace(/[;?:@&=+$,#!'()*]/g,P=>`%${P.charCodeAt(0).toString(16).toUpperCase()}`)}`,p="UNSIGNED-PAYLOAD",m=new Date().toISOString().replace(/[-:]|\.\d+/g,""),x=m.slice(0,8),y=`${x}/${a}/${d}/aws4_request`,w=new URL(`https://${u}${h}`);w.searchParams.set("X-Amz-Algorithm","AWS4-HMAC-SHA256"),w.searchParams.set("X-Amz-Content-Sha256",p),w.searchParams.set("X-Amz-Credential",`${e}/${y}`),w.searchParams.set("X-Amz-Date",m),w.searchParams.set("X-Amz-Expires",o),w.searchParams.set("X-Amz-Security-Token",r),w.searchParams.set("X-Amz-SignedHeaders","host"),c&&w.searchParams.set("partNumber",c),l&&w.searchParams.set("uploadId",l),w.searchParams.set("x-id",c&&l?"UploadPart":"PutObject");const v=F7({CanonicalUri:h,CanonicalQueryString:w.search.slice(1),SignedHeaders:{host:u},HashedPayload:p}),g=qb(await M7(v)),b=["AWS4-HMAC-SHA256",m,y,g].join(`
`),j=await zo(`AWS4${t}`,x),k=await zo(j,a),C=await zo(k,d),S=await zo(C,"aws4_request"),_=qb(await zo(S,b));return w.searchParams.set("X-Amz-Signature",_),w}const O7=1024*1024,Kb={getChunkSize(e){return Math.ceil(e.size/1e4)},onProgress(){},onPartComplete(){},onSuccess(){},onError(e){throw e}};function D7(e){if(typeof e=="string")return parseInt(e,10);if(typeof e=="number")return e;throw new TypeError("Expected a number")}const eu=Symbol("pausing upload, not an actual error");var br,Xt,sn,Pn,En,ac,oc,Ha,wi,Wa,lc,qa,cc,Vr,pP,mP,cg,dc,uc,gP;class L7{constructor(t,r){D(this,Vr);O(this,"options");D(this,br,new op);D(this,Xt,[]);D(this,sn,[]);D(this,Pn);D(this,En);D(this,ac,!1);D(this,oc);D(this,Ha);D(this,wi);D(this,Wa);D(this,lc,t=>(t==null?void 0:t.cause)===eu?null:N(this,oc).call(this,t));D(this,qa,1e4);D(this,cc,5*O7);D(this,dc,t=>r=>{if(!r.lengthComputable)return;N(this,sn)[t].uploaded=D7(r.loaded);const n=N(this,sn).reduce((s,a)=>s+a.uploaded,0);this.options.onProgress(n,N(this,Pn).size)});D(this,uc,t=>r=>{N(this,Xt)[t]=null,N(this,sn)[t].etag=r,N(this,sn)[t].done=!0;const n={PartNumber:t+1,ETag:r};this.options.onPartComplete(n)});var n;this.options={...Kb,...r},(n=this.options).getChunkSize??(n.getChunkSize=Kb.getChunkSize),$(this,Pn,t),$(this,En,r.file),$(this,Ha,this.options.onSuccess),$(this,oc,this.options.onError),$(this,wi,this.options.shouldUseMultipart),$(this,Wa,r.uploadId&&r.key),U(this,Vr,pP).call(this)}start(){N(this,ac)?(N(this,br).signal.aborted||N(this,br).abort(eu),$(this,br,new op),U(this,Vr,cg).call(this)):N(this,Wa)?(this.options.companionComm.restoreUploadFile(N(this,En),{uploadId:this.options.uploadId,key:this.options.key}),U(this,Vr,cg).call(this)):U(this,Vr,mP).call(this)}pause(){N(this,br).abort(eu),$(this,br,new op)}abort(t){t!=null&&t.really?U(this,Vr,gP).call(this):this.pause()}[Symbol.for("uppy test: getChunkState")](){return N(this,sn)}}br=new WeakMap,Xt=new WeakMap,sn=new WeakMap,Pn=new WeakMap,En=new WeakMap,ac=new WeakMap,oc=new WeakMap,Ha=new WeakMap,wi=new WeakMap,Wa=new WeakMap,lc=new WeakMap,qa=new WeakMap,cc=new WeakMap,Vr=new WeakSet,pP=function(){const t=N(this,Pn).size,r=typeof N(this,wi)=="function"?N(this,wi).call(this,N(this,En)):!!N(this,wi);if(r&&t>N(this,cc)){let n=Math.max(this.options.getChunkSize(N(this,Pn)),N(this,cc)),s=Math.floor(t/n);s>N(this,qa)&&(s=N(this,qa),n=t/N(this,qa)),$(this,Xt,Array(s));for(let a=0,o=0;a<t;a+=n,o++){const l=Math.min(t,a+n),c=()=>{const d=a;return N(this,Pn).slice(d,l)};if(N(this,Xt)[o]={getData:c,onProgress:N(this,dc).call(this,o),onComplete:N(this,uc).call(this,o),shouldUseMultipart:r},N(this,Wa)){const d=a+n>t?t-a:n;N(this,Xt)[o].setAsUploaded=()=>{N(this,Xt)[o]=null,N(this,sn)[o].uploaded=d}}}}else $(this,Xt,[{getData:()=>N(this,Pn),onProgress:N(this,dc).call(this,0),onComplete:N(this,uc).call(this,0),shouldUseMultipart:r}]);$(this,sn,N(this,Xt).map(()=>({uploaded:0})))},mP=function(){this.options.companionComm.uploadFile(N(this,En),N(this,Xt),N(this,br).signal).then(N(this,Ha),N(this,lc)),$(this,ac,!0)},cg=function(){this.options.companionComm.resumeUploadFile(N(this,En),N(this,Xt),N(this,br).signal).then(N(this,Ha),N(this,lc))},dc=new WeakMap,uc=new WeakMap,gP=function(){N(this,br).abort(),this.options.companionComm.abortFileUpload(N(this,En)).catch(t=>this.options.log(t))};function gt(e){if(e!=null&&e.aborted)throw dP("The operation was aborted",{cause:e.reason})}function $7(e){const t=new URL(e);return t.search="",t.hash="",t.href}var hc,wr,fc,pc,mc,gc,Ka,Ga,Qa,Ya,Ni,Xa,Nr,Di,yP,dg;class U7{constructor(t,r,n,s){D(this,Di);D(this,hc);D(this,wr,new WeakMap);D(this,fc);D(this,pc);D(this,mc);D(this,gc);D(this,Ka);D(this,Ga);D(this,Qa);D(this,Ya);D(this,Ni);D(this,Xa);D(this,Nr);$(this,Ga,t),$(this,Ni,n),$(this,Nr,s),this.setOptions(r)}setOptions(t){const r=N(this,Ga);"abortMultipartUpload"in t&&$(this,hc,r.wrapPromiseFunction(t.abortMultipartUpload,{priority:1})),"createMultipartUpload"in t&&$(this,fc,r.wrapPromiseFunction(t.createMultipartUpload,{priority:-1})),"signPart"in t&&$(this,pc,r.wrapPromiseFunction(t.signPart)),"listParts"in t&&$(this,gc,r.wrapPromiseFunction(t.listParts)),"completeMultipartUpload"in t&&$(this,Ya,r.wrapPromiseFunction(t.completeMultipartUpload,{priority:1})),"retryDelays"in t&&$(this,Qa,t.retryDelays??[]),"uploadPartBytes"in t&&$(this,Xa,r.wrapPromiseFunction(t.uploadPartBytes,{priority:1/0})),"getUploadParameters"in t&&$(this,mc,r.wrapPromiseFunction(t.getUploadParameters))}async getUploadId(t,r){let n;for(;n=N(this,wr).get(t.data),n!=null;)try{return await n}catch{}const s=N(this,fc).call(this,N(this,Nr).call(this,t),r),a=()=>{s.abort(r.reason),N(this,wr).delete(t.data)};return r.addEventListener("abort",a,{once:!0}),N(this,wr).set(t.data,s),s.then(async o=>{r.removeEventListener("abort",a),N(this,Ni).call(this,t,o),N(this,wr).set(t.data,o)},()=>{r.removeEventListener("abort",a),N(this,wr).delete(t.data)}),s}async abortFileUpload(t){const r=N(this,wr).get(t.data);if(r==null)return;N(this,wr).delete(t.data),N(this,Ni).call(this,t,Object.create(null));let n;try{n=await r}catch{return}await N(this,hc).call(this,N(this,Nr).call(this,t),n)}async uploadFile(t,r,n){if(gt(n),r.length===1&&!r[0].shouldUseMultipart)return U(this,Di,dg).call(this,t,r[0],n);const{uploadId:s,key:a}=await this.getUploadId(t,n);gt(n);try{const o=await Promise.all(r.map((l,c)=>this.uploadChunk(t,c+1,l,n)));return gt(n),await N(this,Ya).call(this,N(this,Nr).call(this,t),{key:a,uploadId:s,parts:o,signal:n},n).abortOn(n)}catch(o){throw(o==null?void 0:o.cause)!==eu&&(o==null?void 0:o.name)!=="AbortError"&&this.abortFileUpload(t),o}}restoreUploadFile(t,r){N(this,wr).set(t.data,r)}async resumeUploadFile(t,r,n){if(gt(n),r.length===1&&r[0]!=null&&!r[0].shouldUseMultipart)return U(this,Di,dg).call(this,t,r[0],n);const{uploadId:s,key:a}=await this.getUploadId(t,n);gt(n);const o=await N(this,gc).call(this,N(this,Nr).call(this,t),{uploadId:s,key:a,signal:n},n).abortOn(n);gt(n);const l=await Promise.all(r.map((c,d)=>{var p;const u=d+1,h=o.find(({PartNumber:m})=>m===u);return h==null?this.uploadChunk(t,u,c,n):((p=c==null?void 0:c.setAsUploaded)==null||p.call(c),{PartNumber:u,ETag:h.ETag})}));return gt(n),N(this,Ya).call(this,N(this,Nr).call(this,t),{key:a,uploadId:s,parts:l,signal:n},n).abortOn(n)}async uploadChunk(t,r,n,s){gt(s);const{uploadId:a,key:o}=await this.getUploadId(t,s),l=N(this,Qa).values(),c=N(this,Qa).values(),d=()=>{const u=l.next();return u==null||u.done?null:u.value};for(;;){gt(s);const u=n.getData(),{onProgress:h,onComplete:p}=n;let m;try{m=await N(this,pc).call(this,N(this,Nr).call(this,t),{uploadId:a,key:o,partNumber:r,body:u,signal:s}).abortOn(s)}catch(x){const y=d();if(y==null||s.aborted)throw x;await new Promise(w=>setTimeout(w,y));continue}gt(s);try{return{PartNumber:r,...await N(this,Xa).call(this,{signature:m,body:u,size:u.size,onProgress:h,onComplete:p,signal:s}).abortOn(s)}}catch(x){if(!await U(this,Di,yP).call(this,x,c))throw x}}}}hc=new WeakMap,wr=new WeakMap,fc=new WeakMap,pc=new WeakMap,mc=new WeakMap,gc=new WeakMap,Ka=new WeakMap,Ga=new WeakMap,Qa=new WeakMap,Ya=new WeakMap,Ni=new WeakMap,Xa=new WeakMap,Nr=new WeakMap,Di=new WeakSet,yP=async function(t,r){var a;const n=N(this,Ga),s=(a=t==null?void 0:t.source)==null?void 0:a.status;if(s==null)return!1;if(s===403&&t.message==="Request has expired"){if(!n.isPaused){if(n.limit===1||N(this,Ka)==null){const o=r.next();if(o==null||o.done)return!1;$(this,Ka,o.value)}n.rateLimit(0),await new Promise(o=>setTimeout(o,N(this,Ka)))}}else if(s===429){if(!n.isPaused){const o=r.next();if(o==null||o.done)return!1;n.rateLimit(o.value)}}else{if(s>400&&s<500&&s!==409)return!1;if(typeof navigator<"u"&&navigator.onLine===!1)n.isPaused||(n.pause(),window.addEventListener("online",()=>{n.resume()},{once:!0}));else{const o=r.next();if(o==null||o.done)return!1;await new Promise(l=>setTimeout(l,o.value))}}return!0},dg=async function(t,r,n){const{method:s="POST",url:a,fields:o,headers:l}=await N(this,mc).call(this,N(this,Nr).call(this,t),{signal:n}).abortOn(n);let c;const d=r.getData();if(s.toUpperCase()==="POST"){const x=new FormData;Object.entries(o).forEach(([y,w])=>x.set(y,w)),x.set("file",d),c=x}else c=d;const{onProgress:u,onComplete:h}=r,p=await N(this,Xa).call(this,{signature:{url:a,headers:l,method:s},body:c,size:d.size,onProgress:u,onComplete:h,signal:n}).abortOn(n),m=o==null?void 0:o.key;return N(this,Ni).call(this,t,{key:m}),{...p,location:p.location??$7(a),bucket:o==null?void 0:o.bucket,key:m}};function Yi(e){if(e!=null&&e.error){const t=new Error(e.message);throw Object.assign(t,e.error),t}return e}function Gb(e){const t=e.Expiration;if(t){const r=Math.floor((new Date(t)-Date.now())/1e3);if(r>9)return r}}function Qb({meta:e,allowedMetaFields:t,querify:r=!1}){const n=t??Object.keys(e);return e?Object.fromEntries(n.filter(s=>e[s]!=null).map(s=>{const a=r?`metadata[${s}]`:s,o=String(e[s]);return[a,o]})):{}}const z7={allowedMetaFields:!0,limit:6,getTemporarySecurityCredentials:!1,shouldUseMultipart:e=>(e.size||0)>100*1024*1024,retryDelays:[0,1e3,3e3,5e3]};var Ja,St,Ze,hg,ss,jr,vP,eh,Za,xP,bP,yc,eo,ji,vc;const th=class th extends Y2{constructor(r,n){super(r,{...z7,uploadPartBytes:th.uploadPartBytes,createMultipartUpload:null,listParts:null,abortMultipartUpload:null,completeMultipartUpload:null,signPart:null,getUploadParameters:null,...n});D(this,Ze);D(this,Ja);D(this,St);O(this,"requests");O(this,"uploaderEvents");O(this,"uploaders");D(this,jr);D(this,eh,(r,{key:n,uploadId:s})=>{const a=this.uppy.getFile(r.id);a!=null&&this.uppy.setFileState(r.id,{s3Multipart:{...a.s3Multipart,key:n,uploadId:s}})});D(this,Za,r=>this.uppy.getFile(r.id)||r);D(this,yc,async r=>{if(r.length===0)return;const n=this.uppy.getFilesByIds(r),s=h7(n),a=f7(s);this.uppy.emit("upload-start",a);const o=s.map(c=>{if(c.isRemote){const d=()=>this.requests;N(this,ji).call(this,!1);const u=new AbortController,h=m=>{m.id===c.id&&u.abort()};this.uppy.on("file-removed",h);const p=this.uppy.getRequestClientForFile(c).uploadRemoteFile(c,U(this,Ze,bP).call(this,c),{signal:u.signal,getQueue:d});return this.requests.wrapSyncFunction(()=>{this.uppy.off("file-removed",h)},{priority:-1})(),p}return U(this,Ze,xP).call(this,c)}),l=await Promise.allSettled(o);return N(this,ji).call(this,!0),l});D(this,eo,()=>{var r;(r=N(this,St))==null||r.setCompanionHeaders(this.opts.headers)});D(this,ji,r=>{const{capabilities:n}=this.uppy.getState();this.uppy.setState({capabilities:{...n,resumableUploads:r}})});D(this,vc,()=>{N(this,ji).call(this,!0)});this.type="uploader",this.id=this.opts.id||"AwsS3Multipart",U(this,Ze,hg).call(this,n);const s={createMultipartUpload:this.createMultipartUpload,listParts:this.listParts,abortMultipartUpload:this.abortMultipartUpload,completeMultipartUpload:this.completeMultipartUpload,signPart:n!=null&&n.getTemporarySecurityCredentials?this.createSignedURL:this.signPart,getUploadParameters:n!=null&&n.getTemporarySecurityCredentials?this.createSignedURL:this.getUploadParameters};for(const a of Object.keys(s))this.opts[a]==null&&(this.opts[a]=s[a].bind(this));this.requests=this.opts.rateLimitedQueue??new m7(this.opts.limit),$(this,Ja,new U7(this.requests,this.opts,N(this,eh),N(this,Za))),this.uploaders=Object.create(null),this.uploaderEvents=Object.create(null)}[Symbol.for("uppy test: getClient")](){return N(this,St)}setOptions(r){N(this,Ja).setOptions(r),super.setOptions(r),U(this,Ze,hg).call(this,r)}resetUploaderReferences(r,n){this.uploaders[r]&&(this.uploaders[r].abort({really:(n==null?void 0:n.abort)||!1}),this.uploaders[r]=null),this.uploaderEvents[r]&&(this.uploaderEvents[r].remove(),this.uploaderEvents[r]=null)}createMultipartUpload(r,n){U(this,Ze,ss).call(this,"createMultipartUpload"),gt(n);const s=Hb(this.opts.allowedMetaFields,r.meta),a=Qb({meta:r.meta,allowedMetaFields:s});return N(this,St).post("s3/multipart",{filename:r.name,type:r.type,metadata:a},{signal:n}).then(Yi)}listParts(r,{key:n,uploadId:s,signal:a},o){a??(a=o),U(this,Ze,ss).call(this,"listParts"),gt(a);const l=encodeURIComponent(n);return N(this,St).get(`s3/multipart/${encodeURIComponent(s)}?key=${l}`,{signal:a}).then(Yi)}completeMultipartUpload(r,{key:n,uploadId:s,parts:a,signal:o},l){o??(o=l),U(this,Ze,ss).call(this,"completeMultipartUpload"),gt(o);const c=encodeURIComponent(n),d=encodeURIComponent(s);return N(this,St).post(`s3/multipart/${d}/complete?key=${c}`,{parts:a.map(({ETag:u,PartNumber:h})=>({ETag:u,PartNumber:h}))},{signal:o}).then(Yi)}async createSignedURL(r,n){const s=await U(this,Ze,vP).call(this,n),a=Gb(s.credentials)||604800,{uploadId:o,key:l,partNumber:c}=n;return{method:"PUT",expires:a,fields:{},url:`${await I7({accountKey:s.credentials.AccessKeyId,accountSecret:s.credentials.SecretAccessKey,sessionToken:s.credentials.SessionToken,expires:a,bucketName:s.bucket,Region:s.region,Key:l??`${crypto.randomUUID()}-${r.name}`,uploadId:o,partNumber:c})}`,headers:{"Content-Type":r.type}}}signPart(r,{uploadId:n,key:s,partNumber:a,signal:o}){if(U(this,Ze,ss).call(this,"signPart"),gt(o),n==null||s==null||a==null)throw new Error("Cannot sign without a key, an uploadId, and a partNumber");const l=encodeURIComponent(s);return N(this,St).get(`s3/multipart/${encodeURIComponent(n)}/${a}?key=${l}`,{signal:o}).then(Yi)}abortMultipartUpload(r,{key:n,uploadId:s,signal:a}){U(this,Ze,ss).call(this,"abortMultipartUpload");const o=encodeURIComponent(n),l=encodeURIComponent(s);return N(this,St).delete(`s3/multipart/${l}?key=${o}`,void 0,{signal:a}).then(Yi)}getUploadParameters(r,n){U(this,Ze,ss).call(this,"getUploadParameters");const{meta:s}=r,{type:a,name:o}=s,l=Hb(this.opts.allowedMetaFields,r.meta),c=Qb({meta:s,allowedMetaFields:l,querify:!0}),d=new URLSearchParams({filename:o,type:a,...c});return N(this,St).get(`s3/params?${d}`,n)}static async uploadPartBytes({signature:{url:r,expires:n,headers:s,method:a="PUT"},body:o,size:l=o.size,onProgress:c,onComplete:d,signal:u}){if(gt(u),r==null)throw new Error("Cannot upload to an undefined URL");return new Promise((h,p)=>{const m=new XMLHttpRequest;m.open(a,r,!0),s&&Object.keys(s).forEach(w=>{m.setRequestHeader(w,s[w])}),m.responseType="text",typeof n=="number"&&(m.timeout=n*1e3);function x(){m.abort()}function y(){u==null||u.removeEventListener("abort",x)}u==null||u.addEventListener("abort",x),m.upload.addEventListener("progress",w=>{c(w)}),m.addEventListener("abort",()=>{y(),p(dP())}),m.addEventListener("timeout",()=>{y();const w=new Error("Request has expired");w.source={status:403},p(w)}),m.addEventListener("load",()=>{if(y(),m.status===403&&m.responseText.includes("<Message>Request has expired</Message>")){const j=new Error("Request has expired");j.source=m,p(j);return}if(m.status<200||m.status>=300){const j=new Error("Non 2xx");j.source=m,p(j);return}c==null||c({loaded:l,lengthComputable:!0});const w=m.getAllResponseHeaders().trim().split(/[\r\n]+/),v={__proto__:null};for(const j of w){const k=j.split(": "),C=k.shift(),S=k.join(": ");v[C]=S}const{etag:g,location:b}=v;if(a.toUpperCase()==="POST"&&b==null&&console.error("@uppy/aws-s3: Could not read the Location header. This likely means CORS is not configured correctly on the S3 Bucket. See https://uppy.io/docs/aws-s3/#setting-up-your-s3-bucket"),g==null){console.error("@uppy/aws-s3: Could not read the ETag header. This likely means CORS is not configured correctly on the S3 Bucket. See https://uppy.io/docs/aws-s3/#setting-up-your-s3-bucket");return}d==null||d(g),h({...v,ETag:g})}),m.addEventListener("error",w=>{y();const v=new Error("Unknown error");v.source=w.target,p(v)}),m.send(o)})}install(){N(this,ji).call(this,!0),this.uppy.addPreProcessor(N(this,eo)),this.uppy.addUploader(N(this,yc)),this.uppy.on("cancel-all",N(this,vc))}uninstall(){this.uppy.removePreProcessor(N(this,eo)),this.uppy.removeUploader(N(this,yc)),this.uppy.off("cancel-all",N(this,vc))}};Ja=new WeakMap,St=new WeakMap,Ze=new WeakSet,hg=function(r){r==null||!("endpoint"in r||"companionUrl"in r||"headers"in r||"companionHeaders"in r||"cookiesRule"in r||"companionCookiesRule"in r)||("companionUrl"in r&&!("endpoint"in r)&&this.uppy.log("`companionUrl` option has been removed in @uppy/aws-s3, use `endpoint` instead.","warning"),"companionHeaders"in r&&!("headers"in r)&&this.uppy.log("`companionHeaders` option has been removed in @uppy/aws-s3, use `headers` instead.","warning"),"companionCookiesRule"in r&&!("cookiesRule"in r)&&this.uppy.log("`companionCookiesRule` option has been removed in @uppy/aws-s3, use `cookiesRule` instead.","warning"),"endpoint"in r?$(this,St,new cP(this.uppy,{pluginId:this.id,provider:"AWS",companionUrl:this.opts.endpoint,companionHeaders:this.opts.headers,companionCookiesRule:this.opts.cookiesRule})):("headers"in r&&N(this,eo).call(this),"cookiesRule"in r&&(N(this,St).opts.companionCookiesRule=r.cookiesRule)))},ss=function(r){if(!N(this,St))throw new Error(`Expected a \`endpoint\` option containing a URL, or if you are not using Companion, a custom \`${r}\` implementation.`)},jr=new WeakMap,vP=async function(r){if(gt(r==null?void 0:r.signal),N(this,jr)==null){const{getTemporarySecurityCredentials:n}=this.opts;n===!0?(U(this,Ze,ss).call(this,"getTemporarySecurityCredentials"),$(this,jr,N(this,St).get("s3/sts",r).then(Yi))):$(this,jr,n(r)),$(this,jr,await N(this,jr)),setTimeout(()=>{$(this,jr,null)},(Gb(N(this,jr).credentials)||0)*500)}return N(this,jr)},eh=new WeakMap,Za=new WeakMap,xP=function(r){return new Promise((n,s)=>{const a=(u,h)=>{const p=this.uppy.getFile(r.id);this.uppy.emit("upload-progress",p,{uploadStarted:p.progress.uploadStarted??0,bytesUploaded:u,bytesTotal:h})},o=u=>{this.uppy.log(u),this.uppy.emit("upload-error",r,u),this.resetUploaderReferences(r.id),s(u)},l=u=>{const h={body:{...u},status:200,uploadURL:u.location};this.resetUploaderReferences(r.id),this.uppy.emit("upload-success",N(this,Za).call(this,r),h),u.location&&this.uppy.log(`Download ${r.name} from ${u.location}`),n(void 0)},c=new L7(r.data,{companionComm:N(this,Ja),log:(...u)=>this.uppy.log(...u),getChunkSize:this.opts.getChunkSize?this.opts.getChunkSize.bind(this):void 0,onProgress:a,onError:o,onSuccess:l,onPartComplete:u=>{this.uppy.emit("s3-multipart:part-uploaded",N(this,Za).call(this,r),u)},file:r,shouldUseMultipart:this.opts.shouldUseMultipart,...r.s3Multipart});this.uploaders[r.id]=c;const d=new u7(this.uppy);this.uploaderEvents[r.id]=d,d.onFileRemove(r.id,u=>{c.abort(),this.resetUploaderReferences(r.id,{abort:!0}),n(`upload ${u} was removed`)}),d.onCancelAll(r.id,()=>{c.abort(),this.resetUploaderReferences(r.id,{abort:!0}),n(`upload ${r.id} was canceled`)}),d.onFilePause(r.id,u=>{u?c.pause():c.start()}),d.onPauseAll(r.id,()=>{c.pause()}),d.onResumeAll(r.id,()=>{c.start()}),c.start()})},bP=function(r){var n;return{...(n=r.remote)==null?void 0:n.body,protocol:"s3-multipart",size:r.data.size,metadata:r.meta}},yc=new WeakMap,eo=new WeakMap,ji=new WeakMap,vc=new WeakMap,O(th,"VERSION",R7.version);let ug=th;function Uu({maxNumberOfFiles:e=1,maxFileSize:t=10485760,onGetUploadParameters:r,onComplete:n,buttonClassName:s,children:a}){const[o,l]=f.useState(!1),[c]=f.useState(()=>new Bm({restrictions:{maxNumberOfFiles:e,maxFileSize:t},autoProceed:!1}).use(ug,{shouldUseMultipart:!1,getUploadParameters:r}).on("complete",d=>{n==null||n(d)}));return i.jsxs("div",{children:[i.jsx(z,{onClick:()=>l(!0),className:s,children:a}),i.jsx(aP,{uppy:c,open:o,onRequestClose:()=>l(!1),proudlyDisplayPoweredByUppy:!1})]})}function Sv({post:e}){const[t,r]=f.useState(!1),[n,s]=f.useState(!1),{toast:a}=ke(),o=Xe(),{user:l}=Fe(),{data:c}=xe({queryKey:["/api/admin/check",l==null?void 0:l.id],enabled:!!(l!=null&&l.id)}),d=l&&(e.userId===l.id||c&&typeof c=="object"&&"isAdmin"in c&&c.isAdmin&&(l.email==="Frhighday760@icloud.com"||l.email==="16southvideo@gmail.com")),u=pe({mutationFn:async g=>{const b={"Content-Type":"application/json"};l&&(b["x-user-data"]=encodeURIComponent(JSON.stringify({id:l.id})));const j=await fetch(`/api/posts/${g}`,{method:"DELETE",headers:b,credentials:"include"});if(!j.ok)throw new Error(`Failed to delete post: ${j.statusText}`);return j.json()},onSuccess:()=>{o.invalidateQueries({queryKey:["/api/posts"]}),a({title:"Post Deleted",description:"Post has been permanently removed",variant:"destructive"})},onError:g=>{a({title:"Error",description:g.message||"Failed to delete post",variant:"destructive"})}}),h=()=>{a({title:"Edit Feature",description:"Post editing will be available soon!"}),r(!1)},p=()=>{confirm("Delete this post?")&&u.mutate(e.id),r(!1)},m=pe({mutationFn:async g=>(await ne("PATCH",`/api/posts/${e.id}/images`,{images:g})).json(),onSuccess:()=>{o.invalidateQueries({queryKey:["/api/posts"]}),a({title:"Photo Added!",description:"Strain photo uploaded successfully."})},onError:()=>{a({title:"Upload Failed",description:"Failed to add photo to strain.",variant:"destructive"})}}),x=async()=>{const g=await ne("POST","/api/objects/upload"),{uploadURL:b}=await g.json();return{method:"PUT",url:b}},y=async g=>{if(g.successful&&g.successful.length>0){s(!0);const b=g.successful.map(j=>j.uploadURL);try{const j=[];for(const k of b){const C=await ne("POST","/api/objects/acl",{objectUrl:k,aclPolicy:{owner:l==null?void 0:l.id,visibility:"public"}}),{objectPath:S}=await C.json();j.push(S)}m.mutate(j)}catch(j){console.error("Error setting ACL policy:",j),a({title:"Upload Error",description:"Failed to process uploaded image.",variant:"destructive"})}finally{s(!1)}}},w=g=>{const j=new Date().getTime()-new Date(g).getTime(),k=Math.floor(j/(1e3*60*60));return k<1?"now":k<24?`${k}h`:`${Math.floor(k/24)}d`},v=g=>{const b=[],j=Math.floor(g),k=g%1!==0;for(let S=0;S<j;S++)b.push(i.jsx("i",{className:"fas fa-star"},S));k&&b.push(i.jsx("i",{className:"fas fa-star-half"},"half"));const C=5-Math.ceil(g);for(let S=0;S<C;S++)b.push(i.jsx("i",{className:"far fa-star"},`empty-${S}`));return b};return i.jsx("article",{className:"bg-frhigh-dark-secondary rounded-2xl p-4 sm:p-6 mb-4 border border-frhigh-green/10 hover:border-frhigh-green/20 hover:bg-frhigh-dark-tertiary/50 transition-all duration-300 shadow-lg hover:shadow-xl hover:shadow-frhigh-green/5 backdrop-blur-sm",children:i.jsxs("div",{className:"flex space-x-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:e.user.avatar||"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face",alt:`${e.user.displayName} profile`,className:"w-12 h-12 rounded-full object-cover border-2 border-frhigh-green/20 ring-2 ring-frhigh-green/10 hover:ring-frhigh-green/30 transition-all duration-200","data-testid":`img-avatar-${e.id}`}),i.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-frhigh-green rounded-full flex items-center justify-center",children:i.jsx("i",{className:"fas fa-leaf text-frhigh-dark text-xs"})})]}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("h3",{className:"font-semibold text-white text-base","data-testid":`text-username-${e.id}`,children:e.user.displayName}),i.jsxs("span",{className:"text-gray-400 text-sm","data-testid":`text-handle-${e.id}`,children:["@",e.user.username]}),e.user.isVerified&&i.jsx("span",{className:"text-gray-400 text-lg ml-1",title:"Verified",children:""}),i.jsx("span",{className:"text-gray-400 text-sm",children:""}),i.jsx("span",{className:"text-gray-400 text-sm","data-testid":`text-time-${e.id}`,children:e.createdAt?w(e.createdAt):"now"})]}),d&&i.jsxs(On,{open:t,onOpenChange:r,children:[i.jsx(Dn,{asChild:!0,children:i.jsx(z,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-gray-400 hover:text-white hover:bg-gray-700/50 rounded-full","data-testid":`button-post-menu-${e.id}`,children:i.jsx(An,{className:"w-4 h-4"})})}),i.jsxs(pn,{align:"end",className:"bg-frhigh-dark-secondary border-frhigh-dark-tertiary",children:[e.userId===(l==null?void 0:l.id)&&i.jsxs(Pe,{onClick:h,className:"text-white hover:bg-frhigh-dark-tertiary cursor-pointer","data-testid":`menu-edit-post-${e.id}`,children:[i.jsx(In,{className:"w-4 h-4 mr-2"}),"Edit Post"]}),i.jsxs(Pe,{onClick:p,className:"text-red-400 hover:bg-red-900/20 cursor-pointer","data-testid":`menu-remove-post-${e.id}`,children:[i.jsx(Ir,{className:"w-4 h-4 mr-2"}),"Delete Post"]})]})]})]}),e.strainData&&i.jsxs("div",{className:"bg-gradient-to-r from-frhigh-green/10 to-frhigh-green-light/10 border border-frhigh-green/20 rounded-xl p-4 mt-3 backdrop-blur-sm",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-8 h-8 bg-frhigh-green/20 rounded-full flex items-center justify-center",children:i.jsx("i",{className:"fas fa-leaf text-frhigh-green text-sm"})}),i.jsx("h4",{className:"text-frhigh-green font-bold text-lg","data-testid":`text-strain-name-${e.id}`,children:e.strainData.name})]}),i.jsxs("div",{className:"flex items-center bg-frhigh-dark-secondary/50 rounded-full px-3 py-1",children:[i.jsx("div",{className:"flex text-yellow-400","data-testid":`rating-stars-${e.id}`,children:e.strainData.rating&&v(e.strainData.rating)}),i.jsxs("span",{className:"text-white ml-2 font-semibold","data-testid":`text-rating-${e.id}`,children:[e.strainData.rating,"/5"]})]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("div",{className:"flex-1 grid grid-cols-2 lg:grid-cols-4 gap-3",children:[i.jsxs("div",{className:"bg-frhigh-dark-secondary/40 rounded-xl p-3 text-center border border-frhigh-green/5 hover:border-frhigh-green/15 transition-all duration-200 shadow-sm",children:[i.jsx("div",{className:"text-xs text-gray-400 uppercase tracking-wide mb-1",children:"Type"}),i.jsx("div",{className:"text-white font-semibold text-sm","data-testid":`text-strain-type-${e.id}`,children:e.strainData.type})]}),i.jsxs("div",{className:"bg-frhigh-dark-secondary/40 rounded-xl p-3 text-center border border-frhigh-green/5 hover:border-frhigh-green/15 transition-all duration-200 shadow-sm",children:[i.jsx("div",{className:"text-xs text-gray-400 uppercase tracking-wide mb-1",children:"THC"}),i.jsx("div",{className:"text-frhigh-green font-semibold text-sm","data-testid":`text-strain-thc-${e.id}`,children:e.strainData.thc})]}),i.jsxs("div",{className:"bg-frhigh-dark-secondary/40 rounded-xl p-3 text-center border border-frhigh-green/5 hover:border-frhigh-green/15 transition-all duration-200 shadow-sm",children:[i.jsx("div",{className:"text-xs text-gray-400 uppercase tracking-wide mb-1",children:"CBD"}),i.jsx("div",{className:"text-blue-400 font-semibold text-sm","data-testid":`text-strain-cbd-${e.id}`,children:e.strainData.cbd})]}),i.jsxs("div",{className:"bg-frhigh-dark-secondary/40 rounded-xl p-3 text-center col-span-2 lg:col-span-1 border border-frhigh-green/5 hover:border-frhigh-green/15 transition-all duration-200 shadow-sm",children:[i.jsx("div",{className:"text-xs text-gray-400 uppercase tracking-wide mb-1",children:"Flavor"}),i.jsx("div",{className:"text-purple-400 font-semibold text-sm","data-testid":`text-strain-flavor-${e.id}`,children:e.strainData.flavor})]})]}),i.jsx("div",{className:"w-20 h-20 lg:w-24 lg:h-24 bg-frhigh-dark-secondary/40 rounded-xl flex items-center justify-center border-2 border-dashed border-frhigh-green/20 relative group shadow-sm hover:shadow-md transition-all duration-200",children:e.images&&e.images.length>0?i.jsxs(i.Fragment,{children:[i.jsx("img",{src:e.images[0],alt:`${e.strainData.name} preview`,className:"w-full h-full object-cover rounded-xl cursor-pointer hover:scale-105 transition-transform duration-200",onClick:()=>window.open(e.images[0],"_blank"),"data-testid":`image-strain-preview-${e.id}`}),l&&e.userId===l.id&&i.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:i.jsx(Uu,{maxNumberOfFiles:3,maxFileSize:10*1024*1024,onGetUploadParameters:x,onComplete:y,buttonClassName:"p-1 bg-frhigh-green/80 hover:bg-frhigh-green text-white rounded-full text-xs",children:i.jsx(Or,{className:"w-3 h-3"})})})]}):l&&e.userId===l.id?i.jsx(Uu,{maxNumberOfFiles:5,maxFileSize:10*1024*1024,onGetUploadParameters:x,onComplete:y,buttonClassName:"w-full h-full flex flex-col items-center justify-center text-center hover:bg-frhigh-green/10 transition-colors rounded-lg border-0 bg-transparent",children:n?i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-frhigh-green border-t-transparent rounded-full mb-1"}),i.jsx("div",{className:"text-xs text-frhigh-green",children:"Uploading..."})]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"fas fa-camera text-frhigh-green/60 text-lg mb-1"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Add Photo"})]})}):i.jsxs("div",{className:"text-center",children:[i.jsx("i",{className:"fas fa-camera text-frhigh-green/40 text-lg mb-1"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Photo"})]})})]})]}),i.jsx("p",{className:"text-white mt-3","data-testid":`text-content-${e.id}`,children:i.jsx(zh,{text:e.content})}),e.images&&e.images.length>1&&i.jsxs("div",{className:"mt-4",children:[i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2",children:e.images.slice(1).map((g,b)=>{var j;return i.jsxs("div",{className:"relative group overflow-hidden rounded-lg",children:[i.jsx("img",{src:g,alt:`${((j=e.strainData)==null?void 0:j.name)||"Strain"} photo ${b+2}`,className:"w-full h-24 object-cover transition-transform duration-300 group-hover:scale-105 cursor-pointer","data-testid":`image-strain-${e.id}-${b+1}`,onClick:()=>window.open(g,"_blank")}),i.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors rounded-lg"})]},b+1)})}),i.jsxs("p",{className:"text-xs text-gray-400 mt-2 flex items-center space-x-1",children:[i.jsx("i",{className:"fas fa-images text-frhigh-green"}),i.jsxs("span",{children:[e.images.length," photo",e.images.length!==1?"s":"","  Click to view full size"]})]})]}),i.jsx(Uh,{postId:e.id,likesCount:e.likesCount||0,dislikesCount:e.dislikesCount||0,commentsCount:e.commentsCount||0,sharesCount:e.sharesCount||0,isLiked:e.isLiked,userReaction:e.userReaction||null,currentUserId:l==null?void 0:l.id})]})]})})}function B7({src:e,title:t,thumbnail:r,autoPlay:n=!0,muted:s=!0,loop:a=!0,className:o="",onVideoClick:l,showControls:c=!0,children:d,testId:u}){const h=f.useRef(null),p=f.useRef(null),[m,x]=f.useState(!1),[y,w]=f.useState(s),[v,g]=f.useState(!n),[b,j]=f.useState(0),[k,C]=f.useState(!1),[S,_]=f.useState(!1),[P,T]=f.useState(!1),[F,R]=f.useState(!1),[M,I]=f.useState(0);f.useEffect(()=>{const B=()=>{const X=navigator.userAgent.toLowerCase();T(/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(X)||window.innerWidth<=768)};return B(),window.addEventListener("resize",B),()=>window.removeEventListener("resize",B)},[]),f.useEffect(()=>{if(!P||!F)return;const B=setTimeout(()=>{R(!1)},3e3);return()=>clearTimeout(B)},[F,P]),f.useEffect(()=>{const B=h.current;if(!B||!n)return;const X=new IntersectionObserver(ye=>{ye.forEach(fe=>{_(fe.isIntersecting),fe.isIntersecting&&fe.intersectionRatio>.5?P&&!F?g(!0):B.play().catch(()=>{g(!0)}):(B.pause(),x(!1))})},{threshold:[.3,.5,.7]});return X.observe(B),()=>X.disconnect()},[n,P,F]),f.useEffect(()=>{const B=h.current;if(!B)return;const X=()=>{x(!0),g(!1)},ye=()=>{x(!1),g(!0)},fe=()=>{B.duration&&j(B.currentTime/B.duration*100)},He=()=>{x(!1),g(!0),j(0)};return B.addEventListener("play",X),B.addEventListener("pause",ye),B.addEventListener("timeupdate",fe),B.addEventListener("ended",He),()=>{B.removeEventListener("play",X),B.removeEventListener("pause",ye),B.removeEventListener("timeupdate",fe),B.removeEventListener("ended",He)}},[]);const H=f.useCallback(()=>{const B=h.current;B&&(B.paused?B.play().catch(()=>{g(!0)}):B.pause())},[]),V=f.useCallback(()=>{const B=h.current;B&&(B.muted=!B.muted,w(B.muted))},[]),Q=f.useCallback(()=>{const B=p.current;B&&(document.fullscreenElement?document.exitFullscreen():B.requestFullscreen().catch(()=>{console.log("Fullscreen not supported")}))},[]),A=f.useCallback(()=>{l?l():H()},[l,H]),L=f.useCallback(B=>{const X=Date.now(),ye=X-M;ye<300&&ye>0?(B.preventDefault(),Q(),I(0)):(I(X),R(!0),setTimeout(()=>{Date.now()-X>250&&(l?l():H())},300))},[M,l,H,Q]),G=f.useCallback(B=>{const X=h.current,ye=B.currentTarget;if(!X||!ye)return;const fe=ye.getBoundingClientRect(),_e=(B.clientX-fe.left)/fe.width*X.duration;X.currentTime=_e},[]);return f.useEffect(()=>{const B=()=>{C(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",B),()=>document.removeEventListener("fullscreenchange",B)},[]),i.jsxs("div",{ref:p,className:`relative bg-black rounded-xl overflow-hidden group ${o}`,"data-testid":u,children:[t&&c&&i.jsx("div",{className:"absolute top-0 left-0 right-0 bg-gradient-to-b from-black/70 to-transparent p-4 z-20 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:i.jsx("h4",{className:"text-white font-semibold text-sm md:text-base",children:t})}),i.jsxs("video",{ref:h,className:`w-full h-auto object-contain cursor-pointer ${P?"max-h-[85vh] min-h-[300px]":"max-h-[70vh]"}`,onClick:P?void 0:A,onTouchEnd:P?L:void 0,muted:y,loop:a,preload:"metadata",poster:r,playsInline:!0,"webkit-playsinline":"true","data-testid":`${u}-video`,style:{touchAction:"manipulation"},children:[i.jsx("source",{src:e,type:"video/mp4"}),"Your browser does not support the video tag."]}),v&&c&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-10",children:i.jsx(z,{onClick:H,className:`bg-black/50 hover:bg-black/70 text-white rounded-full flex items-center justify-center transition-all duration-200 backdrop-blur-sm ${P?"w-20 h-20 shadow-lg":"w-16 h-16"}`,"data-testid":`${u}-play-button`,children:i.jsx(Ll,{className:`ml-1 ${P?"w-10 h-10":"w-8 h-8"}`,fill:"currentColor"})})}),c&&i.jsxs("div",{className:`absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent z-20 transition-opacity duration-200 ${P?`p-4 ${F?"opacity-100":"opacity-0"}`:"p-3 opacity-0 group-hover:opacity-100"}`,children:[i.jsx("div",{className:`w-full bg-white/30 rounded-full cursor-pointer mb-3 ${P?"h-2":"h-1"}`,onClick:G,"data-testid":`${u}-progress-bar`,children:i.jsx("div",{className:"h-full bg-white rounded-full transition-all duration-100",style:{width:`${b}%`}})}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:`flex items-center ${P?"space-x-4":"space-x-2"}`,children:[i.jsx(z,{onClick:H,variant:"ghost",size:P?"default":"sm",className:`text-white hover:bg-white/20 p-0 ${P?"w-12 h-12":"w-8 h-8"}`,"data-testid":`${u}-play-pause-button`,children:m?i.jsx(lR,{className:`${P?"w-6 h-6":"w-4 h-4"}`,fill:"currentColor"}):i.jsx(Ll,{className:`${P?"w-6 h-6 ml-0.5":"w-4 h-4 ml-0.5"}`,fill:"currentColor"})}),i.jsx(z,{onClick:V,variant:"ghost",size:P?"default":"sm",className:`text-white hover:bg-white/20 p-0 ${P?"w-12 h-12":"w-8 h-8"}`,"data-testid":`${u}-mute-button`,children:y?i.jsx(Fj,{className:`${P?"w-6 h-6":"w-4 h-4"}`}):i.jsx(Rj,{className:`${P?"w-6 h-6":"w-4 h-4"}`})})]}),i.jsx("div",{className:`flex items-center ${P?"space-x-4":"space-x-2"}`,children:i.jsx(z,{onClick:Q,variant:"ghost",size:P?"default":"sm",className:`text-white hover:bg-white/20 p-0 ${P?"w-12 h-12":"w-8 h-8"}`,"data-testid":`${u}-fullscreen-button`,children:i.jsx(aR,{className:`${P?"w-6 h-6":"w-4 h-4"}`})})})]})]}),d,!S&&n&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 z-10",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})})]})}function wP({post:e}){const[t,r]=f.useState(!1),[n,s]=f.useState(!1),{toast:a}=ke(),o=Xe(),{user:l}=Fe(),{data:c}=xe({queryKey:["/api/admin/check",l==null?void 0:l.id],enabled:!!(l!=null&&l.id)}),d=l&&(e.userId===l.id||c&&typeof c=="object"&&"isAdmin"in c&&c.isAdmin&&(l.email==="Frhighday760@icloud.com"||l.email==="16southvideo@gmail.com")),u=pe({mutationFn:async v=>{const g={"Content-Type":"application/json"};l&&(g["x-user-data"]=encodeURIComponent(JSON.stringify({id:l.id})));const b=await fetch(`/api/posts/${v}`,{method:"DELETE",headers:g,credentials:"include"});if(!b.ok)throw new Error(`Failed to delete post: ${b.statusText}`);return b.json()},onSuccess:()=>{o.invalidateQueries({queryKey:["/api/posts"]}),a({title:"Video Post Deleted",description:"Video post has been permanently removed",variant:"destructive"})},onError:v=>{a({title:"Error",description:v.message||"Failed to delete post",variant:"destructive"})}}),h=()=>{a({title:"Edit Feature",description:"Post editing will be available soon!"}),s(!1)},p=()=>{confirm("Delete this video?")&&u.mutate(e.id),s(!1)},m=()=>{var v,g;console.log("Edit video:",(g=(v=e.videos)==null?void 0:v[0])==null?void 0:g.url),a({title:"Edit Feature",description:"Video editing will be available soon!"})},x=()=>{var v,g;console.log("Remove video:",(g=(v=e.videos)==null?void 0:v[0])==null?void 0:g.url)},y=()=>{var v,g,b,j;if(console.log("Save video:",(g=(v=e.videos)==null?void 0:v[0])==null?void 0:g.url),(j=(b=e.videos)==null?void 0:b[0])!=null&&j.url){const k=document.createElement("a");k.href=e.videos[0].url,k.download=e.videos[0].title||"video.mp4",document.body.appendChild(k),k.click(),document.body.removeChild(k),a({title:"Video Saved",description:"Video has been downloaded to your device"})}},w=v=>{const b=new Date().getTime()-new Date(v).getTime(),j=Math.floor(b/(1e3*60*60));return j<1?"now":j<24?`${j}h`:`${Math.floor(j/24)}d`};return i.jsx("article",{className:"bg-frhigh-dark-secondary border-b border-frhigh-dark-tertiary p-4 hover:bg-opacity-80 transition-colors max-w-full overflow-hidden",children:i.jsxs("div",{className:"flex space-x-3",children:[i.jsx("img",{src:e.user.avatar||"https://images.unsplash.com/photo-1531427186611-ecfd6d936c79?w=100&h=100&fit=crop&crop=face",alt:`${e.user.displayName} profile`,className:"w-12 h-12 rounded-full object-cover","data-testid":`img-avatar-${e.id}`}),i.jsxs("div",{className:"flex-1 min-w-0 overflow-hidden",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("h3",{className:"font-semibold text-white","data-testid":`text-username-${e.id}`,children:e.user.displayName}),i.jsxs("span",{className:"text-gray-400 text-sm","data-testid":`text-handle-${e.id}`,children:["@",e.user.username]}),e.user.isVerified&&i.jsx("span",{className:"text-gray-400 text-lg ml-1",title:"Verified",children:""}),i.jsx("span",{className:"text-gray-400 text-sm",children:""}),i.jsx("span",{className:"text-gray-400 text-sm","data-testid":`text-time-${e.id}`,children:w(e.createdAt||new Date)})]}),d?i.jsxs(On,{open:n,onOpenChange:s,children:[i.jsx(Dn,{asChild:!0,children:i.jsx(z,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-gray-400 hover:text-white hover:bg-gray-700/50 rounded-full","data-testid":`button-post-menu-${e.id}`,children:i.jsx(An,{className:"w-4 h-4"})})}),i.jsxs(pn,{align:"end",className:"bg-frhigh-dark-secondary border-frhigh-dark-tertiary",children:[e.userId===(l==null?void 0:l.id)&&i.jsxs(Pe,{onClick:h,className:"text-white hover:bg-frhigh-dark-tertiary cursor-pointer","data-testid":`menu-edit-post-${e.id}`,children:[i.jsx(In,{className:"w-4 h-4 mr-2"}),"Edit Post"]}),i.jsxs(Pe,{onClick:p,className:"text-red-400 hover:bg-red-900/20 cursor-pointer","data-testid":`menu-remove-post-${e.id}`,children:[i.jsx(Ir,{className:"w-4 h-4 mr-2"}),"Delete Post"]})]})]}):null]}),i.jsx("p",{className:"text-white mt-2","data-testid":`text-content-${e.id}`,children:i.jsx(zh,{text:e.content})}),e.videos&&e.videos.length>0&&i.jsx("div",{className:"mt-3",children:i.jsx(B7,{src:e.videos[0].url,title:e.videos[0].title,thumbnail:e.videos[0].thumbnail,autoPlay:!0,muted:!0,loop:!0,className:"max-w-full",testId:`video-player-${e.id}`,children:i.jsx("div",{className:"absolute top-2 right-2 z-30",children:i.jsxs(On,{open:t,onOpenChange:r,children:[i.jsx(Dn,{asChild:!0,children:i.jsx(z,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 bg-black/50 hover:bg-black/70 text-white rounded-full backdrop-blur-sm","data-testid":`button-video-menu-${e.id}`,children:i.jsx(An,{className:"w-4 h-4"})})}),i.jsxs(pn,{align:"end",className:"bg-frhigh-dark-secondary border-frhigh-dark-tertiary",children:[d&&i.jsxs(i.Fragment,{children:[i.jsxs(Pe,{onClick:m,className:"text-white hover:bg-frhigh-dark-tertiary cursor-pointer","data-testid":`menu-edit-video-${e.id}`,children:[i.jsx(In,{className:"w-4 h-4 mr-2"}),"Edit"]}),i.jsxs(Pe,{onClick:x,className:"text-red-400 hover:bg-red-900/20 cursor-pointer","data-testid":`menu-remove-video-${e.id}`,children:[i.jsx(Ir,{className:"w-4 h-4 mr-2"}),"Remove"]})]}),i.jsxs(Pe,{onClick:y,className:"text-white hover:bg-frhigh-dark-tertiary cursor-pointer","data-testid":`menu-save-video-${e.id}`,children:[i.jsx(co,{className:"w-4 h-4 mr-2"}),"Save"]})]})]})})})}),i.jsx(Uh,{postId:e.id,likesCount:e.likesCount||0,dislikesCount:e.dislikesCount||0,commentsCount:e.commentsCount||0,sharesCount:e.sharesCount||0,isLiked:e.isLiked,userReaction:e.userReaction||null,currentUserId:l==null?void 0:l.id})]})]})})}function NP({post:e}){const[t,r]=f.useState(!1),{toast:n}=ke(),s=Xe(),{user:a}=Fe(),{data:o}=xe({queryKey:["/api/admin/check",a==null?void 0:a.id],enabled:!!(a!=null&&a.id)}),l=a&&(e.userId===a.id||o&&typeof o=="object"&&"isAdmin"in o&&o.isAdmin&&(a.email==="Frhighday760@icloud.com"||a.email==="16southvideo@gmail.com")),c=pe({mutationFn:async p=>{const m={"Content-Type":"application/json"};a&&(m["x-user-data"]=encodeURIComponent(JSON.stringify({id:a.id})));const x=await fetch(`/api/posts/${p}`,{method:"DELETE",headers:m,credentials:"include"});if(!x.ok)throw new Error(`Failed to delete post: ${x.statusText}`);return x.json()},onSuccess:()=>{s.invalidateQueries({queryKey:["/api/posts"]}),n({title:"Podcast Deleted",description:"Podcast has been permanently removed",variant:"destructive"})},onError:p=>{n({title:"Error",description:p.message||"Failed to delete post",variant:"destructive"})}}),d=()=>{n({title:"Edit Feature",description:"Post editing will be available soon!"}),r(!1)},u=()=>{confirm("Delete this podcast?")&&c.mutate(e.id),r(!1)},h=p=>{const x=new Date().getTime()-new Date(p).getTime(),y=Math.floor(x/(1e3*60*60));return y<1?"now":y<24?`${y}h`:`${Math.floor(y/24)}d`};return i.jsx("article",{className:"bg-frhigh-dark-secondary border-b border-frhigh-dark-tertiary p-4 hover:bg-opacity-80 transition-colors",children:i.jsxs("div",{className:"flex space-x-3",children:[i.jsxs(rr,{className:"w-12 h-12",children:[i.jsx(nr,{src:e.user.avatar||void 0,alt:`${e.user.displayName} profile`,className:"object-cover"}),i.jsx(sr,{className:"bg-frhigh-green text-frhigh-dark font-medium",children:e.user.displayName.charAt(0).toUpperCase()})]}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("h3",{className:"font-semibold text-white","data-testid":`text-username-${e.id}`,children:e.user.displayName}),i.jsxs("span",{className:"text-gray-400 text-sm","data-testid":`text-handle-${e.id}`,children:["@",e.user.username]}),e.user.isVerified&&i.jsx("span",{className:"text-gray-400 text-lg ml-1",title:"Verified",children:""}),i.jsx("span",{className:"text-gray-400 text-sm",children:""}),i.jsx("span",{className:"text-gray-400 text-sm","data-testid":`text-time-${e.id}`,children:h(e.createdAt||new Date)})]}),l&&i.jsxs(On,{open:t,onOpenChange:r,children:[i.jsx(Dn,{asChild:!0,children:i.jsx(z,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-gray-400 hover:text-white hover:bg-gray-700/50 rounded-full","data-testid":`button-post-menu-${e.id}`,children:i.jsx(An,{className:"w-4 h-4"})})}),i.jsxs(pn,{align:"end",className:"bg-frhigh-dark-secondary border-frhigh-dark-tertiary",children:[e.userId===(a==null?void 0:a.id)&&i.jsxs(Pe,{onClick:d,className:"text-white hover:bg-frhigh-dark-tertiary cursor-pointer","data-testid":`menu-edit-post-${e.id}`,children:[i.jsx(In,{className:"w-4 h-4 mr-2"}),"Edit Post"]}),i.jsxs(Pe,{onClick:u,className:"text-red-400 hover:bg-red-900/20 cursor-pointer","data-testid":`menu-remove-post-${e.id}`,children:[i.jsx(Ir,{className:"w-4 h-4 mr-2"}),"Delete Post"]})]})]})]}),i.jsx("p",{className:"text-white mt-2","data-testid":`text-content-${e.id}`,children:i.jsx(zh,{text:e.content})}),e.podcasts&&e.podcasts.length>0&&i.jsx("div",{className:"mt-3 bg-gradient-to-r from-purple-900/30 to-pink-900/30 rounded-xl p-4 border border-purple-500/20",children:i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-600 to-pink-600 rounded-lg flex items-center justify-center",children:i.jsx("i",{className:"fas fa-podcast text-white text-2xl"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"text-white font-semibold mb-1","data-testid":`text-podcast-title-${e.id}`,children:e.podcasts[0].title||"Podcast Episode"}),e.podcasts[0].description&&i.jsx("p",{className:"text-gray-300 text-sm mb-2","data-testid":`text-podcast-description-${e.id}`,children:e.podcasts[0].description}),i.jsxs("audio",{controls:!0,className:"w-full h-8","data-testid":`audio-player-${e.id}`,style:{background:"rgba(255,255,255,0.1)",borderRadius:"4px"},children:[i.jsx("source",{src:e.podcasts[0].url,type:"audio/mpeg"}),"Your browser does not support the audio element."]})]})]})}),i.jsx(Uh,{postId:e.id,likesCount:e.likesCount||0,dislikesCount:e.dislikesCount||0,commentsCount:e.commentsCount||0,sharesCount:e.sharesCount||0,isLiked:e.isLiked,userReaction:e.userReaction||null,currentUserId:a==null?void 0:a.id})]})]})})}const jP={"image/heic":"image/jpeg","image/heif":"image/jpeg","video/quicktime":"video/mp4","video/x-m4v":"video/mp4","image/tiff":"image/jpeg","image/bmp":"image/jpeg"};function V7(e){return new Promise(t=>{const r=new FileReader;r.onload=()=>{const n=new Uint8Array(r.result);if(n[0]===255&&n[1]===216&&n[2]===255)t({mimeType:"image/jpeg",extension:".jpg"});else if(n[0]===137&&n[1]===80&&n[2]===78&&n[3]===71)t({mimeType:"image/png",extension:".png"});else if(n[0]===71&&n[1]===73&&n[2]===70)t({mimeType:"image/gif",extension:".gif"});else if(n[4]===102&&n[5]===116&&n[6]===121&&n[7]===112)n[8]===109&&n[9]===112&&n[10]===52?t({mimeType:"video/mp4",extension:".mp4"}):n[8]===77&&n[9]===52&&n[10]===86?t({mimeType:"video/mp4",extension:".mp4"}):n[8]===113&&n[9]===116?t({mimeType:"video/mp4",extension:".mp4"}):t({mimeType:"video/mp4",extension:".mp4"});else if(n[4]===102&&n[5]===116&&n[6]===121&&n[7]===112&&n[8]===104&&n[9]===101&&n[10]===105&&n[11]===99)t({mimeType:"image/heic",extension:".jpg"});else if(n[4]===102&&n[5]===116&&n[6]===121&&n[7]===112&&n[8]===104&&n[9]===101&&n[10]===105&&n[11]===102)t({mimeType:"image/heif",extension:".jpg"});else if(n[0]===0&&n[1]===0&&n[2]===0&&(n[3]===24||n[3]===32))t({mimeType:"image/heic",extension:".jpg"});else{const s=e.type.toLowerCase();s.startsWith("image/")?t({mimeType:"image/jpeg",extension:".jpg"}):s.startsWith("video/")?t({mimeType:"video/mp4",extension:".mp4"}):t({mimeType:e.type||"application/octet-stream",extension:""})}},r.readAsArrayBuffer(e.slice(0,32))})}async function H7(e){return console.log("iOS Converter - Converting HEIC/HEIF to JPEG:",{name:e.name,type:e.type,size:e.size}),new Promise(t=>{const r=document.createElement("canvas"),n=r.getContext("2d"),s=new Image;s.onload=()=>{try{r.width=s.naturalWidth||s.width,r.height=s.naturalHeight||s.height,n&&(n.imageSmoothingEnabled=!0,n.imageSmoothingQuality="high",n.drawImage(s,0,0)),r.toBlob(a=>{if(a&&a.size>0){const o=e.name.replace(/\.(heic|heif)$/i,".jpg"),l=new File([a],o,{type:"image/jpeg",lastModified:e.lastModified});console.log("iOS Converter - HEIC conversion successful:",{originalSize:e.size,convertedSize:l.size,originalName:e.name,convertedName:o}),t(l)}else console.warn("iOS Converter - Conversion failed, using original file"),t(e)},"image/jpeg",.88)}catch(a){console.error("iOS Converter - Canvas conversion error:",a),t(e)}finally{URL.revokeObjectURL(s.src)}},s.onerror=a=>{console.error("iOS Converter - Image load error:",a),URL.revokeObjectURL(s.src),t(e)};try{s.src=URL.createObjectURL(e)}catch(a){console.error("iOS Converter - Failed to create object URL:",a),t(e)}})}function W7(e,t){let r=e.replace(/[^\w\-_.]/g,"_").replace(/\.txt$/,"").replace(/\.(heic|heif)$/i,".jpg").replace(/\.mov$/i,".mp4").replace(/\.m4v$/i,".mp4");return t&&!r.toLowerCase().endsWith(t)&&(r=r.replace(/\.[^/.]+$/,"")+t),r}async function q7(e){console.log("iOS Converter - Processing file:",{name:e.name,type:e.type,size:e.size});const{mimeType:t,extension:r}=await V7(e),n=W7(e.name,r),s=e.type==="image/heic"||e.type==="image/heif"||t==="image/heic"||t==="image/heif"||!!e.name.toLowerCase().match(/\.(heic|heif)$/),a=!!jP[e.type]||e.type!==t||e.name!==n||s;let o=e;return a?(s&&(console.log("iOS Converter - HEIC/HEIF file detected, starting conversion"),o=await H7(e)),o===e&&(o=new File([e],n,{type:t,lastModified:e.lastModified})),console.log("iOS Converter - File converted:",{originalName:e.name,originalType:e.type,finalName:o.name,finalType:o.type,wasConverted:!0})):console.log("iOS Converter - No conversion needed"),{file:o,originalName:e.name,convertedName:o.name,mimeType:o.type,wasConverted:a}}function K7(e){return jP[e.type]||e.type||"application/octet-stream"}async function G7(e,t=.8){return!e.type.startsWith("image/")||e.type==="image/gif"?e:new Promise(r=>{const n=document.createElement("canvas"),s=n.getContext("2d"),a=new Image;a.onload=()=>{let{width:l,height:c}=a;(l>1920||c>1920)&&(l>c?(c=c*1920/l,l=1920):(l=l*1920/c,c=1920)),n.width=l,n.height=c,s&&(s.imageSmoothingEnabled=!0,s.imageSmoothingQuality="high",s.drawImage(a,0,0,l,c)),n.toBlob(d=>{if(d&&d.size<e.size){const u=new File([d],e.name,{type:e.type==="image/png"?"image/png":"image/jpeg",lastModified:e.lastModified});r(u)}else r(e)},e.type==="image/png"?"image/png":"image/jpeg",t)},a.onerror=()=>r(e),a.src=URL.createObjectURL(e)})}async function Q7(e,t={}){const{maxRetries:r=2,timeout:n=3e4}=t;try{const s=await q7(e);let a=s.file;a.type.startsWith("image/")&&(a=await G7(a,.85));const o=K7(a),l=await ne("POST","/api/objects/upload"),{uploadURL:c}=await l.json();let d=!1,u=null;const h=Math.max(3e4,Math.min(12e4,a.size/1e4));for(let x=1;x<=r&&!d;x++)try{const y=new AbortController,w=setTimeout(()=>y.abort(),h),v=await fetch(c,{method:"PUT",body:a,headers:{"Content-Type":o,"Cache-Control":"no-cache"},signal:y.signal,mode:"cors",credentials:"omit"});if(clearTimeout(w),v.ok)d=!0;else{const g=await v.text().catch(()=>"");throw new Error(`Upload failed: ${v.status} ${g}`)}}catch(y){u=y,console.warn(`Upload attempt ${x}/${r} failed:`,y.message),x<r&&await new Promise(w=>setTimeout(w,1e3*x))}if(!d)throw u||new Error("Upload failed after retries");const p=await ne("PUT","/api/posts/media",{mediaURL:c,mediaType:a.type.startsWith("video/")?"video":"image"}),{objectPath:m}=await p.json();return{success:!0,objectPath:m,fileName:s.convertedName,fileSize:a.size,mimeType:o}}catch(s){const a=s instanceof Error?s.message:"Upload failed";return{success:!1,objectPath:"",fileName:e.name,fileSize:e.size,mimeType:e.type,error:a}}}async function Y7(e,t={}){const r=Date.now(),{maxParallel:n=3}=t;console.log("Upload Optimizer - Starting optimized upload of",e.length,"files");const s=[],a=[];for(let l=0;l<e.length;l+=n){const c=e.slice(l,l+n);console.log(`Upload Optimizer - Processing batch ${Math.floor(l/n)+1} (${c.length} files)`),(await Promise.all(c.map(u=>Q7(u,t)))).forEach(u=>{u.success?s.push(u):a.push(u)})}const o=Date.now()-r;return console.log("Upload Optimizer - Completed:",{successful:s.length,failed:a.length,totalTime:`${o}ms`,averageTime:`${Math.round(o/e.length)}ms per file`}),{successful:s,failed:a,totalTime:o}}function X7(e){const t=[],r=[];return e.forEach(s=>{s.size>52428800?r.push({file:s,reason:"File too large (max 50MB)"}):s.size===0?r.push({file:s,reason:"Empty file"}):t.push(s)}),{valid:t,invalid:r}}function J7(e){const t=e.reduce((o,l)=>o+l.size,0),r=Math.max(...e.map(o=>o.size)),n=1,s=e.length*.5;return{estimatedSeconds:Math.ceil(t/(1024*1024)/n+s),totalSizeMB:Math.round(t/(1024*1024)*100)/100,largestFileMB:Math.round(r/(1024*1024)*100)/100}}function Z7(){var k,C;const[e,t]=f.useState(""),[r,n]=f.useState([]),[s,a]=f.useState(!1),[o,l]=f.useState([]),[c,d]=f.useState(!1),{toast:u}=ke(),h=Xe(),{user:p}=Fe(),{data:m=[],isLoading:x}=xe({queryKey:["/api/user-media",p==null?void 0:p.id],enabled:!!(p!=null&&p.id)}),y=pe({mutationFn:async S=>(await ne("POST","/api/posts",S)).json(),onSuccess:()=>{t(""),n([]),l([]),h.invalidateQueries({queryKey:["/api/posts"]}),u({title:"Post shared!",description:"Your post is now live in the community feed."})},onError:()=>{u({title:"Error",description:"Failed to create post. Please try again.",variant:"destructive"})}}),w=pe({mutationFn:async S=>{d(!0);const{valid:_,invalid:P}=X7(S);if(P.length>0&&(console.warn("Upload Optimizer - Invalid files detected:",P),u({title:"Invalid files",description:`${P.length} files were skipped due to size or format issues.`,variant:"destructive"})),_.length===0)throw new Error("No valid files to upload");const T=J7(_);console.log("Upload Optimizer - Estimate:",T),T.estimatedSeconds>10&&u({title:"Large upload detected",description:`Uploading ${T.totalSizeMB}MB, estimated ${T.estimatedSeconds}s`});const{successful:F,failed:R}=await Y7(_,{maxParallel:3,maxRetries:2,timeout:3e4});return R.length>0&&(console.error("Upload Optimizer - Some uploads failed:",R),u({title:"Partial upload",description:`${F.length} files uploaded, ${R.length} failed.`,variant:"destructive"})),F.map(I=>({id:crypto.randomUUID(),userId:(p==null?void 0:p.id)||"current-user",mediaUrl:I.objectPath,mediaType:I.mimeType.startsWith("video/")?"video":"image",fileName:I.fileName,fileSize:I.fileSize,mimeType:I.mimeType,thumbnail:null,duration:null,uploadedAt:new Date,isDeleted:!1}))},onSuccess:S=>{h.invalidateQueries({queryKey:["/api/user-media",p==null?void 0:p.id]}),n(_=>[..._,...S]),l([]),d(!1),u({title:"Media uploaded!",description:`${S.length} file(s) added to your library and post.`})},onError:()=>{d(!1),u({title:"Upload failed",description:"Failed to upload media. Please try again.",variant:"destructive"})}}),v=S=>{const _=Array.from(S.target.files||[]);l(_),w.mutate(_)},g=S=>{n(_=>_.find(T=>T.id===S.id)?_.filter(T=>T.id!==S.id):[..._,S])},b=S=>{n(_=>_.filter(P=>P.id!==S))},j=()=>{if(!e.trim()&&r.length===0){u({title:"Empty post",description:"Please add some content or media to your post.",variant:"destructive"});return}const S={userId:(p==null?void 0:p.id)||"",content:e.trim(),type:"regular",images:r.filter(_=>_.mediaType==="image").map(_=>_.mediaUrl),videos:r.filter(_=>_.mediaType==="video").map(_=>({url:_.mediaUrl,thumbnail:_.thumbnail,duration:_.duration,title:_.fileName}))};y.mutate(S)};return i.jsx(ae,{className:"w-full max-w-2xl mx-auto bg-slate-800/50 border-slate-700",children:i.jsxs(oe,{className:"p-4 space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 bg-emerald-500 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-white text-sm font-bold",children:((k=p==null?void 0:p.displayName)==null?void 0:k.charAt(0))||((C=p==null?void 0:p.username)==null?void 0:C.charAt(0))||"U"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-white font-medium",children:(p==null?void 0:p.displayName)||(p==null?void 0:p.username)}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[i.jsx(_y,{className:"w-4 h-4"}),i.jsx("span",{children:"Public"})]})]})]}),i.jsx(xt,{value:e,onChange:S=>t(S.target.value),placeholder:"What's on your mind?",className:"bg-transparent border-none text-white placeholder-gray-400 resize-none text-lg focus:ring-0 focus:border-none p-0",rows:3,"data-testid":"textarea-post-content"}),r.length>0&&i.jsxs("div",{className:"border border-slate-600 rounded-lg p-3 space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h4",{className:"text-white font-medium",children:"Selected Media"}),i.jsx(z,{size:"sm",variant:"ghost",onClick:()=>n([]),className:"text-gray-400 hover:text-white","data-testid":"button-clear-media",children:"Clear All"})]}),i.jsx("div",{className:"grid grid-cols-3 gap-2",children:r.map(S=>i.jsxs("div",{className:"relative group",children:[i.jsx("div",{className:"aspect-square bg-slate-700 rounded-lg overflow-hidden",children:S.mediaType==="image"?i.jsx("img",{src:S.mediaUrl,alt:S.fileName||"",className:"w-full h-full object-cover"}):i.jsxs("div",{className:"relative w-full h-full bg-slate-600 flex items-center justify-center",children:[S.thumbnail?i.jsx("img",{src:S.thumbnail,alt:S.fileName||"",className:"w-full h-full object-cover"}):i.jsx(km,{className:"w-8 h-8 text-gray-400"}),i.jsx("div",{className:"absolute inset-0 bg-black/30 flex items-center justify-center",children:i.jsx(Ll,{className:"w-6 h-6 text-white"})})]})}),i.jsx(z,{size:"sm",variant:"ghost",onClick:()=>b(S.id),className:"absolute top-1 right-1 bg-black/50 hover:bg-black/70 text-white p-1 h-6 w-6","data-testid":`button-remove-media-${S.id}`,children:i.jsx($r,{className:"w-3 h-3"})})]},S.id))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("label",{children:[i.jsx("input",{type:"file",multiple:!0,accept:"image/*,video/*",onChange:v,className:"hidden"}),i.jsx(z,{size:"sm",variant:"ghost",className:"text-gray-400 hover:text-emerald-400 hover:bg-emerald-400/10",disabled:c,"data-testid":"button-upload-media",asChild:!0,children:i.jsxs("span",{children:[i.jsx(Or,{className:"w-4 h-4 mr-2"}),"Upload New"]})})]}),i.jsxs(dr,{open:s,onOpenChange:a,children:[i.jsx(Wy,{asChild:!0,children:i.jsxs(z,{size:"sm",variant:"ghost",className:"text-gray-400 hover:text-emerald-400 hover:bg-emerald-400/10","data-testid":"button-media-library",children:[i.jsx(Nm,{className:"w-4 h-4 mr-2"}),"Library (",m.length,")"]})}),i.jsxs(qt,{className:"max-w-2xl max-h-[70vh] overflow-y-auto bg-frhigh-dark-secondary border-frhigh-dark-tertiary",children:[i.jsx(ur,{children:i.jsx(hr,{className:"text-white",children:"Your Media Library"})}),x?i.jsx("div",{className:"text-center py-8 text-gray-400",children:"Loading your media..."}):m.length===0?i.jsxs("div",{className:"text-center py-8 text-gray-400",children:[i.jsx(Nm,{className:"w-16 h-16 mx-auto mb-4 text-gray-500"}),i.jsx("p",{children:"No media in your library yet."}),i.jsx("p",{className:"text-sm",children:"Upload some photos or videos to get started!"})]}):i.jsx("div",{className:"grid grid-cols-4 gap-3",children:m.map(S=>{const _=r.some(P=>P.id===S.id);return i.jsxs("div",{onClick:()=>g(S),className:`relative aspect-square cursor-pointer rounded-lg overflow-hidden border-2 transition-all ${_?"border-emerald-400 ring-2 ring-emerald-400/20":"border-transparent hover:border-slate-600"}`,"data-testid":`media-item-${S.id}`,children:[S.mediaType==="image"?i.jsx("img",{src:S.mediaUrl,alt:S.fileName||"",className:"w-full h-full object-cover"}):i.jsxs("div",{className:"relative w-full h-full bg-slate-700 flex items-center justify-center",children:[S.thumbnail?i.jsx("img",{src:S.thumbnail,alt:S.fileName||"",className:"w-full h-full object-cover"}):i.jsx(km,{className:"w-8 h-8 text-gray-400"}),i.jsx("div",{className:"absolute inset-0 bg-black/30 flex items-center justify-center",children:i.jsx(Ll,{className:"w-6 h-6 text-white"})})]}),_&&i.jsx("div",{className:"absolute top-2 right-2 bg-emerald-400 text-white rounded-full w-6 h-6 flex items-center justify-center",children:i.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]},S.id)})})]})]})]}),i.jsx(z,{onClick:j,disabled:y.isPending||c,className:"bg-emerald-600 hover:bg-emerald-700 text-white px-6","data-testid":"button-submit-post",children:y.isPending?"Posting...":i.jsxs(i.Fragment,{children:[i.jsx(Nh,{className:"w-4 h-4 mr-2"}),"Post"]})})]}),c&&i.jsx("div",{className:"text-center py-2",children:i.jsxs("div",{className:"text-sm text-emerald-400",children:["Uploading ",o.length," file(s)..."]})})]})})}function ez(){const{user:e}=Fe(),{data:t,isLoading:r,error:n,refetch:s}=xe({queryKey:["/api/posts"],refetchOnMount:!0,refetchOnWindowFocus:!0,refetchInterval:5e3,staleTime:0,gcTime:0,enabled:!0}),a=(t==null?void 0:t.filter(o=>o.user&&o.userId))||[];return i.jsxs("div",{className:"min-h-screen bg-frhigh-dark",children:[i.jsx(Ic,{}),i.jsx(Ui,{}),i.jsx(zi,{}),i.jsx("main",{className:"pb-20 px-4 overflow-x-hidden bg-gradient-to-b from-frhigh-dark to-frhigh-dark-secondary/50 min-h-screen",children:i.jsxs("div",{className:"max-w-2xl mx-auto py-8 overflow-x-hidden",children:[e&&i.jsx("div",{className:"mb-8",children:i.jsx(Z7,{})}),i.jsx("div",{children:r?i.jsxs("div",{className:"space-y-8",children:[i.jsx("div",{className:"text-center py-12",children:i.jsxs("div",{className:"inline-flex items-center space-x-3 text-frhigh-green",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-frhigh-green"}),i.jsx("span",{className:"text-white text-xl font-medium",children:"Loading fresh content..."})]})}),[...Array(3)].map((o,l)=>i.jsxs("div",{className:"bg-frhigh-dark-secondary rounded-2xl p-6 animate-pulse border border-frhigh-green/10 shadow-lg backdrop-blur-sm",children:[i.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[i.jsx("div",{className:"w-12 h-12 bg-frhigh-green/20 rounded-full ring-2 ring-frhigh-green/10"}),i.jsxs("div",{className:"space-y-2 flex-1",children:[i.jsx("div",{className:"h-4 bg-frhigh-green/20 rounded-lg w-32"}),i.jsx("div",{className:"h-3 bg-gray-700 rounded-lg w-24"})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"h-4 bg-frhigh-green/20 rounded-lg w-full"}),i.jsx("div",{className:"h-4 bg-frhigh-green/20 rounded-lg w-3/4"}),i.jsx("div",{className:"h-48 bg-gray-700 rounded-2xl"})]})]},l))]}):n?i.jsxs("div",{className:"text-center py-12 bg-frhigh-dark-secondary rounded-xl border border-frhigh-dark-tertiary",children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx("svg",{className:"w-8 h-8 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"})})}),i.jsx("h3",{className:"text-white text-lg font-semibold mb-2",children:"Oops! Something went wrong"}),i.jsx("p",{className:"text-gray-400 mb-6",children:"We couldn't load the latest posts. Check your connection and try again."})]}),i.jsx("button",{onClick:()=>s(),className:"bg-frhigh-green text-frhigh-dark px-6 py-3 rounded-lg hover:bg-opacity-90 transition-colors font-medium",children:"Reload Posts"})]}):a.length>0?i.jsxs("div",{className:"space-y-6",children:[a.sort((o,l)=>new Date(l.createdAt||0).getTime()-new Date(o.createdAt||0).getTime()).map(o=>i.jsx("div",{className:"bg-frhigh-dark-secondary rounded-xl overflow-hidden border border-frhigh-dark-tertiary hover:border-frhigh-green/30 transition-all duration-200",children:i.jsx("div",{className:"p-6",children:o.type==="strain_review"?i.jsx(Sv,{post:o}):o.type==="video"?i.jsx(wP,{post:o}):o.type==="podcast"?i.jsx(NP,{post:o}):i.jsx(Hh,{post:o})})},o.id)),i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 bg-frhigh-green/20 rounded-full mb-4",children:i.jsx(o0,{className:"w-6 h-6 text-frhigh-green"})}),i.jsx("p",{className:"text-gray-400",children:"You're all caught up with community posts"})]})]}):i.jsxs("div",{className:"text-center py-16",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-frhigh-green/20 rounded-full mb-6",children:i.jsx(o0,{className:"w-10 h-10 text-frhigh-green"})}),i.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"No Profile Posts Yet"}),i.jsx("p",{className:"text-gray-300 text-lg mb-8 max-w-md mx-auto",children:"This feed shows posts from community member profiles. Check back soon as users start sharing their experiences."})]})})]})})]})}const tz=["image/jpeg","image/jpg","image/png","image/gif","image/webp","image/svg+xml","image/bmp","image/tiff","image/tif","image/ico","image/x-icon","image/heic","image/heif","image/heic-sequence","image/heif-sequence","image/x-canon-cr2","image/x-canon-crw","image/x-adobe-dng","image/x-nikon-nef","image/x-sony-arw","image/x-panasonic-raw","image/avif","image/jxl","image/jp2","image/jpx"],rz=[".jpg",".jpeg",".png",".gif",".webp",".svg",".bmp",".tiff",".tif",".ico",".heic",".heif",".cr2",".crw",".dng",".nef",".arw",".avif",".jxl",".jp2",".jpx"];function Yb(e){if(e.type&&tz.includes(e.type.toLowerCase()))return!0;const t=e.name.toLowerCase();return rz.some(r=>t.endsWith(r))}function nz(){return["image/*",".heic",".heif",".jpg",".jpeg",".png",".gif",".webp",".svg",".bmp",".tiff",".avif"].join(",")}function sz({isOpen:e,onClose:t,onUploadComplete:r,acceptedTypes:n="image/*,video/*,audio/*",maxFileSize:s=50*1024*1024,title:a="Upload Media",enableCrop:o=!1,cropAspectRatio:l=1,cropShape:c="rect"}){const[d,u]=f.useState(null),[h,p]=f.useState(!1),[m,x]=f.useState(!1),[y,w]=f.useState(""),{toast:v}=ke(),g=k=>{var _;const C=(_=k.target.files)==null?void 0:_[0];if(!C)return;if(C.size>s){v({title:"File too large",description:`Please select a file smaller than ${Math.round(s/(1024*1024))}MB`,variant:"destructive"});return}u(C);const S=URL.createObjectURL(C);w(S),o&&Yb(C)&&x(!0)},b=async()=>{var k,C,S,_,P,T,F;if(d){p(!0);try{console.log("Enhanced uploader: Getting upload URL...");const M=await(await ne("POST","/api/objects/upload")).json(),{uploadURL:I}=M;console.log("Enhanced uploader: Upload URL received:",I?"":"");const H=await fetch(I,{method:"PUT",body:d,headers:{"Content-Type":d.type},mode:"cors",credentials:"omit"});if(!H.ok){const A=await H.text().catch(()=>"Upload failed");throw new Error(`Upload failed: ${H.status} - ${A}`)}const V=await ne("PUT","/api/posts/media",{mediaURL:I,mediaType:d.type.startsWith("video/")?"video":"image"}),{objectPath:Q}=await V.json();r(Q),v({title:"Upload successful",description:"Your media has been uploaded successfully"}),u(null),w(""),t()}catch(R){console.error("Enhanced media uploader error:",R);let M="There was an error uploading your file. Please try again.";(k=R.message)!=null&&k.includes("401")?M="Authentication error. Please refresh the page and try again.":(C=R.message)!=null&&C.includes("403")?M="Access denied. Please check your permissions.":(S=R.message)!=null&&S.includes("413")||(_=R.message)!=null&&_.includes("too large")?M="File is too large. Please choose a smaller file.":(P=R.message)!=null&&P.includes("network")||(T=R.message)!=null&&T.includes("fetch")?M="Network error. Please check your connection and try again.":(F=R.message)!=null&&F.includes("CORS")&&(M="Upload blocked by browser security. Please try refreshing the page."),v({title:"Upload Failed",description:M,variant:"destructive"})}finally{p(!1)}}},j=()=>{y&&URL.revokeObjectURL(y),u(null),w(""),x(!1),t()};return i.jsx(dr,{open:e,onOpenChange:j,children:i.jsxs(qt,{className:"sm:max-w-sm bg-frhigh-dark-secondary border-frhigh-dark-tertiary",children:[i.jsx(ur,{children:i.jsx(hr,{className:"text-white",children:a})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ce,{htmlFor:"file-upload",className:"text-white",children:"Choose File"}),i.jsx(le,{id:"file-upload",type:"file",accept:n.includes("image/")?`${n},${nz()}`:n,onChange:g,className:"bg-frhigh-dark border-frhigh-dark-tertiary text-white file:bg-frhigh-green file:text-frhigh-dark file:border-0 file:rounded-md file:px-4 file:py-2 file:mr-4"})]}),d&&y&&i.jsxs("div",{className:"space-y-2",children:[i.jsx(ce,{className:"text-white",children:"Preview"}),i.jsxs("div",{className:"relative max-w-full max-h-64 overflow-hidden rounded-lg border border-frhigh-dark-tertiary",children:[Yb(d)?i.jsx("img",{src:y,alt:"Preview",className:"w-full h-auto max-h-64 object-contain"}):d.type.startsWith("video/")?i.jsx("video",{src:y,controls:!0,className:"w-full h-auto max-h-64"}):i.jsxs("div",{className:"p-4 text-center text-gray-400",children:[i.jsx(Or,{className:"mx-auto h-12 w-12 mb-2"}),i.jsx("p",{children:d.name}),i.jsxs("p",{className:"text-sm",children:[(d.size/(1024*1024)).toFixed(2)," MB"]})]}),i.jsx(z,{size:"sm",variant:"destructive",className:"absolute top-2 right-2",onClick:()=>{u(null),w("")},children:i.jsx($r,{className:"h-4 w-4"})})]})]}),i.jsxs("div",{className:"flex justify-end space-x-2",children:[i.jsx(z,{variant:"outline",onClick:j,className:"border-frhigh-dark-tertiary text-gray-300",children:"Cancel"}),i.jsx(z,{onClick:b,disabled:!d||h,className:"bg-frhigh-green hover:bg-frhigh-green/80 text-white",children:h?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Uploading..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Or,{className:"mr-2 h-4 w-4"}),"Upload"]})})]})]})]})})}function iz({currentAvatar:e,displayName:t,onAvatarChange:r}){const[n,s]=f.useState(!1),{toast:a}=ke(),o=l=>{r(l),a({title:"Profile picture updated!",description:"Your new profile picture has been saved."})};return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"relative group",children:[i.jsxs(rr,{className:"w-24 h-24 border-2 border-frhigh-green",children:[i.jsx(nr,{src:e,alt:"Profile picture"}),i.jsx(sr,{className:"bg-frhigh-green text-frhigh-dark text-lg",children:(t==null?void 0:t.slice(0,2).toUpperCase())||"??"})]}),i.jsx(z,{onClick:()=>s(!0),size:"sm",className:"absolute -bottom-2 left-1/2 transform -translate-x-1/2 bg-frhigh-green hover:bg-frhigh-green-light text-frhigh-dark text-xs px-2 py-1 h-6","data-testid":"button-change-profile-picture",children:" Change"})]}),i.jsx(sz,{isOpen:n,onClose:()=>s(!1),onUploadComplete:o,acceptedTypes:"image/*",maxFileSize:5*1024*1024,title:"Upload Profile Picture",enableCrop:!0,cropAspectRatio:1,cropShape:"round"})]})}function Xb(e,[t,r]){return Math.min(r,Math.max(t,e))}var az=[" ","Enter","ArrowUp","ArrowDown"],oz=[" ","Enter"],Bc="Select",[Wh,qh,lz]=xh(Bc),[So,E9]=Qt(Bc,[lz,Ks]),Kh=Ks(),[cz,Qs]=So(Bc),[dz,uz]=So(Bc),SP=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:s,onOpenChange:a,value:o,defaultValue:l,onValueChange:c,dir:d,name:u,autoComplete:h,disabled:p,required:m,form:x}=e,y=Kh(t),[w,v]=f.useState(null),[g,b]=f.useState(null),[j,k]=f.useState(!1),C=Oh(d),[S=!1,_]=Ls({prop:n,defaultProp:s,onChange:a}),[P,T]=Ls({prop:o,defaultProp:l,onChange:c}),F=f.useRef(null),R=w?x||!!w.closest("form"):!0,[M,I]=f.useState(new Set),H=Array.from(M).map(V=>V.props.value).join(";");return i.jsx(Uy,{...y,children:i.jsxs(cz,{required:m,scope:t,trigger:w,onTriggerChange:v,valueNode:g,onValueNodeChange:b,valueNodeHasChildren:j,onValueNodeHasChildrenChange:k,contentId:Dr(),value:P,onValueChange:T,open:S,onOpenChange:_,dir:C,triggerPointerDownPosRef:F,disabled:p,children:[i.jsx(Wh.Provider,{scope:t,children:i.jsx(dz,{scope:e.__scopeSelect,onNativeOptionAdd:f.useCallback(V=>{I(Q=>new Set(Q).add(V))},[]),onNativeOptionRemove:f.useCallback(V=>{I(Q=>{const A=new Set(Q);return A.delete(V),A})},[]),children:r})}),R?i.jsxs(QP,{"aria-hidden":!0,required:m,tabIndex:-1,name:u,autoComplete:h,value:P,onChange:V=>T(V.target.value),disabled:p,form:x,children:[P===void 0?i.jsx("option",{value:""}):null,Array.from(M)]},H):null]})})};SP.displayName=Bc;var kP="SelectTrigger",CP=f.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...s}=e,a=Kh(r),o=Qs(kP,r),l=o.disabled||n,c=me(t,o.onTriggerChange),d=qh(r),u=f.useRef("touch"),[h,p,m]=YP(y=>{const w=d().filter(b=>!b.disabled),v=w.find(b=>b.value===o.value),g=XP(w,y,v);g!==void 0&&o.onValueChange(g.value)}),x=y=>{l||(o.onOpenChange(!0),m()),y&&(o.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)})};return i.jsx(Fc,{asChild:!0,...a,children:i.jsx(ie.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":GP(o.value)?"":void 0,...s,ref:c,onClick:K(s.onClick,y=>{y.currentTarget.focus(),u.current!=="mouse"&&x(y)}),onPointerDown:K(s.onPointerDown,y=>{u.current=y.pointerType;const w=y.target;w.hasPointerCapture(y.pointerId)&&w.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&y.pointerType==="mouse"&&(x(y),y.preventDefault())}),onKeyDown:K(s.onKeyDown,y=>{const w=h.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&p(y.key),!(w&&y.key===" ")&&az.includes(y.key)&&(x(),y.preventDefault())})})})});CP.displayName=kP;var PP="SelectValue",EP=f.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:s,children:a,placeholder:o="",...l}=e,c=Qs(PP,r),{onValueNodeHasChildrenChange:d}=c,u=a!==void 0,h=me(t,c.onValueNodeChange);return ze(()=>{d(u)},[d,u]),i.jsx(ie.span,{...l,ref:h,style:{pointerEvents:"none"},children:GP(c.value)?i.jsx(i.Fragment,{children:o}):a})});EP.displayName=PP;var hz="SelectIcon",_P=f.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...s}=e;return i.jsx(ie.span,{"aria-hidden":!0,...s,ref:t,children:n||""})});_P.displayName=hz;var fz="SelectPortal",TP=e=>i.jsx(Pc,{asChild:!0,...e});TP.displayName=fz;var Oi="SelectContent",RP=f.forwardRef((e,t)=>{const r=Qs(Oi,e.__scopeSelect),[n,s]=f.useState();if(ze(()=>{s(new DocumentFragment)},[]),!r.open){const a=n;return a?qs.createPortal(i.jsx(FP,{scope:e.__scopeSelect,children:i.jsx(Wh.Slot,{scope:e.__scopeSelect,children:i.jsx("div",{children:e.children})})}),a):null}return i.jsx(MP,{...e,ref:t})});RP.displayName=Oi;var mr=10,[FP,Ys]=So(Oi),pz="SelectContentImpl",mz=Mi("SelectContent.RemoveScroll"),MP=f.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:a,onPointerDownOutside:o,side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:p,collisionPadding:m,sticky:x,hideWhenDetached:y,avoidCollisions:w,...v}=e,g=Qs(Oi,r),[b,j]=f.useState(null),[k,C]=f.useState(null),S=me(t,Z=>j(Z)),[_,P]=f.useState(null),[T,F]=f.useState(null),R=qh(r),[M,I]=f.useState(!1),H=f.useRef(!1);f.useEffect(()=>{if(b)return Mh(b)},[b]),Rh();const V=f.useCallback(Z=>{const[q,...se]=R().map(Ne=>Ne.ref.current),[te]=se.slice(-1),be=document.activeElement;for(const Ne of Z)if(Ne===be||(Ne==null||Ne.scrollIntoView({block:"nearest"}),Ne===q&&k&&(k.scrollTop=0),Ne===te&&k&&(k.scrollTop=k.scrollHeight),Ne==null||Ne.focus(),document.activeElement!==be))return},[R,k]),Q=f.useCallback(()=>V([_,b]),[V,_,b]);f.useEffect(()=>{M&&Q()},[M,Q]);const{onOpenChange:A,triggerPointerDownPosRef:L}=g;f.useEffect(()=>{if(b){let Z={x:0,y:0};const q=te=>{var be,Ne;Z={x:Math.abs(Math.round(te.pageX)-(((be=L.current)==null?void 0:be.x)??0)),y:Math.abs(Math.round(te.pageY)-(((Ne=L.current)==null?void 0:Ne.y)??0))}},se=te=>{Z.x<=10&&Z.y<=10?te.preventDefault():b.contains(te.target)||A(!1),document.removeEventListener("pointermove",q),L.current=null};return L.current!==null&&(document.addEventListener("pointermove",q),document.addEventListener("pointerup",se,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",q),document.removeEventListener("pointerup",se,{capture:!0})}}},[b,A,L]),f.useEffect(()=>{const Z=()=>A(!1);return window.addEventListener("blur",Z),window.addEventListener("resize",Z),()=>{window.removeEventListener("blur",Z),window.removeEventListener("resize",Z)}},[A]);const[G,B]=YP(Z=>{const q=R().filter(be=>!be.disabled),se=q.find(be=>be.ref.current===document.activeElement),te=XP(q,Z,se);te&&setTimeout(()=>te.ref.current.focus())}),X=f.useCallback((Z,q,se)=>{const te=!H.current&&!se;(g.value!==void 0&&g.value===q||te)&&(P(Z),te&&(H.current=!0))},[g.value]),ye=f.useCallback(()=>b==null?void 0:b.focus(),[b]),fe=f.useCallback((Z,q,se)=>{const te=!H.current&&!se;(g.value!==void 0&&g.value===q||te)&&F(Z)},[g.value]),He=n==="popper"?fg:AP,_e=He===fg?{side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:p,collisionPadding:m,sticky:x,hideWhenDetached:y,avoidCollisions:w}:{};return i.jsx(FP,{scope:r,content:b,viewport:k,onViewportChange:C,itemRefCallback:X,selectedItem:_,onItemLeave:ye,itemTextRefCallback:fe,focusSelectedItem:Q,selectedItemText:T,position:n,isPositioned:M,searchRef:G,children:i.jsx(Mc,{as:mz,allowPinchZoom:!0,children:i.jsx(Ih,{asChild:!0,trapped:g.open,onMountAutoFocus:Z=>{Z.preventDefault()},onUnmountAutoFocus:K(s,Z=>{var q;(q=g.trigger)==null||q.focus({preventScroll:!0}),Z.preventDefault()}),children:i.jsx(bo,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:Z=>Z.preventDefault(),onDismiss:()=>g.onOpenChange(!1),children:i.jsx(He,{role:"listbox",id:g.contentId,"data-state":g.open?"open":"closed",dir:g.dir,onContextMenu:Z=>Z.preventDefault(),...v,..._e,onPlaced:()=>I(!0),ref:S,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:K(v.onKeyDown,Z=>{const q=Z.ctrlKey||Z.altKey||Z.metaKey;if(Z.key==="Tab"&&Z.preventDefault(),!q&&Z.key.length===1&&B(Z.key),["ArrowUp","ArrowDown","Home","End"].includes(Z.key)){let te=R().filter(be=>!be.disabled).map(be=>be.ref.current);if(["ArrowUp","End"].includes(Z.key)&&(te=te.slice().reverse()),["ArrowUp","ArrowDown"].includes(Z.key)){const be=Z.target,Ne=te.indexOf(be);te=te.slice(Ne+1)}setTimeout(()=>V(te)),Z.preventDefault()}})})})})})})});MP.displayName=pz;var gz="SelectItemAlignedPosition",AP=f.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...s}=e,a=Qs(Oi,r),o=Ys(Oi,r),[l,c]=f.useState(null),[d,u]=f.useState(null),h=me(t,S=>u(S)),p=qh(r),m=f.useRef(!1),x=f.useRef(!0),{viewport:y,selectedItem:w,selectedItemText:v,focusSelectedItem:g}=o,b=f.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&d&&y&&w&&v){const S=a.trigger.getBoundingClientRect(),_=d.getBoundingClientRect(),P=a.valueNode.getBoundingClientRect(),T=v.getBoundingClientRect();if(a.dir!=="rtl"){const be=T.left-_.left,Ne=P.left-be,Lt=S.left-Ne,qr=S.width+Lt,ko=Math.max(qr,_.width),Co=window.innerWidth-mr,Po=Xb(Ne,[mr,Math.max(mr,Co-ko)]);l.style.minWidth=qr+"px",l.style.left=Po+"px"}else{const be=_.right-T.right,Ne=window.innerWidth-P.right-be,Lt=window.innerWidth-S.right-Ne,qr=S.width+Lt,ko=Math.max(qr,_.width),Co=window.innerWidth-mr,Po=Xb(Ne,[mr,Math.max(mr,Co-ko)]);l.style.minWidth=qr+"px",l.style.right=Po+"px"}const F=p(),R=window.innerHeight-mr*2,M=y.scrollHeight,I=window.getComputedStyle(d),H=parseInt(I.borderTopWidth,10),V=parseInt(I.paddingTop,10),Q=parseInt(I.borderBottomWidth,10),A=parseInt(I.paddingBottom,10),L=H+V+M+A+Q,G=Math.min(w.offsetHeight*5,L),B=window.getComputedStyle(y),X=parseInt(B.paddingTop,10),ye=parseInt(B.paddingBottom,10),fe=S.top+S.height/2-mr,He=R-fe,_e=w.offsetHeight/2,Z=w.offsetTop+_e,q=H+V+Z,se=L-q;if(q<=fe){const be=F.length>0&&w===F[F.length-1].ref.current;l.style.bottom="0px";const Ne=d.clientHeight-y.offsetTop-y.offsetHeight,Lt=Math.max(He,_e+(be?ye:0)+Ne+Q),qr=q+Lt;l.style.height=qr+"px"}else{const be=F.length>0&&w===F[0].ref.current;l.style.top="0px";const Lt=Math.max(fe,H+y.offsetTop+(be?X:0)+_e)+se;l.style.height=Lt+"px",y.scrollTop=q-fe+y.offsetTop}l.style.margin=`${mr}px 0`,l.style.minHeight=G+"px",l.style.maxHeight=R+"px",n==null||n(),requestAnimationFrame(()=>m.current=!0)}},[p,a.trigger,a.valueNode,l,d,y,w,v,a.dir,n]);ze(()=>b(),[b]);const[j,k]=f.useState();ze(()=>{d&&k(window.getComputedStyle(d).zIndex)},[d]);const C=f.useCallback(S=>{S&&x.current===!0&&(b(),g==null||g(),x.current=!1)},[b,g]);return i.jsx(vz,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:C,children:i.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:j},children:i.jsx(ie.div,{...s,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});AP.displayName=gz;var yz="SelectPopperPosition",fg=f.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:s=mr,...a}=e,o=Kh(r);return i.jsx(Ch,{...o,...a,ref:t,align:n,collisionPadding:s,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});fg.displayName=yz;var[vz,kv]=So(Oi,{}),pg="SelectViewport",IP=f.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...s}=e,a=Ys(pg,r),o=kv(pg,r),l=me(t,a.onViewportChange),c=f.useRef(0);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),i.jsx(Wh.Slot,{scope:r,children:i.jsx(ie.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:K(s.onScroll,d=>{const u=d.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:p}=o;if(p!=null&&p.current&&h){const m=Math.abs(c.current-u.scrollTop);if(m>0){const x=window.innerHeight-mr*2,y=parseFloat(h.style.minHeight),w=parseFloat(h.style.height),v=Math.max(y,w);if(v<x){const g=v+m,b=Math.min(x,g),j=g-b;h.style.height=b+"px",h.style.bottom==="0px"&&(u.scrollTop=j>0?j:0,h.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});IP.displayName=pg;var OP="SelectGroup",[xz,bz]=So(OP),wz=f.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=Dr();return i.jsx(xz,{scope:r,id:s,children:i.jsx(ie.div,{role:"group","aria-labelledby":s,...n,ref:t})})});wz.displayName=OP;var DP="SelectLabel",LP=f.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=bz(DP,r);return i.jsx(ie.div,{id:s.id,...n,ref:t})});LP.displayName=DP;var zu="SelectItem",[Nz,$P]=So(zu),UP=f.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:s=!1,textValue:a,...o}=e,l=Qs(zu,r),c=Ys(zu,r),d=l.value===n,[u,h]=f.useState(a??""),[p,m]=f.useState(!1),x=me(t,g=>{var b;return(b=c.itemRefCallback)==null?void 0:b.call(c,g,n,s)}),y=Dr(),w=f.useRef("touch"),v=()=>{s||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return i.jsx(Nz,{scope:r,value:n,disabled:s,textId:y,isSelected:d,onItemTextChange:f.useCallback(g=>{h(b=>b||((g==null?void 0:g.textContent)??"").trim())},[]),children:i.jsx(Wh.ItemSlot,{scope:r,value:n,disabled:s,textValue:u,children:i.jsx(ie.div,{role:"option","aria-labelledby":y,"data-highlighted":p?"":void 0,"aria-selected":d&&p,"data-state":d?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:x,onFocus:K(o.onFocus,()=>m(!0)),onBlur:K(o.onBlur,()=>m(!1)),onClick:K(o.onClick,()=>{w.current!=="mouse"&&v()}),onPointerUp:K(o.onPointerUp,()=>{w.current==="mouse"&&v()}),onPointerDown:K(o.onPointerDown,g=>{w.current=g.pointerType}),onPointerMove:K(o.onPointerMove,g=>{var b;w.current=g.pointerType,s?(b=c.onItemLeave)==null||b.call(c):w.current==="mouse"&&g.currentTarget.focus({preventScroll:!0})}),onPointerLeave:K(o.onPointerLeave,g=>{var b;g.currentTarget===document.activeElement&&((b=c.onItemLeave)==null||b.call(c))}),onKeyDown:K(o.onKeyDown,g=>{var j;((j=c.searchRef)==null?void 0:j.current)!==""&&g.key===" "||(oz.includes(g.key)&&v(),g.key===" "&&g.preventDefault())})})})})});UP.displayName=zu;var rl="SelectItemText",zP=f.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:s,...a}=e,o=Qs(rl,r),l=Ys(rl,r),c=$P(rl,r),d=uz(rl,r),[u,h]=f.useState(null),p=me(t,v=>h(v),c.onItemTextChange,v=>{var g;return(g=l.itemTextRefCallback)==null?void 0:g.call(l,v,c.value,c.disabled)}),m=u==null?void 0:u.textContent,x=f.useMemo(()=>i.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:y,onNativeOptionRemove:w}=d;return ze(()=>(y(x),()=>w(x)),[y,w,x]),i.jsxs(i.Fragment,{children:[i.jsx(ie.span,{id:c.textId,...a,ref:p}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?qs.createPortal(a.children,o.valueNode):null]})});zP.displayName=rl;var BP="SelectItemIndicator",VP=f.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return $P(BP,r).isSelected?i.jsx(ie.span,{"aria-hidden":!0,...n,ref:t}):null});VP.displayName=BP;var mg="SelectScrollUpButton",HP=f.forwardRef((e,t)=>{const r=Ys(mg,e.__scopeSelect),n=kv(mg,e.__scopeSelect),[s,a]=f.useState(!1),o=me(t,n.onScrollButtonChange);return ze(()=>{if(r.viewport&&r.isPositioned){let l=function(){const d=c.scrollTop>0;a(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?i.jsx(qP,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});HP.displayName=mg;var gg="SelectScrollDownButton",WP=f.forwardRef((e,t)=>{const r=Ys(gg,e.__scopeSelect),n=kv(gg,e.__scopeSelect),[s,a]=f.useState(!1),o=me(t,n.onScrollButtonChange);return ze(()=>{if(r.viewport&&r.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<d;a(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?i.jsx(qP,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});WP.displayName=gg;var qP=f.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...s}=e,a=Ys("SelectScrollButton",r),o=f.useRef(null),l=qh(r),c=f.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return f.useEffect(()=>()=>c(),[c]),ze(()=>{var u;const d=l().find(h=>h.ref.current===document.activeElement);(u=d==null?void 0:d.ref.current)==null||u.scrollIntoView({block:"nearest"})},[l]),i.jsx(ie.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:K(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:K(s.onPointerMove,()=>{var d;(d=a.onItemLeave)==null||d.call(a),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:K(s.onPointerLeave,()=>{c()})})}),jz="SelectSeparator",KP=f.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return i.jsx(ie.div,{"aria-hidden":!0,...n,ref:t})});KP.displayName=jz;var yg="SelectArrow",Sz=f.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=Kh(r),a=Qs(yg,r),o=Ys(yg,r);return a.open&&o.position==="popper"?i.jsx(Ph,{...s,...n,ref:t}):null});Sz.displayName=yg;function GP(e){return e===""||e===void 0}var QP=f.forwardRef((e,t)=>{const{value:r,...n}=e,s=f.useRef(null),a=me(t,s),o=tk(r);return f.useEffect(()=>{const l=s.current,c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==r&&u){const h=new Event("change",{bubbles:!0});u.call(l,r),l.dispatchEvent(h)}},[o,r]),i.jsx(Ec,{asChild:!0,children:i.jsx("select",{...n,ref:a,defaultValue:r})})});QP.displayName="BubbleSelect";function YP(e){const t=Ge(e),r=f.useRef(""),n=f.useRef(0),s=f.useCallback(o=>{const l=r.current+o;t(l),function c(d){r.current=d,window.clearTimeout(n.current),d!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),a=f.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return f.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,s,a]}function XP(e,t,r){const s=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,a=r?e.indexOf(r):-1;let o=kz(e,Math.max(a,0));s.length===1&&(o=o.filter(d=>d!==r));const c=o.find(d=>d.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function kz(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var Cz=SP,JP=CP,Pz=EP,Ez=_P,_z=TP,ZP=RP,Tz=IP,eE=LP,tE=UP,Rz=zP,Fz=VP,rE=HP,nE=WP,sE=KP;const qn=Cz,Kn=Pz,gn=f.forwardRef(({className:e,children:t,...r},n)=>i.jsxs(JP,{ref:n,className:re("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,i.jsx(Ez,{asChild:!0,children:i.jsx(Py,{className:"h-4 w-4 opacity-50"})})]}));gn.displayName=JP.displayName;const iE=f.forwardRef(({className:e,...t},r)=>i.jsx(rE,{ref:r,className:re("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(Y5,{className:"h-4 w-4"})}));iE.displayName=rE.displayName;const aE=f.forwardRef(({className:e,...t},r)=>i.jsx(nE,{ref:r,className:re("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(Py,{className:"h-4 w-4"})}));aE.displayName=nE.displayName;const yn=f.forwardRef(({className:e,children:t,position:r="popper",...n},s)=>i.jsx(_z,{children:i.jsxs(ZP,{ref:s,className:re("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[i.jsx(iE,{}),i.jsx(Tz,{className:re("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),i.jsx(aE,{})]})}));yn.displayName=ZP.displayName;const Mz=f.forwardRef(({className:e,...t},r)=>i.jsx(eE,{ref:r,className:re("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));Mz.displayName=eE.displayName;const he=f.forwardRef(({className:e,children:t,...r},n)=>i.jsxs(tE,{ref:n,className:re("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(Fz,{children:i.jsx(Tc,{className:"h-4 w-4"})})}),i.jsx(Rz,{children:t})]}));he.displayName=tE.displayName;const Az=f.forwardRef(({className:e,...t},r)=>i.jsx(sE,{ref:r,className:re("-mx-1 my-1 h-px bg-muted",e),...t}));Az.displayName=sE.displayName;function _d({onPostCreated:e}){const{user:t}=Fe(),{toast:r}=ke(),n=Xe(),[s,a]=f.useState(!1),[o,l]=f.useState(""),[c,d]=f.useState(!1),[u,h]=f.useState(""),[p,m]=f.useState(""),[x,y]=f.useState([]),[w,v]=f.useState({name:"",type:"",thc:"",cbd:"",flavor:"",rating:0}),[g,b]=f.useState({name:"",description:"",price:"",category:""}),{data:j}=xe({queryKey:["/api/admin/check",t==null?void 0:t.id],queryFn:async()=>{if(!(t!=null&&t.id))return null;const F=await fetch(`/api/admin/check/${t.id}`,{credentials:"include"});if(!F.ok)throw new Error("Failed to check admin status");return F.json()},enabled:!!(t!=null&&t.id),refetchOnMount:!0,refetchOnWindowFocus:!0,staleTime:0}),k=()=>{const F=[{value:"photo",label:"Photo",icon:K5,description:"Share photos"},{value:"video",label:"Video",icon:km,description:"Upload videos"},{value:"strain",label:"Strain Review",icon:Pj,description:"Review cannabis strains"}];return j!=null&&j.isModerator&&F.push({value:"merch",label:"Merch",icon:fR,description:"Add merchandise"}),j!=null&&j.isAdmin&&F.push({value:"product",label:"Product",icon:Ey,description:"Add products"}),F},C=pe({mutationFn:async F=>(await ne("POST","/api/posts",F)).json(),onSuccess:()=>{h(""),m(""),y([]),v({name:"",type:"",thc:"",cbd:"",flavor:"",rating:0}),b({name:"",description:"",price:"",category:""}),l(""),a(!1),n.invalidateQueries({queryKey:["/api/posts"]}),n.invalidateQueries({queryKey:["/api/users",t==null?void 0:t.id,"posts"]}),r({title:"Content Created!",description:"Your content has been posted successfully."}),e==null||e(o)},onError:()=>{r({title:"Upload Failed",description:"Please try again.",variant:"destructive"})}}),S=async()=>{const F=await ne("POST","/api/objects/upload"),{uploadURL:R}=await F.json();return{method:"PUT",url:R}},_=async F=>{if(F.successful&&F.successful.length>0){const R=F.successful[0].uploadURL;try{let M="/api/posts/media";o==="merch"&&(M="/api/merch/media"),o==="product"&&(M="/api/products/media"),o==="strain"&&(M="/api/strains/media");const I=await ne("PUT",M,{mediaURL:R,mediaType:o.includes("video")?"video":"image"}),{objectPath:H}=await I.json();y(V=>[...V,H]),r({title:"Upload Complete",description:"Media uploaded successfully"})}catch(M){console.error("Error processing upload:",M),r({title:"Upload Error",description:"Failed to process uploaded media",variant:"destructive"})}}},P=async()=>{var F;if(!(!t||!o)){if(o==="strain"){if(!w.name.trim()){r({title:"Strain Name Required",description:"Please enter a strain name.",variant:"destructive"});return}}else if(!u.trim()&&x.length===0){r({title:"Content Required",description:"Please add content or media to post.",variant:"destructive"});return}d(!0);try{let R;const M=((F=u.match(/#\w+/g))==null?void 0:F.map(I=>I.slice(1)))||[];o==="strain"?R={userId:t.id,content:u,type:"strain_review",hashtags:M,images:x,strainData:{type:w.type,name:w.name,thc:w.thc,cbd:w.cbd,flavor:w.flavor,rating:w.rating}}:o==="video"?R={userId:t.id,content:u,type:"video",hashtags:M,videos:x.map(I=>({url:I,title:p||"Video Upload",duration:0}))}:o==="photo"?R={userId:t.id,content:u,type:"regular",hashtags:M,images:x}:R={userId:t.id,content:u,type:"regular",hashtags:M,images:x},C.mutate(R)}catch(R){console.error("Error creating post:",R),r({title:"Error",description:"Failed to create post",variant:"destructive"})}finally{d(!1)}}},T=()=>o?i.jsx(ae,{className:"mt-4 bg-frhigh-dark-secondary border-frhigh-dark-tertiary",children:i.jsxs(oe,{className:"p-4 space-y-4",children:[i.jsxs("div",{children:[i.jsx(ce,{htmlFor:"post-content",className:"text-white",children:"Content"}),i.jsx(xt,{id:"post-content",placeholder:`Write about your ${o}...`,value:u,onChange:F=>h(F.target.value),className:"bg-frhigh-dark border-frhigh-dark-tertiary text-white",rows:3})]}),o==="video"&&i.jsxs("div",{children:[i.jsx(ce,{htmlFor:"video-title",className:"text-white",children:"Video Title"}),i.jsx(le,{id:"video-title",placeholder:"Enter video title",value:p,onChange:F=>m(F.target.value),className:"bg-frhigh-dark border-frhigh-dark-tertiary text-white"})]}),o==="strain"&&i.jsxs("div",{className:"bg-gradient-to-r from-frhigh-green/10 to-frhigh-green-light/10 border border-frhigh-green/20 rounded-xl p-4 backdrop-blur-sm",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-8 h-8 bg-frhigh-green/20 rounded-full flex items-center justify-center",children:i.jsx("i",{className:"fas fa-leaf text-frhigh-green text-sm"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx(ce,{className:"text-frhigh-green font-bold text-sm",children:"Strain Name"}),i.jsx(le,{placeholder:"e.g., Blue Dream",value:w.name,onChange:F=>v({...w,name:F.target.value}),className:"bg-[#0f0e0e] border-frhigh-green/20 text-white mt-1"})]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(ce,{className:"text-white text-sm mr-2",children:"Rating:"}),i.jsxs(qn,{value:w.rating.toString(),onValueChange:F=>v({...w,rating:parseInt(F)}),children:[i.jsx(gn,{className:"bg-frhigh-dark-secondary/50 border-frhigh-green/20 text-white w-24",children:i.jsx(Kn,{placeholder:"Rate"})}),i.jsx(yn,{children:[1,2,3,4,5].map(F=>i.jsxs(he,{value:F.toString(),children:[F," "]},F))})]})]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("div",{className:"flex-1 grid grid-cols-2 lg:grid-cols-4 gap-3",children:[i.jsxs("div",{className:"bg-frhigh-dark-secondary/30 rounded-lg p-2 text-center",children:[i.jsx("div",{className:"text-xs text-gray-400 uppercase tracking-wide mb-1",children:"Type"}),i.jsxs(qn,{value:w.type,onValueChange:F=>v({...w,type:F}),children:[i.jsx(gn,{className:"bg-transparent border-none text-white p-0 h-auto font-semibold text-sm justify-center",children:i.jsx(Kn,{placeholder:"Select"})}),i.jsxs(yn,{children:[i.jsx(he,{value:"indica",children:"Indica"}),i.jsx(he,{value:"sativa",children:"Sativa"}),i.jsx(he,{value:"hybrid",children:"Hybrid"})]})]})]}),i.jsxs("div",{className:"bg-frhigh-dark-secondary/30 rounded-lg p-2 text-center",children:[i.jsx("div",{className:"text-xs text-gray-400 uppercase tracking-wide mb-1",children:"THC"}),i.jsx(le,{placeholder:"20",value:w.thc,onChange:F=>v({...w,thc:F.target.value}),className:"bg-transparent border-none text-frhigh-green font-semibold text-sm text-center p-0 h-auto"})]}),i.jsxs("div",{className:"bg-frhigh-dark-secondary/30 rounded-lg p-2 text-center",children:[i.jsx("div",{className:"text-xs text-gray-400 uppercase tracking-wide mb-1",children:"CBD"}),i.jsx(le,{placeholder:"1",value:w.cbd,onChange:F=>v({...w,cbd:F.target.value}),className:"bg-transparent border-none text-blue-400 font-semibold text-sm text-center p-0 h-auto"})]}),i.jsxs("div",{className:"bg-frhigh-dark-secondary/30 rounded-lg p-2 text-center col-span-2 lg:col-span-1",children:[i.jsx("div",{className:"text-xs text-gray-400 uppercase tracking-wide mb-1",children:"Flavor"}),i.jsx(le,{placeholder:"Fruity",value:w.flavor,onChange:F=>v({...w,flavor:F.target.value}),className:"bg-transparent border-none text-purple-400 font-semibold text-sm text-center p-0 h-auto"})]})]}),i.jsx("div",{className:"w-20 h-20 lg:w-24 lg:h-24 bg-frhigh-dark-secondary/30 rounded-lg flex items-center justify-center border-2 border-dashed border-frhigh-green/20",children:x.length>0?i.jsx("img",{src:x[0],alt:"Strain preview",className:"w-full h-full object-cover rounded-lg cursor-pointer",onClick:()=>window.open(x[0],"_blank")}):i.jsxs("div",{className:"text-center cursor-pointer",onClick:()=>{const F=document.querySelector(".strain-upload-trigger button");F&&F.click()},children:[i.jsx("i",{className:"fas fa-camera text-frhigh-green/40 text-lg mb-1"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Photo"})]})})]})]}),(o==="product"||o==="merch")&&i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx(ce,{className:"text-white",children:"Name"}),i.jsx(le,{placeholder:"Product name",value:g.name,onChange:F=>b({...g,name:F.target.value}),className:"bg-frhigh-dark border-frhigh-dark-tertiary text-white"})]}),i.jsxs("div",{children:[i.jsx(ce,{className:"text-white",children:"Price"}),i.jsx(le,{placeholder:"$0.00",value:g.price,onChange:F=>b({...g,price:F.target.value}),className:"bg-frhigh-dark border-frhigh-dark-tertiary text-white"})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx(ce,{className:"text-white",children:"Description"}),i.jsx(xt,{placeholder:"Describe the product...",value:g.description,onChange:F=>b({...g,description:F.target.value}),className:"bg-frhigh-dark border-frhigh-dark-tertiary text-white",rows:2})]})]}),o==="strain"?i.jsxs("div",{children:[i.jsx(ce,{className:"text-white mb-2 block",children:"Upload Additional Images"}),i.jsxs(Uu,{maxNumberOfFiles:5,maxFileSize:10*1024*1024,onGetUploadParameters:S,onComplete:_,buttonClassName:"strain-upload-trigger w-full bg-frhigh-green hover:bg-frhigh-green/80 text-white",children:[i.jsx(Or,{className:"mr-2 h-4 w-4"}),"Upload Strain Images"]}),x.length>0&&i.jsxs("div",{className:"mt-2 text-sm text-frhigh-green",children:[x.length," image",x.length>1?"s":""," uploaded"]})]}):i.jsxs("div",{children:[i.jsx(ce,{className:"text-white mb-2 block",children:"Upload Media"}),i.jsxs(Uu,{maxNumberOfFiles:o==="video"?1:5,maxFileSize:o==="video"?100*1024*1024:10*1024*1024,onGetUploadParameters:S,onComplete:_,buttonClassName:"w-full bg-frhigh-green hover:bg-frhigh-green/80 text-white",children:[i.jsx(Or,{className:"mr-2 h-4 w-4"}),"Upload ",o==="video"?"Video":"Images"]}),x.length>0&&i.jsxs("div",{className:"mt-2 text-sm text-frhigh-green",children:[x.length," file",x.length>1?"s":""," uploaded"]})]}),i.jsxs("div",{className:"flex space-x-3 pt-2",children:[i.jsx(z,{onClick:P,disabled:c||C.isPending,className:"flex-1 bg-frhigh-green hover:bg-frhigh-green/80 text-white",children:c||C.isPending?"Posting...":"Post"}),i.jsx(z,{onClick:()=>{l(""),a(!1),h(""),m(""),y([])},variant:"outline",className:"border-frhigh-green text-frhigh-green hover:bg-frhigh-green/10",children:"Cancel"})]})]})}):null;return t?i.jsxs("div",{className:"mb-6",children:[i.jsx(ae,{className:"bg-frhigh-dark-secondary border-frhigh-dark-tertiary",children:i.jsxs(oe,{className:"p-4",children:[i.jsxs(z,{onClick:()=>a(!s),variant:"outline",className:"w-full justify-between border-frhigh-green text-frhigh-green hover:bg-frhigh-green/10",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Or,{className:"mr-2 h-4 w-4"}),"Create Content"]}),i.jsx(Py,{className:`h-4 w-4 transition-transform ${s?"rotate-180":""}`})]}),s&&i.jsx("div",{className:"mt-4 grid grid-cols-2 gap-3",children:k().map(F=>{const R=F.icon;return i.jsxs("button",{onClick:()=>l(F.value),className:`p-3 rounded-lg border text-left transition-colors ${o===F.value?"border-frhigh-green bg-frhigh-green/10 text-frhigh-green":"border-frhigh-dark-tertiary text-gray-300 hover:border-frhigh-green/50"}`,children:[i.jsxs("div",{className:"flex items-center mb-1",children:[i.jsx(R,{className:"mr-2 h-4 w-4"}),i.jsx("span",{className:"font-medium",children:F.label})]}),i.jsx("p",{className:"text-xs text-gray-400",children:F.description})]},F.value)})})]})}),T()]}):null}function Jb(){var b,j,k,C,S,_;const{user:e,logout:t}=Fe(),{isAdmin:r}=Qy(),{toast:n}=ke(),s=Xe(),[a,o]=f.useState(!1),[l,c]=f.useState("posts"),[d,u]=f.useState({displayName:(e==null?void 0:e.displayName)||"",bio:(e==null?void 0:e.bio)||"",avatar:(e==null?void 0:e.avatar)||"",socialLinks:(e==null?void 0:e.socialLinks)||{instagram:"",twitter:"",youtube:"",tiktok:"",website:"",discord:""}});f.useEffect(()=>{e&&u({displayName:e.displayName||"",bio:e.bio||"",avatar:e.avatar||"",socialLinks:e.socialLinks||{instagram:"",twitter:"",youtube:"",tiktok:"",website:"",discord:""}})},[e]);const{data:h=[],isLoading:p}=xe({queryKey:["/api/users",e==null?void 0:e.id,"posts"],enabled:!!(e!=null&&e.id),refetchOnMount:!0});xe({queryKey:["/api/neon-sign"],refetchInterval:5e3,staleTime:0}),console.log("Profile posts query:",{userPosts:h,postsLoading:p,userId:e==null?void 0:e.id});const m=Array.isArray(h)?h:[],x=pe({mutationFn:async P=>(await ne("PATCH",`/api/users/${e==null?void 0:e.id}`,P)).json(),onSuccess:P=>{n({title:"Profile updated successfully!",description:"Your changes have been saved."});const{password:T,...F}=P;localStorage.setItem("frhighday_user",JSON.stringify(F)),o(!1),s.invalidateQueries({queryKey:["/api/users"]})},onError:P=>{n({title:"Update failed",description:P.message||"Please try again.",variant:"destructive"})}}),y=()=>{x.mutate(d)},w=()=>{u({displayName:(e==null?void 0:e.displayName)||"",bio:(e==null?void 0:e.bio)||"",avatar:(e==null?void 0:e.avatar)||"",bannerImage:(e==null?void 0:e.bannerImage)||"",socialLinks:(e==null?void 0:e.socialLinks)||{instagram:"",twitter:"",youtube:"",tiktok:"",website:"",discord:""}}),o(!1)},v=()=>{t(),n({title:"Logged out successfully",description:"See you next time!"})};if(!e)return i.jsx("div",{className:"min-h-screen bg-frhigh-dark flex items-center justify-center",children:i.jsx("div",{className:"text-center",children:i.jsx("p",{className:"text-gray-400",children:"Please log in to view your profile."})})});const g=P=>{u(T=>({...T,avatar:P})),a||x.mutate({avatar:P})};return i.jsxs("div",{className:"min-h-screen bg-frhigh-dark text-white",children:[i.jsx(Ic,{}),i.jsx(Ui,{}),i.jsx(zi,{}),i.jsxs("div",{className:"pb-20 px-4",children:[i.jsxs(ae,{className:"bg-frhigh-dark-secondary border-frhigh-dark-tertiary mb-6 overflow-hidden",children:[i.jsx("div",{className:"relative h-32 md:h-40 bg-gradient-to-r from-frhigh-green/20 to-frhigh-green/10 overflow-hidden",children:i.jsx("div",{className:"w-full h-full bg-gradient-to-r from-frhigh-green/30 to-frhigh-green/10"})}),i.jsx(oe,{className:"p-6 -mt-8 relative z-10",children:i.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-end gap-6",children:[i.jsxs("div",{className:"relative flex-shrink-0",children:[i.jsx(iz,{currentAvatar:a?d.avatar:e.avatar||"",displayName:e.displayName,onAvatarChange:g}),e.isVerified&&i.jsx("div",{className:"absolute -bottom-1 -right-1 bg-frhigh-green rounded-full p-1",children:i.jsx("i",{className:"fas fa-check text-frhigh-dark text-sm"})})]}),i.jsx("div",{className:"flex-1 min-w-0",children:a?i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Display Name"}),i.jsx(le,{value:d.displayName,onChange:P=>u(T=>({...T,displayName:P.target.value})),className:"bg-frhigh-dark border-frhigh-dark-tertiary text-white","data-testid":"input-display-name-edit"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Avatar URL"}),i.jsx(le,{value:d.avatar,onChange:P=>u(T=>({...T,avatar:P.target.value})),placeholder:"https://example.com/avatar.jpg",className:"bg-frhigh-dark border-frhigh-dark-tertiary text-white","data-testid":"input-avatar-edit"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Banner URL"}),i.jsx(le,{value:d.bannerImage,onChange:P=>u(T=>({...T,bannerImage:P.target.value})),placeholder:"https://example.com/banner.jpg",className:"bg-frhigh-dark border-frhigh-dark-tertiary text-white","data-testid":"input-banner-edit"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Bio"}),i.jsx(xt,{value:d.bio,onChange:P=>u(T=>({...T,bio:P.target.value})),placeholder:"Tell us about yourself...",className:"bg-frhigh-dark border-frhigh-dark-tertiary text-white",rows:3,"data-testid":"textarea-bio-edit"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium mb-3 block",children:"Social Links"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-400 mb-1 block",children:"Instagram"}),i.jsx(le,{value:d.socialLinks.instagram,onChange:P=>u(T=>({...T,socialLinks:{...T.socialLinks,instagram:P.target.value}})),placeholder:"@username or full URL",className:"bg-frhigh-dark border-frhigh-dark-tertiary text-white","data-testid":"input-instagram-edit"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-400 mb-1 block",children:"Twitter/X"}),i.jsx(le,{value:d.socialLinks.twitter,onChange:P=>u(T=>({...T,socialLinks:{...T.socialLinks,twitter:P.target.value}})),placeholder:"@username or full URL",className:"bg-frhigh-dark border-frhigh-dark-tertiary text-white","data-testid":"input-twitter-edit"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-400 mb-1 block",children:"YouTube"}),i.jsx(le,{value:d.socialLinks.youtube,onChange:P=>u(T=>({...T,socialLinks:{...T.socialLinks,youtube:P.target.value}})),placeholder:"Channel URL",className:"bg-frhigh-dark border-frhigh-dark-tertiary text-white","data-testid":"input-youtube-edit"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-400 mb-1 block",children:"TikTok"}),i.jsx(le,{value:d.socialLinks.tiktok,onChange:P=>u(T=>({...T,socialLinks:{...T.socialLinks,tiktok:P.target.value}})),placeholder:"@username or full URL",className:"bg-frhigh-dark border-frhigh-dark-tertiary text-white","data-testid":"input-tiktok-edit"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-400 mb-1 block",children:"Website"}),i.jsx(le,{value:d.socialLinks.website,onChange:P=>u(T=>({...T,socialLinks:{...T.socialLinks,website:P.target.value}})),placeholder:"https://yourwebsite.com",className:"bg-frhigh-dark border-frhigh-dark-tertiary text-white","data-testid":"input-website-edit"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-400 mb-1 block",children:"Discord"}),i.jsx(le,{value:d.socialLinks.discord,onChange:P=>u(T=>({...T,socialLinks:{...T.socialLinks,discord:P.target.value}})),placeholder:"username#1234",className:"bg-frhigh-dark border-frhigh-dark-tertiary text-white","data-testid":"input-discord-edit"})]})]})]})]}):i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsxs("h1",{className:"text-2xl md:text-3xl font-bold text-white","data-testid":"text-display-name",children:[e.displayName||"The Shop"," "]}),e.isVerified&&i.jsx("span",{className:"text-frhigh-green text-lg",title:"Verified",children:""})]}),i.jsxs("p",{className:"text-gray-400 text-lg","data-testid":"text-username",children:["@",e.username||"theshop"]})]}),e.bio&&i.jsx("div",{children:i.jsx("p",{className:"text-gray-200 leading-relaxed","data-testid":"text-bio",children:e.bio})})]})}),i.jsx("div",{className:"flex flex-col sm:flex-row gap-3 w-full md:w-auto",children:a?i.jsxs(i.Fragment,{children:[i.jsx(z,{onClick:y,disabled:x.isPending,className:"bg-frhigh-green hover:bg-frhigh-green-light text-frhigh-dark flex-1 md:flex-none","data-testid":"button-save-profile",children:x.isPending?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-frhigh-dark mr-2"}),"Saving..."]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"fas fa-save mr-2"}),"Save Changes"]})}),i.jsxs(z,{onClick:w,variant:"outline",className:"border-frhigh-dark-tertiary text-gray-300 hover:bg-frhigh-dark-tertiary flex-1 md:flex-none","data-testid":"button-cancel-edit",children:[i.jsx("i",{className:"fas fa-times mr-2"}),"Cancel"]})]}):i.jsxs(i.Fragment,{children:[i.jsxs(z,{onClick:()=>o(!0),className:"bg-frhigh-green hover:bg-frhigh-green-light text-frhigh-dark flex-1 md:flex-none","data-testid":"button-edit-profile",children:[i.jsx("i",{className:"fas fa-edit mr-2"}),"Edit Profile"]}),e&&(e.isAdmin||r||e.role==="admin"||e.role==="super_admin"||e.username==="theshop"||e.username==="MeanMug"||e.email==="Frhighday760@icloud.com"||e.email==="16southvideo@gmail.com")&&i.jsx(cr,{href:"/admin",children:i.jsxs(z,{size:"sm",className:"hover:bg-red-600 hover:text-white border border-red-500/30 hover:border-red-400 transition-all duration-200 bg-[#00000062] text-[#ffffff]","data-testid":"button-admin-profile",children:[i.jsx("i",{className:"fas fa-shield-alt text-sm mr-1"}),"Admin"]})}),i.jsxs(z,{onClick:v,variant:"outline",className:"border-red-500 text-red-400 hover:bg-red-500 hover:text-white flex-1 md:flex-none","data-testid":"button-logout",children:[i.jsx("i",{className:"fas fa-sign-out-alt mr-2"}),"Logout"]})]})})]})})]}),i.jsx(ae,{className:"bg-frhigh-dark-secondary border-frhigh-dark-tertiary",children:i.jsx(oe,{className:"p-0",children:i.jsxs(ev,{value:l,onValueChange:c,className:"w-full",children:[i.jsxs($h,{className:"grid w-full grid-cols-4 bg-frhigh-dark-secondary border-b border-frhigh-dark-tertiary rounded-none",children:[i.jsxs(ln,{value:"posts",className:"data-[state=active]:bg-frhigh-green data-[state=active]:text-frhigh-dark text-gray-400","data-testid":"tab-posts",children:[i.jsx("i",{className:"fas fa-file-text mr-2"}),"Posts"]}),i.jsxs(ln,{value:"photos",className:"data-[state=active]:bg-frhigh-green data-[state=active]:text-frhigh-dark text-gray-400","data-testid":"tab-photos",children:[i.jsx("i",{className:"fas fa-images mr-2"}),"Photos"]}),i.jsxs(ln,{value:"videos",className:"data-[state=active]:bg-frhigh-green data-[state=active]:text-frhigh-dark text-gray-400","data-testid":"tab-videos",children:[i.jsx("i",{className:"fas fa-video mr-2"}),"Videos"]}),i.jsxs(ln,{value:"about",className:"data-[state=active]:bg-frhigh-green data-[state=active]:text-frhigh-dark text-gray-400","data-testid":"tab-about",children:[i.jsx("i",{className:"fas fa-user mr-2"}),"About"]})]}),i.jsxs(cn,{value:"posts",className:"p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Your Posts"}),i.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Share your cannabis experiences and connect with the community"}),i.jsx(_d,{onPostCreated:P=>{s.invalidateQueries({queryKey:["/api/users",e==null?void 0:e.id,"posts"]}),c(P==="photo"?"photos":P==="video"?"videos":"posts")}})]}),p?i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-frhigh-green"})}):m.length>0?i.jsx("div",{className:"space-y-6",children:m.map(P=>i.jsx("div",{"data-testid":`post-${P.id}`,children:P.type==="strain_review"?i.jsx(Sv,{post:P}):P.type==="video"?i.jsx(wP,{post:P}):P.type==="podcast"?i.jsx(NP,{post:P}):i.jsx(Hh,{post:P})},P.id))}):i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-frhigh-green text-6xl mb-4",children:""}),i.jsx("h4",{className:"text-2xl font-bold text-white mb-2",children:"No posts yet"}),i.jsx("p",{className:"text-gray-400 mb-6",children:"Start sharing your cannabis experiences with the community!"})]})]}),i.jsxs(cn,{value:"photos",className:"p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Your Photos"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"Share your cannabis photography and strain collections"})]}),i.jsx("div",{className:"mb-6",children:i.jsx(_d,{onPostCreated:P=>{s.invalidateQueries({queryKey:["/api/users",e==null?void 0:e.id,"posts"]}),P==="video"&&c("videos")}})}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"group relative aspect-square overflow-hidden rounded-lg border border-frhigh-dark-tertiary hover:border-frhigh-green transition-colors",children:[i.jsx("img",{src:"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=300&h=300&fit=crop",alt:"Cannabis photo",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}),i.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-300 flex items-center justify-center",children:i.jsxs("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity",children:[i.jsx(z,{size:"sm",variant:"outline",className:"mr-2 border-white text-white hover:bg-white hover:text-black",children:i.jsx("i",{className:"fas fa-eye"})}),i.jsx(z,{size:"sm",variant:"outline",className:"border-red-500 text-red-500 hover:bg-red-500 hover:text-white",children:i.jsx("i",{className:"fas fa-trash"})})]})})]}),i.jsxs("div",{className:"group relative aspect-square overflow-hidden rounded-lg border border-frhigh-dark-tertiary hover:border-frhigh-green transition-colors",children:[i.jsx("img",{src:"https://images.unsplash.com/photo-1544966503-7e31ebb3c02a?w=300&h=300&fit=crop",alt:"Cannabis photo",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}),i.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-300 flex items-center justify-center",children:i.jsxs("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity",children:[i.jsx(z,{size:"sm",variant:"outline",className:"mr-2 border-white text-white hover:bg-white hover:text-black",children:i.jsx("i",{className:"fas fa-eye"})}),i.jsx(z,{size:"sm",variant:"outline",className:"border-red-500 text-red-500 hover:bg-red-500 hover:text-white",children:i.jsx("i",{className:"fas fa-trash"})})]})})]}),i.jsxs("div",{className:"group relative aspect-square overflow-hidden rounded-lg border border-frhigh-dark-tertiary hover:border-frhigh-green transition-colors",children:[i.jsx("img",{src:"https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=300&h=300&fit=crop",alt:"Cannabis photo",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}),i.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-300 flex items-center justify-center",children:i.jsxs("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity",children:[i.jsx(z,{size:"sm",variant:"outline",className:"mr-2 border-white text-white hover:bg-white hover:text-black",children:i.jsx("i",{className:"fas fa-eye"})}),i.jsx(z,{size:"sm",variant:"outline",className:"border-red-500 text-red-500 hover:bg-red-500 hover:text-white",children:i.jsx("i",{className:"fas fa-trash"})})]})})]}),i.jsxs("div",{className:"col-span-full text-center py-12",style:{display:"none"},children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("p",{className:"text-gray-400",children:"No photos yet. Upload your first cannabis photo!"}),i.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Share your strain collections and grow photos"})]})]})]}),i.jsxs(cn,{value:"videos",className:"p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Your Videos"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"Share your cannabis-related videos and tutorials"})]}),i.jsx("div",{className:"mb-6",children:i.jsx(_d,{onPostCreated:P=>{s.invalidateQueries({queryKey:["/api/users",e==null?void 0:e.id,"posts"]}),P==="photo"&&c("photos")}})}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Your Videos"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"Share your cannabis-related videos, strain reviews, and experiences"})]}),i.jsx("div",{className:"mb-6",children:i.jsx(_d,{onPostCreated:()=>{s.invalidateQueries({queryKey:["/api/users",e==null?void 0:e.id,"posts"]})}})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"group bg-frhigh-dark rounded-lg border border-frhigh-dark-tertiary overflow-hidden hover:border-frhigh-green transition-colors",children:[i.jsxs("div",{className:"relative aspect-video bg-gray-900",children:[i.jsx("img",{src:"https://img.youtube.com/vi/dQw4w9WgXcQ/maxresdefault.jpg",alt:"Video thumbnail",className:"w-full h-full object-cover"}),i.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:i.jsx(z,{size:"lg",className:"bg-frhigh-green hover:bg-frhigh-green-light text-frhigh-dark rounded-full p-3",children:i.jsx("i",{className:"fas fa-play text-xl"})})}),i.jsx("div",{className:"absolute bottom-2 right-2 bg-black bg-opacity-75 text-white text-xs px-2 py-1 rounded",children:"5:32"})]}),i.jsxs("div",{className:"p-4",children:[i.jsx("h5",{className:"text-white font-medium mb-2 group-hover:text-frhigh-green transition-colors",children:"Blue Dream Strain Review"}),i.jsx("p",{className:"text-gray-400 text-sm mb-3 line-clamp-2",children:"In-depth review of the Blue Dream strain, covering effects, flavor profile, and growing tips."}),i.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[i.jsx("span",{children:"2 days ago"}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("span",{children:[i.jsx("i",{className:"fas fa-eye mr-1"}),"1.2K views"]}),i.jsxs("span",{children:[i.jsx("i",{className:"fas fa-heart mr-1"}),"89 likes"]})]})]}),i.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[i.jsxs(z,{size:"sm",variant:"outline",className:"border-white text-white hover:bg-white hover:text-black flex-1",children:[i.jsx("i",{className:"fas fa-eye mr-1"}),"Watch"]}),i.jsx(z,{size:"sm",variant:"outline",className:"border-red-500 text-red-500 hover:bg-red-500 hover:text-white w-10 h-8 p-0 flex items-center justify-center",onClick:()=>{window.confirm("Are you sure you want to delete this video? This action cannot be undone.")&&console.log("Deleting Blue Dream video...")},"data-testid":"button-delete-video-blue-dream",children:i.jsx("i",{className:"fas fa-trash text-sm"})})]})]})]}),i.jsxs("div",{className:"group bg-frhigh-dark rounded-lg border border-frhigh-dark-tertiary overflow-hidden hover:border-frhigh-green transition-colors",children:[i.jsxs("div",{className:"relative aspect-video bg-gray-900",children:[i.jsx("img",{src:"https://img.youtube.com/vi/dQw4w9WgXcQ/maxresdefault.jpg",alt:"Video thumbnail",className:"w-full h-full object-cover"}),i.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:i.jsx(z,{size:"lg",className:"bg-frhigh-green hover:bg-frhigh-green-light text-frhigh-dark rounded-full p-3",children:i.jsx("i",{className:"fas fa-play text-xl"})})}),i.jsx("div",{className:"absolute bottom-2 right-2 bg-black bg-opacity-75 text-white text-xs px-2 py-1 rounded",children:"8:15"})]}),i.jsxs("div",{className:"p-4",children:[i.jsx("h5",{className:"text-white font-medium mb-2 group-hover:text-frhigh-green transition-colors",children:"Growing Cannabis Indoors"}),i.jsx("p",{className:"text-gray-400 text-sm mb-3 line-clamp-2",children:"Complete guide to indoor cannabis cultivation, including lighting, nutrients, and harvest timing."}),i.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[i.jsx("span",{children:"1 week ago"}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("span",{children:[i.jsx("i",{className:"fas fa-eye mr-1"}),"3.4K views"]}),i.jsxs("span",{children:[i.jsx("i",{className:"fas fa-heart mr-1"}),"156 likes"]})]})]}),i.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[i.jsxs(z,{size:"sm",variant:"outline",className:"border-white text-white hover:bg-white hover:text-black flex-1",children:[i.jsx("i",{className:"fas fa-eye mr-1"}),"Watch"]}),i.jsx(z,{size:"sm",variant:"outline",className:"border-red-500 text-red-500 hover:bg-red-500 hover:text-white w-10 h-8 p-0 flex items-center justify-center",onClick:()=>{window.confirm("Are you sure you want to delete this video? This action cannot be undone.")&&console.log("Deleting Growing Cannabis Indoors video...")},"data-testid":"button-delete-video-growing-indoors",children:i.jsx("i",{className:"fas fa-trash text-sm"})})]})]})]}),i.jsxs("div",{className:"group bg-frhigh-dark rounded-lg border border-frhigh-dark-tertiary overflow-hidden hover:border-frhigh-green transition-colors",children:[i.jsxs("div",{className:"relative aspect-video bg-gray-900",children:[i.jsx("img",{src:"https://img.youtube.com/vi/dQw4w9WgXcQ/maxresdefault.jpg",alt:"Video thumbnail",className:"w-full h-full object-cover"}),i.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:i.jsx(z,{size:"lg",className:"bg-frhigh-green hover:bg-frhigh-green-light text-frhigh-dark rounded-full p-3",children:i.jsx("i",{className:"fas fa-play text-xl"})})}),i.jsx("div",{className:"absolute bottom-2 right-2 bg-black bg-opacity-75 text-white text-xs px-2 py-1 rounded",children:"12:45"})]}),i.jsxs("div",{className:"p-4",children:[i.jsx("h5",{className:"text-white font-medium mb-2 group-hover:text-frhigh-green transition-colors",children:"Cannabis Terpenes Explained"}),i.jsx("p",{className:"text-gray-400 text-sm mb-3 line-clamp-2",children:"Deep dive into cannabis terpenes, their effects, and how they interact with cannabinoids."}),i.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[i.jsx("span",{children:"2 weeks ago"}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("span",{children:[i.jsx("i",{className:"fas fa-eye mr-1"}),"987 views"]}),i.jsxs("span",{children:[i.jsx("i",{className:"fas fa-heart mr-1"}),"67 likes"]})]})]}),i.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[i.jsxs(z,{size:"sm",variant:"outline",className:"border-white text-white hover:bg-white hover:text-black flex-1",children:[i.jsx("i",{className:"fas fa-eye mr-1"}),"Watch"]}),i.jsx(z,{size:"sm",variant:"outline",className:"border-red-500 text-red-500 hover:bg-red-500 hover:text-white w-10 h-8 p-0 flex items-center justify-center",onClick:()=>{window.confirm("Are you sure you want to delete this video? This action cannot be undone.")&&console.log("Deleting Cannabis Terpenes video...")},"data-testid":"button-delete-video-terpenes",children:i.jsx("i",{className:"fas fa-trash text-sm"})})]})]})]}),i.jsxs("div",{className:"col-span-full text-center py-12",style:{display:"none"},children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("p",{className:"text-gray-400",children:"No videos yet. Upload your first cannabis video!"}),i.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Share strain reviews, growing tips, or educational content"})]})]})]}),i.jsxs(cn,{value:"about",className:"p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"About Me"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"Learn more about this community member"})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"p-4 bg-frhigh-dark rounded-lg border border-frhigh-dark-tertiary",children:[i.jsxs("h4",{className:"text-lg font-medium text-white mb-3 flex items-center",children:[i.jsx("i",{className:"fas fa-info-circle mr-2 text-frhigh-green"}),"Profile Information"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-400",children:"Username:"}),i.jsxs("span",{className:"text-white ml-2",children:["@",e==null?void 0:e.username]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-400",children:"Member Since:"}),i.jsx("span",{className:"text-white ml-2",children:e!=null&&e.createdAt?new Date(e.createdAt).toLocaleDateString():"Unknown"})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-400",children:"Verification Status:"}),i.jsx("span",{className:`ml-2 ${e!=null&&e.isVerified?"text-frhigh-green":"text-gray-400"}`,children:e!=null&&e.isVerified?" Verified":" Not Verified"})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-400",children:"Role:"}),i.jsx("span",{className:"text-white ml-2",children:e!=null&&e.isModerator?" Moderator":" Member"})]})]})]}),(e==null?void 0:e.bio)&&i.jsxs("div",{className:"p-4 bg-frhigh-dark rounded-lg border border-frhigh-dark-tertiary",children:[i.jsxs("h4",{className:"text-lg font-medium text-white mb-3 flex items-center",children:[i.jsx("i",{className:"fas fa-quote-left mr-2 text-frhigh-green"}),"Bio"]}),i.jsx("p",{className:"text-gray-200 leading-relaxed",children:e.bio})]}),i.jsx("div",{className:"p-4 bg-frhigh-dark rounded-lg border border-frhigh-dark-tertiary",children:i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsxs("h4",{className:"text-md font-medium text-white mb-2 flex items-center",children:[i.jsx("i",{className:"fas fa-share-alt mr-2 text-frhigh-green"}),"Social Links"]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[((b=e==null?void 0:e.socialLinks)==null?void 0:b.instagram)&&i.jsxs("a",{href:e.socialLinks.instagram.startsWith("http")?e.socialLinks.instagram:`https://instagram.com/${e.socialLinks.instagram.replace("@","")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 p-2 bg-frhigh-dark-secondary rounded text-xs hover:bg-frhigh-green hover:text-frhigh-dark transition-colors","data-testid":"link-instagram",children:[i.jsx("i",{className:"fab fa-instagram text-pink-500"}),i.jsx("span",{children:"Instagram"})]}),((j=e==null?void 0:e.socialLinks)==null?void 0:j.twitter)&&i.jsxs("a",{href:e.socialLinks.twitter.startsWith("http")?e.socialLinks.twitter:`https://twitter.com/${e.socialLinks.twitter.replace("@","")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 p-2 bg-frhigh-dark-secondary rounded text-xs hover:bg-frhigh-green hover:text-frhigh-dark transition-colors","data-testid":"link-twitter",children:[i.jsx("i",{className:"fab fa-twitter text-blue-400"}),i.jsx("span",{children:"Twitter"})]}),((k=e==null?void 0:e.socialLinks)==null?void 0:k.youtube)&&i.jsxs("a",{href:e.socialLinks.youtube.startsWith("http")?e.socialLinks.youtube:`https://youtube.com/@${e.socialLinks.youtube}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 p-2 bg-frhigh-dark-secondary rounded text-xs hover:bg-frhigh-green hover:text-frhigh-dark transition-colors","data-testid":"link-youtube",children:[i.jsx("i",{className:"fab fa-youtube text-red-500"}),i.jsx("span",{children:"YouTube"})]}),((C=e==null?void 0:e.socialLinks)==null?void 0:C.tiktok)&&i.jsxs("a",{href:e.socialLinks.tiktok.startsWith("http")?e.socialLinks.tiktok:`https://tiktok.com/@${e.socialLinks.tiktok.replace("@","")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 p-2 bg-frhigh-dark-secondary rounded text-xs hover:bg-frhigh-green hover:text-frhigh-dark transition-colors","data-testid":"link-tiktok",children:[i.jsx("i",{className:"fab fa-tiktok text-white"}),i.jsx("span",{children:"TikTok"})]}),((S=e==null?void 0:e.socialLinks)==null?void 0:S.website)&&i.jsxs("a",{href:e.socialLinks.website.startsWith("http")?e.socialLinks.website:`https://${e.socialLinks.website}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 p-2 bg-frhigh-dark-secondary rounded text-xs hover:bg-frhigh-green hover:text-frhigh-dark transition-colors","data-testid":"link-website",children:[i.jsx("i",{className:"fas fa-globe text-frhigh-green"}),i.jsx("span",{children:"Website"})]}),((_=e==null?void 0:e.socialLinks)==null?void 0:_.discord)&&i.jsxs("div",{className:"flex items-center gap-1 p-2 bg-frhigh-dark-secondary rounded text-xs",children:[i.jsx("i",{className:"fab fa-discord text-indigo-400"}),i.jsx("span",{className:"truncate",children:e.socialLinks.discord})]})]}),(!(e!=null&&e.socialLinks)||Object.values(e.socialLinks).every(P=>!P))&&i.jsx("div",{className:"text-center py-3",children:i.jsx("p",{className:"text-gray-400 text-sm",children:"No social links added"})})]}),i.jsxs("div",{children:[i.jsxs("h4",{className:"text-md font-medium text-white mb-2 flex items-center",children:[i.jsx("i",{className:"fas fa-chart-bar mr-2 text-frhigh-green"}),"Community Stats"]}),i.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[i.jsxs("div",{className:"text-center p-2 bg-frhigh-dark-secondary rounded",children:[i.jsx("div",{className:"text-lg font-bold text-frhigh-green",children:(e==null?void 0:e.postsCount)||0}),i.jsx("div",{className:"text-gray-400 text-xs",children:"Posts"})]}),i.jsxs("div",{className:"text-center p-2 bg-frhigh-dark-secondary rounded",children:[i.jsx("div",{className:"text-lg font-bold text-frhigh-green",children:(e==null?void 0:e.followersCount)||0}),i.jsx("div",{className:"text-gray-400 text-xs",children:"Followers"})]}),i.jsxs("div",{className:"text-center p-2 bg-frhigh-dark-secondary rounded",children:[i.jsx("div",{className:"text-lg font-bold text-frhigh-green",children:(e==null?void 0:e.followingCount)||0}),i.jsx("div",{className:"text-gray-400 text-xs",children:"Following"})]})]})]})]})})]})]})]})})})]})]})}const Iz=_c("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Rn({className:e,variant:t,...r}){return i.jsx("div",{className:re(Iz({variant:t}),e),...r})}function Oz(){const[e,t]=f.useState(""),[r,n]=f.useState(24),[s,a]=f.useState(null),{toast:o}=ke();Xe();const{data:l=[]}=xe({queryKey:["/api/users"]}),c=pe({mutationFn:async({targetUserId:m,expirationHours:x})=>await ne("/api/admin/generate-recovery",{method:"POST",body:JSON.stringify({targetUserId:m,expirationHours:x})}),onSuccess:m=>{a(m),o({title:"Recovery Code Generated",description:`Recovery code created for ${m.targetUser.username}`})},onError:m=>{o({title:"Error",description:m.message||"Failed to generate recovery code",variant:"destructive"})}}),d=pe({mutationFn:async()=>await ne("/api/admin/cleanup-recoveries",{method:"POST"}),onSuccess:m=>{o({title:"Cleanup Complete",description:m.message})},onError:m=>{o({title:"Error",description:m.message||"Failed to cleanup recovery codes",variant:"destructive"})}}),u=()=>{if(!e){o({title:"Error",description:"Please select a user",variant:"destructive"});return}c.mutate({targetUserId:e,expirationHours:r})},h=()=>{s!=null&&s.recoveryCode&&(navigator.clipboard.writeText(s.recoveryCode),o({title:"Copied",description:"Recovery code copied to clipboard"}))},p=m=>new Date(m).toLocaleString();return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[i.jsx(Eu,{className:"h-6 w-6 text-blue-500"}),i.jsx("h2",{className:"text-2xl font-bold",children:"Password Recovery Management"})]}),i.jsxs(ae,{children:[i.jsxs(Ee,{children:[i.jsxs(Te,{className:"flex items-center gap-2",children:[i.jsx(_y,{className:"h-5 w-5"}),"Generate Recovery Code"]}),i.jsx(Is,{children:"Create a recovery code for a user to reset their password"})]}),i.jsxs(oe,{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ce,{htmlFor:"user-select",children:"Select User"}),i.jsxs(qn,{value:e,onValueChange:t,"data-testid":"select-user",children:[i.jsx(gn,{children:i.jsx(Kn,{placeholder:"Choose a user..."})}),i.jsx(yn,{children:l.map(m=>i.jsxs(he,{value:m.id,children:[m.displayName," (@",m.username,") - ",m.email]},m.id))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ce,{htmlFor:"expiration-hours",children:"Expiration (hours)"}),i.jsxs(qn,{value:r.toString(),onValueChange:m=>n(Number(m)),"data-testid":"select-expiration",children:[i.jsx(gn,{children:i.jsx(Kn,{})}),i.jsxs(yn,{children:[i.jsx(he,{value:"1",children:"1 hour"}),i.jsx(he,{value:"6",children:"6 hours"}),i.jsx(he,{value:"24",children:"24 hours (default)"}),i.jsx(he,{value:"48",children:"48 hours"}),i.jsx(he,{value:"168",children:"1 week"})]})]})]})]}),i.jsx(z,{onClick:u,disabled:!e||c.isPending,className:"w-full","data-testid":"button-generate-recovery",children:c.isPending?"Generating...":"Generate Recovery Code"})]})]}),s&&i.jsxs(ae,{className:"border-green-200 bg-green-50 dark:border-green-800 dark:bg-green-950",children:[i.jsxs(Ee,{children:[i.jsxs(Te,{className:"flex items-center gap-2 text-green-700 dark:text-green-300",children:[i.jsx(Eu,{className:"h-5 w-5"}),"Recovery Code Generated"]}),i.jsxs(Is,{className:"text-green-600 dark:text-green-400",children:["Share this code with ",s.targetUser.displayName," to reset their password"]})]}),i.jsxs(oe,{className:"space-y-4",children:[i.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"font-mono text-lg font-bold text-green-700 dark:text-green-300",children:s.recoveryCode}),i.jsx(z,{variant:"outline",size:"sm",onClick:h,className:"ml-2","data-testid":"button-copy-code",children:i.jsx(Cj,{className:"h-4 w-4"})})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx(ce,{children:"User"}),i.jsxs("p",{className:"font-medium",children:[s.targetUser.displayName," (@",s.targetUser.username,")"]})]}),i.jsxs("div",{children:[i.jsxs(ce,{className:"flex items-center gap-1",children:[i.jsx(Z5,{className:"h-4 w-4"}),"Expires"]}),i.jsx("p",{className:"font-medium",children:p(s.expiresAt)})]})]}),i.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-950 border border-yellow-200 dark:border-yellow-800 rounded-lg p-3",children:i.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[i.jsx("strong",{children:"Instructions:"}),' Share this recovery code with the user. They can use it at the login page by clicking "Forgot Password?" and entering the code along with their new password.']})})]})]}),i.jsxs(ae,{children:[i.jsxs(Ee,{children:[i.jsxs(Te,{className:"flex items-center gap-2",children:[i.jsx(Ms,{className:"h-5 w-5"}),"Maintenance"]}),i.jsx(Is,{children:"Clean up expired recovery codes from the database"})]}),i.jsx(oe,{children:i.jsx(z,{variant:"outline",onClick:()=>d.mutate(),disabled:d.isPending,"data-testid":"button-cleanup-codes",children:d.isPending?"Cleaning...":"Cleanup Expired Codes"})})]})]})}function Dz(){const[e,t]=f.useState(""),[r,n]=f.useState(""),[s,a]=f.useState(!1),{toast:o}=ke(),l=async()=>{if(!e.trim()||!r.trim()){o({title:"Missing Information",description:"Please provide both a title and message for the notification.",variant:"destructive"});return}a(!0),console.log(" Sending Progressier notification to all users");try{let c=0,d=!1;for(;typeof window.progressier>"u"&&c<10;)await new Promise(p=>setTimeout(p,100)),c++;typeof window.progressier<"u"&&(d=!0),console.log(" Progressier availability check:",{progressierAvailable:d,attempts:c});let u=null;d&&(u=window.progressier);let h=!1;if(d&&u&&u.push&&typeof u.push.send=="function")try{await u.push.send({title:e.trim(),body:r.trim(),icon:"/icon-192x192.png",badge:"/badge-72x72.png",data:{timestamp:new Date().toISOString(),adminSent:!0}}),h=!0,console.log(" Notification sent via Progressier API")}catch(p){console.warn("Progressier API failed, trying backend fallback:",p)}if(!h){console.log(" Using backend fallback for notification sending"),console.log(" Making backend API request for notification");const p=await ne("POST","/api/admin/send-notification",{title:e.trim(),message:r.trim(),target:"all_users"});if(console.log(" Backend API response:",{ok:p.ok,status:p.status,statusText:p.statusText}),!p.ok)throw new Error(`Backend notification failed: ${p.statusText}`);const m=await p.json();console.log("Backend notification result:",m)}o({title:"Notification Sent Successfully",description:h?`Sent "${e}" to all users via Progressier.`:`Sent "${e}" to all users via backend system.`}),t(""),n("")}catch(c){console.error("Error sending Progressier notification:",c),o({title:"Failed to Send Notification",description:`Error: ${c instanceof Error?c.message:"Unknown error occurred"}`,variant:"destructive"})}finally{a(!1)}};return i.jsxs(ae,{children:[i.jsx(Ee,{children:i.jsxs(Te,{className:"flex items-center gap-2",children:[i.jsx(Mn,{className:"h-5 w-5"}),"Progressier Push Notifications"]})}),i.jsxs(oe,{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ce,{htmlFor:"notification-title",children:"Notification Title"}),i.jsx(le,{id:"notification-title",value:e,onChange:c=>t(c.target.value),placeholder:"Enter notification title...",maxLength:100,"data-testid":"progressier-notification-title"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ce,{htmlFor:"notification-message",children:"Notification Message"}),i.jsx(xt,{id:"notification-message",value:r,onChange:c=>n(c.target.value),placeholder:"Enter notification message...",rows:3,maxLength:250,"data-testid":"progressier-notification-message"})]}),i.jsxs("div",{className:"flex items-center justify-between pt-4",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:"Send push notification to all subscribed users"}),i.jsxs(z,{onClick:l,disabled:s||!e.trim()||!r.trim(),className:"flex items-center gap-2","data-testid":"progressier-send-notification",children:[s?i.jsx("div",{className:"w-4 h-4 border-2 border-gray-300 border-t-white rounded-full animate-spin"}):i.jsx(Nh,{className:"h-4 w-4"}),s?"Sending...":"Send to All Users"]})]}),i.jsxs("div",{className:"text-xs text-muted-foreground bg-muted/50 p-3 rounded",children:[i.jsx("strong",{children:"Note:"})," This uses Progressier's universal push notification system. Notifications will be delivered to all users who have enabled push notifications, regardless of their device or browser."]})]})]})}function Lz(){const[e,t]=f.useState("users");f.useState(!1);const[r,n]=f.useState(!1),{toast:s}=ke(),a=Xe(),{data:o}=xe({queryKey:["/api/auth/user"],retry:!1,staleTime:0}),{data:l}=xe({queryKey:["/api/neon-sign"],refetchInterval:5e3}),{data:c}=xe({queryKey:["/api/admin/check",o==null?void 0:o.id],queryFn:async()=>{if(!(o!=null&&o.id))return null;const P=await fetch(`/api/admin/check/${o.id}`,{credentials:"include"});if(!P.ok)throw new Error("Failed to check admin status");return P.json()},enabled:!!(o!=null&&o.id),refetchOnMount:!0,staleTime:0}),{data:d=[],isLoading:u}=xe({queryKey:["/api/admin/users"]}),h=c==null?void 0:c.isAdmin,p=pe({mutationFn:async()=>ne("POST","/api/admin/toggle-neon-sign",{}),onSuccess:()=>{a.invalidateQueries({queryKey:["/api/neon-sign"]}),s({title:"Shop Status Updated",description:`Shop is now ${l!=null&&l.isOn?"CLOSED":"OPEN"}`})}}),m=pe({mutationFn:async({userId:P,role:T})=>(console.log("Promoting user:",{userId:P,role:T,currentUser:o==null?void 0:o.id}),T==="manager"?ne("POST","/api/admin/promote-manager",{userId:P,promotedBy:o==null?void 0:o.id}):ne("POST","/api/admin/promote-moderator",{userId:P,promotedBy:o==null?void 0:o.id})),onSuccess:()=>{a.invalidateQueries({queryKey:["/api/admin/users"]}),s({title:"User Promoted",description:"User has been successfully promoted"})}}),x=pe({mutationFn:async P=>ne("POST",`/api/admin/demote/${P}`,{}),onSuccess:()=>{a.invalidateQueries({queryKey:["/api/admin/users"]}),s({title:"User Demoted",description:"User privileges have been removed",variant:"destructive"})}}),y=pe({mutationFn:async P=>ne("DELETE",`/api/admin/users/${P}`,{deletedBy:o==null?void 0:o.id,reason:"User deleted by admin"}),onSuccess:()=>{a.invalidateQueries({queryKey:["/api/admin/users"]}),s({title:"User Deleted",description:"User has been permanently removed",variant:"destructive"})}}),w=pe({mutationFn:async P=>ne("POST","/api/admin/ban-user",{userId:P}),onSuccess:()=>{a.invalidateQueries({queryKey:["/api/admin/users"]}),s({title:"User Banned",description:"User has been banned from the platform",variant:"destructive"})}}),v=pe({mutationFn:async P=>ne("POST","/api/admin/verify-user",{userId:P}),onSuccess:()=>{a.invalidateQueries({queryKey:["/api/admin/users"]}),s({title:"User Verified",description:"User has been verified successfully"})}});pe({mutationFn:async()=>ne("POST","/api/admin/emergency/ban-all",{}),onSuccess:()=>{a.invalidateQueries({queryKey:["/api/admin/users"]}),s({title:"Emergency Ban Activated",description:"All users have been banned",variant:"destructive"})}}),pe({mutationFn:async()=>ne("DELETE","/api/admin/emergency/reset-users",{}),onSuccess:()=>{a.invalidateQueries({queryKey:["/api/admin/users"]}),s({title:"User Data Reset",description:"All user data has been cleared",variant:"destructive"})}}),pe({mutationFn:async()=>ne("DELETE","/api/admin/emergency/nuke-content",{}),onSuccess:()=>{a.invalidateQueries({queryKey:["/api/posts"]}),s({title:"Content Cleared",description:"All posts and content have been removed",variant:"destructive"})}});const g=()=>{p.mutate()},b=(P,T,F)=>{const R=F==="manager"?"Manager":"Moderator";s({title:`Promote ${T}?`,description:`This will promote "${T}" to ${R}. Click here to confirm.`,action:i.jsx(z,{size:"sm",onClick:()=>m.mutate({userId:P,role:F}),className:"bg-frhigh-green hover:bg-green-600",children:"Confirm"})})},j=(P,T)=>{if(!h){s({title:"Access Denied",description:"Only main admins can delete users",variant:"destructive"});return}s({title:`Delete ${T}?`,description:`This will permanently delete "${T}" and all their data. This action cannot be undone.`,variant:"destructive",action:i.jsx(z,{size:"sm",variant:"destructive",onClick:()=>y.mutate(P),children:"Delete"})})},k=(P,T)=>{s({title:`Ban ${T}?`,description:`This will ban "${T}" from the platform.`,variant:"destructive",action:i.jsx(z,{size:"sm",variant:"destructive",onClick:()=>w.mutate(P),children:"Ban"})})},C=(P,T)=>{s({title:`Verify ${T}?`,description:`This will verify "${T}" and add a verification badge.`,action:i.jsx(z,{size:"sm",onClick:()=>v.mutate(P),className:"bg-frhigh-green hover:bg-green-600",children:"Verify"})})},S=(P,T)=>{s({title:`Remove privileges for ${T}?`,description:`This will remove admin/moderator privileges from "${T}".`,variant:"destructive",action:i.jsx(z,{size:"sm",variant:"destructive",onClick:()=>x.mutate(P),children:"Remove"})})},_=async()=>{try{const P=window.location.origin;await navigator.clipboard.writeText(P),n(!0),s({title:"Link Copied!",description:"App link copied to clipboard"}),setTimeout(()=>n(!1),2e3)}catch{s({title:"Copy Failed",description:"Please copy the link manually",variant:"destructive"})}};return i.jsxs("div",{className:"max-w-6xl mx-auto p-4 sm:p-6 space-y-4 sm:space-y-6",children:[i.jsxs("div",{className:"text-center relative",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{}),i.jsx("h1",{className:"text-3xl font-bold text-white",children:"Admin Panel"}),i.jsxs("div",{className:"relative",children:[i.jsx("button",{onClick:g,disabled:p.isPending,className:`font-bold text-base sm:text-lg tracking-wide transition-all duration-700 border-none bg-transparent ${l!=null&&l.isOn?"text-frhigh-green animate-pulse drop-shadow-[0_0_10px_rgba(34,197,94,0.8)]":"text-gray-500"} ${p.isPending?"opacity-50 cursor-not-allowed":""} touch-manipulation`,"data-testid":"neon-shop-sign-toggle",children:l!=null&&l.isOn?"SHOP OPEN":"SHOP CLOSED"}),i.jsx("div",{className:"text-xs text-gray-400 mt-1 text-center",children:p.isPending?"Updating...":"Click to toggle"})]})]}),i.jsx("p",{className:"text-gray-400",children:"Simple community management tools"})]}),i.jsx("div",{className:"flex justify-center mb-6",children:i.jsxs("div",{className:"flex bg-frhigh-dark-secondary rounded-lg p-1",children:[i.jsxs("button",{onClick:()=>t("users"),className:`px-4 py-2 rounded-md transition-all ${e==="users"?"bg-frhigh-green text-frhigh-dark font-medium":"text-gray-400 hover:text-white"}`,children:["Users (",d.length,")"]}),i.jsx("button",{onClick:()=>t("tools"),className:`px-4 py-2 rounded-md transition-all ${e==="tools"?"bg-frhigh-green text-frhigh-dark font-medium":"text-gray-400 hover:text-white"}`,children:"Tools"}),i.jsxs("button",{onClick:()=>t("recovery"),className:`px-4 py-2 rounded-md transition-all ${e==="recovery"?"bg-frhigh-green text-frhigh-dark font-medium":"text-gray-400 hover:text-white"}`,children:[i.jsx(sR,{className:"h-4 w-4 inline mr-1"}),"Recovery"]}),i.jsx("button",{onClick:()=>t("share"),className:`px-4 py-2 rounded-md transition-all ${e==="share"?"bg-frhigh-green text-frhigh-dark font-medium":"text-gray-400 hover:text-white"}`,children:"Share"})]})}),e==="users"&&i.jsxs(ae,{className:"bg-frhigh-dark-secondary border-frhigh-dark-tertiary",children:[i.jsx(Ee,{children:i.jsxs(Te,{className:"text-white flex items-center gap-2",children:[i.jsx(Eu,{className:"w-5 h-5"}),"User Management"]})}),i.jsx(oe,{children:u?i.jsxs("div",{className:"flex items-center justify-center py-8",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-frhigh-green"}),i.jsx("span",{className:"ml-3 text-gray-400",children:"Loading users..."})]}):i.jsx("div",{className:"space-y-3",children:d.map(P=>i.jsxs("div",{className:"flex items-center justify-between p-4 bg-frhigh-dark border border-frhigh-dark-tertiary rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs(rr,{className:"w-10 h-10",children:[i.jsx(nr,{src:P.avatar||void 0,alt:P.displayName||P.username,className:"object-cover"}),i.jsx(sr,{className:"bg-frhigh-green text-frhigh-dark font-bold",children:(P.displayName||P.username||"U").charAt(0).toUpperCase()})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("p",{className:"text-white font-medium",children:P.username||"Unknown"}),P.isVerified&&i.jsx("div",{title:"Verified",children:i.jsx(Fs,{className:"h-5 w-5 text-frhigh-green"})}),(P.isAdmin||P.role==="admin"||P.role==="super_admin")&&i.jsx(Rn,{variant:"secondary",className:"bg-frhigh-green text-frhigh-dark text-xs",children:"Admin"}),P.role==="manager"&&i.jsx(Rn,{variant:"secondary",className:"bg-purple-600 text-white text-xs",children:"Manager"}),P.isModerator&&!P.isAdmin&&P.role!=="manager"&&i.jsx(Rn,{variant:"secondary",className:"bg-blue-600 text-white text-xs",children:"Mod"}),P.isBanned&&i.jsx(Rn,{variant:"destructive",className:"text-xs",children:"Banned"})]}),i.jsx("p",{className:"text-gray-400 text-sm",children:P.email})]})]}),!(P.isAdmin||P.role==="admin"||P.role==="super_admin")&&i.jsxs(On,{children:[i.jsx(Dn,{asChild:!0,children:i.jsxs(z,{variant:"ghost",className:"h-8 w-8 p-0",children:[i.jsx("span",{className:"sr-only",children:"Open menu"}),i.jsx(An,{className:"h-4 w-4"})]})}),i.jsxs(pn,{align:"end",className:"bg-frhigh-dark-secondary border-frhigh-dark-tertiary",children:[i.jsx(q2,{className:"text-white",children:"User Actions"}),i.jsx(Qd,{className:"bg-frhigh-dark-tertiary"}),i.jsxs(Pe,{onClick:()=>b(P.id,P.username,"moderator"),className:"text-blue-400 hover:text-blue-300 hover:bg-frhigh-dark-tertiary",children:[i.jsx(gR,{className:"mr-2 h-4 w-4"}),"Promote to Moderator"]}),i.jsxs(Pe,{onClick:()=>b(P.id,P.username,"manager"),className:"text-frhigh-green hover:text-green-300 hover:bg-frhigh-dark-tertiary",children:[i.jsx(Eu,{className:"mr-2 h-4 w-4"}),"Promote to Manager"]}),i.jsx(Qd,{className:"bg-frhigh-dark-tertiary"}),i.jsxs(Pe,{onClick:()=>C(P.id,P.username),className:"text-frhigh-green hover:text-green-300 hover:bg-frhigh-dark-tertiary",children:[i.jsx(Fs,{className:"mr-2 h-4 w-4"}),"Verify User"]}),(P.isModerator||P.isAdmin)&&i.jsxs(Pe,{onClick:()=>S(P.id,P.username),className:"text-yellow-400 hover:text-yellow-300 hover:bg-frhigh-dark-tertiary",children:[i.jsx(yR,{className:"mr-2 h-4 w-4"}),"Remove Privileges"]}),i.jsx(Qd,{className:"bg-frhigh-dark-tertiary"}),i.jsxs(Pe,{onClick:()=>k(P.id,P.username),className:"text-yellow-400 hover:text-yellow-300 hover:bg-frhigh-dark-tertiary",children:[i.jsx(q5,{className:"mr-2 h-4 w-4"}),"Ban User"]}),h&&i.jsxs(Pe,{onClick:()=>j(P.id,P.username),className:"text-red-400 hover:text-red-300 hover:bg-frhigh-dark-tertiary",children:[i.jsx(Ir,{className:"mr-2 h-4 w-4"}),"Delete User"]})]})]})]},P.id))})})]}),e==="tools"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs(ae,{className:"bg-frhigh-dark-secondary border-frhigh-dark-tertiary",children:[i.jsx(Ee,{children:i.jsx(Te,{className:"text-white",children:"System Stats"})}),i.jsx(oe,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-gray-400",children:"Total Users"}),i.jsx("span",{className:"text-frhigh-green font-bold text-lg",children:d.length})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-gray-400",children:"Admins"}),i.jsx("span",{className:"text-frhigh-green font-bold text-lg",children:d.filter(P=>{var T;return P.isAdmin||((T=P.role)==null?void 0:T.includes("admin"))}).length})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-gray-400",children:"Moderators"}),i.jsx("span",{className:"text-blue-400 font-bold text-lg",children:d.filter(P=>P.isModerator&&!P.isAdmin).length})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-gray-400",children:"Banned Users"}),i.jsx("span",{className:"text-red-400 font-bold text-lg",children:d.filter(P=>P.isBanned).length})]})]})})]}),i.jsxs(ae,{className:"bg-frhigh-dark-secondary border-frhigh-dark-tertiary",children:[i.jsx(Ee,{children:i.jsx(Te,{className:"text-white",children:"Quick Access"})}),i.jsx(oe,{children:i.jsx("div",{className:"space-y-3",children:i.jsx(z,{variant:"outline",className:"w-full border-frhigh-green text-frhigh-green hover:bg-frhigh-green hover:text-frhigh-dark",onClick:()=>window.open("/admin","_blank"),children:"Open in New Tab"})})})]})]}),i.jsxs(ae,{className:"bg-frhigh-dark-secondary border-frhigh-dark-tertiary",children:[i.jsx(Ee,{children:i.jsxs(Te,{className:"text-white flex items-center gap-2",children:[i.jsx(Nh,{className:"h-5 w-5 text-frhigh-green"}),"Progressier Push Notifications"]})}),i.jsx(oe,{children:i.jsx(Dz,{})})]})]}),e==="share"&&i.jsx("div",{className:"max-w-2xl mx-auto",children:i.jsxs(ae,{className:"bg-frhigh-dark-secondary border-frhigh-dark-tertiary",children:[i.jsx(Ee,{children:i.jsxs(Te,{className:"text-white flex items-center gap-2",children:[i.jsx(hR,{className:"w-5 h-5"}),"Share App"]})}),i.jsxs(oe,{className:"space-y-6",children:[i.jsx("div",{className:"text-center",children:i.jsx(dk,{})}),i.jsx(z,{onClick:_,className:"w-full bg-frhigh-green text-frhigh-dark hover:bg-green-600 font-medium",disabled:r,children:r?i.jsxs(i.Fragment,{children:[i.jsx(Tc,{className:"w-4 h-4 mr-2"}),"Copied!"]}):i.jsxs(i.Fragment,{children:[i.jsx(Cj,{className:"w-4 h-4 mr-2"}),"Copy App Link"]})}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-gray-400 text-sm mb-2",children:"App URL:"}),i.jsx("p",{className:"text-white text-xs bg-frhigh-dark p-2 rounded border break-all",children:window.location.origin})]})]})]})}),e==="recovery"&&i.jsx(ae,{className:"bg-frhigh-dark-secondary border-frhigh-dark-tertiary",children:i.jsx(oe,{className:"p-6",children:i.jsx(Oz,{})})})]})}function $z(){const{toast:e}=ke(),{user:t,isLoading:r}=Fe(),{data:n,isLoading:s}=xe({queryKey:["/api/admin/check",t==null?void 0:t.id],queryFn:async()=>{if(!(t!=null&&t.id))return null;const a=await fetch(`/api/admin/check/${t.id}`,{credentials:"include",headers:{"x-user-data":encodeURIComponent(JSON.stringify(t))}});if(!a.ok)throw new Error("Failed to check admin status");return await a.json()},enabled:!!(t!=null&&t.id)});return f.useEffect(()=>{!r&&!s&&t&&n&&!n.isAdmin&&(e({title:"Access Denied",description:"You don't have admin privileges.",variant:"destructive"}),setTimeout(()=>{window.location.href="/"},1e3))},[t,r,n,s,e]),r||s?i.jsxs("div",{className:"min-h-screen bg-frhigh-dark flex items-center justify-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-frhigh-green"}),i.jsx("p",{className:"ml-4 text-frhigh-green",children:"Loading admin panel..."})]}):!t||n&&!n.isAdmin?null:i.jsxs("div",{className:"min-h-screen bg-frhigh-dark",children:[i.jsx(Ic,{}),i.jsx("div",{className:"pt-16",children:i.jsx(Lz,{})})]})}function Uz({userId:e}){return i.jsx("div",{className:"min-h-screen bg-background text-foreground dark:bg-frhigh-dark dark:text-white",children:i.jsx("div",{className:"flex items-center justify-center min-h-screen",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Profile Loading..."}),i.jsx("p",{className:"text-muted-foreground",children:"Please use the main profile page instead."})]})})})}function zz(){return i.jsx(Uz,{})}const Bz={classic:{background:"linear-gradient(45deg, #ff6b35, #f7931e)",textColor:"text-white",accent:"#00ff00",border:"border-yellow-400"},emo:{background:"linear-gradient(45deg, #000000, #330033)",textColor:"text-pink-300",accent:"#ff1493",border:"border-pink-500"},scene:{background:"linear-gradient(45deg, #ff00ff, #00ffff, #ffff00)",textColor:"text-black",accent:"#ff1493",border:"border-rainbow"},punk:{background:"linear-gradient(45deg, #ff0000, #000000)",textColor:"text-red-300",accent:"#ff0000",border:"border-red-600"},goth:{background:"linear-gradient(45deg, #4b0082, #000000)",textColor:"text-purple-200",accent:"#8a2be2",border:"border-purple-500"}};function Vz({userId:e}){var h;Fe();const{toast:t}=ke(),[r,n]=f.useState(!1),[s,a]=f.useState("classic"),[o,l]=f.useState({profileSong:"",customBackground:"",favoriteQuote:"Living my best life! ",topFriends:["Friend 1","Friend 2","Friend 3","Friend 4"],mood:" Feeling awesome!",relationship:"Single",interests:"Music, Art, Coffee, Gaming",aboutMe:"Hey! Welcome to my profile. I'm just here living life and connecting with amazing people! Feel free to hit me up! ",customCSS:"",glitterText:!0,autoPlayMusic:!1,profileViews:1337,lastLogin:"Just now!"}),c={id:"1",username:"xXx_CoolKid_xXx",displayName:" Sarah ",bio:"MySpace Queen since 2003 ",avatar:"/api/placeholder/150/150",location:"Los Angeles, CA",age:25,joinDate:"Member since: 2003",profileViews:o.profileViews,friends:2847,comments:156,isOnline:!0},d=()=>{localStorage.setItem("myspace_customization",JSON.stringify({...o,theme:s})),t({title:"Profile customized! ",description:"Your MySpace profile has been updated!"}),n(!1)};f.useEffect(()=>{const p=localStorage.getItem("myspace_customization");if(p){const m=JSON.parse(p);l(m),m.theme&&a(m.theme)}},[]);const u=Bz[s];return i.jsxs("div",{className:"min-h-screen text-white relative overflow-x-auto",style:{background:o.customBackground||u.background,fontFamily:"'Comic Sans MS', cursive"},children:[o.glitterText&&i.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-20",children:i.jsx("div",{className:"animate-pulse",children:"        "})}),i.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-4",children:i.jsxs("div",{className:"max-w-6xl mx-auto flex justify-between items-center",children:[i.jsx("h1",{className:"text-3xl font-bold animate-pulse",children:" MySpace "}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(z,{onClick:()=>n(!r),className:"bg-pink-500 hover:bg-pink-600 text-white animate-bounce",children:r?" Save":" Customize"}),i.jsxs("div",{className:"text-sm",children:[i.jsx("div",{children:"Online Now! "}),i.jsxs("div",{children:["Views: ",c.profileViews]})]})]})]})}),i.jsxs("div",{className:"max-w-6xl mx-auto p-4",children:[r&&i.jsxs(ae,{className:"mb-6 bg-black/80 border-4 border-dashed border-rainbow",children:[i.jsx(Ee,{children:i.jsx(Te,{className:"text-pink-400 text-center animate-pulse",children:" CUSTOMIZE YOUR PROFILE "})}),i.jsxs(oe,{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-yellow-300 font-bold",children:"Theme:"}),i.jsxs(qn,{value:s,onValueChange:a,children:[i.jsx(gn,{className:"bg-purple-900 border-pink-500",children:i.jsx(Kn,{})}),i.jsxs(yn,{children:[i.jsx(he,{value:"classic",children:" Classic MySpace"}),i.jsx(he,{value:"emo",children:" Emo Kid"}),i.jsx(he,{value:"scene",children:" Scene Queen"}),i.jsx(he,{value:"punk",children:" Punk Rock"}),i.jsx(he,{value:"goth",children:" Gothic"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-yellow-300 font-bold",children:"Profile Song URL:"}),i.jsx(le,{value:o.profileSong,onChange:p=>l(m=>({...m,profileSong:p.target.value})),placeholder:"https://youtube.com/watch?v=...",className:"bg-purple-900 border-pink-500 text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-yellow-300 font-bold",children:"Custom Background URL:"}),i.jsx(le,{value:o.customBackground,onChange:p=>l(m=>({...m,customBackground:p.target.value})),placeholder:"https://example.com/background.gif",className:"bg-purple-900 border-pink-500 text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-yellow-300 font-bold",children:"Current Mood:"}),i.jsx(le,{value:o.mood,onChange:p=>l(m=>({...m,mood:p.target.value})),className:"bg-purple-900 border-pink-500 text-white"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"text-yellow-300 font-bold",children:"Favorite Quote:"}),i.jsx(xt,{value:o.favoriteQuote,onChange:p=>l(m=>({...m,favoriteQuote:p.target.value})),className:"bg-purple-900 border-pink-500 text-white",rows:2})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"text-yellow-300 font-bold",children:"About Me:"}),i.jsx(xt,{value:o.aboutMe,onChange:p=>l(m=>({...m,aboutMe:p.target.value})),className:"bg-purple-900 border-pink-500 text-white",rows:4})]})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("label",{className:"flex items-center text-cyan-300",children:[i.jsx("input",{type:"checkbox",checked:o.glitterText,onChange:p=>l(m=>({...m,glitterText:p.target.checked})),className:"mr-2"})," Glitter Effects"]}),i.jsxs("label",{className:"flex items-center text-cyan-300",children:[i.jsx("input",{type:"checkbox",checked:o.autoPlayMusic,onChange:p=>l(m=>({...m,autoPlayMusic:p.target.checked})),className:"mr-2"})," Auto-play Music"]})]}),i.jsx(z,{onClick:d,className:"w-full bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white font-bold text-lg animate-pulse",children:" SAVE MY AWESOME PROFILE! "})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[i.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[i.jsx(ae,{className:`bg-black/80 ${u.border} border-4`,children:i.jsxs(oe,{className:"p-4 text-center",children:[i.jsxs("div",{className:"relative inline-block",children:[i.jsxs(rr,{className:"w-32 h-32 mx-auto border-4 border-pink-500",children:[i.jsx(nr,{src:c.avatar,alt:c.displayName}),i.jsx(sr,{className:"bg-gradient-to-r from-pink-500 to-purple-500 text-white text-2xl",children:(h=c.displayName)==null?void 0:h.charAt(0)})]}),i.jsx("div",{className:"absolute -top-2 -right-2 bg-green-500 text-white px-2 py-1 rounded-full text-xs animate-pulse",children:"ONLINE! "})]}),i.jsx("h2",{className:`text-2xl font-bold mt-4 ${u.textColor} animate-pulse`,children:c.displayName}),i.jsxs("p",{className:"text-yellow-300",children:['"',o.mood,'"']}),i.jsx("p",{className:"text-gray-300 text-sm",children:c.joinDate}),i.jsxs("p",{className:"text-green-400 text-sm",children:["Last Login: ",o.lastLogin]})]})}),i.jsxs(ae,{className:`bg-black/80 ${u.border} border-4`,children:[i.jsx(Ee,{children:i.jsx(Te,{className:"text-pink-400 text-center",children:" Contact Me! "})}),i.jsxs(oe,{className:"space-y-2",children:[i.jsx(z,{className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:" Send Message"}),i.jsx(z,{className:"w-full bg-green-600 hover:bg-green-700 text-white",children:" Add as Friend"}),i.jsx(z,{className:"w-full bg-yellow-600 hover:bg-yellow-700 text-white",children:" Add to Favorites"}),i.jsx(z,{className:"w-full bg-red-600 hover:bg-red-700 text-white",children:" Block User"})]})]}),i.jsxs(ae,{className:`bg-black/80 ${u.border} border-4`,children:[i.jsx(Ee,{children:i.jsx(Te,{className:"text-cyan-400 text-center",children:" My Stats "})}),i.jsxs(oe,{className:"text-center space-y-2",children:[i.jsxs("div",{className:"text-yellow-300",children:[i.jsx("span",{className:"font-bold text-2xl",children:c.friends}),i.jsx("div",{children:"Friends"})]}),i.jsxs("div",{className:"text-pink-300",children:[i.jsx("span",{className:"font-bold text-2xl",children:c.comments}),i.jsx("div",{children:"Comments"})]}),i.jsxs("div",{className:"text-green-300",children:[i.jsx("span",{className:"font-bold text-2xl",children:c.profileViews}),i.jsx("div",{children:"Profile Views"})]})]})]})]}),i.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[o.profileSong&&i.jsxs(ae,{className:`bg-black/80 ${u.border} border-4`,children:[i.jsx(Ee,{children:i.jsx(Te,{className:"text-pink-400 text-center animate-bounce",children:" My Profile Song! "})}),i.jsx(oe,{className:"text-center",children:i.jsxs("div",{className:"bg-purple-900 p-4 rounded-lg",children:[i.jsx("p",{className:"text-yellow-300 mb-2",children:"Now Playing: My Favorite Song! "}),i.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[i.jsx(z,{size:"sm",className:"bg-green-500 hover:bg-green-600",children:" Play"}),i.jsx(z,{size:"sm",className:"bg-red-500 hover:bg-red-600",children:" Pause"}),i.jsx(z,{size:"sm",className:"bg-blue-500 hover:bg-blue-600",children:" Skip"})]}),i.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2 mt-2",children:i.jsx("div",{className:"bg-gradient-to-r from-pink-500 to-purple-500 h-2 rounded-full w-1/3"})})]})})]}),i.jsxs(ae,{className:`bg-black/80 ${u.border} border-4`,children:[i.jsx(Ee,{children:i.jsx(Te,{className:"text-yellow-400 animate-pulse",children:" About Me! "})}),i.jsx(oe,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-pink-300 font-bold",children:" Who I Am:"}),i.jsx("p",{className:`${u.textColor} leading-relaxed`,children:o.aboutMe})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-pink-300 font-bold",children:" Favorite Quote:"}),i.jsxs("p",{className:"text-yellow-200 italic text-center text-lg border-l-4 border-pink-500 pl-4",children:['"',o.favoriteQuote,'"']})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-cyan-300 font-bold",children:" Location:"}),i.jsx("p",{className:u.textColor,children:c.location})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-cyan-300 font-bold",children:" Relationship:"}),i.jsx("p",{className:u.textColor,children:o.relationship})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-cyan-300 font-bold",children:" Interests:"}),i.jsx("p",{className:u.textColor,children:o.interests})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-cyan-300 font-bold",children:" Age:"}),i.jsxs("p",{className:u.textColor,children:[c.age," years old"]})]})]})]})})]}),i.jsxs(ae,{className:`bg-black/80 ${u.border} border-4`,children:[i.jsx(Ee,{children:i.jsx(Te,{className:"text-green-400 animate-pulse",children:" My Top 4 Friends! "})}),i.jsx(oe,{children:i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:o.topFriends.map((p,m)=>i.jsxs("div",{className:"text-center",children:[i.jsxs(rr,{className:"w-16 h-16 mx-auto border-2 border-pink-400",children:[i.jsx(nr,{src:`/api/placeholder/64/64?seed=${m}`}),i.jsx(sr,{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white",children:p.charAt(0)})]}),i.jsx("p",{className:"text-yellow-300 text-sm mt-2 font-bold",children:p})]},m))})})]}),i.jsxs(ae,{className:`bg-black/80 ${u.border} border-4`,children:[i.jsx(Ee,{children:i.jsx(Te,{className:"text-purple-400 animate-pulse",children:" Friend Comments! "})}),i.jsxs(oe,{className:"space-y-4",children:[i.jsxs("div",{className:"border-b border-gray-600 pb-4",children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[i.jsxs(rr,{className:"w-8 h-8",children:[i.jsx(nr,{src:"/api/placeholder/32/32?seed=friend1"}),i.jsx(sr,{children:"F1"})]}),i.jsx("span",{className:"text-pink-300 font-bold",children:"xXx_BestFriend_xXx"}),i.jsx("span",{className:"text-gray-400 text-sm",children:"2 days ago"})]}),i.jsx("p",{className:"text-white",children:"OMG your profile is SO cool! Love the new theme! "})]}),i.jsxs("div",{className:"border-b border-gray-600 pb-4",children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[i.jsxs(rr,{className:"w-8 h-8",children:[i.jsx(nr,{src:"/api/placeholder/32/32?seed=friend2"}),i.jsx(sr,{children:"F2"})]}),i.jsx("span",{className:"text-cyan-300 font-bold",children:"SceneQueen2003"}),i.jsx("span",{className:"text-gray-400 text-sm",children:"1 week ago"})]}),i.jsx("p",{className:"text-white",children:"Hey girl! Thanks for adding me! Can't wait to chat more! "})]}),i.jsx(xt,{placeholder:"Leave a comment for this user...",className:"bg-purple-900 border-pink-500 text-white",rows:3}),i.jsx(z,{className:"bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white",children:" Post Comment!"})]})]})]})]})]}),o.customCSS&&i.jsx("style",{dangerouslySetInnerHTML:{__html:o.customCSS}})]})}function Hz(){return i.jsx(Vz,{})}function Bo({className:e,...t}){return i.jsx("div",{className:re("animate-pulse rounded-md bg-muted",e),...t})}function Gh(){const{data:e,isLoading:t}=xe({queryKey:["/api/trending"]}),{data:r,isLoading:n}=xe({queryKey:["/api/stats"]}),s=[{id:"suggested1",displayName:"Dr. GreenMedicine",username:"drgreenmedicine",avatar:"https://images.unsplash.com/photo-1560250097-0b93528c311a?w=100&h=100&fit=crop&crop=face"},{id:"suggested2",displayName:"CannabisLifestyle",username:"cannabislifestyle",avatar:"https://images.unsplash.com/photo-1534751516642-a1af1ef26a56?w=100&h=100&fit=crop&crop=face"},{id:"suggested3",displayName:"GrowExpert420",username:"growexpert420",avatar:"https://images.unsplash.com/photo-1519085360753-af0119f7cbe7?w=100&h=100&fit=crop&crop=face"}];return i.jsx("aside",{className:"fixed right-0 top-0 w-80 h-full bg-frhigh-dark-secondary border-l border-frhigh-dark-tertiary hidden overflow-y-auto",children:i.jsxs("div",{className:"p-6",children:[i.jsx("div",{className:"mb-6",children:i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",placeholder:"Search Frhighday",className:"w-full bg-frhigh-dark-tertiary text-white placeholder-gray-400 rounded-full py-3 px-4 pl-12 focus:outline-none focus:ring-2 focus:ring-frhigh-green","data-testid":"input-search"}),i.jsx("i",{className:"fas fa-search absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"})]})}),i.jsxs("div",{className:"bg-frhigh-dark-tertiary rounded-xl p-4 mb-6",children:[i.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Trending in Cannabis"}),i.jsx("div",{className:"space-y-3",children:t?[...Array(4)].map((a,o)=>i.jsxs("div",{className:"space-y-1",children:[i.jsx(Bo,{className:"h-3 w-20"}),i.jsx(Bo,{className:"h-4 w-32"}),i.jsx(Bo,{className:"h-3 w-24"})]},o)):e==null?void 0:e.slice(0,4).map((a,o)=>i.jsxs("div",{className:"cursor-pointer hover:bg-frhigh-dark-secondary p-2 rounded-lg transition-colors","data-testid":`trending-item-${o}`,children:[i.jsx("p",{className:"text-gray-400 text-sm",children:"Trending in Cannabis"}),i.jsxs("p",{className:"text-white font-semibold",children:["#",a.hashtag]}),i.jsxs("p",{className:"text-gray-400 text-sm",children:[a.count.toLocaleString()," posts"]})]},a.hashtag))})]}),i.jsxs("div",{className:"bg-frhigh-dark-tertiary rounded-xl p-4 mb-6",children:[i.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Who to follow"}),i.jsx("div",{className:"space-y-3",children:s.map(a=>i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("img",{src:a.avatar,alt:a.displayName,className:"w-12 h-12 rounded-full object-cover","data-testid":`img-suggested-${a.username}`}),i.jsxs("div",{children:[i.jsx("p",{className:"text-white font-semibold","data-testid":`text-suggested-name-${a.username}`,children:a.displayName}),i.jsxs("p",{className:"text-gray-400 text-sm","data-testid":`text-suggested-username-${a.username}`,children:["@",a.username]})]})]}),i.jsx(z,{size:"sm",className:"bg-frhigh-green hover:bg-frhigh-green-light text-frhigh-dark font-semibold","data-testid":`button-follow-${a.username}`,children:"Follow"})]},a.id))})]}),i.jsxs("div",{className:"bg-frhigh-dark-tertiary rounded-xl p-4",children:[i.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Community Stats"}),i.jsx("div",{className:"space-y-3",children:n?[...Array(4)].map((a,o)=>i.jsxs("div",{className:"flex justify-between",children:[i.jsx(Bo,{className:"h-4 w-24"}),i.jsx(Bo,{className:"h-4 w-16"})]},o)):r?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-400",children:"Active Members"}),i.jsx("span",{className:"text-frhigh-green font-semibold","data-testid":"stat-active-members",children:r.activeMembers.toLocaleString()})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-400",children:"Posts Today"}),i.jsx("span",{className:"text-frhigh-green font-semibold","data-testid":"stat-posts-today",children:r.postsToday.toLocaleString()})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-400",children:"Strain Reviews"}),i.jsx("span",{className:"text-frhigh-green font-semibold","data-testid":"stat-strain-reviews",children:r.strainReviews.toLocaleString()})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-400",children:"Online Now"}),i.jsx("span",{className:"text-frhigh-green font-semibold","data-testid":"stat-online-now",children:r.onlineNow.toLocaleString()})]})]}):null})]})]})})}function Wz(){return i.jsxs("div",{className:"min-h-screen bg-frhigh-dark",children:[i.jsx(Ui,{}),i.jsx(zi,{}),i.jsx("main",{className:"pb-20",children:i.jsx("div",{className:"max-w-2xl mx-auto p-4",children:i.jsxs("div",{className:"text-center py-12",children:[i.jsx("i",{className:"fas fa-search text-6xl text-frhigh-green mb-4"}),i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Explore Cannabis Community"}),i.jsx("p",{className:"text-gray-400",children:"Discover new content, strains, and community members"})]})})}),i.jsx(Gh,{})]})}function qz({open:e,onOpenChange:t}){const[r,n]=f.useState(""),[s,a]=f.useState(""),[o,l]=f.useState(""),[c,d]=f.useState(""),[u,h]=f.useState(""),[p,m]=f.useState(""),[x,y]=f.useState(0),[w,v]=f.useState([]),[g,b]=f.useState(!1),{toast:j}=ke(),{user:k}=Fe(),C=Xe(),S=pe({mutationFn:async M=>(await ne("POST","/api/posts",M)).json(),onSuccess:()=>{C.invalidateQueries({queryKey:["/api/posts"]}),j({title:"Success!",description:"Your strain review has been posted."}),F()},onError:M=>{console.error("Failed to create post:",M),j({title:"Error",description:"Failed to create strain review. Please try again.",variant:"destructive"})}}),_=M=>{const H=Array.from(M.target.files||[]).filter(V=>V.type.startsWith("image/"));H.length>0&&v(V=>[...V,...H].slice(0,5))},P=M=>{v(I=>I.filter((H,V)=>V!==M))},T=M=>{y(M)},F=()=>{n(""),a(""),l(""),d(""),h(""),m(""),y(0),v([]),b(!1),t(!1)},R=async()=>{if(!(k!=null&&k.id)){j({title:"Authentication required",description:"Please log in to create strain reviews.",variant:"destructive"});return}if(!s.trim()){j({title:"Strain name required",description:"Please enter the strain name.",variant:"destructive"});return}if(x===0){j({title:"Rating required",description:"Please rate this strain.",variant:"destructive"});return}b(!0);try{const M=[];for(const V of w)try{const Q=await ne("POST","/api/objects/upload"),{uploadURL:A}=await Q.json(),L=await fetch(A,{method:"PUT",body:V,headers:{"Content-Type":V.type}});if(!L.ok)throw new Error(`Upload failed: ${L.status}`);const G=await ne("PUT","/api/posts/media",{mediaURL:A,mediaType:"image",originalFileName:V.name}),{objectPath:B}=await G.json();M.push(B)}catch(Q){console.error("Image upload failed:",Q),j({title:"Image upload failed",description:`Failed to upload ${V.name}. Continuing with other images.`,variant:"destructive"})}const I={name:s.trim(),type:o.trim()||void 0,thc:c.trim()||void 0,cbd:u.trim()||void 0,flavor:p.trim()||void 0,rating:x},H={content:r.trim()||`Strain Review: ${s}`,userId:k.id,type:"strain_review",hashtags:[],mentionedUsers:[],videos:[],podcasts:[],images:M,strainData:I};await S.mutateAsync(H)}catch(M){console.error("Upload error:",M),j({title:"Upload failed",description:"There was an error creating your strain review. Please try again.",variant:"destructive"})}finally{b(!1)}};return i.jsx(dr,{open:e,onOpenChange:F,children:i.jsxs(qt,{className:"bg-frhigh-dark border-frhigh-dark-tertiary max-w-2xl max-h-[90vh] overflow-y-auto",children:[i.jsxs(ur,{children:[i.jsxs(hr,{className:"text-white flex items-center gap-2",children:[i.jsx("span",{className:"text-frhigh-green",children:""}),"Upload Strain Review"]}),i.jsx(Wn,{className:"text-gray-400",children:"Share your strain experience with the community"})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsx(ae,{className:"bg-frhigh-dark-secondary/50 border-frhigh-dark-tertiary",children:i.jsxs(oe,{className:"p-4 space-y-4",children:[i.jsx("h3",{className:"text-white font-medium",children:"Strain Information"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(ce,{htmlFor:"strain-name",className:"text-gray-300",children:"Strain Name *"}),i.jsx(le,{id:"strain-name",value:s,onChange:M=>a(M.target.value),placeholder:"e.g., Blue Dream",className:"bg-frhigh-dark border-frhigh-dark-tertiary text-white placeholder-gray-400"})]}),i.jsxs("div",{children:[i.jsx(ce,{htmlFor:"strain-type",className:"text-gray-300",children:"Type"}),i.jsxs(qn,{value:o,onValueChange:l,children:[i.jsx(gn,{className:"bg-frhigh-dark border-frhigh-dark-tertiary text-white",children:i.jsx(Kn,{placeholder:"Select type"})}),i.jsxs(yn,{className:"bg-frhigh-dark border-frhigh-dark-tertiary",children:[i.jsx(he,{value:"indica",children:"Indica"}),i.jsx(he,{value:"sativa",children:"Sativa"}),i.jsx(he,{value:"hybrid",children:"Hybrid"})]})]})]}),i.jsxs("div",{children:[i.jsx(ce,{htmlFor:"strain-thc",className:"text-gray-300",children:"THC %"}),i.jsx(le,{id:"strain-thc",value:c,onChange:M=>d(M.target.value),placeholder:"e.g., 18.5",className:"bg-frhigh-dark border-frhigh-dark-tertiary text-white placeholder-gray-400"})]}),i.jsxs("div",{children:[i.jsx(ce,{htmlFor:"strain-cbd",className:"text-gray-300",children:"CBD %"}),i.jsx(le,{id:"strain-cbd",value:u,onChange:M=>h(M.target.value),placeholder:"e.g., 0.5",className:"bg-frhigh-dark border-frhigh-dark-tertiary text-white placeholder-gray-400"})]})]}),i.jsxs("div",{children:[i.jsx(ce,{htmlFor:"strain-flavor",className:"text-gray-300",children:"Flavor Profile"}),i.jsx(le,{id:"strain-flavor",value:p,onChange:M=>m(M.target.value),placeholder:"e.g., Sweet, Earthy, Citrus",className:"bg-frhigh-dark border-frhigh-dark-tertiary text-white placeholder-gray-400"})]}),i.jsxs("div",{children:[i.jsx(ce,{className:"text-gray-300",children:"Rating *"}),i.jsx("div",{className:"flex gap-1 mt-2",children:[1,2,3,4,5].map(M=>i.jsx("button",{type:"button",onClick:()=>T(M),className:"p-1 transition-colors",children:i.jsx(pR,{className:`w-6 h-6 ${M<=x?"fill-frhigh-green text-frhigh-green":"text-gray-400"}`})},M))})]})]})}),i.jsxs("div",{children:[i.jsx(ce,{htmlFor:"review-content",className:"text-gray-300",children:"Review (Optional)"}),i.jsx(xt,{id:"review-content",value:r,onChange:M=>n(M.target.value),placeholder:"Share your experience with this strain...",className:"bg-frhigh-dark border-frhigh-dark-tertiary text-white placeholder-gray-400 min-h-[100px]"})]}),i.jsxs("div",{children:[i.jsx(ce,{className:"text-gray-300",children:"Photos (Optional)"}),i.jsx("div",{className:"mt-2",children:i.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed border-frhigh-dark-tertiary rounded-lg cursor-pointer hover:border-frhigh-green transition-colors",children:[i.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[i.jsx(Or,{className:"w-8 h-8 mb-2 text-gray-400"}),i.jsx("p",{className:"text-sm text-gray-400",children:"Click to upload strain photos"})]}),i.jsx("input",{type:"file",className:"hidden",multiple:!0,accept:"image/*",onChange:_})]})}),w.length>0&&i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 mt-4",children:w.map((M,I)=>i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:URL.createObjectURL(M),alt:`Preview ${I+1}`,className:"w-full h-20 object-cover rounded-lg"}),i.jsx("button",{onClick:()=>P(I),className:"absolute top-1 right-1 p-1 bg-red-500 rounded-full text-white hover:bg-red-600 transition-colors",children:i.jsx($r,{className:"w-3 h-3"})})]},I))})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx(z,{onClick:F,variant:"outline",className:"flex-1 border-frhigh-dark-tertiary text-gray-300 hover:bg-frhigh-dark-secondary",disabled:g,children:"Cancel"}),i.jsx(z,{onClick:R,disabled:g||!s.trim()||x===0,className:"flex-1 bg-frhigh-green hover:bg-frhigh-green/80 text-white",children:g?"Uploading...":"Post Strain Review"})]})]})]})})}function Kz({open:e,onOpenChange:t}){const[r,n]=f.useState(""),[s,a]=f.useState(""),[o,l]=f.useState(""),[c,d]=f.useState(""),[u,h]=f.useState(""),[p,m]=f.useState(""),[x,y]=f.useState([]),[w,v]=f.useState(!1),{toast:g}=ke(),{user:b}=Fe(),j=Xe(),k=pe({mutationFn:async T=>{console.log("Creating product post:",T);const F=await ne("POST","/api/posts",T);if(!F.ok)throw new Error(`HTTP ${F.status}: ${F.statusText}`);return F.json()},onSuccess:()=>{console.log("Product post created successfully"),j.invalidateQueries({queryKey:["/api/posts"]}),g({title:"Success!",description:"Your product has been posted."}),_()},onError:T=>{console.error("Failed to create product post:",T),g({title:"Error",description:`Failed to create product post: ${T.message}`,variant:"destructive"})}}),C=T=>{const R=Array.from(T.target.files||[]).filter(M=>M.type.startsWith("image/"));R.length>0&&y(M=>[...M,...R].slice(0,5))},S=T=>{y(F=>F.filter((R,M)=>M!==T))},_=()=>{n(""),a(""),l(""),d(""),h(""),m(""),y([]),v(!1),t(!1)},P=async()=>{if(console.log("Product submit started, user:",b==null?void 0:b.id),!(b!=null&&b.id)){g({title:"Authentication required",description:"Please log in to create product posts.",variant:"destructive"});return}if(!s.trim()){g({title:"Product name required",description:"Please enter the product name.",variant:"destructive"});return}v(!0);try{const T=[];for(const M of x)try{console.log("Uploading image:",M.name);const I=await ne("POST","/api/objects/upload");if(!I.ok)throw new Error(`Upload URL request failed: ${I.status}`);const{uploadURL:H}=await I.json(),V=await fetch(H,{method:"PUT",body:M,headers:{"Content-Type":M.type}});if(!V.ok)throw new Error(`Upload failed: ${V.status}`);const Q=await ne("PUT","/api/posts/media",{mediaURL:H,mediaType:"image",originalFileName:M.name}),{objectPath:A}=await Q.json();T.push(A)}catch(I){console.error("Image upload failed:",I),g({title:"Image upload failed",description:`Failed to upload ${M.name}. Continuing with other images.`,variant:"destructive"})}const R={content:[` ${s}`,u&&`Brand: ${u}`,o&&`Category: ${o}`,c&&`Price: $${c}`,p&&p,r&&`
${r}`].filter(Boolean).join(`
`),userId:b.id,type:"regular",hashtags:[`#${o==null?void 0:o.toLowerCase().replace(/\s+/g,"")}`,"#product","#cannabis"].filter(Boolean),mentionedUsers:[],videos:[],podcasts:[],images:T};console.log("Attempting to create post with data:",R),await k.mutateAsync(R)}catch(T){if(console.error("Upload error:",T),images.length===0&&x.length>0){console.log("Attempting to create post without images as fallback");try{const F={...postData,images:[],content:postData.content+`

 Images could not be uploaded, but product details saved.`};await k.mutateAsync(F)}catch(F){console.error("Fallback post creation failed:",F),g({title:"Upload failed",description:`Failed to create product post: ${T instanceof Error?T.message:"Unknown error"}`,variant:"destructive"})}}else g({title:"Upload failed",description:`Failed to create product post: ${T instanceof Error?T.message:"Unknown error"}`,variant:"destructive"})}finally{v(!1)}};return i.jsx(dr,{open:e,onOpenChange:_,children:i.jsxs(qt,{className:"bg-frhigh-dark border-frhigh-dark-tertiary max-w-2xl max-h-[90vh] overflow-y-auto",children:[i.jsxs(ur,{children:[i.jsxs(hr,{className:"text-white flex items-center gap-2",children:[i.jsx(Ey,{className:"w-5 h-5 text-blue-400"}),"Upload Product"]}),i.jsx(Wn,{className:"text-gray-400",children:"Share cannabis products and accessories with the community"})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsx(ae,{className:"bg-frhigh-dark-secondary/50 border-frhigh-dark-tertiary",children:i.jsxs(oe,{className:"p-4 space-y-4",children:[i.jsx("h3",{className:"text-white font-medium",children:"Product Information"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(ce,{htmlFor:"product-name",className:"text-gray-300",children:"Product Name *"}),i.jsx(le,{id:"product-name",value:s,onChange:T=>a(T.target.value),placeholder:"e.g., Premium Glass Bong",className:"bg-frhigh-dark border-frhigh-dark-tertiary text-white placeholder-gray-400"})]}),i.jsxs("div",{children:[i.jsx(ce,{htmlFor:"product-brand",className:"text-gray-300",children:"Brand"}),i.jsx(le,{id:"product-brand",value:u,onChange:T=>h(T.target.value),placeholder:"e.g., Storz & Bickel",className:"bg-frhigh-dark border-frhigh-dark-tertiary text-white placeholder-gray-400"})]}),i.jsxs("div",{children:[i.jsx(ce,{htmlFor:"product-category",className:"text-gray-300",children:"Category"}),i.jsxs(qn,{value:o,onValueChange:l,children:[i.jsx(gn,{className:"bg-frhigh-dark border-frhigh-dark-tertiary text-white",children:i.jsx(Kn,{placeholder:"Select category"})}),i.jsxs(yn,{className:"bg-frhigh-dark border-frhigh-dark-tertiary",children:[i.jsx(he,{value:"vaporizers",children:"Vaporizers"}),i.jsx(he,{value:"glassware",children:"Glassware"}),i.jsx(he,{value:"accessories",children:"Accessories"}),i.jsx(he,{value:"papers",children:"Papers & Wraps"}),i.jsx(he,{value:"tools",children:"Tools"}),i.jsx(he,{value:"storage",children:"Storage"}),i.jsx(he,{value:"other",children:"Other"})]})]})]}),i.jsxs("div",{children:[i.jsx(ce,{htmlFor:"product-price",className:"text-gray-300",children:"Price ($)"}),i.jsx(le,{id:"product-price",value:c,onChange:T=>d(T.target.value),placeholder:"e.g., 299.99",type:"number",step:"0.01",className:"bg-frhigh-dark border-frhigh-dark-tertiary text-white placeholder-gray-400"})]})]}),i.jsxs("div",{children:[i.jsx(ce,{htmlFor:"product-description",className:"text-gray-300",children:"Description"}),i.jsx(xt,{id:"product-description",value:p,onChange:T=>m(T.target.value),placeholder:"Describe the product features and benefits...",className:"bg-frhigh-dark border-frhigh-dark-tertiary text-white placeholder-gray-400 min-h-[80px]"})]})]})}),i.jsxs("div",{children:[i.jsx(ce,{htmlFor:"additional-content",className:"text-gray-300",children:"Additional Notes (Optional)"}),i.jsx(xt,{id:"additional-content",value:r,onChange:T=>n(T.target.value),placeholder:"Share additional thoughts about this product...",className:"bg-frhigh-dark border-frhigh-dark-tertiary text-white placeholder-gray-400 min-h-[80px]"})]}),i.jsxs("div",{children:[i.jsx(ce,{className:"text-gray-300",children:"Product Photos"}),i.jsx("div",{className:"mt-2",children:i.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed border-frhigh-dark-tertiary rounded-lg cursor-pointer hover:border-blue-400 transition-colors",children:[i.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[i.jsx(Or,{className:"w-8 h-8 mb-2 text-gray-400"}),i.jsx("p",{className:"text-sm text-gray-400",children:"Click to upload product photos"})]}),i.jsx("input",{type:"file",className:"hidden",multiple:!0,accept:"image/*",onChange:C})]})}),x.length>0&&i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 mt-4",children:x.map((T,F)=>i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:URL.createObjectURL(T),alt:`Preview ${F+1}`,className:"w-full h-20 object-cover rounded-lg"}),i.jsx("button",{onClick:()=>S(F),className:"absolute top-1 right-1 p-1 bg-red-500 rounded-full text-white hover:bg-red-600 transition-colors",children:i.jsx($r,{className:"w-3 h-3"})})]},F))})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx(z,{onClick:_,variant:"outline",className:"flex-1 border-frhigh-dark-tertiary text-gray-300 hover:bg-frhigh-dark-secondary",disabled:w,children:"Cancel"}),i.jsx(z,{onClick:P,disabled:w||!s.trim(),className:"flex-1 bg-blue-400 hover:bg-blue-400/80 text-white",children:w?"Uploading...":"Post Product"})]})]})]})})}function Gz({open:e,onOpenChange:t}){const[r,n]=f.useState(""),[s,a]=f.useState(""),[o,l]=f.useState(""),[c,d]=f.useState(""),[u,h]=f.useState(""),[p,m]=f.useState(""),[x,y]=f.useState(""),[w,v]=f.useState([]),[g,b]=f.useState(!1),{toast:j}=ke(),{user:k}=Fe(),C=Xe(),S=pe({mutationFn:async R=>{console.log("Creating merch post:",R);const M=await ne("POST","/api/posts",R);if(!M.ok)throw new Error(`HTTP ${M.status}: ${M.statusText}`);return M.json()},onSuccess:()=>{console.log("Merch post created successfully"),C.invalidateQueries({queryKey:["/api/posts"]}),j({title:"Success!",description:"Your merchandise has been posted."}),T()},onError:R=>{console.error("Failed to create merch post:",R),j({title:"Error",description:`Failed to create merchandise post: ${R.message}`,variant:"destructive"})}}),_=R=>{const I=Array.from(R.target.files||[]).filter(H=>H.type.startsWith("image/"));I.length>0&&v(H=>[...H,...I].slice(0,5))},P=R=>{v(M=>M.filter((I,H)=>H!==R))},T=()=>{n(""),a(""),l(""),d(""),h(""),m(""),y(""),v([]),b(!1),t(!1)},F=async()=>{if(console.log("Merch submit started, user:",k==null?void 0:k.id),!(k!=null&&k.id)){j({title:"Authentication required",description:"Please log in to create merchandise posts.",variant:"destructive"});return}if(!s.trim()){j({title:"Merchandise name required",description:"Please enter the merchandise name.",variant:"destructive"});return}b(!0);try{const R=[];for(const H of w)try{console.log("Uploading image:",H.name);const V=await ne("POST","/api/objects/upload");if(!V.ok)throw new Error(`Upload URL request failed: ${V.status}`);const{uploadURL:Q}=await V.json(),A=await fetch(Q,{method:"PUT",body:H,headers:{"Content-Type":H.type}});if(!A.ok)throw new Error(`Upload failed: ${A.status}`);const L=await ne("PUT","/api/posts/media",{mediaURL:Q,mediaType:"image",originalFileName:H.name}),{objectPath:G}=await L.json();R.push(G)}catch(V){console.error("Image upload failed:",V),j({title:"Image upload failed",description:`Failed to upload ${H.name}. Continuing with other images.`,variant:"destructive"})}const I={content:[` ${s}`,o&&`Type: ${o}`,u&&`Size: ${u}`,p&&`Color: ${p}`,c&&`Price: $${c}`,x&&x,r&&`
${r}`].filter(Boolean).join(`
`),userId:k.id,type:"regular",hashtags:[`#${o==null?void 0:o.toLowerCase().replace(/\s+/g,"")}`,"#merch","#merchandise","#frhighday"].filter(Boolean),mentionedUsers:[],videos:[],podcasts:[],images:R};console.log("Attempting to create post with data:",I),await S.mutateAsync(I)}catch(R){if(console.error("Upload error:",R),images.length===0&&w.length>0){console.log("Attempting to create post without images as fallback");try{const M={...postData,images:[],content:postData.content+`

 Images could not be uploaded, but merchandise details saved.`};await S.mutateAsync(M)}catch(M){console.error("Fallback post creation failed:",M),j({title:"Upload failed",description:`Failed to create merchandise post: ${R instanceof Error?R.message:"Unknown error"}`,variant:"destructive"})}}else j({title:"Upload failed",description:`Failed to create merchandise post: ${R instanceof Error?R.message:"Unknown error"}`,variant:"destructive"})}finally{b(!1)}};return i.jsx(dr,{open:e,onOpenChange:T,children:i.jsxs(qt,{className:"bg-frhigh-dark border-frhigh-dark-tertiary max-w-2xl max-h-[90vh] overflow-y-auto",children:[i.jsxs(ur,{children:[i.jsxs(hr,{className:"text-white flex items-center gap-2",children:[i.jsx(_j,{className:"w-5 h-5 text-purple-400"}),"Upload Merchandise"]}),i.jsx(Wn,{className:"text-gray-400",children:"Showcase branded merchandise and gear"})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsx(ae,{className:"bg-frhigh-dark-secondary/50 border-frhigh-dark-tertiary",children:i.jsxs(oe,{className:"p-4 space-y-4",children:[i.jsx("h3",{className:"text-white font-medium",children:"Merchandise Information"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(ce,{htmlFor:"merch-name",className:"text-gray-300",children:"Item Name *"}),i.jsx(le,{id:"merch-name",value:s,onChange:R=>a(R.target.value),placeholder:"e.g., Frhighday Logo Hoodie",className:"bg-frhigh-dark border-frhigh-dark-tertiary text-white placeholder-gray-400"})]}),i.jsxs("div",{children:[i.jsx(ce,{htmlFor:"merch-category",className:"text-gray-300",children:"Category"}),i.jsxs(qn,{value:o,onValueChange:l,children:[i.jsx(gn,{className:"bg-frhigh-dark border-frhigh-dark-tertiary text-white",children:i.jsx(Kn,{placeholder:"Select category"})}),i.jsxs(yn,{className:"bg-frhigh-dark border-frhigh-dark-tertiary",children:[i.jsx(he,{value:"clothing",children:"Clothing"}),i.jsx(he,{value:"accessories",children:"Accessories"}),i.jsx(he,{value:"stickers",children:"Stickers"}),i.jsx(he,{value:"hats",children:"Hats"}),i.jsx(he,{value:"bags",children:"Bags"}),i.jsx(he,{value:"other",children:"Other"})]})]})]}),i.jsxs("div",{children:[i.jsx(ce,{htmlFor:"merch-size",className:"text-gray-300",children:"Size"}),i.jsxs(qn,{value:u,onValueChange:h,children:[i.jsx(gn,{className:"bg-frhigh-dark border-frhigh-dark-tertiary text-white",children:i.jsx(Kn,{placeholder:"Select size"})}),i.jsxs(yn,{className:"bg-frhigh-dark border-frhigh-dark-tertiary",children:[i.jsx(he,{value:"xs",children:"XS"}),i.jsx(he,{value:"s",children:"S"}),i.jsx(he,{value:"m",children:"M"}),i.jsx(he,{value:"l",children:"L"}),i.jsx(he,{value:"xl",children:"XL"}),i.jsx(he,{value:"xxl",children:"XXL"}),i.jsx(he,{value:"one-size",children:"One Size"}),i.jsx(he,{value:"various",children:"Various"})]})]})]}),i.jsxs("div",{children:[i.jsx(ce,{htmlFor:"merch-color",className:"text-gray-300",children:"Color"}),i.jsx(le,{id:"merch-color",value:p,onChange:R=>m(R.target.value),placeholder:"e.g., Forest Green",className:"bg-frhigh-dark border-frhigh-dark-tertiary text-white placeholder-gray-400"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx(ce,{htmlFor:"merch-price",className:"text-gray-300",children:"Price ($)"}),i.jsx(le,{id:"merch-price",value:c,onChange:R=>d(R.target.value),placeholder:"e.g., 39.99",type:"number",step:"0.01",className:"bg-frhigh-dark border-frhigh-dark-tertiary text-white placeholder-gray-400"})]})]}),i.jsxs("div",{children:[i.jsx(ce,{htmlFor:"merch-description",className:"text-gray-300",children:"Description"}),i.jsx(xt,{id:"merch-description",value:x,onChange:R=>y(R.target.value),placeholder:"Describe the merchandise details and features...",className:"bg-frhigh-dark border-frhigh-dark-tertiary text-white placeholder-gray-400 min-h-[80px]"})]})]})}),i.jsxs("div",{children:[i.jsx(ce,{htmlFor:"additional-content",className:"text-gray-300",children:"Additional Notes (Optional)"}),i.jsx(xt,{id:"additional-content",value:r,onChange:R=>n(R.target.value),placeholder:"Share additional thoughts about this merchandise...",className:"bg-frhigh-dark border-frhigh-dark-tertiary text-white placeholder-gray-400 min-h-[80px]"})]}),i.jsxs("div",{children:[i.jsx(ce,{className:"text-gray-300",children:"Merchandise Photos"}),i.jsx("div",{className:"mt-2",children:i.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed border-frhigh-dark-tertiary rounded-lg cursor-pointer hover:border-purple-400 transition-colors",children:[i.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[i.jsx(Or,{className:"w-8 h-8 mb-2 text-gray-400"}),i.jsx("p",{className:"text-sm text-gray-400",children:"Click to upload merchandise photos"})]}),i.jsx("input",{type:"file",className:"hidden",multiple:!0,accept:"image/*",onChange:_})]})}),w.length>0&&i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 mt-4",children:w.map((R,M)=>i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:URL.createObjectURL(R),alt:`Preview ${M+1}`,className:"w-full h-20 object-cover rounded-lg"}),i.jsx("button",{onClick:()=>P(M),className:"absolute top-1 right-1 p-1 bg-red-500 rounded-full text-white hover:bg-red-600 transition-colors",children:i.jsx($r,{className:"w-3 h-3"})})]},M))})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx(z,{onClick:T,variant:"outline",className:"flex-1 border-frhigh-dark-tertiary text-gray-300 hover:bg-frhigh-dark-secondary",disabled:g,children:"Cancel"}),i.jsx(z,{onClick:F,disabled:g||!s.trim(),className:"flex-1 bg-purple-400 hover:bg-purple-400/80 text-white",children:g?"Uploading...":"Post Merchandise"})]})]})]})})}function Cv({category:e,currentUserId:t}){const[,r]=kc(),{user:n}=Fe();Qy();const[s,a]=f.useState(!1),[o,l]=f.useState(!1),[c,d]=f.useState(!1),u=()=>{switch(e){case"strains":return{icon:i.jsx(Pj,{className:"w-8 h-8 text-frhigh-green"}),title:"Upload Strains",description:"Add strain reviews with photos and ratings",bgColor:"bg-frhigh-green/10",borderColor:"border-frhigh-green/30",hoverColor:"hover:bg-frhigh-green/20"};case"products":return{icon:i.jsx(Ey,{className:"w-8 h-8 text-blue-400"}),title:"Upload Products",description:"Share cannabis products and accessories",bgColor:"bg-blue-400/10",borderColor:"border-blue-400/30",hoverColor:"hover:bg-blue-400/20"};case"merch":return{icon:i.jsx(_j,{className:"w-8 h-8 text-purple-400"}),title:"Upload Merchandise",description:"Showcase branded merchandise and gear",bgColor:"bg-purple-400/10",borderColor:"border-purple-400/30",hoverColor:"hover:bg-purple-400/20"};default:return{icon:i.jsx(Or,{className:"w-8 h-8 text-gray-400"}),title:"Upload Content",description:"Add new content to the platform",bgColor:"bg-gray-400/10",borderColor:"border-gray-400/30",hoverColor:"hover:bg-gray-400/20"}}},h=(y,w)=>{if(!w)return!1;switch(y){case"strains":case"products":return w==="manager"||w==="admin"||w==="super_admin";case"merch":return w==="moderator"||w==="manager"||w==="admin"||w==="super_admin";default:return!1}},p=()=>{if(console.log("Upload click for category:",e,"User:",n==null?void 0:n.id,"Role:",n==null?void 0:n.role),!(n!=null&&n.id)){console.log("No user ID, redirecting to home"),r("/");return}if(!h(e,n.role)){console.log("User does not have permission to upload",e);return}try{switch(e){case"strains":console.log("Opening strain modal"),a(!0);break;case"products":console.log("Opening product modal"),l(!0);break;case"merch":console.log("Opening merch modal"),d(!0);break;default:const y=`/profile/${n.id}?upload=${e}`;r(y)}}catch(y){console.error("Error opening upload modal:",y)}},m=u();return h(e,n==null?void 0:n.role)?i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs(z,{onClick:p,className:`
          relative h-32 w-full rounded-xl border-2 
          ${m.bgColor} ${m.borderColor} 
          ${m.hoverColor}
          transition-all duration-300 transform hover:scale-105 
          hover:shadow-lg active:scale-95
          group
        `,variant:"ghost","data-testid":`upload-${e}-button`,children:[i.jsxs("div",{className:"flex flex-col items-center justify-center space-y-3",children:[m.icon,i.jsxs("div",{className:"text-center",children:[i.jsx("h3",{className:"font-semibold text-white text-sm",children:m.title}),i.jsx("p",{className:"text-xs text-gray-400 mt-1 max-w-24",children:m.description})]})]}),i.jsx("div",{className:"absolute inset-0 bg-white/5 opacity-0 group-hover:opacity-100 transition-opacity rounded-xl"}),i.jsx("div",{className:"absolute top-2 right-2 opacity-60 group-hover:opacity-100 transition-opacity",children:i.jsx(cR,{className:"w-4 h-4 text-current"})})]}),(n==null?void 0:n.id)&&i.jsxs(i.Fragment,{children:[i.jsx(qz,{open:s,onOpenChange:y=>{console.log("Strain modal state change:",y),a(y)}}),i.jsx(Kz,{open:o,onOpenChange:y=>{console.log("Product modal state change:",y),l(y)}}),i.jsx(Gz,{open:c,onOpenChange:y=>{console.log("Merch modal state change:",y),d(y)}})]})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:i.jsx("div",{className:`
          relative h-32 w-full rounded-xl border-2 opacity-50
          ${m.bgColor} ${m.borderColor}
          cursor-not-allowed
        `,children:i.jsxs("div",{className:"flex flex-col items-center justify-center space-y-3 h-full",children:[m.icon,i.jsxs("div",{className:"text-center",children:[i.jsx("h3",{className:"font-semibold text-gray-400 text-sm",children:m.title}),i.jsx("p",{className:"text-xs text-gray-500 mt-1 max-w-24",children:"Restricted Access"})]})]})})})}function Qz(){const{user:e}=Fe(),t=e==null?void 0:e.id,{data:r=[]}=xe({queryKey:["/api/posts"]}),n=r.filter(s=>s.type==="strain_review");return i.jsxs("div",{className:"min-h-screen bg-frhigh-dark",children:[i.jsx(Ui,{}),i.jsx(zi,{}),i.jsx("main",{className:"pb-20",children:i.jsxs("div",{className:"max-w-4xl mx-auto p-4",children:[i.jsxs("div",{className:"text-center py-8",children:[i.jsx("i",{className:"fas fa-flask text-6xl text-frhigh-green mb-4"}),i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Strain Database"}),i.jsx("p",{className:"text-gray-400",children:"Browse and review cannabis strains"})]}),i.jsx("div",{className:"mb-8",children:i.jsx(Cv,{category:"strains",currentUserId:t})}),i.jsx("div",{className:"space-y-6",children:n.length>0?n.sort((s,a)=>new Date(a.createdAt||0).getTime()-new Date(s.createdAt||0).getTime()).map(s=>i.jsx("div",{className:"bg-frhigh-dark-secondary rounded-xl overflow-hidden border border-frhigh-dark-tertiary hover:border-frhigh-green/30 transition-all duration-200",children:i.jsx("div",{className:"p-6",children:i.jsx(Sv,{post:s})})},s.id)):i.jsxs("div",{className:"text-center py-16",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-frhigh-green/20 rounded-full mb-6",children:i.jsx("i",{className:"fas fa-flask text-2xl text-frhigh-green"})}),i.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"No Strain Reviews Yet"}),i.jsx("p",{className:"text-gray-300 text-lg mb-8 max-w-md mx-auto",children:"Be the first to share a strain review! Upload strain details and help the community discover new favorites."})]})})]})}),i.jsx(Gh,{})]})}function Yz(){const{user:e}=Fe(),t=e==null?void 0:e.id,{data:r=[]}=xe({queryKey:["/api/posts"]}),n=r.filter(s=>{var a,o,l,c,d,u,h,p,m,x,y,w;return s.type!=="regular"||(a=s.hashtags)!=null&&a.includes("#merch")||(o=s.hashtags)!=null&&o.includes("#merchandise")||(l=s.hashtags)!=null&&l.includes("#frhighday")||(c=s.content)!=null&&c.toLowerCase().includes("")||(d=s.content)!=null&&d.toLowerCase().includes("type:")||(u=s.content)!=null&&u.toLowerCase().includes("size:")||(h=s.content)!=null&&h.toLowerCase().includes("color:")?!1:((p=s.hashtags)==null?void 0:p.includes("#product"))||((m=s.content)==null?void 0:m.toLowerCase().includes("brand:"))||((x=s.content)==null?void 0:x.toLowerCase().includes("price:"))||((y=s.content)==null?void 0:y.toLowerCase().includes(""))&&!((w=s.hashtags)!=null&&w.includes("#merch"))});return i.jsxs("div",{className:"min-h-screen bg-frhigh-dark",children:[i.jsx(Ui,{}),i.jsx(zi,{}),i.jsx("main",{className:"pb-20",children:i.jsxs("div",{className:"max-w-4xl mx-auto p-4",children:[i.jsxs("div",{className:"text-center py-8",children:[i.jsx("i",{className:"fas fa-box text-6xl text-frhigh-green mb-4"}),i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"New Products"}),i.jsx("p",{className:"text-gray-400",children:"Discover the latest cannabis products from Frhighday Pharms"})]}),i.jsx("div",{className:"mb-8",children:i.jsx(Cv,{category:"products",currentUserId:t})}),i.jsx("div",{className:"space-y-6",children:n.length>0?n.sort((s,a)=>new Date(a.createdAt||0).getTime()-new Date(s.createdAt||0).getTime()).map(s=>i.jsx("div",{className:"bg-frhigh-dark-secondary rounded-xl overflow-hidden border border-frhigh-dark-tertiary hover:border-blue-400/30 transition-all duration-200",children:i.jsx("div",{className:"p-6",children:i.jsx(Hh,{post:s})})},s.id)):i.jsxs("div",{className:"text-center py-16",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-blue-400/20 rounded-full mb-6",children:i.jsx("i",{className:"fas fa-box text-2xl text-blue-400"})}),i.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"No Products Yet"}),i.jsx("p",{className:"text-gray-300 text-lg mb-8 max-w-md mx-auto",children:"Be the first to share a product! Upload product details and help the community discover new gear."})]})})]})}),i.jsx(Gh,{})]})}function Xz(){const{user:e}=Fe(),t=e==null?void 0:e.id,{data:r=[]}=xe({queryKey:["/api/posts"]}),n=r.filter(s=>{var a,o,l,c,d,u,h;return s.type!=="regular"?!1:((a=s.hashtags)==null?void 0:a.includes("#merch"))||((o=s.hashtags)==null?void 0:o.includes("#merchandise"))||((l=s.hashtags)==null?void 0:l.includes("#frhighday"))||((c=s.content)==null?void 0:c.toLowerCase().includes(""))||((d=s.content)==null?void 0:d.toLowerCase().includes("type:"))||((u=s.content)==null?void 0:u.toLowerCase().includes("size:"))||((h=s.content)==null?void 0:h.toLowerCase().includes("color:"))});return i.jsxs("div",{className:"min-h-screen bg-frhigh-dark",children:[i.jsx(Ui,{}),i.jsx(zi,{}),i.jsx("main",{className:"pb-20",children:i.jsxs("div",{className:"max-w-4xl mx-auto p-4",children:[i.jsxs("div",{className:"text-center py-8",children:[i.jsx("i",{className:"fas fa-tshirt text-6xl text-frhigh-green mb-4"}),i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Frhighday Merch"}),i.jsx("p",{className:"text-gray-400",children:"Shop official Frhighday Pharms merchandise and apparel"})]}),i.jsx("div",{className:"mb-8",children:i.jsx(Cv,{category:"merch",currentUserId:t})}),i.jsx("div",{className:"space-y-6",children:n.length>0?n.sort((s,a)=>new Date(a.createdAt||0).getTime()-new Date(s.createdAt||0).getTime()).map(s=>i.jsx("div",{className:"bg-frhigh-dark-secondary rounded-xl overflow-hidden border border-frhigh-dark-tertiary hover:border-purple-400/30 transition-all duration-200",children:i.jsx("div",{className:"p-6",children:i.jsx(Hh,{post:s})})},s.id)):i.jsxs("div",{className:"text-center py-16",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-purple-400/20 rounded-full mb-6",children:i.jsx("i",{className:"fas fa-tshirt text-2xl text-purple-400"})}),i.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"No Merchandise Yet"}),i.jsx("p",{className:"text-gray-300 text-lg mb-8 max-w-md mx-auto",children:"Be the first to showcase merchandise! Upload product details and help promote Frhighday gear."})]})})]})}),i.jsx(Gh,{})]})}function Jz(){const{user:e}=Fe(),{toast:t}=ke(),r=Xe(),[n,s]=f.useState(null),[a,o]=f.useState(""),[l,c]=f.useState(""),{data:d=[],isLoading:u}=xe({queryKey:["/api/conversations"],enabled:!!e}),{data:h=[],isLoading:p}=xe({queryKey:["/api/conversations",n,"messages"],enabled:!!n}),m=pe({mutationFn:async g=>(await ne("POST","/api/messages",g)).json(),onSuccess:()=>{o(""),r.invalidateQueries({queryKey:["/api/conversations",n,"messages"]}),r.invalidateQueries({queryKey:["/api/conversations"]})},onError:g=>{t({title:"Failed to send message",description:g.message||"Please try again.",variant:"destructive"})}}),x=pe({mutationFn:async({conversationId:g,status:b})=>(await ne("PATCH",`/api/conversations/${g}`,{status:b})).json(),onSuccess:()=>{r.invalidateQueries({queryKey:["/api/conversations"]}),t({title:"Conversation updated",description:"The conversation status has been updated."})},onError:g=>{t({title:"Update failed",description:g.message||"Please try again.",variant:"destructive"})}}),y=g=>{g.preventDefault(),!(!a.trim()||!n)&&m.mutate({conversationId:n,content:a.trim()})},w=g=>g.participant1.id===(e==null?void 0:e.id)?g.participant2:g.participant1,v=d.filter(g=>{const b=w(g);return b.displayName.toLowerCase().includes(l.toLowerCase())||b.username.toLowerCase().includes(l.toLowerCase())});return e?i.jsxs("div",{className:"min-h-screen bg-frhigh-dark text-white",children:[i.jsx(Ic,{}),i.jsx("div",{className:"max-w-7xl mx-auto p-6",children:i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-[calc(100vh-140px)]",children:[i.jsxs(ae,{className:"bg-frhigh-dark-secondary border-frhigh-dark-tertiary",children:[i.jsxs(Ee,{children:[i.jsxs(Te,{className:"text-white flex items-center",children:[i.jsx("i",{className:"fas fa-comments mr-2"}),"Messages"]}),i.jsx(le,{placeholder:"Search conversations...",value:l,onChange:g=>c(g.target.value),className:"bg-frhigh-dark border-frhigh-dark-tertiary text-white","data-testid":"input-search-conversations"})]}),i.jsx(oe,{className:"p-0",children:i.jsx("div",{className:"overflow-y-auto max-h-[calc(100vh-240px)]",children:u?i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-frhigh-green"})}):v.length>0?v.map(g=>{const b=w(g);return i.jsx("div",{onClick:()=>s(g.id),className:`p-4 border-b border-frhigh-dark-tertiary cursor-pointer hover:bg-frhigh-dark transition-colors ${n===g.id?"bg-frhigh-dark":""}`,"data-testid":`conversation-${g.id}`,children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsxs(rr,{className:"w-12 h-12",children:[i.jsx(nr,{src:b.avatar,alt:b.displayName}),i.jsx(sr,{className:"bg-frhigh-green text-frhigh-dark",children:b.displayName.charAt(0).toUpperCase()})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h3",{className:"text-white font-medium truncate",children:b.displayName}),b.isVerified&&i.jsx("span",{className:"text-frhigh-green text-lg",title:"Verified",children:""})]}),g.unreadCount>0&&i.jsx(Rn,{className:"bg-frhigh-green text-frhigh-dark",children:g.unreadCount})]}),i.jsxs("p",{className:"text-gray-400 text-sm truncate",children:["@",b.username]}),g.status==="pending"&&i.jsxs("div",{className:"flex space-x-2 mt-2",children:[i.jsx(z,{size:"sm",onClick:j=>{j.stopPropagation(),x.mutate({conversationId:g.id,status:"accepted"})},className:"bg-frhigh-green hover:bg-frhigh-green-light text-frhigh-dark","data-testid":`accept-${g.id}`,children:"Accept"}),i.jsx(z,{size:"sm",variant:"destructive",onClick:j=>{j.stopPropagation(),x.mutate({conversationId:g.id,status:"blocked"})},"data-testid":`block-${g.id}`,children:"Block"})]}),g.status==="blocked"&&i.jsx(Rn,{variant:"destructive",className:"mt-2",children:"Blocked"})]})]})},g.id)}):i.jsxs("div",{className:"text-center py-8",children:[i.jsx("i",{className:"fas fa-comments text-4xl text-gray-500 mb-4"}),i.jsx("p",{className:"text-gray-400",children:"No conversations yet"})]})})})]}),i.jsx("div",{className:"lg:col-span-2",children:n?i.jsxs(ae,{className:"bg-frhigh-dark-secondary border-frhigh-dark-tertiary h-full flex flex-col",children:[i.jsx(Ee,{className:"flex-shrink-0",children:i.jsx("div",{className:"flex items-center space-x-3",children:(()=>{const g=d.find(j=>j.id===n);if(!g)return null;const b=w(g);return i.jsxs(i.Fragment,{children:[i.jsxs(rr,{className:"w-10 h-10",children:[i.jsx(nr,{src:b.avatar,alt:b.displayName}),i.jsx(sr,{className:"bg-frhigh-green text-frhigh-dark",children:b.displayName.charAt(0).toUpperCase()})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-white font-medium",children:b.displayName}),i.jsxs("p",{className:"text-gray-400 text-sm",children:["@",b.username]})]})]})})()})}),i.jsxs(oe,{className:"flex-1 flex flex-col p-0",children:[i.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:p?i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-frhigh-green"})}):h.length>0?h.map(g=>i.jsx("div",{className:`flex ${g.senderId===e.id?"justify-end":"justify-start"}`,"data-testid":`message-${g.id}`,children:i.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${g.senderId===e.id?"bg-frhigh-green text-frhigh-dark":"bg-frhigh-dark text-white"}`,children:[i.jsx("p",{children:g.content}),i.jsx("p",{className:"text-xs opacity-70 mt-1",children:new Date(g.createdAt).toLocaleTimeString()})]})},g.id)):i.jsx("div",{className:"text-center py-8",children:i.jsx("p",{className:"text-gray-400",children:"No messages yet. Start the conversation!"})})}),i.jsx("div",{className:"border-t border-frhigh-dark-tertiary p-4",children:i.jsxs("form",{onSubmit:y,className:"flex space-x-2",children:[i.jsx(le,{value:a,onChange:g=>o(g.target.value),placeholder:"Type a message...",className:"flex-1 bg-frhigh-dark border-frhigh-dark-tertiary text-white","data-testid":"input-message"}),i.jsx(z,{type:"submit",disabled:!a.trim()||m.isPending,className:"bg-frhigh-green hover:bg-frhigh-green-light text-frhigh-dark","data-testid":"button-send-message",children:m.isPending?i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-frhigh-dark"}):i.jsx("i",{className:"fas fa-paper-plane"})})]})})]})]}):i.jsx(ae,{className:"bg-frhigh-dark-secondary border-frhigh-dark-tertiary h-full flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("i",{className:"fas fa-comments text-6xl text-gray-500 mb-4"}),i.jsx("h3",{className:"text-white text-xl font-medium mb-2",children:"Select a conversation"}),i.jsx("p",{className:"text-gray-400",children:"Choose a conversation from the list to start messaging"})]})})})]})})]}):i.jsx("div",{className:"min-h-screen bg-frhigh-dark flex items-center justify-center",children:i.jsx("div",{className:"text-center",children:i.jsx("p",{className:"text-gray-400",children:"Please log in to view messages."})})})}function ct(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Zz(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const Td=43200,Zb=1440;let eB={};function tB(){return eB}function ew(e){const t=ct(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function tu(e,t){const r=ct(e),n=ct(t),s=r.getTime()-n.getTime();return s<0?-1:s>0?1:s}function rB(e){return Zz(e,Date.now())}function nB(e,t){const r=ct(e),n=ct(t),s=r.getFullYear()-n.getFullYear(),a=r.getMonth()-n.getMonth();return s*12+a}function sB(e){return t=>{const n=(e?Math[e]:Math.trunc)(t);return n===0?0:n}}function iB(e,t){return+ct(e)-+ct(t)}function aB(e){const t=ct(e);return t.setHours(23,59,59,999),t}function oB(e){const t=ct(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function lB(e){const t=ct(e);return+aB(t)==+oB(t)}function cB(e,t){const r=ct(e),n=ct(t),s=tu(r,n),a=Math.abs(nB(r,n));let o;if(a<1)o=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-s*a);let l=tu(r,n)===-s;lB(ct(e))&&a===1&&tu(e,n)===1&&(l=!1),o=s*(a-Number(l))}return o===0?0:o}function dB(e,t,r){const n=iB(e,t)/1e3;return sB(r==null?void 0:r.roundingMethod)(n)}const uB={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},hB=(e,t,r)=>{let n;const s=uB[e];return typeof s=="string"?n=s:t===1?n=s.one:n=s.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function lp(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const fB={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},pB={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},mB={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},gB={date:lp({formats:fB,defaultWidth:"full"}),time:lp({formats:pB,defaultWidth:"full"}),dateTime:lp({formats:mB,defaultWidth:"full"})},yB={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},vB=(e,t,r,n)=>yB[e];function Vo(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let s;if(n==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=r!=null&&r.width?String(r.width):o;s=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=r!=null&&r.width?String(r.width):e.defaultWidth;s=e.values[l]||e.values[o]}const a=e.argumentCallback?e.argumentCallback(t):t;return s[a]}}const xB={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},bB={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},wB={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},NB={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},jB={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},SB={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},kB=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},CB={ordinalNumber:kB,era:Vo({values:xB,defaultWidth:"wide"}),quarter:Vo({values:bB,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Vo({values:wB,defaultWidth:"wide"}),day:Vo({values:NB,defaultWidth:"wide"}),dayPeriod:Vo({values:jB,defaultWidth:"wide",formattingValues:SB,defaultFormattingWidth:"wide"})};function Ho(e){return(t,r={})=>{const n=r.width,s=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],a=t.match(s);if(!a)return null;const o=a[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?EB(l,h=>h.test(o)):PB(l,h=>h.test(o));let d;d=e.valueCallback?e.valueCallback(c):c,d=r.valueCallback?r.valueCallback(d):d;const u=t.slice(o.length);return{value:d,rest:u}}}function PB(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function EB(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function _B(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const s=n[0],a=t.match(e.parsePattern);if(!a)return null;let o=e.valueCallback?e.valueCallback(a[0]):a[0];o=r.valueCallback?r.valueCallback(o):o;const l=t.slice(s.length);return{value:o,rest:l}}}const TB=/^(\d+)(th|st|nd|rd)?/i,RB=/\d+/i,FB={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},MB={any:[/^b/i,/^(a|c)/i]},AB={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},IB={any:[/1/i,/2/i,/3/i,/4/i]},OB={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},DB={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},LB={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},$B={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},UB={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},zB={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},BB={ordinalNumber:_B({matchPattern:TB,parsePattern:RB,valueCallback:e=>parseInt(e,10)}),era:Ho({matchPatterns:FB,defaultMatchWidth:"wide",parsePatterns:MB,defaultParseWidth:"any"}),quarter:Ho({matchPatterns:AB,defaultMatchWidth:"wide",parsePatterns:IB,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Ho({matchPatterns:OB,defaultMatchWidth:"wide",parsePatterns:DB,defaultParseWidth:"any"}),day:Ho({matchPatterns:LB,defaultMatchWidth:"wide",parsePatterns:$B,defaultParseWidth:"any"}),dayPeriod:Ho({matchPatterns:UB,defaultMatchWidth:"any",parsePatterns:zB,defaultParseWidth:"any"})},VB={code:"en-US",formatDistance:hB,formatLong:gB,formatRelative:vB,localize:CB,match:BB,options:{weekStartsOn:0,firstWeekContainsDate:1}};function HB(e,t,r){const n=tB(),s=(r==null?void 0:r.locale)??n.locale??VB,a=2520,o=tu(e,t);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:o});let c,d;o>0?(c=ct(t),d=ct(e)):(c=ct(e),d=ct(t));const u=dB(d,c),h=(ew(d)-ew(c))/1e3,p=Math.round((u-h)/60);let m;if(p<2)return r!=null&&r.includeSeconds?u<5?s.formatDistance("lessThanXSeconds",5,l):u<10?s.formatDistance("lessThanXSeconds",10,l):u<20?s.formatDistance("lessThanXSeconds",20,l):u<40?s.formatDistance("halfAMinute",0,l):u<60?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",1,l):p===0?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",p,l);if(p<45)return s.formatDistance("xMinutes",p,l);if(p<90)return s.formatDistance("aboutXHours",1,l);if(p<Zb){const x=Math.round(p/60);return s.formatDistance("aboutXHours",x,l)}else{if(p<a)return s.formatDistance("xDays",1,l);if(p<Td){const x=Math.round(p/Zb);return s.formatDistance("xDays",x,l)}else if(p<Td*2)return m=Math.round(p/Td),s.formatDistance("aboutXMonths",m,l)}if(m=cB(d,c),m<12){const x=Math.round(p/Td);return s.formatDistance("xMonths",x,l)}else{const x=m%12,y=Math.trunc(m/12);return x<3?s.formatDistance("aboutXYears",y,l):x<9?s.formatDistance("overXYears",y,l):s.formatDistance("almostXYears",y+1,l)}}function vg(e,t){return HB(e,rB(e),t)}function WB({post:e,onPlayStateChange:t}){var ye,fe,He,_e,Z;const[r,n]=f.useState(!1),[s,a]=f.useState(!1),[o,l]=f.useState(!1),[c,d]=f.useState(""),[u,h]=f.useState(!1),[p,m]=f.useState(!0),[x,y]=f.useState(!1),w=f.useRef(null),v=f.useRef(null),g=f.useRef(),{user:b}=Fe(),{toast:j}=ke(),k=Xe();f.useEffect(()=>{if(b!=null&&b.id&&(e!=null&&e.reactions)){const q=e.reactions.find(se=>se.userId===b.id);n((q==null?void 0:q.type)==="thumbs_up")}},[b==null?void 0:b.id,e==null?void 0:e.reactions]);const{data:C}=xe({queryKey:[`/api/users/${e==null?void 0:e.userId}`],enabled:!!(e!=null&&e.userId)}),{data:S=[]}=xe({queryKey:[`/api/posts/${e==null?void 0:e.id}/comments`],enabled:!!(e!=null&&e.id)&&o}),_=pe({mutationFn:async()=>{if(!b)throw new Error("User not authenticated");const q=r?"none":"thumbs_up";return ne(`/api/posts/${e.id}/reaction`,{method:"POST",body:JSON.stringify({type:q,userId:b.id})})},onSuccess:()=>{const q=!r;n(q),k.invalidateQueries({queryKey:["/api/posts"]}),j({title:q?"Liked!":"Removed like",description:q?"You liked this reel":"You removed your like from this reel"})},onError:q=>{j({title:"Error",description:q.message||"Failed to update reaction",variant:"destructive"})}}),P=pe({mutationFn:async q=>{if(!b)throw new Error("User not authenticated");return ne(`/api/posts/${e.id}/comments`,{method:"POST",body:JSON.stringify({content:q,userId:b.id})})},onSuccess:()=>{d(""),k.invalidateQueries({queryKey:[`/api/posts/${e.id}/comments`]}),k.invalidateQueries({queryKey:["/api/posts"]}),j({title:"Comment Added",description:"Your comment has been posted!"})},onError:q=>{j({title:"Error",description:q.message||"Failed to add comment",variant:"destructive"})}}),T=()=>{j({title:"Edit Video",description:"Edit functionality coming soon!"})},F=()=>{var q,se;if(w.current&&((se=(q=e==null?void 0:e.videos)==null?void 0:q[0])!=null&&se.url)){const te=document.createElement("a");te.href=e.videos[0].url,te.download=`reel-${e.id}.mp4`,document.body.appendChild(te),te.click(),document.body.removeChild(te),j({title:"Video Saved",description:"Video download started"})}},R=pe({mutationFn:async({postId:q,videoUrl:se})=>{const te=await fetch(`/api/posts/${q}/remove-video`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({videoUrl:se})});if(!te.ok)throw new Error(`Failed to remove video: ${te.statusText}`);return te.json()},onSuccess:()=>{k.invalidateQueries({queryKey:["/api/posts"]}),j({title:"Video Removed",description:"Video has been removed from the post",variant:"destructive"})}}),M=pe({mutationFn:async q=>{const se={"Content-Type":"application/json"};b&&(se["x-user-data"]=encodeURIComponent(JSON.stringify({id:b.id})));const te=await fetch(`/api/posts/${q}`,{method:"DELETE",headers:se,credentials:"include"});if(!te.ok)throw new Error(`Failed to delete post: ${te.statusText}`);return te.json()},onSuccess:()=>{k.invalidateQueries({queryKey:["/api/posts"]}),j({title:"Post Deleted",description:"Your video post has been permanently removed",variant:"destructive"})}}),I=()=>{var se;const q=(se=e==null?void 0:e.videos)==null?void 0:se[0];q&&R.mutate({postId:e.id,videoUrl:q.url})},H=()=>{M.mutate(e.id)},V=()=>{if(!b){j({title:"Login required",description:"Please log in to like posts.",variant:"destructive"});return}_.mutate()},Q=()=>{C!=null&&C.username&&(window.location.href=`/profile/${C.username}`)},A=()=>{if(w.current){const q=!u;q?(w.current.play(),h(!0)):(w.current.pause(),h(!1)),t==null||t(q)}},L=()=>{w.current&&(w.current.muted=!p,m(!p))},G=()=>{y(!0),g.current&&clearTimeout(g.current),g.current=setTimeout(()=>{y(!1)},3e3)},B=()=>{A(),G()};f.useEffect(()=>{const q=w.current;if(!q)return;const se=()=>{h(!0),t==null||t(!0)},te=()=>{h(!1),t==null||t(!1)},be=()=>m(q.muted);return q.addEventListener("play",se),q.addEventListener("pause",te),q.addEventListener("volumechange",be),()=>{q.removeEventListener("play",se),q.removeEventListener("pause",te),q.removeEventListener("volumechange",be)}},[]),f.useEffect(()=>()=>{g.current&&clearTimeout(g.current)},[]),f.useEffect(()=>{const q=new IntersectionObserver(se=>{const[te]=se;w.current&&(te.intersectionRatio>=.5&&!u?(w.current.muted=!1,m(!1),w.current.play().catch(console.log),h(!0),t==null||t(!0)):te.intersectionRatio<.5&&u&&(w.current.pause(),w.current.muted=!0,m(!0),h(!1),t==null||t(!1)))},{threshold:[.5],rootMargin:"0px"});return v.current&&q.observe(v.current),()=>{v.current&&q.unobserve(v.current)}},[u,p,t]);const X=(ye=e==null?void 0:e.videos)==null?void 0:ye[0];return!e||!X?null:i.jsxs("div",{ref:v,className:"relative w-full h-full bg-black overflow-hidden mobile-video-container",children:[i.jsxs("div",{className:"relative w-full h-full cursor-pointer",style:{width:"100vw",height:"100vh"},onClick:B,onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),children:[i.jsxs("video",{ref:w,className:"absolute inset-0 w-full h-full object-contain",style:{width:"100vw",height:"100vh",objectFit:"contain",objectPosition:"center"},poster:X.thumbnail,muted:p,loop:!0,playsInline:!0,preload:"metadata","webkit-playsinline":"true","x5-video-player-type":"h5","x5-video-player-fullscreen":"true","x5-video-orientation":"portraint","data-testid":`reel-video-${e.id}`,children:[i.jsx("source",{src:X.url,type:"video/mp4"}),"Your browser does not support the video tag."]}),i.jsx("div",{className:`absolute inset-0 flex items-center justify-center transition-opacity duration-300 ${x||!u?"opacity-100":"opacity-0"}`,children:!u&&i.jsx("div",{className:"bg-black/50 rounded-full p-4 backdrop-blur-sm",children:i.jsx(Ll,{className:"w-12 h-12 text-white fill-white"})})})]}),i.jsxs("div",{className:"absolute right-3 bottom-20 flex flex-col gap-4 z-30",children:[i.jsxs("div",{className:"flex flex-col items-center gap-1",children:[i.jsx(z,{onClick:V,disabled:_.isPending,variant:"ghost",size:"sm",className:"h-12 w-12 p-0 bg-black/30 hover:bg-black/50 text-white rounded-full backdrop-blur-sm","data-testid":`button-like-reel-${e.id}`,children:i.jsx(Tj,{className:`w-6 h-6 ${r?"text-frhigh-green fill-frhigh-green":"text-white"}`})}),(e.thumbsUpCount||0)>0&&i.jsx("span",{className:"text-white text-xs font-medium",children:e.thumbsUpCount||0})]}),i.jsxs("div",{className:"flex flex-col items-center gap-1",children:[i.jsx(z,{variant:"ghost",size:"sm",className:"h-12 w-12 p-0 bg-black/30 hover:bg-black/50 text-white rounded-full backdrop-blur-sm","data-testid":`button-comment-reel-${e.id}`,onClick:()=>{l(!o)},children:i.jsx(jm,{className:"w-6 h-6"})}),(e.commentsCount||0)>0&&i.jsx("span",{className:"text-white text-xs font-medium",children:e.commentsCount||0})]}),i.jsxs(On,{open:s,onOpenChange:a,children:[i.jsx(Dn,{asChild:!0,children:i.jsx(z,{variant:"ghost",size:"sm",className:"h-12 w-12 p-0 bg-black/30 hover:bg-black/50 text-white rounded-full backdrop-blur-sm","data-testid":`button-reel-menu-${e.id}`,children:i.jsx(An,{className:"w-6 h-6"})})}),i.jsxs(pn,{align:"end",className:"bg-frhigh-dark-secondary border-frhigh-dark-tertiary",children:[i.jsxs(Pe,{onClick:T,className:"text-white hover:bg-frhigh-dark-tertiary cursor-pointer","data-testid":`menu-edit-reel-${e.id}`,children:[i.jsx(In,{className:"w-4 h-4 mr-2"}),"Edit"]}),i.jsxs(Pe,{onClick:F,className:"text-white hover:bg-frhigh-dark-tertiary cursor-pointer","data-testid":`menu-save-reel-${e.id}`,children:[i.jsx(co,{className:"w-4 h-4 mr-2"}),"Save"]}),i.jsxs(Pe,{onClick:I,className:"text-red-400 hover:bg-red-900/20 cursor-pointer","data-testid":`menu-remove-reel-${e.id}`,children:[i.jsx(Ir,{className:"w-4 h-4 mr-2"}),"Remove Video"]}),i.jsxs(Pe,{onClick:H,className:"text-red-500 hover:bg-red-900/30 cursor-pointer border-t border-red-900/20","data-testid":`menu-delete-reel-post-${e.id}`,children:[i.jsx(Ir,{className:"w-4 h-4 mr-2"}),"Delete Post"]})]})]})]}),i.jsx("div",{className:"absolute top-4 right-4 z-30",children:i.jsx(z,{onClick:L,variant:"ghost",size:"sm",className:"h-10 w-10 p-0 bg-black/30 hover:bg-black/50 text-white rounded-full backdrop-blur-sm","data-testid":`button-mute-reel-${e.id}`,children:p?i.jsx(Fj,{className:"w-5 h-5"}):i.jsx(Rj,{className:"w-5 h-5"})})}),i.jsx("div",{className:"absolute bottom-0 left-0 right-16 bg-gradient-to-t from-black/90 via-black/60 to-transparent pointer-events-none z-10",children:i.jsxs("div",{className:"p-4 pb-6 pointer-events-auto",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-3 cursor-pointer hover:opacity-80 transition-opacity",onClick:Q,"data-testid":`user-profile-${e.id}`,children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-frhigh-green/20 border-2 border-frhigh-green flex items-center justify-center flex-shrink-0",children:C!=null&&C.avatar?i.jsx("img",{src:C.avatar,alt:C.displayName,className:"w-full h-full rounded-full object-cover"}):i.jsx("span",{className:"text-frhigh-green font-semibold text-lg",children:((He=(fe=C==null?void 0:C.displayName)==null?void 0:fe[0])==null?void 0:He.toUpperCase())||"U"})}),i.jsxs("div",{className:"min-w-0 flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:"text-white font-semibold text-base truncate","data-testid":`reel-username-${e.id}`,children:["@",(C==null?void 0:C.username)||"Loading..."]}),(C==null?void 0:C.isVerified)&&i.jsx("i",{className:"fas fa-cannabis text-frhigh-green text-sm flex-shrink-0",title:"Verified Cannabis Enthusiast"})]}),i.jsx("span",{className:"text-gray-300 text-sm",children:vg(new Date((e==null?void 0:e.createdAt)||Date.now()),{addSuffix:!0})})]})]}),(X.title||(e==null?void 0:e.content))&&i.jsxs("div",{className:"mb-3",children:[X.title&&i.jsx("h3",{className:"text-white font-semibold text-lg mb-1 line-clamp-2","data-testid":`reel-title-${e.id}`,children:X.title}),(e==null?void 0:e.content)&&i.jsx("p",{className:"text-white text-sm mb-2 line-clamp-3","data-testid":`reel-content-${e.id}`,children:e.content})]}),(e==null?void 0:e.hashtags)&&e.hashtags.length>0&&i.jsxs("div",{className:"flex flex-wrap gap-1 mb-2",children:[e.hashtags.slice(0,3).map(q=>i.jsxs("span",{className:"text-frhigh-green text-sm font-medium",children:["#",q]},q)),e.hashtags.length>3&&i.jsxs("span",{className:"text-frhigh-green text-sm",children:["+",e.hashtags.length-3," more"]})]})]})}),o&&i.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-end",children:i.jsxs("div",{className:"w-full bg-frhigh-dark-primary rounded-t-3xl max-h-[70vh] flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-frhigh-dark-tertiary",children:[i.jsx("h3",{className:"text-white font-semibold text-lg",children:"Comments"}),i.jsx(z,{variant:"ghost",size:"sm",onClick:()=>l(!1),className:"text-white hover:bg-frhigh-dark-secondary","data-testid":`button-close-comments-${e.id}`,children:i.jsx($r,{className:"w-5 h-5"})})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:S.length===0?i.jsxs("div",{className:"text-center text-gray-400 py-8",children:[i.jsx(jm,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),i.jsx("p",{children:"No comments yet. Be the first to comment!"})]}):S.map(q=>{var se,te,be,Ne;return i.jsxs("div",{className:"flex gap-3","data-testid":`comment-${q.id}`,children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-frhigh-green/20 border border-frhigh-green flex items-center justify-center flex-shrink-0",children:i.jsx("span",{className:"text-frhigh-green font-medium text-sm",children:((be=(te=(se=q.user)==null?void 0:se.username)==null?void 0:te[0])==null?void 0:be.toUpperCase())||"U"})}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsxs("span",{className:"text-white font-medium text-sm",children:["@",((Ne=q.user)==null?void 0:Ne.username)||"Unknown"]}),i.jsx("span",{className:"text-gray-400 text-xs",children:vg(new Date(q.createdAt),{addSuffix:!0})})]}),i.jsx("p",{className:"text-gray-200 text-sm",children:q.content})]})]},q.id)})}),i.jsx("div",{className:"p-4 border-t border-frhigh-dark-tertiary",children:i.jsxs("div",{className:"flex gap-3",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-frhigh-green/20 border border-frhigh-green flex items-center justify-center flex-shrink-0",children:i.jsx("span",{className:"text-frhigh-green font-medium text-sm",children:((Z=(_e=b==null?void 0:b.username)==null?void 0:_e[0])==null?void 0:Z.toUpperCase())||"U"})}),i.jsx("div",{className:"flex-1",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"text",value:c,onChange:q=>d(q.target.value),placeholder:"Add a comment...",className:"flex-1 bg-frhigh-dark-secondary border border-frhigh-dark-tertiary rounded-full px-4 py-2 text-white placeholder-gray-400 text-sm focus:outline-none focus:border-frhigh-green","data-testid":`input-new-comment-${e.id}`,onKeyPress:q=>{q.key==="Enter"&&c.trim()&&P.mutate(c.trim())}}),i.jsx(z,{onClick:()=>{c.trim()&&P.mutate(c.trim())},disabled:!c.trim()||P.isPending,size:"sm",className:"bg-frhigh-green hover:bg-frhigh-green/80 text-white px-4 rounded-full","data-testid":`button-post-comment-${e.id}`,children:P.isPending?i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):i.jsx(Nh,{className:"w-4 h-4"})})]})})]})})]})})]})}function qB({className:e=""}){const[t,r]=f.useState(0),[n,s]=f.useState(!1),[a,o]=f.useState(!0),l=f.useRef(null),c=f.useRef(0),d=f.useRef(0),{setNavigationVisible:u}=xS(),{data:h=[],isLoading:p}=xe({queryKey:["/api/posts"],select:b=>b.filter(j=>j.videos&&j.videos.length>0)});f.useEffect(()=>{u(!a)},[a,u]),f.useEffect(()=>(u(!1),()=>{u(!0)}),[u]);const m=b=>{if(n||!l.current)return;s(!0),r(b);const j=l.current,k=b*j.clientHeight;j.scrollTo({top:k,behavior:"smooth"}),setTimeout(()=>s(!1),600)},x=()=>{t<h.length-1&&m(t+1)},y=()=>{t>0&&m(t-1)},w=b=>{c.current=b.targetTouches[0].clientY,d.current=b.targetTouches[0].clientY},v=b=>{d.current=b.targetTouches[0].clientY,b.preventDefault()},g=()=>{if(!c.current||!d.current)return;const b=c.current-d.current;Math.abs(b)>30&&!n&&(b>0?x():y()),c.current=0,d.current=0};return f.useEffect(()=>{const b=j=>{j.key==="ArrowDown"||j.key===" "?(j.preventDefault(),x()):j.key==="ArrowUp"&&(j.preventDefault(),y())};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[t,h.length]),f.useEffect(()=>{const b=l.current;if(!b)return;const j=()=>{if(n)return;const k=b.scrollTop,C=b.clientHeight,S=Math.round(k/C);S!==t&&S>=0&&S<h.length&&r(S)};return b.addEventListener("scroll",j),()=>b.removeEventListener("scroll",j)},[t,h.length,n]),p?i.jsx("div",{className:"flex items-center justify-center h-screen bg-frhigh-dark",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-frhigh-green mx-auto mb-4"}),i.jsx("p",{className:"text-white text-lg",children:"Loading Reels..."})]})}):h.length===0?i.jsx("div",{className:"flex items-center justify-center h-screen bg-frhigh-dark",children:i.jsxs("div",{className:"text-center",children:[i.jsx("i",{className:"fas fa-video text-6xl text-gray-500 mb-4"}),i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"No Reels Yet"}),i.jsx("p",{className:"text-gray-400",children:"Be the first to share a video reel!"})]})}):i.jsxs("div",{className:`relative h-screen bg-black overflow-hidden ${e}`,children:[i.jsx("div",{ref:l,className:"h-full overflow-y-scroll snap-y snap-mandatory scrollbar-hide",onTouchStart:w,onTouchMove:v,onTouchEnd:g,style:{scrollSnapType:"y mandatory",WebkitOverflowScrolling:"touch",touchAction:"pan-y"},children:h.map((b,j)=>i.jsx("div",{className:"h-screen w-full snap-start snap-always flex items-center justify-center relative mobile-video-container","data-testid":`reel-container-${j}`,children:i.jsx(WB,{post:b,onPlayStateChange:k=>o(k)})},b.id))}),i.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 flex flex-col gap-2 z-50",children:h.map((b,j)=>i.jsx("div",{className:`w-1 h-8 rounded-full transition-all duration-300 ${j===t?"bg-frhigh-green":j<t?"bg-frhigh-green/50":"bg-white/30"}`,"data-testid":`reel-progress-${j}`},j))}),i.jsx("div",{className:"absolute bottom-4 left-4 right-4 text-center z-50",children:i.jsxs("p",{className:"text-white/70 text-sm",children:[t+1," of ",h.length," reels"]})})]})}function KB(){return i.jsxs("div",{className:"min-h-screen bg-frhigh-dark",children:[i.jsx(Ic,{}),i.jsx(Ui,{}),i.jsx(zi,{}),i.jsx("main",{className:"lg:ml-64 pb-20 lg:pb-0",children:i.jsx(qB,{className:"w-full h-screen"})})]})}function GB(){const[e,t]=f.useState(""),[r,n]=f.useState(!1),{toast:s}=ke(),a=pe({mutationFn:async l=>(await ne("POST","/api/auth/forgot-password",{email:l})).json(),onSuccess:()=>{n(!0),s({title:"Reset link sent!",description:"Check your email for password reset instructions."})},onError:l=>{s({title:"Error",description:l.message||"Failed to send reset email. Please try again.",variant:"destructive"})}}),o=l=>{if(l.preventDefault(),!e.trim()){s({title:"Email required",description:"Please enter your email address.",variant:"destructive"});return}a.mutate(e)};return r?i.jsx("div",{className:"min-h-screen bg-frhigh-dark flex items-center justify-center p-4",children:i.jsxs("div",{className:"w-full max-w-md space-y-8",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-20 h-20 bg-frhigh-green rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx("i",{className:"fas fa-check text-frhigh-dark text-3xl"})}),i.jsx("h2",{className:"text-3xl font-bold text-white",children:"Check Your Email"}),i.jsx("p",{className:"text-gray-400 mt-2",children:"We've sent password reset instructions to your email address."})]}),i.jsxs("div",{className:"bg-frhigh-dark-secondary border border-frhigh-dark-tertiary rounded-lg p-6",children:[i.jsx("p",{className:"text-white text-sm mb-4",children:"If you don't see the email, check your spam folder or try again with a different email address."}),i.jsx(cr,{href:"/",children:i.jsx(z,{className:"w-full bg-frhigh-green hover:bg-frhigh-green-light text-frhigh-dark font-semibold",children:"Back to Login"})})]})]})}):i.jsx("div",{className:"min-h-screen bg-frhigh-dark flex items-center justify-center p-4",children:i.jsxs("div",{className:"w-full max-w-md space-y-8",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-20 h-20 bg-frhigh-green rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx("i",{className:"fas fa-key text-frhigh-dark text-3xl"})}),i.jsx("h2",{className:"text-3xl font-bold text-white",children:"Reset Password"}),i.jsx("p",{className:"text-gray-400 mt-2",children:"Enter your email to receive reset instructions"})]}),i.jsxs("form",{onSubmit:o,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-white text-sm font-medium mb-2 block",children:"Email Address"}),i.jsx(le,{type:"email",value:e,onChange:l=>t(l.target.value),placeholder:"your@email.com",className:"bg-frhigh-dark-secondary border-frhigh-dark-tertiary text-white","data-testid":"input-forgot-email"})]}),i.jsx(z,{type:"submit",disabled:a.isPending,className:"w-full bg-frhigh-green hover:bg-frhigh-green-light text-frhigh-dark font-semibold py-3","data-testid":"button-send-reset",children:a.isPending?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-frhigh-dark mr-2"}),"Sending..."]}):"Send Reset Link"}),i.jsx("div",{className:"text-center",children:i.jsx(cr,{href:"/",children:i.jsx("button",{className:"text-frhigh-green hover:text-frhigh-green-light font-medium text-sm",children:"Back to Login"})})})]})]})})}function QB(){const[,e]=kc(),[t,r]=f.useState({password:"",confirmPassword:""}),[n,s]=f.useState(!1),[a,o]=f.useState(!1),[l,c]=f.useState(""),[d,u]=f.useState(!1),{toast:h}=ke();f.useEffect(()=>{const g=new URLSearchParams(window.location.search).get("token");g?(c(g),p.mutate(g)):(h({title:"Invalid reset link",description:"This password reset link is invalid or expired.",variant:"destructive"}),setTimeout(()=>e("/"),3e3))},[]);const p=pe({mutationFn:async v=>(await ne("POST","/api/auth/verify-reset-token",{token:v})).json(),onSuccess:()=>{u(!0)},onError:()=>{h({title:"Invalid reset link",description:"This password reset link is invalid or expired.",variant:"destructive"}),setTimeout(()=>e("/"),3e3)}}),m=pe({mutationFn:async v=>(await ne("POST","/api/auth/reset-password",v)).json(),onSuccess:()=>{h({title:"Password reset successful!",description:"You can now log in with your new password."}),setTimeout(()=>e("/"),2e3)},onError:v=>{h({title:"Reset failed",description:v.message||"Failed to reset password. Please try again.",variant:"destructive"})}}),x=()=>t.password?t.password.length<6?(h({title:"Password too short",description:"Password must be at least 6 characters long.",variant:"destructive"}),!1):t.password!==t.confirmPassword?(h({title:"Passwords don't match",description:"Please make sure both passwords match.",variant:"destructive"}),!1):!0:(h({title:"Password required",description:"Please enter a new password.",variant:"destructive"}),!1),y=v=>{v.preventDefault(),x()&&m.mutate({token:l,password:t.password})},w=(v,g)=>{r(b=>({...b,[v]:g}))};return!d&&!p.isPending?i.jsx("div",{className:"min-h-screen bg-frhigh-dark flex items-center justify-center p-4",children:i.jsx("div",{className:"w-full max-w-md space-y-8",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-20 h-20 bg-red-500 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx("i",{className:"fas fa-times text-white text-3xl"})}),i.jsx("h2",{className:"text-3xl font-bold text-white",children:"Invalid Link"}),i.jsx("p",{className:"text-gray-400 mt-2",children:"This password reset link is invalid or has expired."}),i.jsx(cr,{href:"/",children:i.jsx(z,{className:"mt-4 bg-frhigh-green hover:bg-frhigh-green-light text-frhigh-dark font-semibold",children:"Back to Login"})})]})})}):p.isPending?i.jsx("div",{className:"min-h-screen bg-frhigh-dark flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-frhigh-green mx-auto mb-4"}),i.jsx("p",{className:"text-white",children:"Verifying reset link..."})]})}):i.jsx("div",{className:"min-h-screen bg-frhigh-dark flex items-center justify-center p-4",children:i.jsxs("div",{className:"w-full max-w-md space-y-8",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-20 h-20 bg-frhigh-green rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx("i",{className:"fas fa-lock text-frhigh-dark text-3xl"})}),i.jsx("h2",{className:"text-3xl font-bold text-white",children:"Set New Password"}),i.jsx("p",{className:"text-gray-400 mt-2",children:"Choose a strong password for your account"})]}),i.jsxs("form",{onSubmit:y,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-white text-sm font-medium mb-2 block",children:"New Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(le,{type:n?"text":"password",value:t.password,onChange:v=>w("password",v.target.value),placeholder:"Enter new password",className:"bg-frhigh-dark-secondary border-frhigh-dark-tertiary text-white pr-10","data-testid":"input-new-password"}),i.jsx("button",{type:"button",onClick:()=>s(!n),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white transition-colors","data-testid":"button-toggle-password",children:n?i.jsx(Ol,{className:"h-4 w-4"}):i.jsx(Dl,{className:"h-4 w-4"})})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-white text-sm font-medium mb-2 block",children:"Confirm New Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(le,{type:a?"text":"password",value:t.confirmPassword,onChange:v=>w("confirmPassword",v.target.value),placeholder:"Confirm new password",className:"bg-frhigh-dark-secondary border-frhigh-dark-tertiary text-white pr-10","data-testid":"input-confirm-password"}),i.jsx("button",{type:"button",onClick:()=>o(!a),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white transition-colors","data-testid":"button-toggle-confirm-password",children:a?i.jsx(Ol,{className:"h-4 w-4"}):i.jsx(Dl,{className:"h-4 w-4"})})]})]}),i.jsx(z,{type:"submit",disabled:m.isPending,className:"w-full bg-frhigh-green hover:bg-frhigh-green-light text-frhigh-dark font-semibold py-3","data-testid":"button-reset-password",children:m.isPending?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-frhigh-dark mr-2"}),"Resetting..."]}):"Reset Password"}),i.jsx("div",{className:"text-center",children:i.jsx(cr,{href:"/",children:i.jsx("button",{className:"text-frhigh-green hover:text-frhigh-green-light font-medium text-sm",children:"Back to Login"})})})]})]})})}const YB=_c("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),xg=f.forwardRef(({className:e,variant:t,...r},n)=>i.jsx("div",{ref:n,role:"alert",className:re(YB({variant:t}),e),...r}));xg.displayName="Alert";const XB=f.forwardRef(({className:e,...t},r)=>i.jsx("h5",{ref:r,className:re("mb-1 font-medium leading-none tracking-tight",e),...t}));XB.displayName="AlertTitle";const bg=f.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:re("text-sm [&_p]:leading-relaxed",e),...t}));bg.displayName="AlertDescription";function JB(){const[e,t]=f.useState(!1),[r,n]=f.useState([]),[s,a]=f.useState(!1),o=async()=>{t(!0);const d=[];try{try{localStorage.setItem("test","1"),localStorage.removeItem("test"),d.push({name:"Local Storage",status:"pass",message:"localStorage is available and working"})}catch{d.push({name:"Local Storage",status:"fail",message:"localStorage is not available or blocked"})}try{sessionStorage.setItem("test","1"),sessionStorage.removeItem("test"),d.push({name:"Session Storage",status:"pass",message:"sessionStorage is available and working"})}catch{d.push({name:"Session Storage",status:"fail",message:"sessionStorage is not available or blocked"})}const u=localStorage.getItem("frhighday_auth_last_failure"),h=localStorage.getItem("frhighday_auth_initializing");u||h?d.push({name:"Authentication Flags",status:"warning",message:"Authentication blocking flags detected - these may cause white screens"}):d.push({name:"Authentication Flags",status:"pass",message:"No authentication blocking flags detected"});const p=localStorage.getItem("frhighday_persistent_session"),m=sessionStorage.getItem("frhighday_temp_session");p||m?d.push({name:"Stored Sessions",status:"pass",message:"User session data found in storage"}):d.push({name:"Stored Sessions",status:"warning",message:"No user session data found - you may need to log in again"});const x=localStorage.getItem("frhighday_white_screen_fix_applied");if(x){const y=new Date(parseInt(x));d.push({name:"White Screen Fix",status:"pass",message:`Auto-fix applied at ${y.toLocaleString()}`})}else d.push({name:"White Screen Fix",status:"pass",message:"No recent white screen fixes needed"});try{const y=await fetch("/api/app/version");y.ok?d.push({name:"Server Connection",status:"pass",message:"Server is reachable and responding"}):d.push({name:"Server Connection",status:"warning",message:`Server responded with status ${y.status}`})}catch{d.push({name:"Server Connection",status:"fail",message:"Cannot reach server - check your internet connection"})}n(d)}catch(u){console.error("Health check failed:",u),n([{name:"Health Check",status:"fail",message:"Health check system failed to run"}])}t(!1)},l=async()=>{a(!0);try{localStorage.removeItem("frhighday_auth_last_failure"),localStorage.removeItem("frhighday_auth_initializing"),localStorage.setItem("frhighday_white_screen_fix_applied",Date.now().toString()),window.confirm("Auto-fix will clear potentially corrupted data and reload the page. Continue?")&&(localStorage.removeItem("frhighday_persistent_session"),sessionStorage.removeItem("frhighday_temp_session"),window.location.reload())}catch(d){console.error("Auto-fix failed:",d),alert("Auto-fix failed. Try refreshing the page manually.")}a(!1)},c=async()=>{if(window.confirm("This will clear ALL app data and require you to log in again. Continue?"))try{Object.keys(localStorage).forEach(u=>{u.startsWith("frhighday")&&localStorage.removeItem(u)}),Object.keys(sessionStorage).forEach(u=>{u.startsWith("frhighday")&&sessionStorage.removeItem(u)}),window.location.href="/"}catch(u){console.error("Data clearing failed:",u),alert("Data clearing failed. Try clearing browser cache manually.")}};return i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsx("div",{className:"max-w-2xl mx-auto",children:i.jsxs(ae,{children:[i.jsxs(Ee,{children:[i.jsxs(Te,{className:"flex items-center gap-2",children:[i.jsx(Fs,{className:"h-6 w-6"}),"App Health Check"]}),i.jsx(Is,{children:"Diagnose and fix white screen issues and other app problems"})]}),i.jsxs(oe,{className:"space-y-4",children:[i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsx(z,{onClick:o,disabled:e,className:"bg-frhigh-green hover:bg-frhigh-green/80 text-frhigh-dark",children:e?i.jsxs(i.Fragment,{children:[i.jsx(Ms,{className:"h-4 w-4 mr-2 animate-spin"}),"Checking..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Fs,{className:"h-4 w-4 mr-2"}),"Run Health Check"]})}),i.jsx(z,{onClick:l,disabled:s,variant:"outline",className:"border-orange-500 text-orange-500 hover:bg-orange-500 hover:text-white",children:s?i.jsxs(i.Fragment,{children:[i.jsx(Ms,{className:"h-4 w-4 mr-2 animate-spin"}),"Applying Fix..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Ms,{className:"h-4 w-4 mr-2"}),"Auto-Fix White Screen"]})}),i.jsxs(z,{onClick:c,variant:"destructive",children:[i.jsx(Ir,{className:"h-4 w-4 mr-2"}),"Clear All Data"]})]}),r.length>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Check Results:"}),r.map((d,u)=>i.jsxs(xg,{className:d.status==="pass"?"border-green-500":d.status==="warning"?"border-orange-500":"border-red-500",children:[d.status==="pass"?i.jsx(Fs,{className:"h-4 w-4 text-green-500"}):i.jsx(_u,{className:"h-4 w-4 text-orange-500"}),i.jsxs(bg,{children:[i.jsxs("strong",{children:[d.name,":"]})," ",d.message]})]},u))]}),i.jsxs(xg,{className:"border-blue-500",children:[i.jsx(_u,{className:"h-4 w-4 text-blue-500"}),i.jsxs(bg,{children:[i.jsx("strong",{children:"If you're experiencing white screens:"}),i.jsx("br",{}),'1. Try "Auto-Fix White Screen" first',i.jsx("br",{}),`2. If that doesn't work, use "Clear All Data" (you'll need to log in again)`,i.jsx("br",{}),"3. If problems persist, try refreshing your browser or clearing browser cache"]})]})]})]})})})}async function ZB(){if(window.Capacitor){console.log(" Skipping service worker registration in native mobile app");return}if("serviceWorker"in navigator)try{const e=await navigator.serviceWorker.register("/sw.js");console.log("Service Worker registered successfully:",e),e.addEventListener("updatefound",()=>{const t=e.installing;t&&t.addEventListener("statechange",()=>{t.state==="installed"&&navigator.serviceWorker.controller&&console.log("New app version available")})}),e.update(),setInterval(()=>{e.update()},3e4)}catch(e){console.log("Service Worker registration failed:",e)}}async function oE(){if(window.Capacitor){console.log(" No service worker to unregister in native mobile app");return}"serviceWorker"in navigator&&(await navigator.serviceWorker.getRegistrations()).forEach(t=>t.unregister())}async function lE(){if(window.Capacitor){console.log(" No browser caches to clear in native mobile app");return}if("caches"in window){const e=await caches.keys();await Promise.all(e.map(t=>caches.delete(t)))}}const e9=Object.freeze(Object.defineProperty({__proto__:null,clearAllCaches:lE,registerServiceWorker:ZB,unregisterServiceWorker:oE},Symbol.toStringTag,{value:"Module"}));function t9(){var s,a;const e=[],t=(a=(s=document.body)==null?void 0:s.textContent)==null?void 0:a.trim();(!t||t.length<100)&&e.push("white-screen");const r=localStorage.getItem("frhighday-last-update");if(r){const o=parseInt(r);(Date.now()-o)/(1e3*60*60*24)>7&&e.push("stale-cache")}return localStorage.getItem("frhighday-auth-blocking")==="true"&&e.push("auth-blocking"),"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(o=>{o.length>1&&e.push("multiple-sw")}),e}const Xi=[{id:"clear-auth-flags",name:"Clear Authentication Blocks",description:"Removes authentication blocking flags that prevent login",severity:"low",action:async()=>{try{return localStorage.removeItem("frhighday-auth-blocking"),localStorage.removeItem("frhighday-login-failed"),sessionStorage.removeItem("auth-error"),!0}catch{return!1}}},{id:"clear-local-storage",name:"Clear App Storage",description:"Removes stored app data and preferences (keeps login)",severity:"medium",action:async()=>{try{const e=["currentUser","frhighday-user-session"],t={...localStorage};return localStorage.clear(),e.forEach(r=>{t[r]&&localStorage.setItem(r,t[r])}),!0}catch{return!1}}},{id:"clear-session-storage",name:"Clear Session Data",description:"Removes temporary session data",severity:"low",action:async()=>{try{return sessionStorage.clear(),!0}catch{return!1}}},{id:"clear-service-worker",name:"Reset Service Worker",description:"Unregisters and clears service worker cache",severity:"high",action:async()=>{try{return await oE(),await lE(),!0}catch{return!1}}},{id:"force-reload",name:"Force Page Reload",description:"Performs a hard refresh of the page",severity:"medium",action:async()=>{try{return localStorage.setItem("frhighday-recovery-reload","true"),window.location.reload?window.location.reload():window.location.href=window.location.href,!0}catch{return!1}}}];async function r9(){const e=t9(),t=[];let r=!1;if(console.log(" Starting automated recovery. Issues detected:",e),e.length===0)return{success:!0,actionsPerformed:[],message:"No issues detected - app appears to be working normally"};for(const n of e)switch(n){case"auth-blocking":const s=Xi.find(d=>d.id==="clear-auth-flags");s&&await s.action()&&(t.push(s.name),r=!0);break;case"stale-cache":const a=Xi.filter(d=>["clear-service-worker","clear-local-storage"].includes(d.id));for(const d of a)await d.action()&&(t.push(d.name),r=!0);break;case"white-screen":const o=Xi.filter(d=>d.id!=="force-reload");for(const d of o)await d.action()&&(t.push(d.name),r=!0);const l=Xi.find(d=>d.id==="force-reload");l&&(setTimeout(()=>l.action(),1e3),t.push(l.name),r=!0);break;case"multiple-sw":const c=Xi.find(d=>d.id==="clear-service-worker");c&&await c.action()&&(t.push(c.name),r=!0);break}return localStorage.setItem("frhighday-last-recovery",Date.now().toString()),{success:r,actionsPerformed:t,message:r?`Recovery completed: ${t.join(", ")}`:"Recovery attempted but issues may persist"}}function cp({variant:e="button",className:t=""}){const[r,n]=f.useState(!1),[s,a]=f.useState(!1),[o,l]=f.useState(null),c=async()=>{a(!0),l(null);try{const p=await r9();l(p),p.success&&p.actionsPerformed.length>0&&setTimeout(()=>{window.location.reload()},3e3)}catch{l({success:!1,actionsPerformed:[],message:"Recovery failed due to an error"})}finally{a(!1)}},d=async p=>{a(!0);try{const m=await p.action();l({success:m,actionsPerformed:m?[p.name]:[],message:m?`${p.name} completed successfully`:`${p.name} failed to complete`})}catch{l({success:!1,actionsPerformed:[],message:`Error performing ${p.name}`})}finally{a(!1)}},u=()=>i.jsx(z,{onClick:()=>n(!0),className:`fixed bottom-4 right-4 z-50 rounded-full w-12 h-12 p-0 bg-red-600 hover:bg-red-700 text-white shadow-lg ${t}`,"data-testid":"floating-recovery-button",title:"Fix App Issues",children:i.jsx(fl,{className:"w-6 h-6"})}),h=()=>i.jsxs(z,{onClick:()=>n(!0),variant:"outline",className:`border-red-500 text-red-500 hover:bg-red-50 dark:hover:bg-red-950 ${t}`,"data-testid":"recovery-button",children:[i.jsx(fl,{className:"w-4 h-4 mr-2"}),"Fix App Issues"]});return i.jsxs(i.Fragment,{children:[e==="floating"?i.jsx(u,{}):i.jsx(h,{}),i.jsx(dr,{open:r,onOpenChange:n,children:i.jsxs(qt,{className:"bg-frhigh-dark border-frhigh-dark-tertiary max-w-md mx-auto",children:[i.jsxs(ur,{children:[i.jsxs(hr,{className:"text-center text-white flex items-center justify-center gap-2",children:[i.jsx(uR,{className:"w-5 h-5"}),"App Recovery Center"]}),i.jsx(Wn,{className:"text-center text-gray-400",children:"Fix common app issues without clearing browser history"})]}),i.jsxs("div",{className:"space-y-4",children:[o&&i.jsxs("div",{className:`p-3 rounded-lg border ${o.success?"bg-green-900/20 border-green-500/50 text-green-300":"bg-red-900/20 border-red-500/50 text-red-300"}`,children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.success?i.jsx(Fs,{className:"w-4 h-4"}):i.jsx(X5,{className:"w-4 h-4"}),i.jsx("span",{className:"font-medium text-sm",children:o.success?"Recovery Successful":"Recovery Issue"})]}),i.jsx("p",{className:"text-xs",children:o.message}),o.actionsPerformed.length>0&&i.jsxs("div",{className:"mt-2",children:[i.jsx("p",{className:"text-xs font-medium mb-1",children:"Actions Performed:"}),i.jsx("ul",{className:"text-xs space-y-1",children:o.actionsPerformed.map((p,m)=>i.jsxs("li",{className:"flex items-center gap-1",children:[i.jsx(Fs,{className:"w-3 h-3"}),p]},m))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"text-white font-medium text-sm",children:"Quick Fix (Recommended)"}),i.jsx(z,{onClick:c,disabled:s,className:"w-full bg-frhigh-green text-frhigh-dark hover:bg-frhigh-green-light font-medium","data-testid":"button-auto-recovery",children:s?i.jsxs(i.Fragment,{children:[i.jsx(Ms,{className:"w-4 h-4 mr-2 animate-spin"}),"Fixing Issues..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Ms,{className:"w-4 h-4 mr-2"}),"Auto-Fix App Issues"]})}),i.jsx("p",{className:"text-xs text-gray-400",children:"Automatically detects and fixes common problems. Safe and won't delete your data."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"text-white font-medium text-sm",children:"Manual Options"}),i.jsx("div",{className:"space-y-1",children:Xi.map(p=>i.jsxs("div",{className:"flex items-center justify-between p-2 bg-frhigh-dark-tertiary rounded",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-white text-xs font-medium truncate",children:p.name}),i.jsx("p",{className:"text-gray-400 text-xs truncate",children:p.description})]}),i.jsx(z,{onClick:()=>d(p),disabled:s,size:"sm",variant:"outline",className:"ml-2 border-gray-600 text-gray-300 hover:text-white hover:bg-gray-700 text-xs px-2 py-1","data-testid":`button-${p.id}`,children:"Fix"})]},p.id))})]}),i.jsxs("div",{className:"space-y-2 border-t border-frhigh-dark-tertiary pt-3",children:[i.jsxs("h3",{className:"text-red-400 font-medium text-sm flex items-center gap-2",children:[i.jsx(fl,{className:"w-4 h-4"}),"Still Having Issues?"]}),i.jsxs("div",{className:"text-xs text-gray-400 space-y-2",children:[i.jsx("p",{children:"If problems persist, you may need to manually clear your browser data:"}),i.jsxs("div",{className:"bg-frhigh-dark-tertiary p-2 rounded text-xs",children:[i.jsx("p",{className:"font-medium text-white mb-1",children:"Chrome/Safari:"}),i.jsx("p",{children:"Settings  Privacy  Clear browsing data"}),i.jsx("p",{className:"font-medium text-white mb-1 mt-2",children:"Firefox:"}),i.jsx("p",{children:"Settings  Privacy  Clear Data"})]}),i.jsx("p",{className:"text-center text-gray-500",children:"Or try opening the app in an incognito/private window"})]})]})]})]})})]})}function n9(){const[e,t]=f.useState(null),r=[{id:"white-screen",question:"App shows a white or blank screen",answer:'This usually happens when the app needs to refresh its data. Use the "Auto-Fix App Issues" button below to automatically resolve this.'},{id:"wont-load",question:"App won't load or keeps crashing",answer:"Try the recovery options below. They will safely clear temporary data without losing your account or posts."},{id:"login-issues",question:"Cannot log in or keeps logging out",answer:"This is usually caused by authentication blocking. Use the automated recovery to clear these blocks."},{id:"slow-loading",question:"App is very slow or images won't load",answer:"Old cached data might be causing slowdowns. The recovery system will clear old cache files to speed things up."},{id:"install-pwa",question:"How do I install the app on my phone?",answer:"Look for the install prompt when you visit the site, or manually add it: On iPhone use Safari  Share  Add to Home Screen. On Android use Chrome  Menu ()  Add to Home Screen."}],n=[{icon:Ms,title:"Quick Fix (Try First)",description:"Automated recovery that fixes 90% of issues",action:"Use the Auto-Fix button below"},{icon:oR,title:"Try Different Browser",description:"Test if the issue is browser-specific",action:"Open the app in Chrome, Safari, or Firefox"},{icon:tR,title:"Private/Incognito Mode",description:"Temporarily bypass all cached data",action:"Open the app in a private browsing window"},{icon:Sm,title:"Mobile vs Desktop",description:"Check if the issue occurs on different devices",action:"Try on your phone if using desktop, or vice versa"}];return i.jsxs("div",{className:"min-h-screen bg-frhigh-dark",children:[i.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsxs("h1",{className:"text-3xl font-bold text-white mb-2 flex items-center justify-center gap-3",children:[i.jsx(a0,{className:"w-8 h-8 text-frhigh-green"}),"Help & Support"]}),i.jsx("p",{className:"text-gray-400",children:"Get help fixing common app issues without clearing your browser data"})]}),i.jsxs(ev,{defaultValue:"recovery",className:"space-y-6",children:[i.jsxs($h,{className:"grid w-full grid-cols-3 bg-frhigh-dark-secondary",children:[i.jsx(ln,{value:"recovery",className:"data-[state=active]:bg-frhigh-green data-[state=active]:text-frhigh-dark",children:"Quick Fix"}),i.jsx(ln,{value:"troubleshooting",className:"data-[state=active]:bg-frhigh-green data-[state=active]:text-frhigh-dark",children:"Troubleshooting"}),i.jsx(ln,{value:"faq",className:"data-[state=active]:bg-frhigh-green data-[state=active]:text-frhigh-dark",children:"FAQ"})]}),i.jsx(cn,{value:"recovery",className:"space-y-6",children:i.jsxs(ae,{className:"bg-frhigh-dark-secondary border-frhigh-dark-tertiary",children:[i.jsxs(Ee,{children:[i.jsxs(Te,{className:"text-white flex items-center gap-2",children:[i.jsx(Ms,{className:"w-5 h-5 text-frhigh-green"}),"Automatic App Recovery"]}),i.jsx(Is,{className:"text-gray-400",children:"Fix app issues instantly without losing your data or clearing browser history"})]}),i.jsxs(oe,{className:"space-y-4",children:[i.jsx("div",{className:"bg-frhigh-green/10 border border-frhigh-green/20 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(Fs,{className:"w-5 h-5 text-frhigh-green mt-0.5 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-white font-medium mb-1",children:"Safe & Automatic"}),i.jsx("p",{className:"text-gray-300 text-sm",children:"Our recovery system automatically detects and fixes common issues without deleting your account, posts, or personal data."})]})]})}),i.jsx("div",{className:"flex justify-center",children:i.jsx(cp,{variant:"button",className:"px-8 py-3 text-lg"})}),i.jsx("div",{className:"text-center text-gray-400 text-sm",children:"Most issues are resolved in under 30 seconds"})]})]})}),i.jsxs(cn,{value:"troubleshooting",className:"space-y-6",children:[i.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:n.map((s,a)=>i.jsxs(ae,{className:"bg-frhigh-dark-secondary border-frhigh-dark-tertiary",children:[i.jsx(Ee,{className:"pb-3",children:i.jsxs(Te,{className:"text-white flex items-center gap-2 text-lg",children:[i.jsx(s.icon,{className:"w-5 h-5 text-frhigh-green"}),s.title]})}),i.jsxs(oe,{children:[i.jsx("p",{className:"text-gray-300 text-sm mb-3",children:s.description}),i.jsx("p",{className:"text-frhigh-green text-sm font-medium",children:s.action})]})]},a))}),i.jsxs(ae,{className:"bg-orange-900/20 border-orange-500/30",children:[i.jsx(Ee,{children:i.jsxs(Te,{className:"text-orange-300 flex items-center gap-2",children:[i.jsx(_u,{className:"w-5 h-5"}),"Still Need Help?"]})}),i.jsxs(oe,{className:"text-orange-200 text-sm space-y-2",children:[i.jsx("p",{children:"If none of the above steps work, you may need to manually clear your browser data:"}),i.jsxs("div",{className:"bg-frhigh-dark-tertiary p-3 rounded text-xs font-mono",children:[i.jsx("p",{className:"text-white font-medium mb-2",children:"Chrome/Edge:"}),i.jsx("p",{children:"Settings  Privacy and security  Clear browsing data"}),i.jsx("p",{className:"text-white font-medium mb-2 mt-3",children:"Safari:"}),i.jsx("p",{children:"Safari Menu  Clear History  All History"}),i.jsx("p",{className:"text-white font-medium mb-2 mt-3",children:"Firefox:"}),i.jsx("p",{children:"Settings  Privacy & Security  Clear Data"})]})]})]})]}),i.jsx(cn,{value:"faq",className:"space-y-4",children:r.map(s=>i.jsxs(ae,{className:"bg-frhigh-dark-secondary border-frhigh-dark-tertiary",children:[i.jsx(Ee,{className:"pb-2",children:i.jsxs(z,{variant:"ghost",className:"w-full justify-between p-0 h-auto text-left hover:bg-transparent",onClick:()=>t(e===s.id?null:s.id),children:[i.jsx(Te,{className:"text-white text-lg font-medium",children:s.question}),i.jsx(a0,{className:`w-5 h-5 text-frhigh-green transition-transform ${e===s.id?"rotate-180":""}`})]})}),e===s.id&&i.jsxs(oe,{className:"pt-0",children:[i.jsx("p",{className:"text-gray-300",children:s.answer}),s.id==="white-screen"||s.id==="wont-load"||s.id==="login-issues"?i.jsx("div",{className:"mt-4 flex justify-start",children:i.jsx(cp,{variant:"button",className:"text-sm px-4 py-2"})}):null]})]},s.id))})]})]}),i.jsx(cp,{variant:"floating"})]})}function s9(e){switch(e){case"post":return i.jsx(Mn,{className:"h-4 w-4"});case"like":return i.jsx(rR,{className:"h-4 w-4 text-red-500"});case"comment":return i.jsx(jm,{className:"h-4 w-4 text-blue-500"});case"follow":return i.jsx(_y,{className:"h-4 w-4 text-green-500"});case"reminder":return i.jsx(_u,{className:"h-4 w-4 text-yellow-500"});case"welcome":case"info":return i.jsx(nR,{className:"h-4 w-4 text-blue-500"});default:return i.jsx(Mn,{className:"h-4 w-4"})}}function i9(e){switch(e){case"urgent":return"destructive";case"high":return"default";case"medium":return"secondary";case"low":return"outline";default:return"secondary"}}function a9(){const e=Xe(),{data:t=[],isLoading:r}=xe({queryKey:["/api/notifications"],refetchInterval:3e4}),{data:n={count:0}}=xe({queryKey:["/api/notifications/unread-count"],refetchInterval:3e4}),s=pe({mutationFn:async o=>{await ne(`/api/notifications/${o}/read`,{method:"PATCH"})},onSuccess:()=>{e.invalidateQueries({queryKey:["/api/notifications"]}),e.invalidateQueries({queryKey:["/api/notifications/unread-count"]})}}),a=async(o,l)=>{l.preventDefault(),l.stopPropagation(),s.mutate(o)};return r?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-950 via-black to-green-900 p-4",children:i.jsx("div",{className:"max-w-2xl mx-auto pt-8",children:i.jsxs(ae,{className:"bg-black/50 border-green-800",children:[i.jsx(Ee,{children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Mn,{className:"h-6 w-6 text-green-500"}),i.jsx(Te,{className:"text-green-500",children:"Notifications"})]})}),i.jsx(oe,{children:i.jsx("div",{className:"flex items-center justify-center p-8",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-500"})})})]})})}):i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-950 via-black to-green-900 p-4",children:i.jsxs("div",{className:"max-w-2xl mx-auto pt-8",children:[i.jsx(ae,{className:"bg-black/50 border-green-800 mb-6",children:i.jsxs(Ee,{children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Mn,{className:"h-6 w-6 text-green-500"}),i.jsx(Te,{className:"text-green-500",children:"Notifications"}),n.count>0&&i.jsxs(Rn,{variant:"destructive",className:"bg-red-600",children:[n.count," unread"]})]}),i.jsx(cr,{href:"/",children:i.jsx(z,{variant:"outline",size:"sm",className:"border-green-800 text-green-500 hover:bg-green-900/20",children:"Back to Home"})})]}),t.length>0&&i.jsx(Is,{className:"text-green-400",children:"Stay updated with the latest from The Shop and community highlights"})]})}),t.length===0?i.jsx(ae,{className:"bg-black/50 border-green-800",children:i.jsxs(oe,{className:"text-center py-12",children:[i.jsx(Mn,{className:"h-12 w-12 text-green-500/50 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-semibold text-green-500 mb-2",children:"No notifications yet"}),i.jsx("p",{className:"text-green-400/70",children:"You'll receive notifications when The Shop posts new content and for 4:20 PM reminders"})]})}):i.jsx("div",{className:"space-y-4",children:t.map(o=>i.jsx(ae,{className:`bg-black/50 border-green-800 transition-all hover:bg-black/70 ${o.isRead?"":"border-green-600 bg-green-950/20"}`,children:i.jsx(oe,{className:"p-4",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"flex-shrink-0 mt-1",children:s9(o.type)}),o.fromUser&&i.jsx("div",{className:"flex-shrink-0",children:o.fromUser.avatar?i.jsx("img",{src:o.fromUser.avatar,alt:o.fromUser.displayName,className:"w-8 h-8 rounded-full object-cover border border-green-800"}):i.jsx("div",{className:"w-8 h-8 rounded-full bg-green-800 flex items-center justify-center",children:i.jsx("span",{className:"text-xs font-medium text-green-200",children:o.fromUser.displayName.charAt(0).toUpperCase()})})}),i.jsx("div",{className:"flex-1 min-w-0",children:i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-semibold text-green-500 text-sm mb-1",children:o.title}),i.jsx("p",{className:"text-green-400 text-sm leading-relaxed",children:o.message}),i.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[i.jsx("time",{className:"text-xs text-green-400/70",children:vg(new Date(o.createdAt),{addSuffix:!0})}),i.jsx(Rn,{variant:i9(o.priority),className:"text-xs",children:o.priority}),o.fromUser&&i.jsxs(Rn,{variant:"outline",className:"text-xs border-green-800 text-green-400",children:["@",o.fromUser.username]})]})]}),i.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[o.postId&&i.jsx(cr,{href:`/posts/${o.postId}`,children:i.jsx(z,{variant:"outline",size:"sm",className:"border-green-800 text-green-500 hover:bg-green-900/20",children:"View Post"})}),o.isRead?i.jsx("div",{className:"p-2",children:i.jsx(G5,{className:"h-4 w-4 text-green-500/50"})}):i.jsx(z,{variant:"ghost",size:"sm",onClick:l=>a(o.id,l),disabled:s.isPending,className:"text-green-500 hover:bg-green-900/20","data-testid":`button-mark-read-${o.id}`,children:i.jsx(Tc,{className:"h-4 w-4"})})]})]})})]})})},o.id))})]})})}function o9(){return i.jsxs(m4,{children:[i.jsx(rt,{path:"/",component:ez}),i.jsx(rt,{path:"/explore",component:Wz}),i.jsx(rt,{path:"/reels",component:KB}),i.jsx(rt,{path:"/strains",component:Qz}),i.jsx(rt,{path:"/products",component:Yz}),i.jsx(rt,{path:"/merch",component:Xz}),i.jsx(rt,{path:"/messages",component:Jz}),i.jsx(rt,{path:"/admin",component:$z}),i.jsx(rt,{path:"/profile/:username",component:Jb}),i.jsx(rt,{path:"/profile",component:Jb}),i.jsx(rt,{path:"/facebook-profile",component:zz}),i.jsx(rt,{path:"/myspace-profile",component:Hz}),i.jsx(rt,{path:"/forgot-password",component:GB}),i.jsx(rt,{path:"/reset-password",component:QB}),i.jsx(rt,{path:"/health-check",component:JB}),i.jsx(rt,{path:"/help",component:n9}),i.jsx(rt,{path:"/notifications",component:a9}),i.jsx(rt,{component:NA})]})}function l9(){const{isVerified:e,showModal:t,handleVerified:r,handleDenied:n}=PF(),{user:s,isLoading:a,login:o}=Fe(),[l,c]=f.useState(!0),[d,u]=f.useState("browser");return f.useEffect(()=>{const h=pl();u(h),console.log(` Running in ${h} environment`),h==="browser"?Zs(async()=>{const{registerServiceWorker:p}=await Promise.resolve().then(()=>e9);return{registerServiceWorker:p}},void 0).then(({registerServiceWorker:p})=>{p().catch(console.error)}):h==="capacitor"&&console.log(" Native mobile app initialized"),Vf.initialize().catch(console.error),h==="capacitor"&&(Vf.requestFilePermissions().then(p=>{console.log(p?" File permissions granted":" File permissions denied")}),Vf.syncUserData().catch(console.error))},[]),f.useEffect(()=>{s&&c(!1)},[s]),e===null||a?i.jsx("div",{className:"min-h-screen bg-frhigh-dark flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-frhigh-green mx-auto mb-4"}),i.jsx("p",{className:"text-white",children:"Loading Frhighday..."})]})}):e?!s&&l?i.jsx(If,{defaultTheme:"dark",storageKey:"frhighday-theme",children:i.jsx(Af,{children:i.jsxs(kf,{client:Cf,children:[i.jsx("div",{className:"min-h-screen bg-frhigh-dark flex items-center justify-center",children:i.jsx(fA,{onLogin:()=>c(!1),onSwitchToRegister:()=>{}})}),i.jsx(Rf,{})]})})}):s&&(!s.username||!s.email)?i.jsx(If,{defaultTheme:"dark",storageKey:"frhighday-theme",children:i.jsx(Af,{children:i.jsxs(kf,{client:Cf,children:[i.jsx("div",{className:"min-h-screen bg-frhigh-dark flex items-center justify-center",children:i.jsx(pA,{onComplete:()=>{}})}),i.jsx(Rf,{})]})})}):i.jsx(If,{defaultTheme:"dark",storageKey:"frhighday-theme",children:i.jsx(Af,{children:i.jsx(CF,{children:i.jsxs(kf,{client:Cf,children:[i.jsxs("div",{className:"min-h-screen bg-frhigh-dark text-white",children:[i.jsx(o9,{}),d==="browser"&&i.jsxs(i.Fragment,{children:[i.jsx(yA,{}),i.jsx(wA,{})]})]}),i.jsx(Rf,{})]})})})}):i.jsxs("div",{className:"min-h-screen bg-frhigh-dark",children:[i.jsx(nA,{isOpen:t,onVerified:r,onDenied:n}),t===!1&&i.jsx(sA,{})]})}function c9(){if(typeof window<"u"&&!window.Capacitor){const e=document.createElement("script");e.src="https://progressier.app/z8gapnpw3tcpcw8m/script.js",e.async=!0,e.defer=!0,document.head.appendChild(e),console.log(" Progressier script loaded for PWA push notifications")}else console.log(" Native mobile app detected - using native notifications")}function Pv(){try{localStorage.removeItem("frhighday_auth_last_failure"),localStorage.removeItem("frhighday_auth_initializing"),console.log("Auto-fix: Cleared authentication blocking flags")}catch{console.warn("Auto-fix: Could not clear localStorage flags")}try{localStorage.setItem("frhighday_white_screen_fix_applied",Date.now().toString())}catch{}}const tw=localStorage.getItem("frhighday_white_screen_fix_applied"),d9=Date.now();(!tw||d9-parseInt(tw)>3e4)&&(console.log("Auto-fix: Applying white screen recovery measures"),Pv());window.addEventListener("error",e=>{console.error("Global JavaScript error:",e.error),console.error("Error details:",{message:e.message,filename:e.filename,lineno:e.lineno,colno:e.colno,timestamp:new Date().toISOString(),userAgent:navigator.userAgent,url:window.location.href}),Pv()});window.addEventListener("unhandledrejection",e=>{var t;console.error("Unhandled promise rejection:",e.reason),console.error("Promise rejection details:",{reason:(t=e.reason)==null?void 0:t.toString(),timestamp:new Date().toISOString(),userAgent:navigator.userAgent,url:window.location.href}),Pv()});const wg=document.getElementById("root");if(!wg)throw document.body.innerHTML=`
    <div style="
      min-height: 100vh; 
      display: flex; 
      align-items: center; 
      justify-content: center; 
      background: #0a0a0a; 
      color: white;
      font-family: system-ui;
    ">
      <div style="text-align: center;">
        <h1>Application Error</h1>
        <p>Root element not found. Please refresh the page.</p>
        <button onclick="window.location.reload()" style="
          background: #22c55e; 
          color: black; 
          border: none; 
          padding: 10px 20px; 
          border-radius: 5px; 
          cursor: pointer;
          margin-top: 10px;
        ">Refresh</button>
      </div>
    </div>
  `,new Error("Root element not found");try{c9(),kN(wg).render(i.jsx(l9,{})),console.log("App rendered successfully")}catch(e){console.error("Failed to render app:",e),wg.innerHTML=`
    <div style="
      min-height: 100vh; 
      display: flex; 
      align-items: center; 
      justify-content: center; 
      background: #0a0a0a; 
      color: white;
      font-family: system-ui;
    ">
      <div style="text-align: center; max-width: 400px; padding: 20px;">
        <h1 style="color: #ef4444; margin-bottom: 20px;">Critical Error</h1>
        <p style="margin-bottom: 20px;">The application failed to start properly.</p>
        <p style="font-size: 14px; color: #888; margin-bottom: 20px;">Error: ${(e==null?void 0:e.toString())||"Unknown error"}</p>
        <button onclick="window.location.reload()" style="
          background: #22c55e; 
          color: black; 
          border: none; 
          padding: 10px 20px; 
          border-radius: 5px; 
          cursor: pointer;
          margin-right: 10px;
        ">Refresh Page</button>
        <button onclick="localStorage.clear(); sessionStorage.clear(); window.location.reload();" style="
          background: #ef4444; 
          color: white; 
          border: none; 
          padding: 10px 20px; 
          border-radius: 5px; 
          cursor: pointer;
        ">Clear Cache & Refresh</button>
      </div>
    </div>
  `}export{Zs as _};
